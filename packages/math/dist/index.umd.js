(function(yn,Xi){typeof exports=="object"&&typeof module<"u"?Xi(exports):typeof define=="function"&&define.amd?define(["exports"],Xi):(yn=typeof globalThis<"u"?globalThis:yn||self,Xi((yn.dxMyth=yn.dxMyth||{},yn.dxMyth.math={})))})(this,function(yn){"use strict";function Xi(i,e,n){return i[0]=e,i[1]=n,i}function op(i,e,n,s,r){let a=e,o=n,h=Math.sqrt(a*a+o*o);if(h===0||!Number.isFinite(h))return!1;let c=s/h;return e*=c,n*=c,i[0]=e,i[1]=n,!0}function C_(i,e){return i[0]=e,i[1]=e,i}function Su(i,e,n){return i[0]=e[0]+n[0],i[1]=e[1]+n[1],i}function Ga(i,e,n){return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i}function Nr(i,e,n){return i[0]=e[0]*n[0],i[1]=e[1]*n[1],i}function Tu(i,e,n){return i[0]=e[0]*n,i[1]=e[1]*n,i}function Ua(i,e,n){return i[0]=e[0]/n[0],i[1]=e[1]/n[1],i}function Bh(i,e){return i[0]*e[0]+i[1]*e[1]}function Eu(i,e){return i[0]*e[1]-i[1]*e[0]}function hp(i,e){return Math.sqrt((i[0]-e[0])*(i[0]-e[0])+(i[1]-e[1])*(i[1]-e[1]))}function cp(i,e){return(i[0]-e[0])*(i[0]-e[0])+(i[1]-e[1])*(i[1]-e[1])}function lp(i){return i[0]*i[0]+i[1]*i[1]}function Wa(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function up(i,e){return Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1])}function fp(i,e){return Math.max(Math.abs(i[0]-e[0]),Math.abs(i[1]-e[1]))}function Dh(i,e){const n=Wa(e);return i[0]=e[0]/n,i[1]=e[1]/n,i}function zu(i,e,n,s){return i[0]=e[0]+(n[0]-e[0])*s,i[1]=e[1]+(n[1]-e[1])*s,i}function dp(i,e,n,s){s=s<0?0:s>1?1:s;const r=s*s*(3-2*s);return zu(i,e,n,r)}function pp(i){return Math.atan2(i[1],i[0])}function yp(i,e){return Math.acos(Bh(i,e)/(Wa(i)*Wa(e)))}function A_(i,e=[0,0]){return Math.atan2(i[1]-e[1],i[0]-e[0])}function xp(i,e){return Math.atan2(Eu(e,i),Bh(i,e))}function Cu(i,e){return i[0]=-e[1],i[1]=e[0],i}function gp(i,e,n){const s=2*(e[0]*n[0]+e[1]*n[1]);return i[0]=e[0]-s*n[0],i[1]=e[1]-s*n[1],i}function P_(i,e,n,s,r){const a=Dh(N.default(),n),o=Dh(N.default(),e),h=s/r,c=-o.dot(a),l=Math.sqrt(1-c*c),u=h*l;if(u>1)return null;const f=Math.sqrt(1-u*u);return o.multiplyScalar(h).add(a.multiplyScalar(h*c-f)),i[0]=o[0],i[1]=o[1],i}function mp(i,e){return i[0]=-e[0],i[1]=-e[1],i}function vp(i,e){return i[0]=Math.abs(e[0]),i[1]=Math.abs(e[1]),i}function wp(i,e){return i[0]=Math.round(e[0]),i[1]=Math.round(e[1]),i}function Mp(i,e){return i[0]=Math.floor(e[0]),i[1]=Math.floor(e[1]),i}function bp(i,e){return i[0]=Math.ceil(e[0]),i[1]=Math.ceil(e[1]),i}function _p(i,e,n){return i[0]=Math.min(e[0],n[0]),i[1]=Math.min(e[1],n[1]),i}function Sp(i,e,n){return i[0]=Math.max(e[0],n[0]),i[1]=Math.max(e[1],n[1]),i}function Tp(i,e,n,s){return i[0]=Math.max(n[0],Math.min(s[0],e[0])),i[1]=Math.max(n[1],Math.min(s[1],e[1])),i}function Ep(i,e){return i[0]=e[0]-Math.floor(e[0]),i[1]=e[1]-Math.floor(e[1]),i}function zp(i,e,n){return i[0]=e[0]-n[0]*Math.floor(e[0]/n[0]),i[1]=e[1]-n[1]*Math.floor(e[1]/n[1]),i}function I_(i,e,n){return i[0]=e[0]-n[0]*Math.ceil(e[0]/n[0]),i[1]=e[1]-n[1]*Math.ceil(e[1]/n[1]),i}function Cp(i,e,n){const s=Math.cos(n),r=Math.sin(n),a=e[0],o=e[1];return i[0]=a*s-o*r,i[1]=a*r+o*s,i}function Ap(i,e,n,s){const r=Math.cos(s),a=Math.sin(s),o=e[0]-n[0],h=e[1]-n[1];return i[0]=o*r-h*a+n[0],i[1]=o*a+h*r+n[1],i}function Pp(i,e,n,s){return i[0]=e[0]*n,i[1]=e[1]*s,i}function Ip(i,e,n,s){return i[0]=(e[0]-n[0])*s[0]+n[0],i[1]=(e[1]-n[1])*s[1]+n[1],i}function Rp(i,e,n,s){return i[0]=e[0]+n,i[1]=e[1]+s,i}function Op(i,e,n){return i[0]=e[0]*n[0]+e[1]*n[2]+n[4],i[1]=e[0]*n[1]+e[1]*n[3]+n[5],i}function kp(i,e,n){return i[0]=e[0]*n[0]+e[1]*n[4]+n[8],i[1]=e[0]*n[1]+e[1]*n[5]+n[9],i}function R_(i,e){return i[0]===e[0]&&i[1]===e[1]}function O_(i){return i[0]===0&&i[1]===0}function k_(i,e,n=1e-6){return Math.abs(i[0]-e[0])<n&&Math.abs(i[1]-e[1])<n}let N=class extends Float32Array{static BYTE_LENGTH=2*Float32Array.BYTES_PER_ELEMENT;static create(e,n){return new this(e,n)}static from(e){return this.create(e[0],e[1])}static fromPoint(e){return this.create(e.x,e.y)}static fromRotation(e){const n=Math.cos(e),s=Math.sin(e);return this.create(n,s)}static default(){return this.create(0,0)}static zero(){return this.create(0,0)}static splat(e){return this.create(e,e)}static makeZeroArray(e){return Array.from({length:e},()=>this.zero())}static set=Xi;static setXY=Xi;static add=Su;static sub=Ga;static mul=Nr;static mulScalar=Tu;static multiply=Nr;static div=Ua;static divide=Ua;static dot=Bh;static cross=Eu;static distance=hp;static distanceSquared=cp;static lengthSquared=lp;static length=Wa;static manhattanDistance=up;static chebyshevDistance=fp;static normalize=Dh;static lerp=zu;static smoonthStep=dp;static angle=pp;static angleTo=yp;static angleBetweenPI2=xp;static perpendicular=Cu;static perp=Cu;static reflect=gp;static negate=mp;static abs=vp;static round=wp;static floor=Mp;static ceil=bp;static min=_p;static max=Sp;static clamp=Tp;static fractal=Ep;static floorMod=zp;static rotate=Cp;static rotateAround=Ap;static scale=Pp;static scaleAround=Ip;static translate=Rp;static transformMat2d=Op;static transformMat3d=kp;static equals=R_;static isZero=O_;static equalsEpsilon=k_;constructor(...e){e.length===0?super(2):Array.isArray(e[0])?super(e[0]):super(e)}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}copy(e){return this[0]=e[0],this[1]=e[1],this}clone(){return this.constructor.create(this[0],this[1])}set(e,n){return Array.isArray(e)?(super.set(e,n),this):Xi(this,e,n)}setXY(e,n){return Xi(this,e,n)}setLength(e){return op(this,this.x,this.y,e),this}setLengthFromPoint(e,n,s){return op(this,e,n,s),this}setRotation(e){return this.setXY(Math.cos(e),Math.sin(e))}splat(e){return C_(this,e)}add(e){return Su(this,this,e)}addVectors(e,n){return Su(this,e,n)}subtract(e){return Ga(this,this,e)}sub(e){return Ga(this,this,e)}subVectors(e,n){return Ga(this,e,n)}subtractVectors(e,n){return Ga(this,e,n)}mul(e){return Nr(this,this,e)}multiply(e){return Nr(this,this,e)}multiplyVectors(e,n){return Nr(this,e,n)}mulVectors(e,n){return Nr(this,e,n)}mulScalar(e){return Tu(this,this,e)}multiplyScalar(e){return Tu(this,this,e)}div(e){return Ua(this,this,e)}divide(e){return Ua(this,this,e)}divideVectors(e,n){return Ua(this,e,n)}dot(e){return Bh(this,e)}cross(e){return Eu(this,e)}distance(e){return hp(this,e)}distanceSquared(e){return cp(this,e)}magnitudeSquared(){return lp(this)}magnitude(){return Wa(this)}manhattanDistance(e){return up(this,e)}chebyshevDistance(e){return fp(this,e)}normalize(){return Dh(this,this)}lerp(e,n){return zu(this,this,e,n)}smoonthStep(e,n){return dp(this,this,e,n)}angle(){return pp(this)}angleTo(e){return yp(this,e)}angleToOrigin(e){return A_(this,e)}angleBetween(e,n){return xp(e,n)}perp(){return Cu(this,this)}ccw(){return this.setXY(this.y,-this.x)}cw(){return this.setXY(-this.y,this.x)}reflect(e){return gp(this,this,e)}refract(e,n,s,r){return P_(this,e,n,s,r)}negate(){return mp(this,this)}abs(){return vp(this,this)}round(){return wp(this,this)}floor(){return Mp(this,this)}ceil(){return bp(this,this)}min(e){return _p(this,this,e)}max(e){return Sp(this,this,e)}clamp(e,n){return Tp(this,this,e,n)}fractal(){return Ep(this,this)}modDown(e){return zp(this,this,e)}modUp(e){return I_(this,this,e)}rotate(e){return Cp(this,this,e)}rotateAround(e,n){return Ap(this,this,e,n)}scale(e,n){return Pp(this,this,e,n)}scaleAround(e,n){return Ip(this,this,e,n)}translate(e,n){return Rp(this,this,e,n)}transformMat2d(e){return Op(this,this,e)}applyMatrix2D(e){return this.transformMat2d(e)}applyMatrix3D(e){return this.transformMat3d(e)}transformMat3d(e){return kp(this,this,e)}isFinite(){return isFinite(this.x)&&isFinite(this.y)}isZero(){return this.x===0&&this.y===0}equals(e){return this[0]===e[0]&&this[1]===e[1]}equalsEpsilon(e,n=1e-6){return Math.abs(this[0]-e[0])<n&&Math.abs(this[1]-e[1])<n}canNormalize(){return this.isFinite()&&(this.x!==0||this.y!==0)}toZero(e){let n=this;return n[0]+e[0]==n[0]?e[0]=0:n[0]+e[0]==e[0]&&(n[0]=0),n[1]+e[1]==n[1]?e[1]=0:n[1]+e[1]==e[1]&&(n[1]=0),this}toArray(){return[this[0],this[1]]}};const L_=Math.PI*2;function Au(i,e,n,s,r,a,o){return i[0]=e,i[1]=n,i[2]=s,i[3]=r,i[4]=a,i[5]=o,i}function Pu(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,i}function Lp(i,e,n){const s=e[0],r=e[2],a=e[4],o=e[1],h=e[3],c=e[5];return i[0]=s,i[1]=o,i[2]=r,i[3]=h,i[4]=a+s*n[0]+r*n[1],i[5]=c+o*n[0]+h*n[1],i}function Fp(i,e,n){const s=e[0],r=e[2],a=e[4],o=e[1],h=e[3],c=e[5],l=Math.cos(n),u=Math.sin(n);return i[0]=s*l+r*u,i[1]=o*l+h*u,i[2]=s*-u+r*l,i[3]=o*u+h*l,i[4]=a,i[5]=c,i}function Np(i,e,n){const s=e[0],r=e[2],a=e[4],o=e[1],h=e[3],c=e[5],l=n[0],u=n[1];return i[0]=s*l,i[1]=o*l,i[2]=r*u,i[3]=h*u,i[4]=a,i[5]=c,i}function Bp(i,e){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=e[0],i[5]=e[1],i}function Dp(i,e){const n=Math.cos(e),s=Math.sin(e);return i[0]=n,i[1]=s,i[2]=-s,i[3]=n,i[4]=0,i[5]=0,i}function qp(i,e){const n=e[0],s=e[1];return i[0]=n,i[1]=0,i[2]=0,i[3]=s,i[4]=0,i[5]=0,i}function F_(i,e){const n=Math.tan(e[0]),s=Math.tan(e[1]);return i[0]=1,i[1]=s,i[2]=n,i[3]=1,i[4]=0,i[5]=0,i}function $p(i,e,n,s){const r=Math.cos(n),a=Math.sin(n);return i[0]=r*s[0],i[1]=a*s[0],i[2]=-a*s[1],i[3]=r*s[1],i[4]=e[0],i[5]=e[1],i}function N_(i,e,n,s,r){const a=Math.cos(n),o=Math.sin(n),h=e[0]+r[0],c=e[1]+r[1];return i[0]=a*s[0],i[1]=o*s[0],i[2]=-o*s[1],i[3]=a*s[1],i[4]=h-(r[0]*i[0]+r[1]*i[2]),i[5]=c-(r[0]*i[1]+r[1]*i[3]),i}function B_(i,e,n,s,r,a){const o=Math.cos(s),h=Math.sin(s),c=Math.tan(n[0]),l=Math.tan(n[1]),u=e[0]+a[0],f=e[1]+a[1];return i[0]=(o+c*h)*r[0],i[1]=(l*h+o)*r[0],i[2]=(-h+c*o)*r[1],i[3]=(l*-h+o)*r[1],i[4]=u-(a[0]*i[0]+a[1]*i[2]),i[5]=f-(a[0]*i[1]+a[1]*i[3]),i}function D_(i,e,n,s,r,a){const o=Math.cos(n),h=Math.sin(n),c=e[0]+r[0],l=e[1]+r[1],u=a[0]+r[0],f=a[1]+r[1];return i[0]=o*s[0],i[1]=h*s[0],i[2]=-h*s[1],i[3]=o*s[1],i[4]=c-(u*i[0]+f*i[2]),i[5]=l-(u*i[1]+f*i[3]),i}function q_(i,e,n,s,r,a,o){const h=Math.cos(s),c=Math.sin(s),l=Math.tan(n[0]),u=Math.tan(n[1]),f=e[0]+a[0],d=e[1]+a[1],p=o[0]+a[0],y=o[1]+a[1];return i[0]=(h+l*c)*r[0],i[1]=(u*h+c)*r[0],i[2]=(-c+l*h)*r[1],i[3]=(u*-c+h)*r[1],i[4]=f-(p*i[0]+y*i[2]),i[5]=d-(p*i[1]+y*i[3]),i}function $_(i,e,n,s,r,a,o){const h=Math.cos(s+n[1]),c=Math.sin(s+n[1]),l=-Math.sin(s-n[0]),u=Math.cos(s-n[0]),f=a[0],d=a[1],p=e[0],y=e[1],x=o[0]+f,g=o[1]+d;return i[0]=h*r[0],i[1]=c*r[0],i[2]=l*r[1],i[3]=u*r[1],i[4]=p-(x*i[0]+g*i[2])+f,i[5]=y-(x*i[1]+g*i[3])+d,i}function Vp(i,e){return i[0]=e[4],i[1]=e[5],i}function qh(i){return Math.atan2(i[1],i[0])}function Gp(i,e){return i[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),i}function Up(i,e){const n=Math.cos(qh(e)),s=Math.sin(qh(e));return i[0]=e[4]+n*e[2]*-e[4]-s*e[3]*-e[5],i[1]=e[5]+s*e[2]*-e[4]+n*e[3]*-e[5],i}function V_(i,e){let s=i[0],r=i[1],a=i[2],o=i[3],h=i[4],c=i[5],l=e.origin.x,u=e.origin.y,f=e.pivot.x,d=e.pivot.y,p=Math.hypot(s,r),y=Math.hypot(a,o);p<1e-6&&(p=0),y<1e-6&&(y=0),s*o-r*a<0&&(p>y?(y*=-1,a*=-1,o*=-1):(p*=-1,s*=-1,r*=-1));let g=Math.atan2(r,s),m=0,v=0;if(p>1e-6&&y>1e-6){const A=s/p,M=r/p,_=a/y,T=o/y;m=Math.atan(A*_+M*T),v=Math.atan(A*M+_*T)}const w=s*(f+l)+a*(d+u),b=r*(f+l)+o*(d+u),S=h+w-l,E=c+b-u;e.position.setXY(S,E),e.skew.set(m,v),e.scale.set(p,y),e.rotation=g}function G_(i){const e=i[0],n=i[1],s=i[2],r=i[3],a=i[4],o=i[5],h=a,c=o;let l=Math.sqrt(e*e+n*n),u=Math.sqrt(s*s+r*r),f=Math.atan2(n,e);return e*r-n*s<0&&(l>u?u=-u:l=-l),{position:{x:h,y:c},rotation:f,scale:{x:l,y:u}}}function $h(i,e,n){const s=e[0],r=e[1],a=e[2],o=e[3],h=e[4],c=e[5],l=n[0],u=n[1],f=n[2],d=n[3],p=n[4],y=n[5];return i[0]=s*l+a*u,i[1]=r*l+o*u,i[2]=s*f+a*d,i[3]=r*f+o*d,i[4]=s*p+a*y+h,i[5]=r*p+o*y+c,i}function Wp(i,e){const n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=n*a-s*r;if(!c)return null;const l=1/c;return i[0]=a*l,i[1]=-s*l,i[2]=-r*l,i[3]=n*l,i[4]=(r*h-a*o)*l,i[5]=(s*o-n*h)*l,i}function Iu(i,e,n){const s=n[0],r=n[1];return i[0]=e[0]*s+e[2]*r+e[4],i[1]=e[1]*s+e[3]*r+e[5],i}function Yp(i,e,n){for(let s=0;s<n.length;s+=2)Iu(i[s],e,n[s]);return i}function jp(i){return i[0]===1&&i[1]===0&&i[2]===0&&i[3]===1&&i[4]===0&&i[5]===0}function U_(i){return i[4]!==0||i[5]!==0}function Hp(i){return i[0]!==1||i[1]!==0||i[2]!==0||i[3]!==1}function Xp(i){return i[0]!==1||i[3]!==1}class Te extends Float32Array{static IENTITY_MATRIX=new Te;static default(){return new this}static fromColumns(e,n,s,r,a,o){return Au(new this,e,n,s,r,a,o)}static fromRows(e,n,s,r,a,o){return Au(new this,e,r,n,a,s,o)}static fromMatrix2D(e){const n=this.default();return n.set(e),n}static fromSinCos(e,n){return this.fromRows(n,e,-e,n,0,0)}static fromScale(e,n){return this.fromRows(e,0,0,n,0,0)}static fromTranslate(e,n){return this.fromRows(1,0,e,1,n,0)}static fromRotation(e){return this.fromSinCos(Math.sin(e),Math.cos(e))}static fromAngle(e){return this.fromRotation(e*Math.PI/180)}static identity=Pu;static multiply=$h;static invert=Wp;static translate=Lp;static scale=Np;static rotation=Fp;static makeTranslation=Bp;static makeRotation=Dp;static makeScale=qp;static makeTranslationRotationScale=$p;static makeTranslationRotationScaleOrigin=N_;static makeTranslationSkewRotationScaleOrigin=B_;static makeTranslationRotationScaleOriginPivot=D_;static makeTranslationSkewRotationScaleOriginPivot=q_;static extractTranslation=Vp;static extractRotation=qh;static extractScale=Gp;static extractOrigin=Up;static decomposeTKRSPO=V_;static decompose=G_;static mapPoint=Iu;static mapPoints=Yp;static hasTranslation=U_;static hasRotation=Hp;static hasScale=Xp;static hasIdentity=jp;constructor(){super(6),Pu(this)}get a(){return this[0]}set a(e){this[0]=e}get b(){return this[1]}set b(e){this[1]=e}get c(){return this[2]}set c(e){this[2]=e}get d(){return this[3]}set d(e){this[3]=e}get e(){return this[4]}set e(e){this[4]=e}get f(){return this[5]}set f(e){this[5]=e}get tx(){return this[4]}set tx(e){this[4]=e}get ty(){return this[5]}set ty(e){this[5]=e}copy(e){return Au(this,e[0],e[1],e[2],e[3],e[4],e[5]),this}clone(){return this.constructor.default().copy(this)}identity(){return Pu(this)}multiplyMatrices(e,n){return $h(this,e,n)}premultiply(e){return $h(this,e,this)}multiply(e){return $h(this,this,e)}invert(){return Wp(this,this)}translate(e){return Lp(this,this,e)}rotate(e){return Fp(this,this,e)}scale(e){return Np(this,this,e)}makeTranslation(e){return Bp(this,e)}makeRotation(e){return Dp(this,e)}makeScale(e){return qp(this,e)}makeSkew(e){return F_(this,e)}makeTRS(e,n,s){return $p(this,e,n,s)}makeTKRSOP(e,n,s,r,a,o){return $_(this,e,n,s,r,a,o)}extractTranslation(e){return Vp(e,this)}extractRotation(){return qh(this)}extractScale(e){return Gp(e,this)}extractOrigin(e){return Up(e,this)}preScale(e,n){return this.multiplyMatrices(this,Te.fromScale(e,n))}postScale(e,n){return this.multiplyMatrices(Te.fromScale(e,n),this)}preRotate(e){return this.multiplyMatrices(this,Te.fromRotation(e))}preRotateDegrees(e){return this.preRotate(e*Math.PI/180)}postRotate(e){return this.multiplyMatrices(Te.fromRotation(e),this)}postRotateDegrees(e){return this.postRotate(e*Math.PI/180)}preTranslate(e,n){return this.multiplyMatrices(this,Te.fromTranslate(e,n))}postTranslate(e,n){return this.multiplyMatrices(Te.fromTranslate(e,n),this)}mapPoint(e,n=e){return Iu(n,this,e)}mapPoints(e,n=e){return Yp(n,this,e)}hasIdentity(){return jp(this)}hasRotation(){return Hp(this)}hasScale(){return Xp(this)}decompose(e){const n=this.a,s=this.b,r=this.c,a=this.d,o=e.pivot,h=-Math.atan2(-r,a),c=Math.atan2(s,n),l=Math.abs(h+c);l<1e-5||Math.abs(L_-l)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=c),e.scale.x=Math.sqrt(n*n+s*s),e.scale.y=Math.sqrt(r*r+a*a);const u=o.x+e.origin.x,f=o.y+e.origin.y;return e.position.x=this.tx+(u*n+f*r)-e.origin.x,e.position.y=this.ty+(u*s+f*a)-e.origin.y,e}toMatrix3x3(e=!0){return e?new Float32Array([this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1]):new Float32Array([this.a,this.c,this.tx,this.b,this.d,this.ty,0,0,1])}}function Ru(i){return i[0]=1,i[3]=0,i[6]=0,i[1]=0,i[4]=1,i[7]=0,i[2]=0,i[5]=0,i[8]=1,i}function Vh(i,e,n){const s=e[0],r=e[3],a=e[6],o=e[1],h=e[4],c=e[7],l=e[2],u=e[5],f=e[8],d=n[0],p=n[3],y=n[6],x=n[1],g=n[4],m=n[7],v=n[2],w=n[5],b=n[8];return i[0]=s*d+r*x+a*v,i[1]=o*d+h*x+c*v,i[2]=l*y+u*x+f*v,i[3]=s*p+r*g+a*w,i[4]=o*p+h*g+c*w,i[5]=l*p+u*g+f*w,i[6]=s*y+r*m+a*b,i[7]=o*y+h*m+c*b,i[8]=l*y+u*m+f*b,i}function W_(i,e,n){const s=e[0],r=e[3],a=e[6],o=e[1],h=e[4],c=e[7],l=e[2],u=e[5],f=e[8];return i[0]=s,i[1]=o,i[2]=l,i[3]=r,i[4]=h,i[5]=u,i[6]=s*n[0]+r*n[1]+a,i[7]=o*n[0]+h*n[1]+c,i[8]=f,i}function Y_(i,e,n){const s=Math.sin(n),r=Math.cos(n),a=e[0],o=e[3],h=e[6],c=e[1],l=e[4],u=e[7],f=e[2],d=e[5],p=e[8];return i[0]=a*r+o*s,i[1]=c*r+l*s,i[2]=f*r+d*s,i[3]=a*-s+o*r,i[4]=c*-s+l*r,i[5]=f*-s+d*r,i[6]=h,i[7]=u,i[8]=p,i}function j_(i,e,n){const s=n[0],r=n[1],a=e[0],o=e[3],h=e[6],c=e[1],l=e[4],u=e[7],f=e[2],d=e[5],p=e[8];return i[0]=a*s,i[1]=c*s,i[2]=f*s,i[3]=o*r,i[4]=l*r,i[5]=d*r,i[6]=h,i[7]=u,i[8]=p,i}function Zp(i,e){return i[0]=1,i[3]=0,i[6]=e[0],i[1]=0,i[4]=1,i[7]=e[1],i[2]=0,i[5]=0,i[8]=1,i}function Jp(i,e){const n=Math.sin(e),s=Math.cos(e);return i[0]=s,i[3]=-n,i[6]=0,i[1]=n,i[4]=s,i[7]=0,i[2]=0,i[5]=0,i[8]=1,i}function Qp(i,e){return i[0]=e[0],i[3]=0,i[6]=0,i[1]=0,i[4]=e[1],i[7]=0,i[2]=0,i[5]=0,i[8]=1,i}function Kp(i,e){return i[0]=1,i[3]=Math.tan(e[0]),i[6]=0,i[1]=Math.tan(e[1]),i[4]=1,i[7]=0,i[2]=0,i[5]=0,i[8]=1,i}function H_(i,e,n){return i[0]=2/e,i[3]=0,i[6]=-1,i[1]=0,i[4]=-2/n,i[7]=1,i[2]=0,i[5]=0,i[8]=1,i}function ty(i,e,n,s){const r=Math.sin(n),a=Math.cos(n);return i[0]=s[0]*a,i[3]=s[1]*-r,i[6]=e[0],i[1]=s[0]*r,i[4]=s[1]*a,i[7]=e[1],i[2]=0,i[5]=0,i[8]=1,i}function X_(i,e,n,s,r){const a=Math.cos(n),o=Math.sin(n),h=s[0],c=s[1],l=e[0]+r[0],u=e[1]+r[1];return i[0]=a*h,i[1]=o*h,i[2]=0,i[3]=-o*c,i[4]=a*c,i[5]=0,i[6]=l-(r[0]*i[0]+r[1]*i[3]),i[7]=u-(r[0]*i[1]+r[1]*i[4]),i[8]=1,i}function Z_(i,e,n,s,r,a){const o=Math.cos(n),h=Math.sin(n),c=s[0],l=s[1],u=e[0]+r[0],f=e[1]+r[1],d=a[0]+r[0],p=a[1]+r[1];return i[0]=o*c,i[1]=h*c,i[2]=0,i[3]=-h*l,i[4]=o*l,i[5]=0,i[6]=u-(d*i[0]+p*i[3]),i[7]=f-(d*i[1]+p*i[4]),i[8]=1,i}function J_(i,e,n,s,r,a,o){const h=Math.cos(s),c=Math.sin(s),l=r[0],u=r[1],f=Math.tan(n[0]),d=Math.tan(n[1]),p=e[0]+a[0],y=e[1]+a[1],x=o[0]+a[0],g=o[1]+a[1];return i[0]=(h+f*c)*l,i[1]=(d*c+h)*l,i[2]=0,i[3]=(-c+f*h)*u,i[4]=(d*-c+h)*u,i[5]=0,i[6]=p-(x*i[0]+g*i[3]),i[7]=y-(x*i[1]+g*i[4]),i[8]=1,i}function Q_(i,e){return i[0]=e[6],i[1]=e[7],i}function K_(i){return Math.atan2(i[3],i[0])}function t3(i,e){return i[0]=Math.sqrt(e[0]*e[0]+e[3]*e[3]),i[1]=Math.sqrt(e[1]*e[1]+e[4]*e[4]),i}function e3(i,e){const n=e[0],s=e[3],r=e[6],a=e[1],o=e[4],h=e[7],c=e[2],l=e[5],u=e[8];let f=n,d=s,p=r,y=a,x=o,g=h,m=c,v=l,w=u,b=0,S=0;return Math.abs(f)>=Math.abs(y)&&Math.abs(f)>=Math.abs(m)?(S=1/f,f*=S,d*=S,p*=S,y*=S,x*=S,g*=S,m*=S,v*=S,w*=S,b=f,f=1,y-=d,x-=d,g-=d,m-=p,v-=p,w-=p):Math.abs(y)>=Math.abs(f)&&Math.abs(y)>=Math.abs(m)?(S=1/y,f*=S,d*=S,p*=S,y*=S,x*=S,g*=S,m*=S,v*=S,w*=S,b=-y,y=0,d-=x,p-=g,v-=g,w-=g):(S=1/m,f*=S,d*=S,p*=S,y*=S,x*=S,g*=S,m*=S,v*=S,w*=S,b=m,m=0,p-=v,d-=v,g-=v,x-=v),i[0]=f,i[3]=d,i[6]=p,i[1]=y,i[4]=x,i[7]=g,i[2]=m,i[5]=v,i[8]=w,b}function ey(i,e){const n=e[0],s=e[3],r=e[6],a=e[1],o=e[4],h=e[7],c=e[2],l=e[5],u=e[8];return i[0]=o*u-h*l,i[3]=-a*u+h*c,i[6]=a*l-o*c,i[1]=-s*u+r*l,i[4]=n*u-r*c,i[7]=-n*l+s*c,i[2]=s*h-r*o,i[5]=-n*h+r*a,i[8]=n*o-s*a,i}function ny(i){const e=i[0],n=i[3],s=i[6],r=i[1],a=i[4],o=i[7],h=i[2],c=i[5],l=i[8];return e*(a*l-c*o)-n*(r*l-o*h)+s*(r*c-a*h)}function iy(i,e){const n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8],f=u*o-h*l,d=-u*a+h*c,p=l*a-o*c;let y=n*f+s*d+r*p;return y?(y=1/y,i[0]=f*y,i[1]=(-u*s+r*l)*y,i[2]=(h*s-r*o)*y,i[3]=d*y,i[4]=(u*n-r*c)*y,i[5]=(-h*n+r*a)*y,i[6]=p*y,i[7]=(-l*n+s*c)*y,i[8]=(o*n-s*a)*y,i):null}function sy(i,e){const n=e[0],s=e[3],r=e[6],a=e[1],o=e[4],h=e[7],c=e[2],l=e[5],u=e[8];i[0]=n,i[1]=a,i[2]=c,i[3]=s,i[4]=o,i[5]=l,i[6]=r,i[7]=h,i[8]=u}function n3(i){return i[6]!==0||i[7]!==0||i[8]!==1}function i3(i){return i[0]!==1||i[3]!==0||i[6]!==0||i[1]!==0||i[4]!==1||i[7]!==0||i[2]!==0||i[5]!==0||i[8]!==1}function s3(i){return i[0]!==1||i[3]!==0||i[6]!==0||i[1]!==0||i[4]!==1||i[7]!==0||i[2]!==0||i[5]!==0||i[8]!==1}function r3(i){return i[0]!==1||i[3]!==0||i[6]!==0||i[1]!==0||i[4]!==1||i[7]!==0||i[2]!==0||i[5]!==0||i[8]!==1}function a3(i,e,n,s,r,a,o,h,c,l){return i[0]=e,i[3]=n,i[6]=s,i[1]=r,i[4]=a,i[7]=o,i[2]=h,i[5]=c,i[8]=l,i}function Ou(i,e,n){let s=n[0],r=n[1];return i[0]=e[0]*s+e[3]*r+e[6],i[1]=e[1]*s+e[4]*r+e[7],i}function ry(i,e,n){for(let s=0;s<n.length;s+=2)Ou(i[s],e,n[s]);return i}function ay(i,e,n){let s=2/e,r=-2/n;return i[0]=s,i[3]=0,i[6]=-1,i[1]=0,i[4]=r,i[7]=1,i[2]=0,i[5]=0,i[8]=1,i}let o3=class extends Float32Array{static default(){return new this}static identity=Ru;static multiply=Vh;static invert=iy;static makeProjection=H_;static makeTranslation=Zp;static makeRotation=Jp;static makeScale=Qp;static makeTranslationRotationScale=ty;static makeTranslationRotationScaleOrigin=X_;static makeTranslationRotationScaleOriginPivot=Z_;static makeTranslationSkewRotationScaleOriginPivot=J_;static extractTranslation=Q_;static extractRotation=K_;static extractScale=t3;static decompose=e3;static adjugate=ey;static determinant=ny;static transpose=sy;static fromValues=a3;static makeSkew=Kp;static mapPoint=Ou;static mapPoints=ry;static projection=ay;constructor(){super(9),Ru(this)}identity(){return Ru(this)}multiplyMatrices(e,n){return Vh(this,e,n)}premultiply(e){return Vh(this,e,this)}multiply(e){return Vh(this,this,e)}translate(e){return W_(this,this,e)}rotate(e){return Y_(this,this,e)}scale(e){return j_(this,this,e)}makeTranslation(e){return Zp(this,e)}makeRotation(e){return Jp(this,e)}makeScale(e){return Qp(this,e)}makeSkew(e){return Kp(this,e)}makeTRS(e,n,s){return ty(this,e,n,s)}adjugate(){return ey(this,this)}determinant(){return ny(this)}invert(){return iy(this,this)}transpose(){return sy(this,this)}hasTranslation(){return n3(this)}hasRotation(){return i3(this)}hasScale(){return s3(this)}hasIdentity(){return r3(this)}mapPoint(e,n=e){return Ou(n,this,e)}mapPoints(e,n=e){return ry(n,this,e)}projection(e,n){return ay(this,e,n)}},Br=class extends Float32Array{static create(e,n){return new this(e,n)}constructor(e,n){super(2),this[0]=e,this[1]=n}get x(){return this[0]}get y(){return this[1]}set x(e){this[0]!==e&&(this[0]=e,this._change(this))}set y(e){this[1]!==e&&(this[1]=e,this._change(this))}_change(e){}onChange(e){this._change=e}copy(e){this.setXY(e[0],e[1])}setXY(e,n){(this[0]!==e||this[1]!==n)&&(this[0]=e,this[1]=n,this._change(this))}set(e,n){this.setXY(e,n)}};class h3{position=Br.create(0,0);_rotation=0;_cx=1;_sx=0;_cy=0;_sy=1;skew=Br.create(0,0);scale=Br.create(1,1);origin=Br.create(0,0);pivot=Br.create(0,0);_matrix=Te.default();_matrixWorld=Te.default();localMatrixDirty=!1;worldMatrixId=0;parentWorldMatrixId=0;parent=null;children=null;constructor(e){this.position.onChange(this.onUpdateTransformable),this.scale.onChange(this.onUpdateTransformable),this.origin.onChange(this.onUpdateTransformable),this.pivot.onChange(this.onUpdateTransformable),this.skew.onChange(this.onUpdateTransformable),this.setTransformWithOptions(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.onUpdateTransformable(this.skew))}get angle(){return this._rotation/Math.PI*180}set angle(e){this.rotation=e/180*Math.PI}get hasWorldMatrixDirty(){return this.parent?this.parentWorldMatrixId===-1||this.parentWorldMatrixId!==this.parent.worldMatrixId||this.parent.hasWorldMatrixDirty:this.parentWorldMatrixId===-1}get matrix(){return this.updateMatrix(),this._matrix}get worldMatrix(){return this.updateWorldMatrix(),this._matrixWorld}setTransformWithOptions(e){e&&(e.position&&this.position.setXY(e.position.x,e.position.y),e.rotation!==void 0&&(this.rotation=e.rotation),e.angle!==void 0&&(this.angle=e.angle),e.scale&&this.scale.setXY(e.scale.x,e.scale.y),e.origin&&this.origin.setXY(e.origin.x,e.origin.y),e.pivot&&this.pivot.setXY(e.pivot.x,e.pivot.y),e.skew&&this.skew.setXY(e.skew.x,e.skew.y))}setTransformFromMatrix(e){e.decompose(this),this.onUpdateTransformable()}updateMatrix(){if(!this.localMatrixDirty)return;this.localMatrixDirty=!1;const e=this.position.x,n=this.position.y,s=this.pivot.x,r=this.pivot.y,a=-this.origin.x,o=-this.origin.y,h=this.scale.x,c=this.scale.y,l=this._matrix;l.a=this._cx*h,l.b=this._sx*h,l.c=this._cy*c,l.d=this._sy*c,l.tx=e-(s*l.a+r*l.c)+(a*l.a+o*l.c)-a,l.ty=n-(s*l.b+r*l.d)+(a*l.b+o*l.d)-o}updateWorldMatrix(){this.hasWorldMatrixDirty&&(this.parent?(this._matrixWorld.multiplyMatrices(this.parent.worldMatrix,this.matrix),this.parentWorldMatrixId=this.parent.worldMatrixId):(this._matrixWorld.copy(this.matrix),this.parentWorldMatrixId=0),this.worldMatrixId+=1)}onUpdateTransformable=e=>{e===this.skew&&this._updateSkew(),this.localMatrixDirty=!0,this.parentWorldMatrixId=-1,this.onTransformChange()};_updateSkew(){const e=this._rotation,n=this.skew;this._cx=Math.cos(e+n.y),this._sx=Math.sin(e+n.y),this._cy=-Math.sin(e-n.x),this._sy=Math.cos(e-n.x)}onTransformChange(){}}let As=class f_{static empty(){return this.fromLTRB(0,0,0,0)}static default(){return new this}static fromXYWH(e,n,s,r){return this.fromLTRB(e,n,e+s,n+r)}static fromLTRB(e,n,s,r){return new this(N.create(e,n),N.create(s,r))}min;max;constructor(e=N.create(1/0,1/0),n=N.create(-1/0,-1/0)){this.min=e,this.max=n}get left(){return this.min.x}get top(){return this.min.y}get right(){return this.max.x}get bottom(){return this.max.y}get x(){return this.min.x}get y(){return this.min.y}get width(){return this.max.x-this.min.x}get height(){return this.max.y-this.min.y}get cx(){return this.left*.5+this.right*.5}get cy(){return this.top*.5+this.bottom*.5}get center(){return N.create(this.cx,this.cy)}isEmpty(){return this.min.x>this.max.x||this.min.y>this.max.y}clone(){return new f_().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}makeZero(){return this.min.x=this.min.y=0,this.max.x=this.max.y=0,this}setViewport(e,n,s,r){return this.min.set(e,n),this.max.set(e+s,n+r),this}set(e,n){return this.min.copy(e),this.max.copy(n),this}fromCircle(e,n,s){return this.min.set(e-s,n-s),this.max.set(e+s,n+s),this}fromLine(e,n,s,r,a){const o=s-e,h=r-n,c=Math.sqrt(o*o+h*h);if(c===0){this.makeZero();return}const l=o/c,f=-(h/c),d=l,p=f*a/2,y=d*a/2,x=[{x:e-p,y:n-y},{x:e+p,y:n+y},{x:s-p,y:r-y},{x:s+p,y:r+y}];return this.setFromPoints(x),this}fromRect(e,n,s,r){return this.min.set(e,n),this.max.set(e+s,n+r),this}setFromVertices(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n+=2)this.expandByXY(e[n],e[n+1]);return this}setFromPoints(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n++)this.expandByPoint(e[n]);return this}expandByStrokeWidth(e){let n=e*.5;return this.min.translate(-n,-n),this.max.translate(n,n),this}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByXY(e,n){return this.min.set(Math.min(this.min.x,e),Math.min(this.min.y,n)),this.max.set(Math.max(this.max.x,e),Math.max(this.max.y,n)),this}isValid(){return this.isFinite()&&this.left<=this.right&&this.top<=this.bottom}isZero(){return this.width===0||this.height===0}isFinite(){return this.isEmpty()}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}translate(e,n){this.min.translate(e,n),this.max.translate(e,n)}inset(e,n){this.min.translate(e,n),this.max.translate(-e,-n)}outset(e,n){this.inset(-e,-n)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}containsXY(e,n){return!(e<this.left||e>this.right||n<this.top||n>this.bottom)}containsPoint(e){return this.containsXY(e.x,e.y)}containsBox(e){return!(e.min.x<this.min.x||e.max.x>this.max.x||e.min.y<this.min.y||e.max.y>this.max.y)}intersectBox3(e,n){if(!e)return!1;const s=this,r=s.left,a=s.right,o=s.top,h=s.bottom,c=e.left,l=e.right,u=e.top,f=e.bottom,d=N.default(),p=N.default();let y=!(a<c||l<r||h<u||f<o);if(n){let x=1/0,g=0;const m=Math.abs(a-c),v=Math.abs(l-r),w=Math.abs(h-u),b=Math.abs(f-o),S=Math.min(m,v),E=Math.min(w,b);a<c||l<r?S>g&&(g=S,m<v?d.set(-m,0):d.set(v,0)):S<x&&(x=S,m<v?p.set(m,0):p.set(-v,0)),h<u||f<o?E>g&&(g=E,w<b?d.set(0,-w):d.set(0,b)):S<x&&(x=S,w<b?p.set(0,w):p.set(0,-b))}return n&&n.copy(y?p:d),y}intersectionBox(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)}applyMatrix(e){if(e.hasIdentity())return;const n=N.create(this.left,this.top),s=N.create(this.right,this.top),r=N.create(this.left,this.bottom),a=N.create(this.right,this.bottom);n.applyMatrix2D(e),s.applyMatrix2D(e),r.applyMatrix2D(e),a.applyMatrix2D(e),this.makeEmpty(),this.expandByPoint(n),this.expandByPoint(s),this.expandByPoint(r),this.expandByPoint(a)}getObjectBoundingBox(e){if(e.hasIdentity())return;const n=N.create(this.left,this.top),s=N.create(this.right,this.top),r=N.create(this.left,this.bottom),a=N.create(this.right,this.bottom);return n.applyMatrix2D(e),s.applyMatrix2D(e),r.applyMatrix2D(e),a.applyMatrix2D(e),[n,s,a,r]}};const c3=Math.PI*2;let xn=class d_{x=0;y=0;constructor(e=0,n=0){this.x=e,this.y=n}clone(){return new d_(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return ku.x=0,ku.y=0,ku}};const ku=new xn;let Gh=class p_{a;b;c;d;tx;ty;array=null;constructor(e=1,n=0,s=0,r=1,a=0,o=0){this.a=e,this.b=n,this.c=s,this.d=r,this.tx=a,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,s,r,a,o){return this.a=e,this.b=n,this.c=s,this.d=r,this.tx=a,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const s=n||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,n){n=n||new xn;const s=e.x,r=e.y;return n.x=this.a*s+this.c*r+this.tx,n.y=this.b*s+this.d*r+this.ty,n}applyInverse(e,n){n=n||new xn;const s=this.a,r=this.b,a=this.c,o=this.d,h=this.tx,c=this.ty,l=1/(s*o+a*-r),u=e.x,f=e.y;return n.x=o*l*u+-a*l*f+(c*a-h*o)*l,n.y=s*l*f+-r*l*u+(-c*s+h*r)*l,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),s=Math.sin(e),r=this.a,a=this.c,o=this.tx;return this.a=r*n-this.b*s,this.b=r*s+this.b*n,this.c=a*n-this.d*s,this.d=a*s+this.d*n,this.tx=o*n-this.ty*s,this.ty=o*s+this.ty*n,this}append(e){const n=this.a,s=this.b,r=this.c,a=this.d;return this.a=e.a*n+e.b*r,this.b=e.a*s+e.b*a,this.c=e.c*n+e.d*r,this.d=e.c*s+e.d*a,this.tx=e.tx*n+e.ty*r+this.tx,this.ty=e.tx*s+e.ty*a+this.ty,this}appendFrom(e,n){const s=e.a,r=e.b,a=e.c,o=e.d,h=e.tx,c=e.ty,l=n.a,u=n.b,f=n.c,d=n.d;return this.a=s*l+r*f,this.b=s*u+r*d,this.c=a*l+o*f,this.d=a*u+o*d,this.tx=h*l+c*f+n.tx,this.ty=h*u+c*d+n.ty,this}setTransform(e,n,s,r,a,o,h,c,l){return this.a=Math.cos(h+l)*a,this.b=Math.sin(h+l)*a,this.c=-Math.sin(h-c)*o,this.d=Math.cos(h-c)*o,this.tx=e-(s*this.a+r*this.c),this.ty=n-(s*this.b+r*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,r=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,s=this.b,r=this.c,a=this.d,o=e.pivot,h=-Math.atan2(-r,a),c=Math.atan2(s,n),l=Math.abs(h+c);return l<1e-5||Math.abs(c3-l)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=c),e.scale.x=Math.sqrt(n*n+s*s),e.scale.y=Math.sqrt(r*r+a*a),e.position.x=this.tx+(o.x*n+o.y*r),e.position.y=this.ty+(o.x*s+o.y*a),e}invert(){const e=this.a,n=this.b,s=this.c,r=this.d,a=this.tx,o=e*r-n*s;return this.a=r/o,this.b=-n/o,this.c=-s/o,this.d=e/o,this.tx=(s*this.ty-r*a)/o,this.ty=-(e*this.ty-n*a)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new p_;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return u3.identity()}static get shared(){return l3.identity()}};const l3=new Gh,u3=new Gh,Uh=[new xn,new xn,new xn,new xn];let Ya=class Mu{type="rectangle";x;y;width;height;constructor(e=0,n=0,s=0,r=0){this.x=Number(e),this.y=Number(n),this.width=Number(s),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Mu(0,0,0,0)}clone(){return new Mu(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(e,n,s,r=.5){const{width:a,height:o}=this;if(a<=0||o<=0)return!1;const h=this.x,c=this.y,l=s*(1-r),u=s-l,f=h-l,d=h+a+l,p=c-l,y=c+o+l,x=h+u,g=h+a-u,m=c+u,v=c+o-u;return e>=f&&e<=d&&n>=p&&n<=y&&!(e>x&&e<g&&n>m&&n<v)}intersects(e,n){if(!n){const M=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=M)return!1;const T=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>T}const s=this.left,r=this.right,a=this.top,o=this.bottom;if(r<=s||o<=a)return!1;const h=Uh[0].set(e.left,e.top),c=Uh[1].set(e.left,e.bottom),l=Uh[2].set(e.right,e.top),u=Uh[3].set(e.right,e.bottom);if(l.x<=h.x||c.y<=h.y)return!1;const f=Math.sign(n.a*n.d-n.b*n.c);if(f===0||(n.apply(h,h),n.apply(c,c),n.apply(l,l),n.apply(u,u),Math.max(h.x,c.x,l.x,u.x)<=s||Math.min(h.x,c.x,l.x,u.x)>=r||Math.max(h.y,c.y,l.y,u.y)<=a||Math.min(h.y,c.y,l.y,u.y)>=o))return!1;const d=f*(c.y-h.y),p=f*(h.x-c.x),y=d*s+p*a,x=d*r+p*a,g=d*s+p*o,m=d*r+p*o;if(Math.max(y,x,g,m)<=d*h.x+p*h.y||Math.min(y,x,g,m)>=d*u.x+p*u.y)return!1;const v=f*(h.y-l.y),w=f*(l.x-h.x),b=v*s+w*a,S=v*r+w*a,E=v*s+w*o,A=v*r+w*o;return!(Math.max(b,S,E,A)<=v*h.x+w*h.y||Math.min(b,S,E,A)>=v*u.x+w*u.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(s-n,0),this.y=r,this.height=Math.max(a-r,0),this}ceil(e=1,n=.001){const s=Math.ceil((this.x+this.width-n)*e)/e,r=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=s-this.x,this.height=r-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=s-n,this.y=r,this.height=a-r,this}getBounds(e){return e||=new Mu,e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const n=e.x,s=e.y,r=e.x+e.width,a=e.y+e.height;return n>=this.x&&n<this.x+this.width&&s>=this.y&&s<this.y+this.height&&r>=this.x&&r<this.x+this.width&&a>=this.y&&a<this.y+this.height}set(e,n,s,r){return this.x=e,this.y=n,this.width=s,this.height=r,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}},f3=class y_{x;y;radius;type="circle";constructor(e=0,n=0,s=0){this.x=e,this.y=n,this.radius=s}clone(){return new y_(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const s=this.radius*this.radius;let r=this.x-e,a=this.y-n;return r*=r,a*=a,r+a<=s}strokeContains(e,n,s,r=.5){if(this.radius===0)return!1;const a=this.x-e,o=this.y-n,h=this.radius,c=(1-r)*s,l=Math.sqrt(a*a+o*o);return l<=h+c&&l>h-(s-c)}getBounds(e){return e||=new Ya,e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}},d3=class x_{x;y;halfWidth;halfHeight;type="ellipse";constructor(e=0,n=0,s=0,r=0){this.x=e,this.y=n,this.halfWidth=s,this.halfHeight=r}clone(){return new x_(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,r=(n-this.y)/this.halfHeight;return s*=s,r*=r,s+r<=1}strokeContains(e,n,s,r=.5){const{halfWidth:a,halfHeight:o}=this;if(a<=0||o<=0)return!1;const h=s*(1-r),c=s-h,l=a-c,u=o-c,f=a+h,d=o+h,p=e-this.x,y=n-this.y,x=p*p/(l*l)+y*y/(u*u),g=p*p/(f*f)+y*y/(d*d);return x>1&&g<=1}getBounds(e){return e||=new Ya,e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}};function p3(i,e,n,s,r,a){const o=i-n,h=e-s,c=r-n,l=a-s,u=o*c+h*l,f=c*c+l*l;let d=-1;f!==0&&(d=u/f);let p,y;d<0?(p=n,y=s):d>1?(p=r,y=a):(p=n+d*c,y=s+d*l);const x=i-p,g=e-y;return x*x+g*g}let y3,x3,g3=class g_{points;closePath;type="polygon";constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const s=[];for(let r=0,a=n.length;r<a;r++)s.push(n[r].x,n[r].y);n=s}this.points=n,this.closePath=!0}isClockwise(){let e=0;const n=this.points,s=n.length;for(let r=0;r<s;r+=2){const a=n[r],o=n[r+1],h=n[(r+2)%s],c=n[(r+3)%s];e+=(h-a)*(c+o)}return e<0}containsPolygon(e){const n=this.getBounds(y3),s=e.getBounds(x3);if(!n.containsRect(s))return!1;const r=e.points;for(let a=0;a<r.length;a+=2){const o=r[a],h=r[a+1];if(!this.contains(o,h))return!1}return!0}clone(){const e=this.points.slice(),n=new g_(e);return n.closePath=this.closePath,n}contains(e,n){let s=!1;const r=this.points.length/2;for(let a=0,o=r-1;a<r;o=a++){const h=this.points[a*2],c=this.points[a*2+1],l=this.points[o*2],u=this.points[o*2+1];c>n!=u>n&&e<(l-h)*((n-c)/(u-c))+h&&(s=!s)}return s}strokeContains(e,n,s,r=.5){const a=s*s,o=a*(1-r),h=a-o,{points:c}=this,l=c.length-(this.closePath?0:2);for(let u=0;u<l;u+=2){const f=c[u],d=c[u+1],p=c[(u+2)%c.length],y=c[(u+3)%c.length],x=p3(e,n,f,d,p,y),g=Math.sign((p-f)*(n-d)-(y-d)*(e-f));if(x<=(g<0?h:o))return!0}return!1}getBounds(e){e||=new Ya;const n=this.points;let s=1/0,r=-1/0,a=1/0,o=-1/0;for(let h=0,c=n.length;h<c;h+=2){const l=n[h],u=n[h+1];s=l<s?l:s,r=l>r?l:r,a=u<a?u:a,o=u>o?u:o}return e.x=s,e.width=r-s,e.y=a,e.height=o-a,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}};const Wh=(i,e,n,s,r,a,o)=>{const h=i-n,c=e-s,l=Math.sqrt(h*h+c*c);return l>=r-a&&l<=r+o},m3=Object.freeze(Object.defineProperty({__proto__:null,Circle:f3,Ellipse:d3,Polygon:g3,Rectangle:Ya,RoundedRectangle:class m_{x;y;width;height;radius;type="roundedRectangle";constructor(e=0,n=0,s=0,r=0,a=20){this.x=e,this.y=n,this.width=s,this.height=r,this.radius=a}getBounds(e){return e||=new Ya,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new m_(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+s&&n<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let r=e-(this.x+s),a=n-(this.y+s);const o=s*s;if(r*r+a*a<=o||(r=e-(this.x+this.width-s),r*r+a*a<=o)||(a=n-(this.y+this.height-s),r*r+a*a<=o)||(r=e-(this.x+s),r*r+a*a<=o))return!0}return!1}strokeContains(e,n,s,r=.5){const{x:a,y:o,width:h,height:c,radius:l}=this,u=s*(1-r),f=s-u,d=a+l,p=o+l,y=h-l*2,x=c-l*2,g=a+h,m=o+c;return(e>=a-u&&e<=a+f||e>=g-f&&e<=g+u)&&n>=p&&n<=p+x||(n>=o-u&&n<=o+f||n>=m-f&&n<=m+u)&&e>=d&&e<=d+y?!0:e<d&&n<p&&Wh(e,n,d,p,l,f,u)||e>g-l&&n<p&&Wh(e,n,g-l,p,l,f,u)||e>g-l&&n>m-l&&Wh(e,n,g-l,m-l,l,f,u)||e<d&&n>m-l&&Wh(e,n,d,m-l,l,f,u)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}},Symbol.toStringTag,{value:"Module"}));let oy=class v_{_x;_y;_observer;constructor(e,n,s){this._x=n||0,this._y=s||0,this._observer=e}clone(e){return new v_(e??this._observer,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}};function v3(i,e,n,s,r,a,o,h){const c=o-n,l=h-s,u=r-n,f=a-s,d=i-n,p=e-s,y=c*c+l*l,x=c*u+l*f,g=c*d+l*p,m=u*u+f*f,v=u*d+f*p,w=1/(y*m-x*x),b=(m*g-x*v)*w,S=(y*v-x*g)*w;return b>=0&&S>=0&&b+S<1}const w3=Object.freeze(Object.defineProperty({__proto__:null,ObservablePoint:oy,Point:xn,pointInTriangle:v3},Symbol.toStringTag,{value:"Module"}));let Be=class w_{x;y;constructor(e,n){this.x=e||0,this.y=n||0}copy(e){return this.x=e.x,this.y=e.y,this}clone(){return new w_(this.x,this.y)}set(e,n){return this.x=e,this.y=n,this}equal(e){return e.x===this.x&&e.y===this.y}add(e){return this.x+=e.x,this.y+=e.y,this}scale(e){this.x*=e,this.y*=e}scaleAndAdd(e,n){this.x+=e.x*n,this.y+=e.y*n}sub(e){return this.x-=e.x,this.y-=e.y,this}dot(e){return this.x*e.x+this.y*e.y}len(){return Math.sqrt(this.x*this.x+this.y*this.y)}lenSquare(){return this.x*this.x+this.y*this.y}normalize(){const e=this.len();return this.x/=e,this.y/=e,this}distance(e){const n=this.x-e.x,s=this.y-e.y;return Math.sqrt(n*n+s*s)}distanceSquare(e){const n=this.x-e.x,s=this.y-e.y;return n*n+s*s}negate(){return this.x=-this.x,this.y=-this.y,this}transform(e){if(!e)return;const n=this.x,s=this.y;return this.x=e[0]*n+e[2]*s+e[4],this.y=e[1]*n+e[3]*s+e[5],this}toArray(e){return e[0]=this.x,e[1]=this.y,e}fromArray(e){this.x=e[0],this.y=e[1]}static set(e,n,s){e.x=n,e.y=s}static copy(e,n){e.x=n.x,e.y=n.y}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static lenSquare(e){return e.x*e.x+e.y*e.y}static dot(e,n){return e.x*n.x+e.y*n.y}static add(e,n,s){e.x=n.x+s.x,e.y=n.y+s.y}static sub(e,n,s){e.x=n.x-s.x,e.y=n.y-s.y}static scale(e,n,s){e.x=n.x*s,e.y=n.y*s}static scaleAndAdd(e,n,s,r){e.x=n.x+s.x*r,e.y=n.y+s.y*r}static lerp(e,n,s,r){const a=1-r;e.x=a*n.x+r*s.x,e.y=a*n.y+r*s.y}};class ja{currentID;dirtyID;_x;_y;_width;_height;_hull;constructor(e=0,n=0,s=0,r=0){this._x=Number(e),this._y=Number(n),this._width=Number(s),this._height=Number(r),this._hull=[new Be,new Be,new Be,new Be],this.currentID=-1,this.dirtyID=0}get x(){return this._x}set x(e){this._x=e,this.dirtyID++}get y(){return this._y}set y(e){this._y=e,this.dirtyID++}get width(){return this._width}set width(e){this._width=e,this.dirtyID++}get height(){return this._height}set height(e){this._height=e,this.dirtyID++}get hull(){return this.isDirty()&&this.update(),this._hull}get topLeft(){return this.isDirty()&&this.update(),this._hull[0]}get topRight(){return this.isDirty()&&this.update(),this._hull[1]}get bottomRight(){return this.isDirty()&&this.update(),this._hull[2]}get bottomLeft(){return this.isDirty()&&this.update(),this._hull[3]}isDirty(){return this.currentID!==this.dirtyID}update(){const[e,n,s,r]=this._hull;e.set(this._x,this._y),n.set(this._x+this._width,this._y),s.set(this._x+this._width,this._y+this._height),r.set(this._x,this._y+this._height)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}clone(){return new ja(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}equals(e){return e?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:!1}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(s-n,0),this.y=r,this.height=Math.max(a-r,0),this}ceil(e=1,n=.001){const s=Math.ceil((this.x+this.width-n)*e)/e,r=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=s-this.x,this.height=r-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=s-n,this.y=r,this.height=a-r,this}}const hy=new xn;class M3{innerBounds;currentID;dirtyID;_rotation;_center;_hull;_matrix;constructor(e=0,n=0,s=0,r=0,a=0){e instanceof ja&&(a=n||0,n=e.y,s=e.width,r=e.height,e=e.x),this.innerBounds=new ja(e,n,s,r),this._rotation=a,this._center=new oy(this),this._hull=[new xn,new xn,new xn,new xn],this._matrix=new Gh,this.currentID=-1,this.dirtyID=0}get rotation(){return this._rotation}set rotation(e){this._rotation=e,this.dirtyID++}get center(){return this.isDirty()&&this.update(),this._center}set center(e){this.center.copyFrom(e)}get hull(){return this.isDirty()&&this.update(),this._hull}get topLeft(){return this.isDirty()&&this.update(),this._hull[0]}get topRight(){return this.isDirty()&&this.update(),this._hull[1]}get bottomRight(){return this.isDirty()&&this.update(),this._hull[2]}get bottomLeft(){return this.isDirty()&&this.update(),this._hull[3]}equals(e){return e?this.innerBounds.equals(e.innerBounds)&&this.rotation===e.rotation:!1}contains(e,n){typeof e=="number"&&(e=hy.set(e,n));const s=this._matrix.applyInverse(e,hy);return this.innerBounds.contains(s.x,s.y)}copyFrom(e){return this.innerBounds.copyFrom(e.innerBounds),this.rotation=e.rotation,this.dirtyID++,this}isDirty(){return this.currentID!==this.dirtyID+this.innerBounds.dirtyID}update(){const e=this.innerBounds,n=this._rotation,s=this._center,[r,a,o,h]=this._hull,c=this._matrix;s._x=e.x+e.width/2,s._y=e.y+e.height/2,c.identity().translate(-s.x,-s.y).rotate(n).translate(s.x,s.y),c.apply(e.topLeft,r),c.apply(e.topRight,a),c.apply(e.bottomRight,o),c.apply(e.bottomLeft,h),this.currentID=this.dirtyID+this.innerBounds.dirtyID}_onUpdate(){this.updateCenter()}updateCenter(){const e=this.center,n=this.innerBounds;n.x=e.x-n.width/2,n.y=e.y-n.height/2}}const b3=(i,e)=>i[0]*e[0]+i[1]*e[1],_3=(i,e)=>i[0]*e[1]-i[1]*e[0],cy=(i,e)=>Math.atan2(_3(i,e),b3(i,e));function ly(i,e,n,s,r,a,o){let h=Math.PI*2;o===0&&(o=1e-6),o===h&&(o=h-1e-6);let c=Math.cos(r),l=Math.sin(r),u=c*n*Math.cos(a)-l*s*Math.sin(a)+i,f=l*n*Math.cos(a)+c*s*Math.sin(a)+e,d=c*n*Math.cos(a+o)-l*s*Math.sin(a+o)+i,p=l*n*Math.cos(a+o)+c*s*Math.sin(a+o)+e,y=Math.abs(o)>Math.PI?1:0,x=o>0?1:0;return{x1:u,y1:f,x2:d,y2:p,fa:y,fs:x}}function uy(i,e,n,s,r,a,o,h,c){let l=Math.cos(c),u=Math.sin(c),f=l*(i-n)/2+u*(e-s)/2,d=-u*(i-n)/2+l*(e-s)/2,p=f*f/(o*o)+d*d/(h*h);p>1&&(p=Math.sqrt(p),o*=p,h*=p);let y=r!==a?1:-1,x=(o*o*h*h-o*o*d*d-h*h*f*f)/(o*o*d*d+h*h*f*f);x<0?x=0:x=Math.sqrt(x);let g=y*x*(o*d/h),m=y*x*(-h*f/o),v=l*g-u*m+(i+n)/2,w=u*g+l*m+(e+s)/2,b=cy([1,0],[(f-g)/o,(d-m)/h]),S=cy([(f-g)/o,(d-m)/h],[(-f-g)/o,(-d-m)/h]);!a&&S>0?S-=Math.PI*2:a&&S<0&&(S+=Math.PI*2);let E=b+S;return{rx:o,ry:h,cx:v,cy:w,theta1:b,theta2:E,dtheta:S}}function fy(i,e,n,s,r,a){const o=Math.cos(a)*n,h=Math.sin(a)*s,c=Math.cos(r),l=Math.sin(r);return{x:i+c*o-l*h,y:e+l*o+c*h}}function Lu(i,e,n,s,r,a,o){const h=o-a,c=4/3*Math.tan(h/4),l=N.fromRotation(a),u=N.fromRotation(o),f=N.fromPoint(l),d=N.fromPoint(u);return f.translate(-c*l.y,c*l.x),d.translate(c*u.y,-c*u.x),l.scale(n,s).rotate(r).translate(i,e),f.scale(n,s).rotate(r).translate(i,e),d.scale(n,s).rotate(r).translate(i,e),u.scale(n,s).rotate(r).translate(i,e),[l.x,l.y,f.x,f.y,d.x,d.y,u.x,u.y]}function Yh(i,e,n,s,r,a,o,h,c,l){const{cx:u,cy:f,theta1:d,dtheta:p,rx:y,ry:x}=uy(i,e,n,s,h,c,r,a,o),g=Math.ceil(Math.abs(p/(Math.PI/2))),m=p/g,v=[];let w=d;for(let b=0;b<g;b++){const S=w+m;let[E,A,M,_,T,C,P,R]=Lu(u,f,y,x,o,w,S);l?.(E,A,M,_,T,C,P,R,b),w=S,v.push(E,A,M,_,T,C,P,R)}return v}const dy=Math.PI,S3=Math.PI*2,T3=Math.PI*.5,E3=4/3*(Math.sqrt(2)-1);function z3(i){return 4/3*Math.tan(i/4)}function C3(i){return Math.ceil(Math.abs(i)/dy)}function A3(i){for(var e=0;e<i.length;e++)if(i[e]!==void 0&&!Number.isFinite(i[e]))return!1;return!0}function P3(i,e,n=1e-5){return Math.abs(i-e)<=n}function I3(i){return i*(180/Math.PI)}function R3(i){return i*(Math.PI/180)}function O3(i){return Math.sqrt(i)}function k3(i,e){return Math.pow(i,e)}function L3(i){return Math.abs(i)}function F3(i,e){return Math.min(i,e)}function N3(i,e){return Math.max(i,e)}function B3(i,e){return Math.random()*(e-i)+i}function D3(i,e,n=1e-4){return(i(e+n)-i(e-n))/(2*n)}function Fu(i){if(i<0)return-1;let e=1;for(let n=2;n<=i;n++)e*=n;return e}function py(i,e){if(e>i)return 0;let n=1;for(let s=1;s<=e;s++)n*=(i-s+1)/s;return n}function q3(i,e){if(e>i)return 0;let n=1;for(let s=1;s<=e;s++)n*=i-s+1;return n}function $3(i,e,n,s,r){return(i-e)*(r-s)/(n-e)+s}function We(i,e,n){return Math.min(Math.max(i,e),n)}function V3(i,e,n){return i*(1-n)+e*n}function G3(i,e,n){return(n-i)/(e-i)}function U3(i,e,n){const s=We((n-i)/(e-i),0,1);return s*s*(3-2*s)}function W3(i,e,n){const s=We((n-i)/(e-i),0,1);return s<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1}function Y3(i,e,n){const s=We((n-i)/(e-i),0,1);return s*s*s}function j3(i,e,n){const s=We((n-i)/(e-i),0,1);return(s-1)*(2*s-2)*(2*s-2)+1}function H3(i){return e=>class extends e{constructor(...n){super(...n),Object.assign(this,i)}}}const X3=Object.freeze(Object.defineProperty({__proto__:null,BEZIER_CIRCLE_GOLDEN_RATIO:E3,PI:dy,PI2:S3,PI_2:T3,abs:L3,allAreFinite:A3,calcArcGoldenRatio:z3,calcArcSteps:C3,clamp:We,createMixin:H3,degreesToRadians:R3,derivative:D3,easeIn:Y3,easeInOut:W3,easeOut:j3,equalsEpsilon:P3,factorial:Fu,inverseLerp:G3,lerp:V3,map:$3,max:N3,min:F3,nCr:py,nPr:q3,pow:k3,radiansToDegrees:I3,random:B3,smoothstep:U3,sqrt:O3},Symbol.toStringTag,{value:"Module"})),ct=1e-6,Z3="zyx",yy=new Float32Array([1,0,0,1]);class Ee extends Float32Array{static BYTE_LENGTH=4*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 4:super(e);break;case 2:super(e[0],e[1],4);break;case 1:const n=e[0];typeof n=="number"?super([n,n,n,n]):super(n,0,4);break;default:super(yy);break}}get str(){return Ee.str(this)}copy(e){return this.set(e),this}identity(){return this.set(yy),this}multiply(e){return Ee.multiply(this,this,e)}mul(e){return this}transpose(){return Ee.transpose(this,this)}invert(){return Ee.invert(this,this)}scale(e){return Ee.scale(this,this,e)}rotate(e){return Ee.rotate(this,this,e)}static create(){return new Ee}static clone(e){return new Ee(e)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}static fromValues(...e){return new Ee(...e)}static set(e,...n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}static identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}static transpose(e,n){if(e===n){let s=n[1];e[1]=n[2],e[2]=s}else e[0]=n[0],e[1]=n[2],e[2]=n[1],e[3]=n[3];return e}static invert(e,n){const s=n[0],r=n[1],a=n[2],o=n[3];let h=s*o-a*r;return h?(h=1/h,e[0]=o*h,e[1]=-r*h,e[2]=-a*h,e[3]=s*h,e):null}static adjoint(e,n){const s=n[0];return e[0]=n[3],e[1]=-n[1],e[2]=-n[2],e[3]=s,e}static determinant(e){return e[0]*e[3]-e[2]*e[1]}static add(e,n,s){return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e[3]=n[3]+s[3],e}static subtract(e,n,s){return e[0]=n[0]-s[0],e[1]=n[1]-s[1],e[2]=n[2]-s[2],e[3]=n[3]-s[3],e}static sub(e,n,s){return e}static multiply(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=s[0],l=s[1],u=s[2],f=s[3];return e[0]=r*c+o*l,e[1]=a*c+h*l,e[2]=r*u+o*f,e[3]=a*u+h*f,e}static mul(e,n,s){return e}static rotate(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=Math.sin(s),l=Math.cos(s);return e[0]=r*l+o*c,e[1]=a*l+h*c,e[2]=r*-c+o*l,e[3]=a*-c+h*l,e}static scale(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=s[0],l=s[1];return e[0]=r*c,e[1]=a*c,e[2]=o*l,e[3]=h*l,e}static fromRotation(e,n){const s=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=s,e[2]=-s,e[3]=r,e}static fromScaling(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=n[1],e}static frob(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3])}static multiplyScalar(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=n[3]*s,e}static multiplyScalarAndAdd(e,n,s,r){return e[0]=n[0]+s[0]*r,e[1]=n[1]+s[1]*r,e[2]=n[2]+s[2]*r,e[3]=n[3]+s[3]*r,e}static LDU(e,n,s,r){return e[2]=r[2]/r[0],s[0]=r[0],s[1]=r[1],s[3]=r[3]-e[2]*s[1],[e,n,s]}static exactEquals(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]}static equals(e,n){const s=e[0],r=e[1],a=e[2],o=e[3],h=n[0],c=n[1],l=n[2],u=n[3];return Math.abs(s-h)<=ct*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(r-c)<=ct*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-l)<=ct*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-u)<=ct*Math.max(1,Math.abs(o),Math.abs(u))}static str(e){return`Mat2(${e.join(", ")})`}}Ee.prototype.mul=Ee.prototype.multiply,Ee.mul=Ee.multiply,Ee.sub=Ee.subtract;const Dr=Ee,xy=new Float32Array([1,0,0,1,0,0]);class Ye extends Float32Array{static BYTE_LENGTH=6*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 6:super(e);break;case 2:super(e[0],e[1],6);break;case 1:const n=e[0];typeof n=="number"?super([n,n,n,n,n,n]):super(n,0,6);break;default:super(xy);break}}get str(){return Ye.str(this)}copy(e){return this.set(e),this}identity(){return this.set(xy),this}multiply(e){return Ye.multiply(this,this,e)}mul(e){return this}translate(e){return Ye.translate(this,this,e)}rotate(e){return Ye.rotate(this,this,e)}scale(e){return Ye.scale(this,this,e)}static create(){return new Ye}static clone(e){return new Ye(e)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e}static fromValues(...e){return new Ye(...e)}static set(e,...n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e}static identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}static invert(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=n[4],c=n[5];let l=s*o-r*a;return l?(l=1/l,e[0]=o*l,e[1]=-r*l,e[2]=-a*l,e[3]=s*l,e[4]=(a*c-o*h)*l,e[5]=(r*h-s*c)*l,e):null}static determinant(e){return e[0]*e[3]-e[1]*e[2]}static add(e,n,s){return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e[3]=n[3]+s[3],e[4]=n[4]+s[4],e[5]=n[5]+s[5],e}static subtract(e,n,s){return e[0]=n[0]-s[0],e[1]=n[1]-s[1],e[2]=n[2]-s[2],e[3]=n[3]-s[3],e[4]=n[4]-s[4],e[5]=n[5]-s[5],e}static sub(e,n,s){return e}static multiply(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=s[0],f=s[1],d=s[2],p=s[3],y=s[4],x=s[5];return e[0]=r*u+o*f,e[1]=a*u+h*f,e[2]=r*d+o*p,e[3]=a*d+h*p,e[4]=r*y+o*x+c,e[5]=a*y+h*x+l,e}static mul(e,n,s){return e}static translate(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=s[0],f=s[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=h,e[4]=r*u+o*f+c,e[5]=a*u+h*f+l,e}static rotate(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=Math.sin(s),f=Math.cos(s);return e[0]=r*f+o*u,e[1]=a*f+h*u,e[2]=r*-u+o*f,e[3]=a*-u+h*f,e[4]=c,e[5]=l,e}static scale(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=s[0],f=s[1];return e[0]=r*u,e[1]=a*u,e[2]=o*f,e[3]=h*f,e[4]=c,e[5]=l,e}static fromTranslation(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=n[0],e[5]=n[1],e}static fromRotation(e,n){const s=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=s,e[2]=-s,e[3]=r,e[4]=0,e[5]=0,e}static fromScaling(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=n[1],e[4]=0,e[5]=0,e}static frob(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+1)}static multiplyScalar(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=n[3]*s,e[4]=n[4]*s,e[5]=n[5]*s,e}static multiplyScalarAndAdd(e,n,s,r){return e[0]=n[0]+s[0]*r,e[1]=n[1]+s[1]*r,e[2]=n[2]+s[2]*r,e[3]=n[3]+s[3]*r,e[4]=n[4]+s[4]*r,e[5]=n[5]+s[5]*r,e}static exactEquals(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]}static equals(e,n){const s=e[0],r=e[1],a=e[2],o=e[3],h=e[4],c=e[5],l=n[0],u=n[1],f=n[2],d=n[3],p=n[4],y=n[5];return Math.abs(s-l)<=ct*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(r-u)<=ct*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-f)<=ct*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=ct*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(h-p)<=ct*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(c-y)<=ct*Math.max(1,Math.abs(c),Math.abs(y))}static str(e){return`Mat2d(${e.join(", ")})`}}Ye.mul=Ye.multiply,Ye.sub=Ye.subtract;const Zi=Ye,gy=new Float32Array([1,0,0,0,1,0,0,0,1]);class fe extends Float32Array{static BYTE_LENGTH=9*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 9:super(e);break;case 2:super(e[0],e[1],9);break;case 1:const n=e[0];typeof n=="number"?super([n,n,n,n,n,n,n,n,n]):super(n,0,9);break;default:super(gy);break}}get str(){return fe.str(this)}copy(e){return this.set(e),this}identity(){return this.set(gy),this}multiply(e){return fe.multiply(this,this,e)}mul(e){return this}transpose(){return fe.transpose(this,this)}invert(){return fe.invert(this,this)}translate(e){return fe.translate(this,this,e)}rotate(e){return fe.rotate(this,this,e)}scale(e){return fe.scale(this,this,e)}static create(){return new fe}static clone(e){return new fe(e)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e}static fromValues(...e){return new fe(...e)}static set(e,...n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e}static identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}static transpose(e,n){if(e===n){const s=n[1],r=n[2],a=n[5];e[1]=n[3],e[2]=n[6],e[3]=s,e[5]=n[7],e[6]=r,e[7]=a}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];return e}static invert(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=f*h-c*u,p=-f*o+c*l,y=u*o-h*l;let x=s*d+r*p+a*y;return x?(x=1/x,e[0]=d*x,e[1]=(-f*r+a*u)*x,e[2]=(c*r-a*h)*x,e[3]=p*x,e[4]=(f*s-a*l)*x,e[5]=(-c*s+a*o)*x,e[6]=y*x,e[7]=(-u*s+r*l)*x,e[8]=(h*s-r*o)*x,e):null}static adjoint(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=n[4],c=n[5],l=n[6],u=n[7],f=n[8];return e[0]=h*f-c*u,e[1]=a*u-r*f,e[2]=r*c-a*h,e[3]=c*l-o*f,e[4]=s*f-a*l,e[5]=a*o-s*c,e[6]=o*u-h*l,e[7]=r*l-s*u,e[8]=s*h-r*o,e}static determinant(e){const n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8];return n*(u*o-h*l)+s*(-u*a+h*c)+r*(l*a-o*c)}static add(e,n,s){return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e[3]=n[3]+s[3],e[4]=n[4]+s[4],e[5]=n[5]+s[5],e[6]=n[6]+s[6],e[7]=n[7]+s[7],e[8]=n[8]+s[8],e}static subtract(e,n,s){return e[0]=n[0]-s[0],e[1]=n[1]-s[1],e[2]=n[2]-s[2],e[3]=n[3]-s[3],e[4]=n[4]-s[4],e[5]=n[5]-s[5],e[6]=n[6]-s[6],e[7]=n[7]-s[7],e[8]=n[8]-s[8],e}static sub(e,n,s){return e}static multiply(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=n[6],f=n[7],d=n[8];let p=s[0],y=s[1],x=s[2];return e[0]=p*r+y*h+x*u,e[1]=p*a+y*c+x*f,e[2]=p*o+y*l+x*d,p=s[3],y=s[4],x=s[5],e[3]=p*r+y*h+x*u,e[4]=p*a+y*c+x*f,e[5]=p*o+y*l+x*d,p=s[6],y=s[7],x=s[8],e[6]=p*r+y*h+x*u,e[7]=p*a+y*c+x*f,e[8]=p*o+y*l+x*d,e}static mul(e,n,s){return e}static translate(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=n[6],f=n[7],d=n[8],p=s[0],y=s[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=h,e[4]=c,e[5]=l,e[6]=p*r+y*h+u,e[7]=p*a+y*c+f,e[8]=p*o+y*l+d,e}static rotate(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=n[6],f=n[7],d=n[8],p=Math.sin(s),y=Math.cos(s);return e[0]=y*r+p*h,e[1]=y*a+p*c,e[2]=y*o+p*l,e[3]=y*h-p*r,e[4]=y*c-p*a,e[5]=y*l-p*o,e[6]=u,e[7]=f,e[8]=d,e}static scale(e,n,s){const r=s[0],a=s[1];return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=a*n[3],e[4]=a*n[4],e[5]=a*n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e}static fromTranslation(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=n[0],e[7]=n[1],e[8]=1,e}static fromRotation(e,n){const s=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=s,e[2]=0,e[3]=-s,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}static fromScaling(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=n[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}static fromMat2d(e,n){return e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[2],e[4]=n[3],e[5]=0,e[6]=n[4],e[7]=n[5],e[8]=1,e}static fromQuat(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=s+s,c=r+r,l=a+a,u=s*h,f=r*h,d=r*c,p=a*h,y=a*c,x=a*l,g=o*h,m=o*c,v=o*l;return e[0]=1-d-x,e[3]=f-v,e[6]=p+m,e[1]=f+v,e[4]=1-u-x,e[7]=y-g,e[2]=p-m,e[5]=y+g,e[8]=1-u-d,e}static fromMat4(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],e}static normalFromMat4(e,n){const s=n[0],r=n[1],a=n[2],o=n[4],h=n[5],c=n[6],l=n[8],u=n[9],f=n[10];return e[0]=h*f-c*u,e[1]=a*u-r*f,e[2]=r*c-a*h,e[3]=c*l-o*f,e[4]=s*f-a*l,e[5]=a*o-s*c,e[6]=o*u-h*l,e[7]=r*l-s*u,e[8]=s*h-r*o,e}static normalFromMat4Fast(e,n){return e}static projection(e,n,s){return e[0]=2/n,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/s,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}static frob(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8])}static multiplyScalar(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=n[3]*s,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=n[7]*s,e[8]=n[8]*s,e}static multiplyScalarAndAdd(e,n,s,r){return e[0]=n[0]+s[0]*r,e[1]=n[1]+s[1]*r,e[2]=n[2]+s[2]*r,e[3]=n[3]+s[3]*r,e[4]=n[4]+s[4]*r,e[5]=n[5]+s[5]*r,e[6]=n[6]+s[6]*r,e[7]=n[7]+s[7]*r,e[8]=n[8]+s[8]*r,e}static exactEquals(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]}static equals(e,n){const s=e[0],r=e[1],a=e[2],o=e[3],h=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=n[0],p=n[1],y=n[2],x=n[3],g=n[4],m=n[5],v=n[6],w=n[7],b=n[8];return Math.abs(s-d)<=ct*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(r-p)<=ct*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(a-y)<=ct*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-x)<=ct*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(h-g)<=ct*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(c-m)<=ct*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(l-v)<=ct*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-w)<=ct*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(f-b)<=ct*Math.max(1,Math.abs(f),Math.abs(b))}static str(e){return`Mat3(${e.join(", ")})`}}fe.prototype.mul=fe.prototype.multiply,fe.mul=fe.multiply,fe.sub=fe.subtract,fe.normalFromMat4Fast=fe.normalFromMat4;const my=fe,vy=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Ot extends Float32Array{static BYTE_LENGTH=16*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 16:super(e);break;case 2:super(e[0],e[1],16);break;case 1:const n=e[0];typeof n=="number"?super([n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n]):super(n,0,16);break;default:super(vy);break}}get str(){return Ot.str(this)}copy(e){return this.set(e),this}identity(){return this.set(vy),this}multiply(e){return Ot.multiply(this,this,e)}mul(e){return this}transpose(){return Ot.transpose(this,this)}invert(){return Ot.invert(this,this)}translate(e){return Ot.translate(this,this,e)}rotate(e,n){return Ot.rotate(this,this,e,n)}scale(e){return Ot.scale(this,this,e)}rotateX(e){return Ot.rotateX(this,this,e)}rotateY(e){return Ot.rotateY(this,this,e)}rotateZ(e){return Ot.rotateZ(this,this,e)}perspectiveNO(e,n,s,r){return Ot.perspectiveNO(this,e,n,s,r)}perspectiveZO(e,n,s,r){return Ot.perspectiveZO(this,e,n,s,r)}orthoNO(e,n,s,r,a,o){return Ot.orthoNO(this,e,n,s,r,a,o)}orthoZO(e,n,s,r,a,o){return Ot.orthoZO(this,e,n,s,r,a,o)}static create(){return new Ot}static clone(e){return new Ot(e)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}static fromValues(...e){return new Ot(...e)}static set(e,...n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}static identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static transpose(e,n){if(e===n){const s=n[1],r=n[2],a=n[3],o=n[6],h=n[7],c=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=s,e[6]=n[9],e[7]=n[13],e[8]=r,e[9]=o,e[11]=n[14],e[12]=a,e[13]=h,e[14]=c}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e}static invert(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],p=n[10],y=n[11],x=n[12],g=n[13],m=n[14],v=n[15],w=s*c-r*h,b=s*l-a*h,S=s*u-o*h,E=r*l-a*c,A=r*u-o*c,M=a*u-o*l,_=f*g-d*x,T=f*m-p*x,C=f*v-y*x,P=d*m-p*g,R=d*v-y*g,k=p*v-y*m;let I=w*k-b*R+S*P+E*C-A*T+M*_;return I?(I=1/I,e[0]=(c*k-l*R+u*P)*I,e[1]=(a*R-r*k-o*P)*I,e[2]=(g*M-m*A+v*E)*I,e[3]=(p*A-d*M-y*E)*I,e[4]=(l*C-h*k-u*T)*I,e[5]=(s*k-a*C+o*T)*I,e[6]=(m*S-x*M-v*b)*I,e[7]=(f*M-p*S+y*b)*I,e[8]=(h*R-c*C+u*_)*I,e[9]=(r*C-s*R-o*_)*I,e[10]=(x*A-g*S+v*w)*I,e[11]=(d*S-f*A-y*w)*I,e[12]=(c*T-h*P-l*_)*I,e[13]=(s*P-r*T+a*_)*I,e[14]=(g*b-x*E-m*w)*I,e[15]=(f*E-d*b+p*w)*I,e):null}static adjoint(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],p=n[10],y=n[11],x=n[12],g=n[13],m=n[14],v=n[15],w=s*c-r*h,b=s*l-a*h,S=s*u-o*h,E=r*l-a*c,A=r*u-o*c,M=a*u-o*l,_=f*g-d*x,T=f*m-p*x,C=f*v-y*x,P=d*m-p*g,R=d*v-y*g,k=p*v-y*m;return e[0]=c*k-l*R+u*P,e[1]=a*R-r*k-o*P,e[2]=g*M-m*A+v*E,e[3]=p*A-d*M-y*E,e[4]=l*C-h*k-u*T,e[5]=s*k-a*C+o*T,e[6]=m*S-x*M-v*b,e[7]=f*M-p*S+y*b,e[8]=h*R-c*C+u*_,e[9]=r*C-s*R-o*_,e[10]=x*A-g*S+v*w,e[11]=d*S-f*A-y*w,e[12]=c*T-h*P-l*_,e[13]=s*P-r*T+a*_,e[14]=g*b-x*E-m*w,e[15]=f*E-d*b+p*w,e}static determinant(e){const n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],p=e[11],y=e[12],x=e[13],g=e[14],m=e[15],v=n*h-s*o,w=n*c-r*o,b=s*c-r*h,S=u*x-f*y,E=u*g-d*y,A=f*g-d*x,M=n*A-s*E+r*S,_=o*A-h*E+c*S,T=u*b-f*w+d*v,C=y*b-x*w+g*v;return l*M-a*_+m*T-p*C}static multiply(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=n[6],f=n[7],d=n[8],p=n[9],y=n[10],x=n[11],g=n[12],m=n[13],v=n[14],w=n[15];let b=s[0],S=s[1],E=s[2],A=s[3];return e[0]=b*r+S*c+E*d+A*g,e[1]=b*a+S*l+E*p+A*m,e[2]=b*o+S*u+E*y+A*v,e[3]=b*h+S*f+E*x+A*w,b=s[4],S=s[5],E=s[6],A=s[7],e[4]=b*r+S*c+E*d+A*g,e[5]=b*a+S*l+E*p+A*m,e[6]=b*o+S*u+E*y+A*v,e[7]=b*h+S*f+E*x+A*w,b=s[8],S=s[9],E=s[10],A=s[11],e[8]=b*r+S*c+E*d+A*g,e[9]=b*a+S*l+E*p+A*m,e[10]=b*o+S*u+E*y+A*v,e[11]=b*h+S*f+E*x+A*w,b=s[12],S=s[13],E=s[14],A=s[15],e[12]=b*r+S*c+E*d+A*g,e[13]=b*a+S*l+E*p+A*m,e[14]=b*o+S*u+E*y+A*v,e[15]=b*h+S*f+E*x+A*w,e}static mul(e,n,s){return e}static translate(e,n,s){const r=s[0],a=s[1],o=s[2];if(n===e)e[12]=n[0]*r+n[4]*a+n[8]*o+n[12],e[13]=n[1]*r+n[5]*a+n[9]*o+n[13],e[14]=n[2]*r+n[6]*a+n[10]*o+n[14],e[15]=n[3]*r+n[7]*a+n[11]*o+n[15];else{const h=n[0],c=n[1],l=n[2],u=n[3],f=n[4],d=n[5],p=n[6],y=n[7],x=n[8],g=n[9],m=n[10],v=n[11];e[0]=h,e[1]=c,e[2]=l,e[3]=u,e[4]=f,e[5]=d,e[6]=p,e[7]=y,e[8]=x,e[9]=g,e[10]=m,e[11]=v,e[12]=h*r+f*a+x*o+n[12],e[13]=c*r+d*a+g*o+n[13],e[14]=l*r+p*a+m*o+n[14],e[15]=u*r+y*a+v*o+n[15]}return e}static scale(e,n,s){const r=s[0],a=s[1],o=s[2];return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*a,e[5]=n[5]*a,e[6]=n[6]*a,e[7]=n[7]*a,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=n[11]*o,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}static rotate(e,n,s,r){let a=r[0],o=r[1],h=r[2],c=Math.sqrt(a*a+o*o+h*h);if(c<ct)return null;c=1/c,a*=c,o*=c,h*=c;const l=Math.sin(s),u=Math.cos(s),f=1-u,d=n[0],p=n[1],y=n[2],x=n[3],g=n[4],m=n[5],v=n[6],w=n[7],b=n[8],S=n[9],E=n[10],A=n[11],M=a*a*f+u,_=o*a*f+h*l,T=h*a*f-o*l,C=a*o*f-h*l,P=o*o*f+u,R=h*o*f+a*l,k=a*h*f+o*l,I=o*h*f-a*l,L=h*h*f+u;return e[0]=d*M+g*_+b*T,e[1]=p*M+m*_+S*T,e[2]=y*M+v*_+E*T,e[3]=x*M+w*_+A*T,e[4]=d*C+g*P+b*R,e[5]=p*C+m*P+S*R,e[6]=y*C+v*P+E*R,e[7]=x*C+w*P+A*R,e[8]=d*k+g*I+b*L,e[9]=p*k+m*I+S*L,e[10]=y*k+v*I+E*L,e[11]=x*k+w*I+A*L,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e}static rotateX(e,n,s){let r=Math.sin(s),a=Math.cos(s),o=n[4],h=n[5],c=n[6],l=n[7],u=n[8],f=n[9],d=n[10],p=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=o*a+u*r,e[5]=h*a+f*r,e[6]=c*a+d*r,e[7]=l*a+p*r,e[8]=u*a-o*r,e[9]=f*a-h*r,e[10]=d*a-c*r,e[11]=p*a-l*r,e}static rotateY(e,n,s){let r=Math.sin(s),a=Math.cos(s),o=n[0],h=n[1],c=n[2],l=n[3],u=n[8],f=n[9],d=n[10],p=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*a-u*r,e[1]=h*a-f*r,e[2]=c*a-d*r,e[3]=l*a-p*r,e[8]=o*r+u*a,e[9]=h*r+f*a,e[10]=c*r+d*a,e[11]=l*r+p*a,e}static rotateZ(e,n,s){let r=Math.sin(s),a=Math.cos(s),o=n[0],h=n[1],c=n[2],l=n[3],u=n[4],f=n[5],d=n[6],p=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*a+u*r,e[1]=h*a+f*r,e[2]=c*a+d*r,e[3]=l*a+p*r,e[4]=u*a-o*r,e[5]=f*a-h*r,e[6]=d*a-c*r,e[7]=p*a-l*r,e}static fromTranslation(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}static fromScaling(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static fromRotation(e,n,s){let r=s[0],a=s[1],o=s[2],h=Math.sqrt(r*r+a*a+o*o);if(h<ct)return null;h=1/h,r*=h,a*=h,o*=h;const c=Math.sin(n),l=Math.cos(n),u=1-l;return e[0]=r*r*u+l,e[1]=a*r*u+o*c,e[2]=o*r*u-a*c,e[3]=0,e[4]=r*a*u-o*c,e[5]=a*a*u+l,e[6]=o*a*u+r*c,e[7]=0,e[8]=r*o*u+a*c,e[9]=a*o*u-r*c,e[10]=o*o*u+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static fromXRotation(e,n){let s=Math.sin(n),r=Math.cos(n);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=s,e[7]=0,e[8]=0,e[9]=-s,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static fromYRotation(e,n){let s=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=0,e[2]=-s,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=s,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static fromZRotation(e,n){const s=Math.sin(n),r=Math.cos(n);return e[0]=r,e[1]=s,e[2]=0,e[3]=0,e[4]=-s,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static fromRotationTranslation(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=r+r,l=a+a,u=o+o,f=r*c,d=r*l,p=r*u,y=a*l,x=a*u,g=o*u,m=h*c,v=h*l,w=h*u;return e[0]=1-(y+g),e[1]=d+w,e[2]=p-v,e[3]=0,e[4]=d-w,e[5]=1-(f+g),e[6]=x+m,e[7]=0,e[8]=p+v,e[9]=x-m,e[10]=1-(f+y),e[11]=0,e[12]=s[0],e[13]=s[1],e[14]=s[2],e[15]=1,e}static fromQuat2(e,n){const s=-n[0],r=-n[1],a=-n[2],o=n[3],h=n[4],c=n[5],l=n[6],u=n[7];let f=s*s+r*r+a*a+o*o;return f>0?($n[0]=(h*o+u*s+c*a-l*r)*2/f,$n[1]=(c*o+u*r+l*s-h*a)*2/f,$n[2]=(l*o+u*a+h*r-c*s)*2/f):($n[0]=(h*o+u*s+c*a-l*r)*2,$n[1]=(c*o+u*r+l*s-h*a)*2,$n[2]=(l*o+u*a+h*r-c*s)*2),Ot.fromRotationTranslation(e,n,$n),e}static normalFromMat4(e,n){const s=n[0],r=n[1],a=n[2],o=n[4],h=n[5],c=n[6],l=n[8],u=n[9],f=n[10];return e[0]=h*f-c*u,e[1]=a*u-r*f,e[2]=r*c-a*h,e[3]=0,e[4]=c*l-o*f,e[5]=s*f-a*l,e[6]=a*o-s*c,e[7]=0,e[8]=o*u-h*l,e[9]=r*l-s*u,e[10]=s*h-r*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static normalFromMat4Fast(e,n){return e}static getTranslation(e,n){return e[0]=n[12],e[1]=n[13],e[2]=n[14],e}static getScaling(e,n){const s=n[0],r=n[1],a=n[2],o=n[4],h=n[5],c=n[6],l=n[8],u=n[9],f=n[10];return e[0]=Math.sqrt(s*s+r*r+a*a),e[1]=Math.sqrt(o*o+h*h+c*c),e[2]=Math.sqrt(l*l+u*u+f*f),e}static getRotation(e,n){Ot.getScaling($n,n);const s=1/$n[0],r=1/$n[1],a=1/$n[2],o=n[0]*s,h=n[1]*r,c=n[2]*a,l=n[4]*s,u=n[5]*r,f=n[6]*a,d=n[8]*s,p=n[9]*r,y=n[10]*a,x=o+u+y;let g=0;return x>0?(g=Math.sqrt(x+1)*2,e[3]=.25*g,e[0]=(f-p)/g,e[1]=(d-c)/g,e[2]=(h-l)/g):o>u&&o>y?(g=Math.sqrt(1+o-u-y)*2,e[3]=(f-p)/g,e[0]=.25*g,e[1]=(h+l)/g,e[2]=(d+c)/g):u>y?(g=Math.sqrt(1+u-o-y)*2,e[3]=(d-c)/g,e[0]=(h+l)/g,e[1]=.25*g,e[2]=(f+p)/g):(g=Math.sqrt(1+y-o-u)*2,e[3]=(h-l)/g,e[0]=(d+c)/g,e[1]=(f+p)/g,e[2]=.25*g),e}static decompose(e,n,s,r){n[0]=r[12],n[1]=r[13],n[2]=r[14];const a=r[0],o=r[1],h=r[2],c=r[4],l=r[5],u=r[6],f=r[8],d=r[9],p=r[10];s[0]=Math.sqrt(a*a+o*o+h*h),s[1]=Math.sqrt(c*c+l*l+u*u),s[2]=Math.sqrt(f*f+d*d+p*p);const y=1/s[0],x=1/s[1],g=1/s[2],m=a*y,v=o*x,w=h*g,b=c*y,S=l*x,E=u*g,A=f*y,M=d*x,_=p*g,T=m+S+_;let C=0;return T>0?(C=Math.sqrt(T+1)*2,e[3]=.25*C,e[0]=(E-M)/C,e[1]=(A-w)/C,e[2]=(v-b)/C):m>S&&m>_?(C=Math.sqrt(1+m-S-_)*2,e[3]=(E-M)/C,e[0]=.25*C,e[1]=(v+b)/C,e[2]=(A+w)/C):S>_?(C=Math.sqrt(1+S-m-_)*2,e[3]=(A-w)/C,e[0]=(v+b)/C,e[1]=.25*C,e[2]=(E+M)/C):(C=Math.sqrt(1+_-m-S)*2,e[3]=(v-b)/C,e[0]=(A+w)/C,e[1]=(E+M)/C,e[2]=.25*C),e}static fromRotationTranslationScale(e,n,s,r){const a=n[0],o=n[1],h=n[2],c=n[3],l=a+a,u=o+o,f=h+h,d=a*l,p=a*u,y=a*f,x=o*u,g=o*f,m=h*f,v=c*l,w=c*u,b=c*f,S=r[0],E=r[1],A=r[2];return e[0]=(1-(x+m))*S,e[1]=(p+b)*S,e[2]=(y-w)*S,e[3]=0,e[4]=(p-b)*E,e[5]=(1-(d+m))*E,e[6]=(g+v)*E,e[7]=0,e[8]=(y+w)*A,e[9]=(g-v)*A,e[10]=(1-(d+x))*A,e[11]=0,e[12]=s[0],e[13]=s[1],e[14]=s[2],e[15]=1,e}static fromRotationTranslationScaleOrigin(e,n,s,r,a){const o=n[0],h=n[1],c=n[2],l=n[3],u=o+o,f=h+h,d=c+c,p=o*u,y=o*f,x=o*d,g=h*f,m=h*d,v=c*d,w=l*u,b=l*f,S=l*d,E=r[0],A=r[1],M=r[2],_=a[0],T=a[1],C=a[2],P=(1-(g+v))*E,R=(y+S)*E,k=(x-b)*E,I=(y-S)*A,L=(1-(p+v))*A,F=(m+w)*A,B=(x+b)*M,V=(m-w)*M,J=(1-(p+g))*M;return e[0]=P,e[1]=R,e[2]=k,e[3]=0,e[4]=I,e[5]=L,e[6]=F,e[7]=0,e[8]=B,e[9]=V,e[10]=J,e[11]=0,e[12]=s[0]+_-(P*_+I*T+B*C),e[13]=s[1]+T-(R*_+L*T+V*C),e[14]=s[2]+C-(k*_+F*T+J*C),e[15]=1,e}static fromQuat(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=s+s,c=r+r,l=a+a,u=s*h,f=r*h,d=r*c,p=a*h,y=a*c,x=a*l,g=o*h,m=o*c,v=o*l;return e[0]=1-d-x,e[1]=f+v,e[2]=p-m,e[3]=0,e[4]=f-v,e[5]=1-u-x,e[6]=y+g,e[7]=0,e[8]=p+m,e[9]=y-g,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static frustumNO(e,n,s,r,a,o,h=1/0){const c=1/(s-n),l=1/(a-r);if(e[0]=o*2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(s+n)*c,e[9]=(a+r)*l,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0){const u=1/(o-h);e[10]=(h+o)*u,e[14]=2*h*o*u}else e[10]=-1,e[14]=-2*o;return e}static frustum(e,n,s,r,a,o,h=1/0){return e}static frustumZO(e,n,s,r,a,o,h=1/0){const c=1/(s-n),l=1/(a-r);if(e[0]=o*2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(s+n)*c,e[9]=(a+r)*l,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0){const u=1/(o-h);e[10]=h*u,e[14]=h*o*u}else e[10]=-1,e[14]=-o;return e}static perspectiveNO(e,n,s,r,a=1/0){const o=1/Math.tan(n/2);if(e[0]=o/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0){const h=1/(r-a);e[10]=(a+r)*h,e[14]=2*a*r*h}else e[10]=-1,e[14]=-2*r;return e}static perspective(e,n,s,r,a=1/0){return e}static perspectiveZO(e,n,s,r,a=1/0){const o=1/Math.tan(n/2);if(e[0]=o/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0){const h=1/(r-a);e[10]=a*h,e[14]=a*r*h}else e[10]=-1,e[14]=-r;return e}static perspectiveFromFieldOfView(e,n,s,r){const a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),h=Math.tan(n.leftDegrees*Math.PI/180),c=Math.tan(n.rightDegrees*Math.PI/180),l=2/(h+c),u=2/(a+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((h-c)*l*.5),e[9]=(a-o)*u*.5,e[10]=r/(s-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*s/(s-r),e[15]=0,e}static orthoNO(e,n,s,r,a,o,h){const c=1/(n-s),l=1/(r-a),u=1/(o-h);return e[0]=-2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(n+s)*c,e[13]=(a+r)*l,e[14]=(h+o)*u,e[15]=1,e}static ortho(e,n,s,r,a,o,h){return e}static orthoZO(e,n,s,r,a,o,h){const c=1/(n-s),l=1/(r-a),u=1/(o-h);return e[0]=-2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(n+s)*c,e[13]=(a+r)*l,e[14]=o*u,e[15]=1,e}static lookAt(e,n,s,r){const a=n[0],o=n[1],h=n[2],c=r[0],l=r[1],u=r[2],f=s[0],d=s[1],p=s[2];if(Math.abs(a-f)<ct&&Math.abs(o-d)<ct&&Math.abs(h-p)<ct)return Ot.identity(e);let y=a-f,x=o-d,g=h-p,m=1/Math.sqrt(y*y+x*x+g*g);y*=m,x*=m,g*=m;let v=l*g-u*x,w=u*y-c*g,b=c*x-l*y;m=Math.sqrt(v*v+w*w+b*b),m?(m=1/m,v*=m,w*=m,b*=m):(v=0,w=0,b=0);let S=x*b-g*w,E=g*v-y*b,A=y*w-x*v;return m=Math.sqrt(S*S+E*E+A*A),m?(m=1/m,S*=m,E*=m,A*=m):(S=0,E=0,A=0),e[0]=v,e[1]=S,e[2]=y,e[3]=0,e[4]=w,e[5]=E,e[6]=x,e[7]=0,e[8]=b,e[9]=A,e[10]=g,e[11]=0,e[12]=-(v*a+w*o+b*h),e[13]=-(S*a+E*o+A*h),e[14]=-(y*a+x*o+g*h),e[15]=1,e}static targetTo(e,n,s,r){const a=n[0],o=n[1],h=n[2],c=r[0],l=r[1],u=r[2];let f=a-s[0],d=o-s[1],p=h-s[2],y=f*f+d*d+p*p;y>0&&(y=1/Math.sqrt(y),f*=y,d*=y,p*=y);let x=l*p-u*d,g=u*f-c*p,m=c*d-l*f;return y=x*x+g*g+m*m,y>0&&(y=1/Math.sqrt(y),x*=y,g*=y,m*=y),e[0]=x,e[1]=g,e[2]=m,e[3]=0,e[4]=d*m-p*g,e[5]=p*x-f*m,e[6]=f*g-d*x,e[7]=0,e[8]=f,e[9]=d,e[10]=p,e[11]=0,e[12]=a,e[13]=o,e[14]=h,e[15]=1,e}static frob(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8]+e[9]*e[9]+e[10]*e[10]+e[11]*e[11]+e[12]*e[12]+e[13]*e[13]+e[14]*e[14]+e[15]*e[15])}static add(e,n,s){return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e[3]=n[3]+s[3],e[4]=n[4]+s[4],e[5]=n[5]+s[5],e[6]=n[6]+s[6],e[7]=n[7]+s[7],e[8]=n[8]+s[8],e[9]=n[9]+s[9],e[10]=n[10]+s[10],e[11]=n[11]+s[11],e[12]=n[12]+s[12],e[13]=n[13]+s[13],e[14]=n[14]+s[14],e[15]=n[15]+s[15],e}static subtract(e,n,s){return e[0]=n[0]-s[0],e[1]=n[1]-s[1],e[2]=n[2]-s[2],e[3]=n[3]-s[3],e[4]=n[4]-s[4],e[5]=n[5]-s[5],e[6]=n[6]-s[6],e[7]=n[7]-s[7],e[8]=n[8]-s[8],e[9]=n[9]-s[9],e[10]=n[10]-s[10],e[11]=n[11]-s[11],e[12]=n[12]-s[12],e[13]=n[13]-s[13],e[14]=n[14]-s[14],e[15]=n[15]-s[15],e}static sub(e,n,s){return e}static multiplyScalar(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=n[3]*s,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=n[7]*s,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=n[11]*s,e[12]=n[12]*s,e[13]=n[13]*s,e[14]=n[14]*s,e[15]=n[15]*s,e}static multiplyScalarAndAdd(e,n,s,r){return e[0]=n[0]+s[0]*r,e[1]=n[1]+s[1]*r,e[2]=n[2]+s[2]*r,e[3]=n[3]+s[3]*r,e[4]=n[4]+s[4]*r,e[5]=n[5]+s[5]*r,e[6]=n[6]+s[6]*r,e[7]=n[7]+s[7]*r,e[8]=n[8]+s[8]*r,e[9]=n[9]+s[9]*r,e[10]=n[10]+s[10]*r,e[11]=n[11]+s[11]*r,e[12]=n[12]+s[12]*r,e[13]=n[13]+s[13]*r,e[14]=n[14]+s[14]*r,e[15]=n[15]+s[15]*r,e}static exactEquals(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]&&e[9]===n[9]&&e[10]===n[10]&&e[11]===n[11]&&e[12]===n[12]&&e[13]===n[13]&&e[14]===n[14]&&e[15]===n[15]}static equals(e,n){const s=e[0],r=e[1],a=e[2],o=e[3],h=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=e[9],p=e[10],y=e[11],x=e[12],g=e[13],m=e[14],v=e[15],w=n[0],b=n[1],S=n[2],E=n[3],A=n[4],M=n[5],_=n[6],T=n[7],C=n[8],P=n[9],R=n[10],k=n[11],I=n[12],L=n[13],F=n[14],B=n[15];return Math.abs(s-w)<=ct*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(r-b)<=ct*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(a-S)<=ct*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(o-E)<=ct*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(h-A)<=ct*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(c-M)<=ct*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(l-_)<=ct*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-T)<=ct*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(f-C)<=ct*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-P)<=ct*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-R)<=ct*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(y-k)<=ct*Math.max(1,Math.abs(y),Math.abs(k))&&Math.abs(x-I)<=ct*Math.max(1,Math.abs(x),Math.abs(I))&&Math.abs(g-L)<=ct*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(m-F)<=ct*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(v-B)<=ct*Math.max(1,Math.abs(v),Math.abs(B))}static str(e){return`Mat4(${e.join(", ")})`}}const $n=new Float32Array(3);Ot.prototype.mul=Ot.prototype.multiply,Ot.sub=Ot.subtract,Ot.mul=Ot.multiply,Ot.frustum=Ot.frustumNO,Ot.perspective=Ot.perspectiveNO,Ot.ortho=Ot.orthoNO,Ot.normalFromMat4Fast=Ot.normalFromMat4;const wy=Ot;class vt extends Float32Array{static BYTE_LENGTH=3*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 3:super(e);break;case 2:super(e[0],e[1],3);break;case 1:{const n=e[0];typeof n=="number"?super([n,n,n]):super(n,0,3);break}default:super(3);break}}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get z(){return this[2]}set z(e){this[2]=e}get r(){return this[0]}set r(e){this[0]=e}get g(){return this[1]}set g(e){this[1]=e}get b(){return this[2]}set b(e){this[2]=e}get magnitude(){const e=this[0],n=this[1],s=this[2];return Math.sqrt(e*e+n*n+s*s)}get mag(){return this.magnitude}get squaredMagnitude(){const e=this[0],n=this[1],s=this[2];return e*e+n*n+s*s}get sqrMag(){return this.squaredMagnitude}get str(){return vt.str(this)}copy(e){return this.set(e),this}add(e){return this[0]+=e[0],this[1]+=e[1],this[2]+=e[2],this}subtract(e){return this[0]-=e[0],this[1]-=e[1],this[2]-=e[2],this}sub(e){return this}multiply(e){return this[0]*=e[0],this[1]*=e[1],this[2]*=e[2],this}mul(e){return this}divide(e){return this[0]/=e[0],this[1]/=e[1],this[2]/=e[2],this}div(e){return this}scale(e){return this[0]*=e,this[1]*=e,this[2]*=e,this}scaleAndAdd(e,n){return this[0]+=e[0]*n,this[1]+=e[1]*n,this[2]+=e[2]*n,this}distance(e){return vt.distance(this,e)}dist(e){return 0}squaredDistance(e){return vt.squaredDistance(this,e)}sqrDist(e){return 0}negate(){return this[0]*=-1,this[1]*=-1,this[2]*=-1,this}invert(){return this[0]=1/this[0],this[1]=1/this[1],this[2]=1/this[2],this}abs(){return this[0]=Math.abs(this[0]),this[1]=Math.abs(this[1]),this[2]=Math.abs(this[2]),this}dot(e){return this[0]*e[0]+this[1]*e[1]+this[2]*e[2]}normalize(){return vt.normalize(this,this)}static create(){return new vt}static clone(e){return new vt(e)}static magnitude(e){let n=e[0],s=e[1],r=e[2];return Math.sqrt(n*n+s*s+r*r)}static mag(e){return 0}static length(e){return 0}static len(e){return 0}static fromValues(e,n,s){return new vt(e,n,s)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}static set(e,n,s,r){return e[0]=n,e[1]=s,e[2]=r,e}static add(e,n,s){return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e}static subtract(e,n,s){return e[0]=n[0]-s[0],e[1]=n[1]-s[1],e[2]=n[2]-s[2],e}static sub(e,n,s){return[0,0,0]}static multiply(e,n,s){return e[0]=n[0]*s[0],e[1]=n[1]*s[1],e[2]=n[2]*s[2],e}static mul(e,n,s){return[0,0,0]}static divide(e,n,s){return e[0]=n[0]/s[0],e[1]=n[1]/s[1],e[2]=n[2]/s[2],e}static div(e,n,s){return[0,0,0]}static ceil(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e}static floor(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e}static min(e,n,s){return e[0]=Math.min(n[0],s[0]),e[1]=Math.min(n[1],s[1]),e[2]=Math.min(n[2],s[2]),e}static max(e,n,s){return e[0]=Math.max(n[0],s[0]),e[1]=Math.max(n[1],s[1]),e[2]=Math.max(n[2],s[2]),e}static scale(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e}static scaleAndAdd(e,n,s,r){return e[0]=n[0]+s[0]*r,e[1]=n[1]+s[1]*r,e[2]=n[2]+s[2]*r,e}static distance(e,n){const s=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2];return Math.sqrt(s*s+r*r+a*a)}static dist(e,n){return 0}static squaredDistance(e,n){const s=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2];return s*s+r*r+a*a}static sqrDist(e,n){return 0}static squaredLength(e){const n=e[0],s=e[1],r=e[2];return n*n+s*s+r*r}static sqrLen(e,n){return 0}static negate(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e}static inverse(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e}static abs(e,n){return e[0]=Math.abs(n[0]),e[1]=Math.abs(n[1]),e[2]=Math.abs(n[2]),e}static normalize(e,n){const s=n[0],r=n[1],a=n[2];let o=s*s+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e}static dot(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}static cross(e,n,s){const r=n[0],a=n[1],o=n[2],h=s[0],c=s[1],l=s[2];return e[0]=a*l-o*c,e[1]=o*h-r*l,e[2]=r*c-a*h,e}static lerp(e,n,s,r){const a=n[0],o=n[1],h=n[2];return e[0]=a+r*(s[0]-a),e[1]=o+r*(s[1]-o),e[2]=h+r*(s[2]-h),e}static slerp(e,n,s,r){const a=Math.acos(Math.min(Math.max(vt.dot(n,s),-1),1)),o=Math.sin(a),h=Math.sin((1-r)*a)/o,c=Math.sin(r*a)/o;return e[0]=h*n[0]+c*s[0],e[1]=h*n[1]+c*s[1],e[2]=h*n[2]+c*s[2],e}static hermite(e,n,s,r,a,o){const h=o*o,c=h*(2*o-3)+1,l=h*(o-2)+o,u=h*(o-1),f=h*(3-2*o);return e[0]=n[0]*c+s[0]*l+r[0]*u+a[0]*f,e[1]=n[1]*c+s[1]*l+r[1]*u+a[1]*f,e[2]=n[2]*c+s[2]*l+r[2]*u+a[2]*f,e}static bezier(e,n,s,r,a,o){const h=1-o,c=h*h,l=o*o,u=c*h,f=3*o*c,d=3*l*h,p=l*o;return e[0]=n[0]*u+s[0]*f+r[0]*d+a[0]*p,e[1]=n[1]*u+s[1]*f+r[1]*d+a[1]*p,e[2]=n[2]*u+s[2]*f+r[2]*d+a[2]*p,e}static transformMat4(e,n,s){const r=n[0],a=n[1],o=n[2],h=s[3]*r+s[7]*a+s[11]*o+s[15]||1;return e[0]=(s[0]*r+s[4]*a+s[8]*o+s[12])/h,e[1]=(s[1]*r+s[5]*a+s[9]*o+s[13])/h,e[2]=(s[2]*r+s[6]*a+s[10]*o+s[14])/h,e}static transformMat3(e,n,s){let r=n[0],a=n[1],o=n[2];return e[0]=r*s[0]+a*s[3]+o*s[6],e[1]=r*s[1]+a*s[4]+o*s[7],e[2]=r*s[2]+a*s[5]+o*s[8],e}static transformQuat(e,n,s){const r=s[0],a=s[1],o=s[2],h=s[3]*2,c=n[0],l=n[1],u=n[2],f=a*u-o*l,d=o*c-r*u,p=r*l-a*c,y=(a*p-o*d)*2,x=(o*f-r*p)*2,g=(r*d-a*f)*2;return e[0]=c+f*h+y,e[1]=l+d*h+x,e[2]=u+p*h+g,e}static rotateX(e,n,s,r){const a=s[1],o=s[2],h=n[1]-a,c=n[2]-o;return e[0]=n[0],e[1]=h*Math.cos(r)-c*Math.sin(r)+a,e[2]=h*Math.sin(r)+c*Math.cos(r)+o,e}static rotateY(e,n,s,r){const a=s[0],o=s[2],h=n[0]-a,c=n[2]-o;return e[0]=c*Math.sin(r)+h*Math.cos(r)+a,e[1]=n[1],e[2]=c*Math.cos(r)-h*Math.sin(r)+o,e}static rotateZ(e,n,s,r){const a=s[0],o=s[1],h=n[0]-a,c=n[1]-o;return e[0]=h*Math.cos(r)-c*Math.sin(r)+a,e[1]=h*Math.sin(r)+c*Math.cos(r)+o,e[2]=s[2],e}static angle(e,n){const s=e[0],r=e[1],a=e[2],o=n[0],h=n[1],c=n[2],l=Math.sqrt((s*s+r*r+a*a)*(o*o+h*h+c*c)),u=l&&vt.dot(e,n)/l;return Math.acos(Math.min(Math.max(u,-1),1))}static zero(e){return e[0]=0,e[1]=0,e[2]=0,e}static str(e){return`Vec3(${e.join(", ")})`}static exactEquals(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}static equals(e,n){const s=e[0],r=e[1],a=e[2],o=n[0],h=n[1],c=n[2];return Math.abs(s-o)<=ct*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(r-h)<=ct*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-c)<=ct*Math.max(1,Math.abs(a),Math.abs(c))}}vt.prototype.sub=vt.prototype.subtract,vt.prototype.mul=vt.prototype.multiply,vt.prototype.div=vt.prototype.divide,vt.prototype.dist=vt.prototype.distance,vt.prototype.sqrDist=vt.prototype.squaredDistance,vt.sub=vt.subtract,vt.mul=vt.multiply,vt.div=vt.divide,vt.dist=vt.distance,vt.sqrDist=vt.squaredDistance,vt.sqrLen=vt.squaredLength,vt.mag=vt.magnitude,vt.length=vt.magnitude,vt.len=vt.magnitude;const Ei=vt;class gt extends Float32Array{static BYTE_LENGTH=4*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 4:super(e);break;case 2:super(e[0],e[1],4);break;case 1:{const n=e[0];typeof n=="number"?super([n,n,n,n]):super(n,0,4);break}default:super(4);break}}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get z(){return this[2]}set z(e){this[2]=e}get w(){return this[3]}set w(e){this[3]=e}get r(){return this[0]}set r(e){this[0]=e}get g(){return this[1]}set g(e){this[1]=e}get b(){return this[2]}set b(e){this[2]=e}get a(){return this[3]}set a(e){this[3]=e}get magnitude(){const e=this[0],n=this[1],s=this[2],r=this[3];return Math.sqrt(e*e+n*n+s*s+r*r)}get mag(){return this.magnitude}get str(){return gt.str(this)}copy(e){return super.set(e),this}add(e){return this[0]+=e[0],this[1]+=e[1],this[2]+=e[2],this[3]+=e[3],this}subtract(e){return this[0]-=e[0],this[1]-=e[1],this[2]-=e[2],this[3]-=e[3],this}sub(e){return this}multiply(e){return this[0]*=e[0],this[1]*=e[1],this[2]*=e[2],this[3]*=e[3],this}mul(e){return this}divide(e){return this[0]/=e[0],this[1]/=e[1],this[2]/=e[2],this[3]/=e[3],this}div(e){return this}scale(e){return this[0]*=e,this[1]*=e,this[2]*=e,this[3]*=e,this}scaleAndAdd(e,n){return this[0]+=e[0]*n,this[1]+=e[1]*n,this[2]+=e[2]*n,this[3]+=e[3]*n,this}distance(e){return gt.distance(this,e)}dist(e){return 0}squaredDistance(e){return gt.squaredDistance(this,e)}sqrDist(e){return 0}negate(){return this[0]*=-1,this[1]*=-1,this[2]*=-1,this[3]*=-1,this}invert(){return this[0]=1/this[0],this[1]=1/this[1],this[2]=1/this[2],this[3]=1/this[3],this}abs(){return this[0]=Math.abs(this[0]),this[1]=Math.abs(this[1]),this[2]=Math.abs(this[2]),this[3]=Math.abs(this[3]),this}dot(e){return this[0]*e[0]+this[1]*e[1]+this[2]*e[2]+this[3]*e[3]}normalize(){return gt.normalize(this,this)}static create(){return new gt}static clone(e){return new gt(e)}static fromValues(e,n,s,r){return new gt(e,n,s,r)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}static set(e,n,s,r,a){return e[0]=n,e[1]=s,e[2]=r,e[3]=a,e}static add(e,n,s){return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e[3]=n[3]+s[3],e}static subtract(e,n,s){return e[0]=n[0]-s[0],e[1]=n[1]-s[1],e[2]=n[2]-s[2],e[3]=n[3]-s[3],e}static sub(e,n,s){return e}static multiply(e,n,s){return e[0]=n[0]*s[0],e[1]=n[1]*s[1],e[2]=n[2]*s[2],e[3]=n[3]*s[3],e}static mul(e,n,s){return e}static divide(e,n,s){return e[0]=n[0]/s[0],e[1]=n[1]/s[1],e[2]=n[2]/s[2],e[3]=n[3]/s[3],e}static div(e,n,s){return e}static ceil(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e[3]=Math.ceil(n[3]),e}static floor(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e[3]=Math.floor(n[3]),e}static min(e,n,s){return e[0]=Math.min(n[0],s[0]),e[1]=Math.min(n[1],s[1]),e[2]=Math.min(n[2],s[2]),e[3]=Math.min(n[3],s[3]),e}static max(e,n,s){return e[0]=Math.max(n[0],s[0]),e[1]=Math.max(n[1],s[1]),e[2]=Math.max(n[2],s[2]),e[3]=Math.max(n[3],s[3]),e}static round(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e[3]=Math.round(n[3]),e}static scale(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=n[3]*s,e}static scaleAndAdd(e,n,s,r){return e[0]=n[0]+s[0]*r,e[1]=n[1]+s[1]*r,e[2]=n[2]+s[2]*r,e[3]=n[3]+s[3]*r,e}static distance(e,n){const s=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2],o=n[3]-e[3];return Math.hypot(s,r,a,o)}static dist(e,n){return 0}static squaredDistance(e,n){const s=n[0]-e[0],r=n[1]-e[1],a=n[2]-e[2],o=n[3]-e[3];return s*s+r*r+a*a+o*o}static sqrDist(e,n){return 0}static magnitude(e){const n=e[0],s=e[1],r=e[2],a=e[3];return Math.sqrt(n*n+s*s+r*r+a*a)}static mag(e){return 0}static length(e){return 0}static len(e){return 0}static squaredLength(e){const n=e[0],s=e[1],r=e[2],a=e[3];return n*n+s*s+r*r+a*a}static sqrLen(e){return 0}static negate(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e}static inverse(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e}static abs(e,n){return e[0]=Math.abs(n[0]),e[1]=Math.abs(n[1]),e[2]=Math.abs(n[2]),e[3]=Math.abs(n[3]),e}static normalize(e,n){const s=n[0],r=n[1],a=n[2],o=n[3];let h=s*s+r*r+a*a+o*o;return h>0&&(h=1/Math.sqrt(h)),e[0]=s*h,e[1]=r*h,e[2]=a*h,e[3]=o*h,e}static dot(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}static cross(e,n,s,r){const a=s[0]*r[1]-s[1]*r[0],o=s[0]*r[2]-s[2]*r[0],h=s[0]*r[3]-s[3]*r[0],c=s[1]*r[2]-s[2]*r[1],l=s[1]*r[3]-s[3]*r[1],u=s[2]*r[3]-s[3]*r[2],f=n[0],d=n[1],p=n[2],y=n[3];return e[0]=d*u-p*l+y*c,e[1]=-(f*u)+p*h-y*o,e[2]=f*l-d*h+y*a,e[3]=-(f*c)+d*o-p*a,e}static lerp(e,n,s,r){const a=n[0],o=n[1],h=n[2],c=n[3];return e[0]=a+r*(s[0]-a),e[1]=o+r*(s[1]-o),e[2]=h+r*(s[2]-h),e[3]=c+r*(s[3]-c),e}static transformMat4(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3];return e[0]=s[0]*r+s[4]*a+s[8]*o+s[12]*h,e[1]=s[1]*r+s[5]*a+s[9]*o+s[13]*h,e[2]=s[2]*r+s[6]*a+s[10]*o+s[14]*h,e[3]=s[3]*r+s[7]*a+s[11]*o+s[15]*h,e}static transformQuat(e,n,s){const r=n[0],a=n[1],o=n[2],h=s[0],c=s[1],l=s[2],u=s[3],f=u*r+c*o-l*a,d=u*a+l*r-h*o,p=u*o+h*a-c*r,y=-h*r-c*a-l*o;return e[0]=f*u+y*-h+d*-l-p*-c,e[1]=d*u+y*-c+p*-h-f*-l,e[2]=p*u+y*-l+f*-c-d*-h,e[3]=n[3],e}static zero(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}static str(e){return`Vec4(${e.join(", ")})`}static exactEquals(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]}static equals(e,n){const s=e[0],r=e[1],a=e[2],o=e[3],h=n[0],c=n[1],l=n[2],u=n[3];return Math.abs(s-h)<=ct*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(r-c)<=ct*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-l)<=ct*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-u)<=ct*Math.max(1,Math.abs(o),Math.abs(u))}}gt.prototype.sub=gt.prototype.subtract,gt.prototype.mul=gt.prototype.multiply,gt.prototype.div=gt.prototype.divide,gt.prototype.dist=gt.prototype.distance,gt.prototype.sqrDist=gt.prototype.squaredDistance,gt.sub=gt.subtract,gt.mul=gt.multiply,gt.div=gt.divide,gt.dist=gt.distance,gt.sqrDist=gt.squaredDistance,gt.sqrLen=gt.squaredLength,gt.mag=gt.magnitude,gt.length=gt.magnitude,gt.len=gt.magnitude;const Ps=gt;class pt extends Float32Array{static BYTE_LENGTH=4*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 4:super(e);break;case 2:super(e[0],e[1],4);break;case 1:{const n=e[0];typeof n=="number"?super([n,n,n,n]):super(n,0,4);break}default:super(4),this[3]=1;break}}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get z(){return this[2]}set z(e){this[2]=e}get w(){return this[3]}set w(e){this[3]=e}get magnitude(){const e=this[0],n=this[1],s=this[2],r=this[3];return Math.sqrt(e*e+n*n+s*s+r*r)}get mag(){return this.magnitude}get str(){return pt.str(this)}copy(e){return super.set(e),this}identity(){return this[0]=0,this[1]=0,this[2]=0,this[3]=1,this}multiply(e){return pt.multiply(this,this,e)}mul(e){return this}rotateX(e){return pt.rotateX(this,this,e)}rotateY(e){return pt.rotateY(this,this,e)}rotateZ(e){return pt.rotateZ(this,this,e)}invert(){return pt.invert(this,this)}scale(e){return this[0]*=e,this[1]*=e,this[2]*=e,this[3]*=e,this}dot(e){return pt.dot(this,e)}static create(){return new pt}static identity(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}static setAxisAngle(e,n,s){s=s*.5;const r=Math.sin(s);return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=Math.cos(s),e}static getAxisAngle(e,n){const s=Math.acos(n[3])*2,r=Math.sin(s/2);return r>ct?(e[0]=n[0]/r,e[1]=n[1]/r,e[2]=n[2]/r):(e[0]=1,e[1]=0,e[2]=0),s}static getAngle(e,n){const s=pt.dot(e,n);return Math.acos(2*s*s-1)}static multiply(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=s[0],l=s[1],u=s[2],f=s[3];return e[0]=r*f+h*c+a*u-o*l,e[1]=a*f+h*l+o*c-r*u,e[2]=o*f+h*u+r*l-a*c,e[3]=h*f-r*c-a*l-o*u,e}static rotateX(e,n,s){s*=.5;const r=n[0],a=n[1],o=n[2],h=n[3],c=Math.sin(s),l=Math.cos(s);return e[0]=r*l+h*c,e[1]=a*l+o*c,e[2]=o*l-a*c,e[3]=h*l-r*c,e}static rotateY(e,n,s){s*=.5;const r=n[0],a=n[1],o=n[2],h=n[3],c=Math.sin(s),l=Math.cos(s);return e[0]=r*l-o*c,e[1]=a*l+h*c,e[2]=o*l+r*c,e[3]=h*l-a*c,e}static rotateZ(e,n,s){s*=.5;const r=n[0],a=n[1],o=n[2],h=n[3],c=Math.sin(s),l=Math.cos(s);return e[0]=r*l+a*c,e[1]=a*l-r*c,e[2]=o*l+h*c,e[3]=h*l-o*c,e}static calculateW(e,n){const s=n[0],r=n[1],a=n[2];return e[0]=s,e[1]=r,e[2]=a,e[3]=Math.sqrt(Math.abs(1-s*s-r*r-a*a)),e}static exp(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=Math.sqrt(s*s+r*r+a*a),c=Math.exp(o),l=h>0?c*Math.sin(h)/h:0;return e[0]=s*l,e[1]=r*l,e[2]=a*l,e[3]=c*Math.cos(h),e}static ln(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=Math.sqrt(s*s+r*r+a*a),c=h>0?Math.atan2(h,o)/h:0;return e[0]=s*c,e[1]=r*c,e[2]=a*c,e[3]=.5*Math.log(s*s+r*r+a*a+o*o),e}static pow(e,n,s){return pt.ln(e,n),pt.scale(e,e,s),pt.exp(e,e),e}static slerp(e,n,s,r){const a=n[0],o=n[1],h=n[2],c=n[3];let l=s[0],u=s[1],f=s[2],d=s[3],p,y,x=a*l+o*u+h*f+c*d;if(x<0&&(x=-x,l=-l,u=-u,f=-f,d=-d),1-x>ct){const g=Math.acos(x),m=Math.sin(g);p=Math.sin((1-r)*g)/m,y=Math.sin(r*g)/m}else p=1-r,y=r;return e[0]=p*a+y*l,e[1]=p*o+y*u,e[2]=p*h+y*f,e[3]=p*c+y*d,e}static invert(e,n){const s=n[0],r=n[1],a=n[2],o=n[3],h=s*s+r*r+a*a+o*o,c=h?1/h:0;return e[0]=-s*c,e[1]=-r*c,e[2]=-a*c,e[3]=o*c,e}static conjugate(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e}static fromMat3(e,n){const s=n[0]+n[4]+n[8];let r;if(s>0)r=Math.sqrt(s+1),e[3]=.5*r,r=.5/r,e[0]=(n[5]-n[7])*r,e[1]=(n[6]-n[2])*r,e[2]=(n[1]-n[3])*r;else{let a=0;n[4]>n[0]&&(a=1),n[8]>n[a*3+a]&&(a=2);let o=(a+1)%3,h=(a+2)%3;r=Math.sqrt(n[a*3+a]-n[o*3+o]-n[h*3+h]+1),e[a]=.5*r,r=.5/r,e[3]=(n[o*3+h]-n[h*3+o])*r,e[o]=(n[o*3+a]+n[a*3+o])*r,e[h]=(n[h*3+a]+n[a*3+h])*r}return e}static fromEuler(e,n,s,r,a=Z3){let o=.5*Math.PI/180;n*=o,s*=o,r*=o;let h=Math.sin(n),c=Math.cos(n),l=Math.sin(s),u=Math.cos(s),f=Math.sin(r),d=Math.cos(r);switch(a){case"xyz":e[0]=h*u*d+c*l*f,e[1]=c*l*d-h*u*f,e[2]=c*u*f+h*l*d,e[3]=c*u*d-h*l*f;break;case"xzy":e[0]=h*u*d-c*l*f,e[1]=c*l*d-h*u*f,e[2]=c*u*f+h*l*d,e[3]=c*u*d+h*l*f;break;case"yxz":e[0]=h*u*d+c*l*f,e[1]=c*l*d-h*u*f,e[2]=c*u*f-h*l*d,e[3]=c*u*d+h*l*f;break;case"yzx":e[0]=h*u*d+c*l*f,e[1]=c*l*d+h*u*f,e[2]=c*u*f-h*l*d,e[3]=c*u*d-h*l*f;break;case"zxy":e[0]=h*u*d-c*l*f,e[1]=c*l*d+h*u*f,e[2]=c*u*f+h*l*d,e[3]=c*u*d-h*l*f;break;case"zyx":e[0]=h*u*d-c*l*f,e[1]=c*l*d+h*u*f,e[2]=c*u*f-h*l*d,e[3]=c*u*d+h*l*f;break;default:throw new Error("Unknown angle order "+a)}return e}static str(e){return`Quat(${e.join(", ")})`}static clone(e){return new pt(e)}static fromValues(e,n,s,r){return new pt(e,n,s,r)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}static set(e,n,s,r,a){return e}static add(e,n,s){return e}static mul(e,n,s){return e}static scale(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=n[3]*s,e}static dot(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}static lerp(e,n,s,r){return e}static magnitude(e){return 0}static mag(e){return 0}static length(e){return 0}static len(e){return 0}static squaredLength(e){return 0}static sqrLen(e){return 0}static normalize(e,n){return e}static exactEquals(e,n){return!1}static equals(e,n){return!1}static rotationTo(e,n,s){let r=vt.dot(n,s);return r<-.999999?(vt.cross(hi,J3,n),vt.mag(hi)<1e-6&&vt.cross(hi,Q3,n),vt.normalize(hi,hi),pt.setAxisAngle(e,hi,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(vt.cross(hi,n,s),e[0]=hi[0],e[1]=hi[1],e[2]=hi[2],e[3]=1+r,pt.normalize(e,e))}static sqlerp(e,n,s,r,a,o){return pt.slerp(My,n,a,o),pt.slerp(by,s,r,o),pt.slerp(e,My,by,2*o*(1-o)),e}static setAxes(e,n,s,r){return oi[0]=s[0],oi[3]=s[1],oi[6]=s[2],oi[1]=r[0],oi[4]=r[1],oi[7]=r[2],oi[2]=-n[0],oi[5]=-n[1],oi[8]=-n[2],pt.normalize(e,pt.fromMat3(e,oi))}}const My=new Float32Array(4),by=new Float32Array(4),oi=new Float32Array(9),hi=new Float32Array(3),J3=new Float32Array([1,0,0]),Q3=new Float32Array([0,1,0]);pt.set=gt.set,pt.add=gt.add,pt.lerp=gt.lerp,pt.normalize=gt.normalize,pt.squaredLength=gt.squaredLength,pt.sqrLen=gt.squaredLength,pt.exactEquals=gt.exactEquals,pt.equals=gt.equals,pt.magnitude=gt.magnitude,pt.prototype.mul=pt.prototype.multiply,pt.mul=pt.multiply,pt.mag=pt.magnitude,pt.length=pt.magnitude,pt.len=pt.magnitude;const K3=pt;class de extends Float32Array{static BYTE_LENGTH=8*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 8:super(e);break;case 2:super(e[0],e[1],8);break;case 1:{const n=e[0];typeof n=="number"?super([n,n,n,n,n,n,n,n]):super(n,0,8);break}default:super(8),this[3]=1;break}}get str(){return de.str(this)}copy(e){return super.set(e),this}static create(){return new de}static clone(e){return new de(e)}static fromValues(e,n,s,r,a,o,h,c){return new de(e,n,s,r,a,o,h,c)}static fromRotationTranslationValues(e,n,s,r,a,o,h){const c=a*.5,l=o*.5,u=h*.5;return new de(e,n,s,r,c*r+l*s-u*n,l*r+u*e-c*s,u*r+c*n-l*e,-c*e-l*n-u*s)}static fromRotationTranslation(e,n,s){const r=s[0]*.5,a=s[1]*.5,o=s[2]*.5,h=n[0],c=n[1],l=n[2],u=n[3];return e[0]=h,e[1]=c,e[2]=l,e[3]=u,e[4]=r*u+a*l-o*c,e[5]=a*u+o*h-r*l,e[6]=o*u+r*c-a*h,e[7]=-r*h-a*c-o*l,e}static fromTranslation(e,n){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=n[0]*.5,e[5]=n[1]*.5,e[6]=n[2]*.5,e[7]=0,e}static fromRotation(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}static fromMat4(e,n){return Ot.getRotation(_y,n),Ot.getTranslation(Sy,n),de.fromRotationTranslation(e,_y,Sy)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e}static identity(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}static set(e,n,s,r,a,o,h,c,l){return e[0]=n,e[1]=s,e[2]=r,e[3]=a,e[4]=o,e[5]=h,e[6]=c,e[7]=l,e}static getReal(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}static getDual(e,n){return e[0]=n[4],e[1]=n[5],e[2]=n[6],e[3]=n[7],e}static setReal(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}static setDual(e,n){return e[4]=n[0],e[5]=n[1],e[6]=n[2],e[7]=n[3],e}static getTranslation(e,n){const s=n[4],r=n[5],a=n[6],o=n[7],h=-n[0],c=-n[1],l=-n[2],u=n[3];return e[0]=(s*u+o*h+r*l-a*c)*2,e[1]=(r*u+o*c+a*h-s*l)*2,e[2]=(a*u+o*l+s*c-r*h)*2,e}static translate(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=s[0]*.5,l=s[1]*.5,u=s[2]*.5,f=n[4],d=n[5],p=n[6],y=n[7];return e[0]=r,e[1]=a,e[2]=o,e[3]=h,e[4]=h*c+a*u-o*l+f,e[5]=h*l+o*c-r*u+d,e[6]=h*u+r*l-a*c+p,e[7]=-r*c-a*l-o*u+y,e}static rotateX(e,n,s){let r=-n[0],a=-n[1],o=-n[2],h=n[3];const c=n[4],l=n[5],u=n[6],f=n[7],d=c*h+f*r+l*o-u*a,p=l*h+f*a+u*r-c*o,y=u*h+f*o+c*a-l*r,x=f*h-c*r-l*a-u*o;return pt.rotateX(e,n,s),r=e[0],a=e[1],o=e[2],h=e[3],e[4]=d*h+x*r+p*o-y*a,e[5]=p*h+x*a+y*r-d*o,e[6]=y*h+x*o+d*a-p*r,e[7]=x*h-d*r-p*a-y*o,e}static rotateY(e,n,s){let r=-n[0],a=-n[1],o=-n[2],h=n[3];const c=n[4],l=n[5],u=n[6],f=n[7],d=c*h+f*r+l*o-u*a,p=l*h+f*a+u*r-c*o,y=u*h+f*o+c*a-l*r,x=f*h-c*r-l*a-u*o;return pt.rotateY(e,n,s),r=e[0],a=e[1],o=e[2],h=e[3],e[4]=d*h+x*r+p*o-y*a,e[5]=p*h+x*a+y*r-d*o,e[6]=y*h+x*o+d*a-p*r,e[7]=x*h-d*r-p*a-y*o,e}static rotateZ(e,n,s){let r=-n[0],a=-n[1],o=-n[2],h=n[3];const c=n[4],l=n[5],u=n[6],f=n[7],d=c*h+f*r+l*o-u*a,p=l*h+f*a+u*r-c*o,y=u*h+f*o+c*a-l*r,x=f*h-c*r-l*a-u*o;return pt.rotateZ(e,n,s),r=e[0],a=e[1],o=e[2],h=e[3],e[4]=d*h+x*r+p*o-y*a,e[5]=p*h+x*a+y*r-d*o,e[6]=y*h+x*o+d*a-p*r,e[7]=x*h-d*r-p*a-y*o,e}static rotateByQuatAppend(e,n,s){const r=s[0],a=s[1],o=s[2],h=s[3];let c=n[0],l=n[1],u=n[2],f=n[3];return e[0]=c*h+f*r+l*o-u*a,e[1]=l*h+f*a+u*r-c*o,e[2]=u*h+f*o+c*a-l*r,e[3]=f*h-c*r-l*a-u*o,c=n[4],l=n[5],u=n[6],f=n[7],e[4]=c*h+f*r+l*o-u*a,e[5]=l*h+f*a+u*r-c*o,e[6]=u*h+f*o+c*a-l*r,e[7]=f*h-c*r-l*a-u*o,e}static rotateByQuatPrepend(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3];let c=s[0],l=s[1],u=s[2],f=s[3];return e[0]=r*f+h*c+a*u-o*l,e[1]=a*f+h*l+o*c-r*u,e[2]=o*f+h*u+r*l-a*c,e[3]=h*f-r*c-a*l-o*u,c=s[4],l=s[5],u=s[6],f=s[7],e[4]=r*f+h*c+a*u-o*l,e[5]=a*f+h*l+o*c-r*u,e[6]=o*f+h*u+r*l-a*c,e[7]=h*f-r*c-a*l-o*u,e}static rotateAroundAxis(e,n,s,r){if(Math.abs(r)<ct)return de.copy(e,n);const a=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);r=r*.5;const o=Math.sin(r),h=o*s[0]/a,c=o*s[1]/a,l=o*s[2]/a,u=Math.cos(r),f=n[0],d=n[1],p=n[2],y=n[3];e[0]=f*u+y*h+d*l-p*c,e[1]=d*u+y*c+p*h-f*l,e[2]=p*u+y*l+f*c-d*h,e[3]=y*u-f*h-d*c-p*l;const x=n[4],g=n[5],m=n[6],v=n[7];return e[4]=x*u+v*h+g*l-m*c,e[5]=g*u+v*c+m*h-x*l,e[6]=m*u+v*l+x*c-g*h,e[7]=v*u-x*h-g*c-m*l,e}static add(e,n,s){return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e[3]=n[3]+s[3],e[4]=n[4]+s[4],e[5]=n[5]+s[5],e[6]=n[6]+s[6],e[7]=n[7]+s[7],e}static multiply(e,n,s){const r=n[0],a=n[1],o=n[2],h=n[3],c=s[4],l=s[5],u=s[6],f=s[7],d=n[4],p=n[5],y=n[6],x=n[7],g=s[0],m=s[1],v=s[2],w=s[3];return e[0]=r*w+h*g+a*v-o*m,e[1]=a*w+h*m+o*g-r*v,e[2]=o*w+h*v+r*m-a*g,e[3]=h*w-r*g-a*m-o*v,e[4]=r*f+h*c+a*u-o*l+d*w+x*g+p*v-y*m,e[5]=a*f+h*l+o*c-r*u+p*w+x*m+y*g-d*v,e[6]=o*f+h*u+r*l-a*c+y*w+x*v+d*m-p*g,e[7]=h*f-r*c-a*l-o*u+x*w-d*g-p*m-y*v,e}static mul(e,n,s){return e}static scale(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=n[3]*s,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=n[7]*s,e}static dot(e,n){return 0}static lerp(e,n,s,r){const a=1-r;return de.dot(n,s)<0&&(r=-r),e[0]=n[0]*a+s[0]*r,e[1]=n[1]*a+s[1]*r,e[2]=n[2]*a+s[2]*r,e[3]=n[3]*a+s[3]*r,e[4]=n[4]*a+s[4]*r,e[5]=n[5]*a+s[5]*r,e[6]=n[6]*a+s[6]*r,e[7]=n[7]*a+s[7]*r,e}static invert(e,n){const s=de.squaredLength(n);return e[0]=-n[0]/s,e[1]=-n[1]/s,e[2]=-n[2]/s,e[3]=n[3]/s,e[4]=-n[4]/s,e[5]=-n[5]/s,e[6]=-n[6]/s,e[7]=n[7]/s,e}static conjugate(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e[4]=-n[4],e[5]=-n[5],e[6]=-n[6],e[7]=n[7],e}static magnitude(e){return 0}static mag(e){return 0}static length(e){return 0}static len(e){return 0}static squaredLength(e){return 0}static sqrLen(e){return 0}static normalize(e,n){let s=de.squaredLength(n);if(s>0){s=Math.sqrt(s);const r=n[0]/s,a=n[1]/s,o=n[2]/s,h=n[3]/s,c=n[4],l=n[5],u=n[6],f=n[7],d=r*c+a*l+o*u+h*f;e[0]=r,e[1]=a,e[2]=o,e[3]=h,e[4]=(c-r*d)/s,e[5]=(l-a*d)/s,e[6]=(u-o*d)/s,e[7]=(f-h*d)/s}return e}static str(e){return`Quat2(${e.join(", ")})`}static exactEquals(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]}static equals(e,n){const s=e[0],r=e[1],a=e[2],o=e[3],h=e[4],c=e[5],l=e[6],u=e[7],f=n[0],d=n[1],p=n[2],y=n[3],x=n[4],g=n[5],m=n[6],v=n[7];return Math.abs(s-f)<=ct*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(r-d)<=ct*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-p)<=ct*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-y)<=ct*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(h-x)<=ct*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(c-g)<=ct*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-m)<=ct*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-v)<=ct*Math.max(1,Math.abs(u),Math.abs(v))}}const _y=new Float32Array(4),Sy=new Float32Array(3);de.dot=pt.dot,de.squaredLength=pt.squaredLength,de.sqrLen=pt.squaredLength,de.mag=pt.magnitude,de.length=pt.magnitude,de.len=pt.magnitude,de.mul=de.multiply;const tS=de;class It extends Float32Array{static BYTE_LENGTH=2*Float32Array.BYTES_PER_ELEMENT;constructor(...e){switch(e.length){case 2:{const n=e[0];typeof n=="number"?super([n,e[1]]):super(n,e[1],2);break}case 1:{const n=e[0];typeof n=="number"?super([n,n]):super(n,0,2);break}default:super(2);break}}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get r(){return this[0]}set r(e){this[0]=e}get g(){return this[1]}set g(e){this[1]=e}get magnitude(){return Math.hypot(this[0],this[1])}get mag(){return this.magnitude}get squaredMagnitude(){const e=this[0],n=this[1];return e*e+n*n}get sqrMag(){return this.squaredMagnitude}get str(){return It.str(this)}copy(e){return this.set(e),this}add(e){return this[0]+=e[0],this[1]+=e[1],this}subtract(e){return this[0]-=e[0],this[1]-=e[1],this}sub(e){return this}multiply(e){return this[0]*=e[0],this[1]*=e[1],this}mul(e){return this}divide(e){return this[0]/=e[0],this[1]/=e[1],this}div(e){return this}scale(e){return this[0]*=e,this[1]*=e,this}scaleAndAdd(e,n){return this[0]+=e[0]*n,this[1]+=e[1]*n,this}distance(e){return It.distance(this,e)}dist(e){return 0}squaredDistance(e){return It.squaredDistance(this,e)}sqrDist(e){return 0}negate(){return this[0]*=-1,this[1]*=-1,this}invert(){return this[0]=1/this[0],this[1]=1/this[1],this}abs(){return this[0]=Math.abs(this[0]),this[1]=Math.abs(this[1]),this}dot(e){return this[0]*e[0]+this[1]*e[1]}normalize(){return It.normalize(this,this)}static create(){return new It}static clone(e){return new It(e)}static fromValues(e,n){return new It(e,n)}static copy(e,n){return e[0]=n[0],e[1]=n[1],e}static set(e,n,s){return e[0]=n,e[1]=s,e}static add(e,n,s){return e[0]=n[0]+s[0],e[1]=n[1]+s[1],e}static subtract(e,n,s){return e[0]=n[0]-s[0],e[1]=n[1]-s[1],e}static sub(e,n,s){return[0,0]}static multiply(e,n,s){return e[0]=n[0]*s[0],e[1]=n[1]*s[1],e}static mul(e,n,s){return[0,0]}static divide(e,n,s){return e[0]=n[0]/s[0],e[1]=n[1]/s[1],e}static div(e,n,s){return[0,0]}static ceil(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e}static floor(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e}static min(e,n,s){return e[0]=Math.min(n[0],s[0]),e[1]=Math.min(n[1],s[1]),e}static max(e,n,s){return e[0]=Math.max(n[0],s[0]),e[1]=Math.max(n[1],s[1]),e}static round(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e}static scale(e,n,s){return e[0]=n[0]*s,e[1]=n[1]*s,e}static scaleAndAdd(e,n,s,r){return e[0]=n[0]+s[0]*r,e[1]=n[1]+s[1]*r,e}static distance(e,n){return Math.hypot(n[0]-e[0],n[1]-e[1])}static dist(e,n){return 0}static squaredDistance(e,n){const s=n[0]-e[0],r=n[1]-e[1];return s*s+r*r}static sqrDist(e,n){return 0}static magnitude(e){let n=e[0],s=e[1];return Math.sqrt(n*n+s*s)}static mag(e){return 0}static length(e){return 0}static len(e){return 0}static squaredLength(e){const n=e[0],s=e[1];return n*n+s*s}static sqrLen(e,n){return 0}static negate(e,n){return e[0]=-n[0],e[1]=-n[1],e}static inverse(e,n){return e[0]=1/n[0],e[1]=1/n[1],e}static abs(e,n){return e[0]=Math.abs(n[0]),e[1]=Math.abs(n[1]),e}static normalize(e,n){const s=n[0],r=n[1];let a=s*s+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=n[0]*a,e[1]=n[1]*a,e}static dot(e,n){return e[0]*n[0]+e[1]*n[1]}static cross(e,n,s){const r=n[0]*s[1]-n[1]*s[0];return e[0]=e[1]=0,e[2]=r,e}static lerp(e,n,s,r){const a=n[0],o=n[1];return e[0]=a+r*(s[0]-a),e[1]=o+r*(s[1]-o),e}static transformMat2(e,n,s){const r=n[0],a=n[1];return e[0]=s[0]*r+s[2]*a,e[1]=s[1]*r+s[3]*a,e}static transformMat2d(e,n,s){const r=n[0],a=n[1];return e[0]=s[0]*r+s[2]*a+s[4],e[1]=s[1]*r+s[3]*a+s[5],e}static transformMat3(e,n,s){const r=n[0],a=n[1];return e[0]=s[0]*r+s[3]*a+s[6],e[1]=s[1]*r+s[4]*a+s[7],e}static transformMat4(e,n,s){const r=n[0],a=n[1];return e[0]=s[0]*r+s[4]*a+s[12],e[1]=s[1]*r+s[5]*a+s[13],e}static rotate(e,n,s,r){const a=n[0]-s[0],o=n[1]-s[1],h=Math.sin(r),c=Math.cos(r);return e[0]=a*c-o*h+s[0],e[1]=a*h+o*c+s[1],e}static angle(e,n){const s=e[0],r=e[1],a=n[0],o=n[1],h=Math.sqrt(s*s+r*r)*Math.sqrt(a*a+o*o),c=h&&(s*a+r*o)/h;return Math.acos(Math.min(Math.max(c,-1),1))}static zero(e){return e[0]=0,e[1]=0,e}static exactEquals(e,n){return e[0]===n[0]&&e[1]===n[1]}static equals(e,n){const s=e[0],r=e[1],a=n[0],o=n[1];return Math.abs(s-a)<=ct*Math.max(1,Math.abs(s),Math.abs(a))&&Math.abs(r-o)<=ct*Math.max(1,Math.abs(r),Math.abs(o))}static str(e){return`Vec2(${e.join(", ")})`}}It.prototype.sub=It.prototype.subtract,It.prototype.mul=It.prototype.multiply,It.prototype.div=It.prototype.divide,It.prototype.dist=It.prototype.distance,It.prototype.sqrDist=It.prototype.squaredDistance,It.sub=It.subtract,It.mul=It.multiply,It.div=It.divide,It.dist=It.distance,It.sqrDist=It.squaredDistance,It.sqrLen=It.squaredLength,It.mag=It.magnitude,It.length=It.magnitude,It.len=It.magnitude;const tt=It,eS=["xx","xy","yx","yy","xxx","xxy","xyx","xyy","yxx","yxy","yyx","yyy","xxxx","xxxy","xxyx","xxyy","xyxx","xyxy","xyyx","xyyy","yxxx","yxxy","yxyx","yxyy","yyxx","yyxy","yyyx","yyyy","rr","rg","gr","gg","rrr","rrg","rgr","rgg","grr","grg","ggr","ggg","rrrr","rrrg","rrgr","rrgg","rgrr","rgrg","rggr","rggg","grrr","grrg","grgr","grgg","ggrr","ggrg","gggr","gggg"],nS=["xz","yz","zx","zy","zz","xxz","xyz","xzx","xzy","xzz","yxz","yyz","yzx","yzy","yzz","zxx","zxy","zxz","zyx","zyy","zyz","zzx","zzy","zzz","xxxz","xxyz","xxzx","xxzy","xxzz","xyxz","xyyz","xyzx","xyzy","xyzz","xzxx","xzxy","xzxz","xzyx","xzyy","xzyz","xzzx","xzzy","xzzz","yxxz","yxyz","yxzx","yxzy","yxzz","yyxz","yyyz","yyzx","yyzy","yyzz","yzxx","yzxy","yzxz","yzyx","yzyy","yzyz","yzzx","yzzy","yzzz","zxxx","zxxy","zxxz","zxyx","zxyy","zxyz","zxzx","zxzy","zxzz","zyxx","zyxy","zyxz","zyyx","zyyy","zyyz","zyzx","zyzy","zyzz","zzxx","zzxy","zzxz","zzyx","zzyy","zzyz","zzzx","zzzy","zzzz","rb","gb","br","bg","bb","rrb","rgb","rbr","rbg","rbb","grb","ggb","gbr","gbg","gbb","brr","brg","brb","bgr","bgg","bgb","bbr","bbg","bbb","rrrb","rrgb","rrbr","rrbg","rrbb","rgrb","rggb","rgbr","rgbg","rgbb","rbrr","rbrg","rbrb","rbgr","rbgg","rbgb","rbbr","rbbg","rbbb","grrb","grgb","grbr","grbg","grbb","ggrb","gggb","ggbr","ggbg","ggbb","gbrr","gbrg","gbrb","gbgr","gbgg","gbgb","gbbr","gbbg","gbbb","brrr","brrg","brrb","brgr","brgg","brgb","brbr","brbg","brbb","bgrr","bgrg","bgrb","bggr","bggg","bggb","bgbr","bgbg","bgbb","bbrr","bbrg","bbrb","bbgr","bbgg","bbgb","bbbr","bbbg","bbbb"],iS=["xw","yw","zw","wx","wy","wz","ww","xxw","xyw","xzw","xwx","xwy","xwz","xww","yxw","yyw","yzw","ywx","ywy","ywz","yww","zxw","zyw","zzw","zwx","zwy","zwz","zww","wxx","wxy","wxz","wxw","wyx","wyy","wyz","wyw","wzx","wzy","wzz","wzw","wwx","wwy","wwz","www","xxxw","xxyw","xxzw","xxwx","xxwy","xxwz","xxww","xyxw","xyyw","xyzw","xywx","xywy","xywz","xyww","xzxw","xzyw","xzzw","xzwx","xzwy","xzwz","xzww","xwxx","xwxy","xwxz","xwxw","xwyx","xwyy","xwyz","xwyw","xwzx","xwzy","xwzz","xwzw","xwwx","xwwy","xwwz","xwww","yxxw","yxyw","yxzw","yxwx","yxwy","yxwz","yxww","yyxw","yyyw","yyzw","yywx","yywy","yywz","yyww","yzxw","yzyw","yzzw","yzwx","yzwy","yzwz","yzww","ywxx","ywxy","ywxz","ywxw","ywyx","ywyy","ywyz","ywyw","ywzx","ywzy","ywzz","ywzw","ywwx","ywwy","ywwz","ywww","zxxw","zxyw","zxzw","zxwx","zxwy","zxwz","zxww","zyxw","zyyw","zyzw","zywx","zywy","zywz","zyww","zzxw","zzyw","zzzw","zzwx","zzwy","zzwz","zzww","zwxx","zwxy","zwxz","zwxw","zwyx","zwyy","zwyz","zwyw","zwzx","zwzy","zwzz","zwzw","zwwx","zwwy","zwwz","zwww","wxxx","wxxy","wxxz","wxxw","wxyx","wxyy","wxyz","wxyw","wxzx","wxzy","wxzz","wxzw","wxwx","wxwy","wxwz","wxww","wyxx","wyxy","wyxz","wyxw","wyyx","wyyy","wyyz","wyyw","wyzx","wyzy","wyzz","wyzw","wywx","wywy","wywz","wyww","wzxx","wzxy","wzxz","wzxw","wzyx","wzyy","wzyz","wzyw","wzzx","wzzy","wzzz","wzzw","wzwx","wzwy","wzwz","wzww","wwxx","wwxy","wwxz","wwxw","wwyx","wwyy","wwyz","wwyw","wwzx","wwzy","wwzz","wwzw","wwwx","wwwy","wwwz","wwww","ra","ga","ba","ar","ag","ab","aa","rra","rga","rba","rar","rag","rab","raa","gra","gga","gba","gar","gag","gab","gaa","bra","bga","bba","bar","bag","bab","baa","arr","arg","arb","ara","agr","agg","agb","aga","abr","abg","abb","aba","aar","aag","aab","aaa","rrra","rrga","rrba","rrar","rrag","rrab","rraa","rgra","rgga","rgba","rgar","rgag","rgab","rgaa","rbra","rbga","rbba","rbar","rbag","rbab","rbaa","rarr","rarg","rarb","rara","ragr","ragg","ragb","raga","rabr","rabg","rabb","raba","raar","raag","raab","raaa","grra","grga","grba","grar","grag","grab","graa","ggra","ggga","ggba","ggar","ggag","ggab","ggaa","gbra","gbga","gbba","gbar","gbag","gbab","gbaa","garr","garg","garb","gara","gagr","gagg","gagb","gaga","gabr","gabg","gabb","gaba","gaar","gaag","gaab","gaaa","brra","brga","brba","brar","brag","brab","braa","bgra","bgga","bgba","bgar","bgag","bgab","bgaa","bbra","bbga","bbba","bbar","bbag","bbab","bbaa","barr","barg","barb","bara","bagr","bagg","bagb","baga","babr","babg","babb","baba","baar","baag","baab","baaa","arrr","arrg","arrb","arra","argr","argg","argb","arga","arbr","arbg","arbb","arba","arar","arag","arab","araa","agrr","agrg","agrb","agra","aggr","aggg","aggb","agga","agbr","agbg","agbb","agba","agar","agag","agab","agaa","abrr","abrg","abrb","abra","abgr","abgg","abgb","abga","abbr","abbg","abbb","abba","abar","abag","abab","abaa","aarr","aarg","aarb","aara","aagr","aagg","aagb","aaga","aabr","aabg","aabb","aaba","aaar","aaag","aaab","aaaa"],zi={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3};function Nu(i){switch(i.length){case 2:return function(){return new It(this[zi[i[0]]],this[zi[i[1]]])};case 3:return function(){return new vt(this[zi[i[0]]],this[zi[i[1]]],this[zi[i[2]]])};case 4:return function(){return new gt(this[zi[i[0]]],this[zi[i[1]]],this[zi[i[2]]],this[zi[i[3]]])}}return()=>null}let Ty=!1;function sS(){if(!Ty){for(const i of eS){const e=Nu(i);Object.defineProperty(It.prototype,i,{get:e}),Object.defineProperty(vt.prototype,i,{get:e}),Object.defineProperty(gt.prototype,i,{get:e})}for(const i of nS){const e=Nu(i);Object.defineProperty(vt.prototype,i,{get:e}),Object.defineProperty(gt.prototype,i,{get:e})}for(const i of iS){const e=Nu(i);Object.defineProperty(gt.prototype,i,{get:e})}Ty=!0}}const rS=Object.freeze(Object.defineProperty({__proto__:null,EnableSwizzles:sS,Mat2:Ee,Mat2d:Ye,Mat3:fe,Mat4:Ot,Quat:pt,Quat2:de,Vec2:It,Vec3:vt,Vec4:gt,mat2:Dr,mat2d:Zi,mat3:my,mat4:wy,quat:K3,quat2:tS,vec2:tt,vec3:Ei,vec4:Ps},Symbol.toStringTag,{value:"Module"})),Ey=Math.sqrt,zy=1e-4;class qr{static fromPoints(e,n,s){return new qr(e,n,s)}static fromXY(e,n,s,r,a,o){return new qr(new N(e,n),new N(s,r),new N(a,o))}p0=N.default();p1=N.default();p2=N.default();constructor(e,n,s){this.p0.copy(e),this.p1.copy(n),this.p2.copy(s)}getBoundingBox(){let e=As.default(),n=[];const s=ju([this.p0,this.p1,this.p2],n);for(let r=0;r<s;r++)e.expandByXY(n[r].x,n[r].y);return e}split(e){return jh(this.p0,this.p1,this.p2,e)}getPoint(e){return Cy(this.p0,this.p1,this.p2,e)}getPoints(e=.01){return Vu(this.p0,this.p1,this.p2,e)}getExtermas(e){return ju([this.p0,this.p1,this.p2],e)}fatten(e=1){return Vu(this.p0,this.p1,this.p2,e)}}let Bu=class rp{static fromQuadBezier(e){const n=N.lerp(N.default(),e.p0,e.p1,.6666666666666666),s=N.lerp(N.default(),e.p2,e.p1,2/3);return this.fromPoints(e.p0,n,s,e.p2)}static fromPoints(e,n,s,r){return new rp(e,n,s,r)}static fromXY(e,n,s,r,a,o,h,c){return new rp(new N(e,n),new N(s,r),new N(a,o),new N(h,c))}p0=N.default();p1=N.default();p2=N.default();p3=N.default();constructor(e,n,s,r){this.p0.copy(e),this.p1.copy(n),this.p2.copy(s),this.p3.copy(r)}getBoundingBox(){let e=As.default(),n=[];const s=Hu([this.p0,this.p1,this.p2,this.p3],n);for(let r=0;r<s;r++)e.expandByXY(n[r].x,n[r].y);return e}split(e){return $u(this.p0,this.p1,this.p2,this.p3,e)}getPoint(e){return qu(this.p0,this.p1,this.p2,this.p3,e)}getPoints(e=.01){return Gu(this.p0,this.p1,this.p2,this.p3,e)}getExtermas(e){return Hu([this.p0,this.p1,this.p2,this.p3],e)}fatten(e=1){return Gu(this.p0,this.p1,this.p2,this.p3,e)}};function $r(i,e,n){return py(i,e)*Math.pow(n,e)*Math.pow(1-n,i-e)}function aS(i,e){const n=i.length-1;if(n<0)return N.default();const s=N.default();for(let r=0;r<=n;r++){const a=i[r],o=$r(n,r,e);s.x+=a.x*o,s.y+=a.y*o}return s}function Du(i,e){const n=i.length-1;if(n<0)return N.default();let s=i.map(r=>r.clone());for(let r=1;r<=n;r++)for(let a=0;a<n-r+1;a++)s[a]=s[a].lerp(s[a+1],e);return s[0]}function oS(i,e,n,s=1,r){const a=4*s/(3*(1+s)),o=i+(e-i)*a,h=n+(e-n)*a;return Tn(i,o,h,n,r)}function hS(i,e,n,s=1,r){const a=4*s/(3*(1+s)),o=N.lerp(N.default(),i,e,a),h=N.lerp(N.default(),e,n,a);return qu(i,o,h,n,r)}function cS(i,e,n){const s=i.length-1;if(s<0)return N.default();const r=N.default();let a=0;for(let o=0;o<=s;o++){const h=i[o],c=$r(s,o,n);r.x+=e[o]*c*h.x,r.y+=e[o]*c*h.y,a+=e[o]*c}return r.x/=a,r.y/=a,r}function lS(i,e){const n=Ay(i,e),s=Py(i,e),r=Math.abs(n.cross(s)),a=Math.pow(n.magnitudeSquared(),3/2);return r/a}function uS(i,e,n,s){const r=my.fromValues(1,-2,1,0,2,-2,0,0,1),a=Ei.fromValues(1,s,s*s),o=Ei.transformMat3(Ei.create(),a,r),h=Ei.fromValues(i.x,e.x,n.x),c=Ei.fromValues(i.y,e.y,n.y);return N.create(Ei.dot(o,h),Ei.dot(o,c))}function fS(i,e,n,s,r){const a=wy.fromValues(1,-3,3,-1,0,3,-6,3,0,0,3,-3,0,0,0,1),o=Ps.fromValues(1,r,r*r,r*r*r),h=Ps.transformMat4(Ei.create(),o,a),c=Ps.fromValues(i.x,e.x,n.x,s.x),l=Ps.fromValues(i.y,e.y,n.y,s.y);return N.create(Ps.dot(h,c),Ps.dot(h,l))}function Vn(i,e,n,s){const r=s*s,a=1-s,o=a*a;return i*o+2*s*a*e+r*n}function Cy(i,e,n,s){const r=s*s,a=1-s,o=a*a,h=i.x*o+2*a*s*e.x+r*n.x,c=i.y*o+2*a*s*e.y+r*n.y;return N.create(h,c)}function Tn(i,e,n,s,r){const a=r*r,o=a*r,h=1-r,c=h*h,l=c*h;return i*l+3*r*c*e+3*h*a*n+o*s}function qu(i,e,n,s,r){const a=r*r,o=a*r,h=1-r,c=h*h,l=c*h,u=i.x*l+3*c*r*e.x+3*h*a*n.x+o*s.x,f=i.y*l+3*c*r*e.y+3*h*a*n.y+o*s.y;return N.create(u,f)}function dS(i){const e=i.length;if(e<=1)return[];let n=[i[0]];for(let s=1;s<e;s++){let r=i[s-1],a=i[s];n[s-1]=N.create(r.x*s/e+a.x*(e-s)/e,r.y*s/e+a.y*(e-s)/e)}return n[e]=i[e-1],n}function Ay(i,e){const n=i.length-1;if(n<0)return N.default();let s=N.default();for(let r=0;r<n;r++){const a=$r(n-1,r,e);s.x+=(i[r+1].x-i[r].x)*a,s.y+=(i[r+1].y-i[r].y)*a}return s.multiplyScalar(n)}function Py(i,e){const n=i.length-1;if(n<2)return N.create(0,0);let s=N.create(0,0);for(let r=0;r<=n-2;r++){const a=$r(n-2,r,e);s.x+=i[r+2].x-2*i[r+1].x+i[r].x*a,s.y+=i[r+2].y-2*i[r+1].y+i[r].y*a}return s.x*=n*(n-1),s.y*=n*(n-1),s}function pS(i,e){let n=i;for(let s=0;s<e;s++){const r=[];for(let a=0;a<n.length-1;a++){const o=n[a+1].clone().sub(n[a]);r.push(o)}n=r}return n}function yS(i,e,n){const s=i.length-1;if(n>s)throw new Error("");const r=Fu(s)/Fu(s-n),a=pS(i,n),o=s-n,h=N.default();for(let c=0;c<=o;c++){const l=$r(o,c,e);h.x+=a[c].x*l,h.y+=a[c].y*l}return h.x*=r,h.y*=r,h}function xS(i){const e=i.length-1;if(e<0)return[];let n=Array.from({length:e}).map(()=>N.default());for(let s=0;s<e;s++)n[s].x=e*(i[s+1].x-i[s].x),n[s].y=e*(i[s+1].y-i[s].y);return n}function gS(i,e,n){if(e===0&&n===1)return i;if(e===0)return Ha(i,n).left;if(n===1)return Ha(i,e).right;const s=Ha(i,e).right;return Ha(s,n).left}function Ha(i,e=.5){const n=i.length-1,s=[],r=[],a=i.map(o=>o.clone());s.push(a[0].clone()),r.unshift(a[n].clone());for(let o=1;o<=n;o++){for(let h=0;h<n-o+1;h++)a[h].x=(1-e)*a[h].x+e*a[h+1].x,a[h].y=(1-e)*a[h].y+e*a[h+1].y;s.push(a[0].clone()),r.unshift(a[n-o].clone())}return{left:s,right:r}}function jh(i,e,n,s=.5){const r=i.clone().lerp(e,s),a=e.clone().lerp(n,s),o=r.clone().lerp(a,s);return[i,r,o,a,n]}function mS(i,e){const n=Iy(i[0],i[1],i[2]);return n>0&&n<1?jh(i[0],i[1],i[2],n):i}function $u(i,e,n,s,r=.5){const a=i.clone().lerp(e,r),o=e.clone().lerp(n,r),h=n.clone().lerp(s,r),c=a.clone().lerp(o,r),l=o.clone().lerp(h,r),u=c.clone().lerp(l,r);return[i,a,c,u,l,h,s]}function vS(i,e,n,s,r,a){const o=r-n,h=a-s,c=i-n,l=e-s,u=o*o+h*h;if(u==0)return 0;const f=Math.max(0,Math.min(1,(c*o+l*h)/u)),d=n+f*o,p=s+f*h,y=i-d,x=e-p;return y*y+x*x}function Hh(i,e,n,s,r,a){const o=r-n,h=a-s,c=h,l=-o,u=o*s-h*n;return Math.abs(c*i+l*e+u)/Math.sqrt(c*c+l*l)}function Vu(i,e,n,s=1,r=1e3){const a=[];function o(h,c,l,u=0){if(Hh(c.x,c.y,h.x,h.y,l.x,l.y)<s||u>r){a.push(l);return}const[d,p,y,x,g]=jh(h,c,l,.5);o(d,p,y,u+1),o(y,x,g,u+1)}return a.push(i),o(i,e,n),a}function Gu(i,e,n,s,r=1,a=1e3){const o=[];function h(c,l,u,f,d=0){const p=Hh(l.x,l.y,c.x,c.y,f.x,f.y),y=Hh(u.x,u.y,c.x,c.y,f.x,f.y);if(Math.max(p,y)<r||d>a){o.push(f);return}const[x,g,m,v,w,b,S]=$u(c,l,u,f,.5);h(x,g,m,v,d+1),h(v,w,b,S,d+1)}return o.push(i),h(i,e,n,s),o}function wS(i,e,n){const s=N.lerp(N.default(),i,e,.6666666666666666),r=N.lerp(N.default(),n,e,2/3);return[i,s,r,n]}function MS(i,e,n,s){const r=2*(e.x-i.x)+2*(n.x-2*e.x+i.x)*s,a=2*(e.y-i.y)+2*(n.y-2*e.y+i.y)*s;return N.create(r,a)}function Iy(i,e,n){const s=2*(e.x-i.x),r=2*(e.y-i.y),a=2*(i.x-2*e.x+n.x),o=2*(i.y-2*e.y+n.y);let h=-(s*a+r*o),c=a*a+o*o;return c<0&&(h=-h,c=-c),h<=0?0:h>=c?1:h/c}function bS(i,e,n,s,r){const a=3*r*r*(s.x-3*n.x+3*e.x-i.x)+6*r*(n.x-2*e.x+i.x)+3*(e.x-i.x),o=3*r*r*(s.y-3*n.y+3*e.y-i.y)+6*r*(n.y-2*e.y+i.y)+3*(e.y-i.x);return N.create(a,o)}function Ry(i,e){let n=i[2]-i[0],s=i[4]-2*i[2]+i[0],r=i[6]+3*(i[2]-i[4])-i[0];e[0]=r*r,e[1]=3*s*r,e[2]=2*s*s+r*n,e[3]=n*s}function _S(i,e){let n=0;for(let s=e;s>1;--s)if(i[n]==i[n+1]){for(let r=1;r<s;++r)i[r-1]=i[r];e-=1}else n++;return e}function SS(i,e){for(let n=e-1;n>0;--n)for(let s=n;s>0;--s)if(i[s]<i[s-1]){let r=i[s];i[s]=i[s-1],i[s-1]=r}}function TS(i,e){if(Math.abs(i[0])<=1e-6)return Yu(i[1],i[2],i[3],e);let n,s,r,a,o;{let u=1/i[0];n=i[1]*u,s=i[2]*u,r=i[3]*u}a=(n*n-s*3)/9,o=(2*n*n*n-9*n*s+27*r)/54;let h=a*a*a,c=o*o-h,l=n/3;if(c<0){let u=Math.cos(We(o/Math.sqrt(h),-1,1)),f=-2*Math.sqrt(a);return e[0]=We(f*Math.cos(u/3)-l,0,1),e[1]=We(f*Math.cos((u+2*Math.PI)/3)-l,0,1),e[2]=We(f*Math.cos((u-2*Math.PI)/3)-l,0,1),SS(e,3),_S(e,3)}else{let u=Math.abs(o)+Math.sqrt(c);return u=Math.pow(u,.3333333),o>0&&(u=-u),u!=0&&(u+=a/u),e[0]=We(u-l,0,1),1}}function ES(i,e){let n=new Array(4).fill(0),s=new Array(4).fill(0),r;for(Ry(i.map(o=>o.x),n),Ry(i.map(o=>o.y),s),r=0;r<4;r++)n[r]+=s[r];return TS(n,e)}function Xh(i,e,n){if(i<0&&(i=-i,e=-e),e==0||i==0||i>=e)return 0;let s=i/e;return!Number.isFinite(s)||s==0?0:(n[0]=s,1)}function Uu(i,e,n,s){return Xh(i-e,i-e-e+n,s)}function Wu(i,e,n,s,r){const a=s-i+3*(e-n),o=2*(i-e-e+n),h=e-i;return Yu(a,o,h,r)}function Yu(i,e,n,s){if(i==0)return Xh(-n,e,s);let r=0,a=e*e-4*i*n;if(a<0)return 0;a=Math.sqrt(a);let o=a;if(!Number.isFinite(o))return 0;let h=e<0?-(e-o)/2:-(e+o)/2,c=[];if(Xh(h,i,c)>0&&(s[r]=c[0],r++),Xh(n,h,c)&&(s[r]=c[0],r++),r==2)if(s[0]>s[1]){let l=s[0];s[0]=s[1],s[1]=l}else s[0]==s[1]&&(r-=1);return r}function ju(i,e){let n=[],s=[],r=0;Uu(i[0].x,i[1].x,i[2].x,s)>0&&(n[r]=s[0],r++),Uu(i[0].y,i[1].y,i[2].y,s)>0&&(n[r]=s[0],r++);for(let a=0;a<r;++a)e[a]=Du(i,n[a]);return e[r]=i[2],r+1}function Hu(i,e){let n=[0,0,0,0],s=[],r=0,a=0;(a=Wu(i[0].x,i[1].x,i[2].x,i[3].x,s))>0&&(a==1&&(n[0]=s[0]),a==2&&(n[1]=s[1]),r+=a),(a=Wu(i[0].y,i[1].y,i[2].y,i[3].y,s))>0&&(a==1&&(n[r]=s[0]),a==2&&(n[r+1]=s[1]),r+=a);for(let o=0;o<r;++o)e[o]=Du(i,n[o]);return e[r]=i[3],r+1}function Oy(i,e,n,s,r,a,o,h,c){let l=0,u=.005,f=1/0;const d=N.create(o,h),p=N.default(),y=N.default();for(let x=0;x<1;x+=.05){p[0]=Vn(i,n,r,x),p[1]=Vn(e,s,a,x);const g=d.distanceSquared(p);g<f&&(l=x,f=g)}f=1/0;for(let x=0;x<32&&!(u<zy);x++){const g=l-u,m=l+u;p[0]=Vn(i,n,r,g),p[1]=Vn(e,s,a,g);const v=d.distanceSquared(p);if(g>=0&&v<f)l=g,f=v;else{y[0]=Vn(i,n,r,m),y[1]=Vn(e,s,a,m);const w=y.distanceSquared(d);m<=1&&w<f?(l=m,f=w):u*=.5}}return c&&(c[0]=Vn(i,n,r,l),c[1]=Vn(e,s,a,l)),Ey(f)}function zS(i,e,n,s,r,a,o){let h=i,c=e,l=0;const u=1/o;for(let f=1;f<=o;f++){let d=f*u;const p=Vn(i,n,r,d),y=Vn(e,s,a,d),x=p-h,g=y-c;l+=Math.sqrt(x*x+g*g),h=p,c=y}return l}function ky(i,e,n,s,r,a,o,h,c,l,u){let f=0,d=.005,p=1/0,y,x,g,m;const v=N.create(c,l),w=N.default(),b=N.default();for(let S=0;S<1;S+=.05)w[0]=Tn(i,n,r,o,S),w[1]=Tn(e,s,a,h,S),g=v.distanceSquared(w),g<p&&(f=S,p=g);p=1/0;for(let S=0;S<32&&!(d<zy);S++)y=f-d,x=f+d,w[0]=Tn(i,n,r,o,y),w[1]=Tn(e,s,a,h,y),g=w.distanceSquared(v),y>=0&&g<p?(f=y,p=g):(b[0]=Tn(i,n,r,o,x),b[1]=Tn(e,s,a,h,x),m=b.distanceSquared(v),x<=1&&m<p?(f=x,p=m):d*=.5);return u&&(u[0]=Tn(i,n,r,o,f),u[1]=Tn(e,s,a,h,f)),Ey(p)}function CS(i,e,n,s,r,a,o,h,c){let l=i,u=e,f=0;const d=1/c;for(let p=1;p<=c;p++){let y=p*d;const x=Tn(i,n,r,o,y),g=Tn(e,s,a,h,y),m=x-l,v=g-u;f+=Math.sqrt(m*m+v*v),l=x,u=g}return f}const{abs:Xa,cos:Ci,sin:Vr,acos:AS,atan2:Za,sqrt:Ji,pow:En}=Math;function Ja(i){return i<0?-En(-i,1/3):En(i,1/3)}const Ly=Math.PI,Zh=2*Ly,Qi=Ly/2,PS=1e-6,Xu=Number.MAX_SAFE_INTEGER||9007199254740991,Zu=Number.MIN_SAFE_INTEGER||-9007199254740991,IS={x:0,y:0,z:0},K={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(i,e){const n=e(i);let s=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(s+=n.z*n.z),Ji(s)},compute:function(i,e,n){if(i===0)return e[0].t=0,e[0];const s=e.length-1;if(i===1)return e[s].t=1,e[s];const r=1-i;let a=e;if(s===0)return e[0].t=i,e[0];if(s===1){const h={x:r*a[0].x+i*a[1].x,y:r*a[0].y+i*a[1].y,t:i};return n&&(h.z=r*a[0].z+i*a[1].z),h}if(s<4){let h=r*r,c=i*i,l,u,f,d=0;s===2?(a=[a[0],a[1],a[2],IS],l=h,u=r*i*2,f=c):s===3&&(l=h*r,u=h*i*3,f=r*c*3,d=i*c);const p={x:l*a[0].x+u*a[1].x+f*a[2].x+d*a[3].x,y:l*a[0].y+u*a[1].y+f*a[2].y+d*a[3].y,t:i};return n&&(p.z=l*a[0].z+u*a[1].z+f*a[2].z+d*a[3].z),p}const o=JSON.parse(JSON.stringify(e));for(;o.length>1;){for(let h=0;h<o.length-1;h++)o[h]={x:o[h].x+(o[h+1].x-o[h].x)*i,y:o[h].y+(o[h+1].y-o[h].y)*i},typeof o[h].z<"u"&&(o[h].z=o[h].z+(o[h+1].z-o[h].z)*i);o.splice(o.length-1,1)}return o[0].t=i,o[0]},computeWithRatios:function(i,e,n,s){const r=1-i,a=n,o=e;let h=a[0],c=a[1],l=a[2],u=a[3],f;if(h*=r,c*=i,o.length===2)return f=h+c,{x:(h*o[0].x+c*o[1].x)/f,y:(h*o[0].y+c*o[1].y)/f,z:s?(h*o[0].z+c*o[1].z)/f:!1,t:i};if(h*=r,c*=2*r,l*=i*i,o.length===3)return f=h+c+l,{x:(h*o[0].x+c*o[1].x+l*o[2].x)/f,y:(h*o[0].y+c*o[1].y+l*o[2].y)/f,z:s?(h*o[0].z+c*o[1].z+l*o[2].z)/f:!1,t:i};if(h*=r,c*=1.5*r,l*=3*r,u*=i*i*i,o.length===4)return f=h+c+l+u,{x:(h*o[0].x+c*o[1].x+l*o[2].x+u*o[3].x)/f,y:(h*o[0].y+c*o[1].y+l*o[2].y+u*o[3].y)/f,z:s?(h*o[0].z+c*o[1].z+l*o[2].z+u*o[3].z)/f:!1,t:i}},derive:function(i,e){const n=[];for(let s=i,r=s.length,a=r-1;r>1;r--,a--){const o=[];for(let h=0,c;h<a;h++)c={x:a*(s[h+1].x-s[h].x),y:a*(s[h+1].y-s[h].y)},e&&(c.z=a*(s[h+1].z-s[h].z)),o.push(c);n.push(o),s=o}return n},between:function(i,e,n){return e<=i&&i<=n||K.approximately(i,e)||K.approximately(i,n)},approximately:function(i,e,n){return Xa(i-e)<=(n||PS)},length:function(i){const n=K.Tvalues.length;let s=0;for(let r=0,a;r<n;r++)a=.5*K.Tvalues[r]+.5,s+=K.Cvalues[r]*K.arcfn(a,i);return .5*s},map:function(i,e,n,s,r){const a=n-e,o=r-s,h=i-e,c=h/a;return s+o*c},lerp:function(i,e,n){const s={x:e.x+i*(n.x-e.x),y:e.y+i*(n.y-e.y)};return e.z!==void 0&&n.z!==void 0&&(s.z=e.z+i*(n.z-e.z)),s},pointToString:function(i){let e=i.x+"/"+i.y;return typeof i.z<"u"&&(e+="/"+i.z),e},pointsToString:function(i){return"["+i.map(K.pointToString).join(", ")+"]"},copy:function(i){return JSON.parse(JSON.stringify(i))},angle:function(i,e,n){const s=e.x-i.x,r=e.y-i.y,a=n.x-i.x,o=n.y-i.y,h=s*o-r*a,c=s*a+r*o;return Za(h,c)},round:function(i,e){const n=""+i,s=n.indexOf(".");return parseFloat(n.substring(0,s+1+e))},dist:function(i,e){const n=i.x-e.x,s=i.y-e.y;return Ji(n*n+s*s)},closest:function(i,e){let n=En(2,63),s,r;return i.forEach(function(a,o){r=K.dist(e,a),r<n&&(n=r,s=o)}),{mdist:n,mpos:s}},abcratio:function(i,e){if(e!==2&&e!==3)return!1;if(typeof i>"u")i=.5;else if(i===0||i===1)return i;const n=En(i,e)+En(1-i,e),s=n-1;return Xa(s/n)},projectionratio:function(i,e){if(e!==2&&e!==3)return!1;if(typeof i>"u")i=.5;else if(i===0||i===1)return i;const n=En(1-i,e),s=En(i,e)+n;return n/s},lli8:function(i,e,n,s,r,a,o,h){const c=(i*s-e*n)*(r-o)-(i-n)*(r*h-a*o),l=(i*s-e*n)*(a-h)-(e-s)*(r*h-a*o),u=(i-n)*(a-h)-(e-s)*(r-o);return u==0?!1:{x:c/u,y:l/u}},lli4:function(i,e,n,s){const r=i.x,a=i.y,o=e.x,h=e.y,c=n.x,l=n.y,u=s.x,f=s.y;return K.lli8(r,a,o,h,c,l,u,f)},lli:function(i,e){return K.lli4(i,i.c,e,e.c)},makeline:function(i,e){return new se(i.x,i.y,(i.x+e.x)/2,(i.y+e.y)/2,e.x,e.y)},findbbox:function(i){let e=Xu,n=Xu,s=Zu,r=Zu;return i.forEach(function(a){const o=a.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),s<o.x.max&&(s=o.x.max),r<o.y.max&&(r=o.y.max)}),{x:{min:e,mid:(e+s)/2,max:s,size:s-e},y:{min:n,mid:(n+r)/2,max:r,size:r-n}}},shapeintersections:function(i,e,n,s,r){if(!K.bboxoverlap(e,s))return[];const a=[],o=[i.startcap,i.forward,i.back,i.endcap],h=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(c){c.virtual||h.forEach(function(l){if(l.virtual)return;const u=c.intersects(l,r);u.length>0&&(u.c1=c,u.c2=l,u.s1=i,u.s2=n,a.push(u))})}),a},makeshape:function(i,e,n){const s=e.points.length,r=i.points.length,a=K.makeline(e.points[s-1],i.points[0]),o=K.makeline(i.points[r-1],e.points[0]),h={startcap:a,forward:i,back:e,endcap:o,bbox:K.findbbox([a,i,e,o])};return h.intersections=function(c){return K.shapeintersections(h,h.bbox,c,c.bbox,n)},h},getminmax:function(i,e,n){if(!n)return{min:0,max:0};let s=Xu,r=Zu,a,o;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let h=0,c=n.length;h<c;h++)a=n[h],o=i.get(a),o[e]<s&&(s=o[e]),o[e]>r&&(r=o[e]);return{min:s,mid:(s+r)/2,max:r,size:r-s}},align:function(i,e){const n=e.p1.x,s=e.p1.y,r=-Za(e.p2.y-s,e.p2.x-n),a=function(o){return{x:(o.x-n)*Ci(r)-(o.y-s)*Vr(r),y:(o.x-n)*Vr(r)+(o.y-s)*Ci(r)}};return i.map(a)},roots:function(i,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=i.length-1,s=K.align(i,e),r=function(A){return 0<=A&&A<=1};if(n===2){const A=s[0].y,M=s[1].y,_=s[2].y,T=A-2*M+_;if(T!==0){const C=-Ji(M*M-A*_),P=-A+M,R=-(C+P)/T,k=-(-C+P)/T;return[R,k].filter(r)}else if(M!==_&&T===0)return[(2*M-_)/(2*M-2*_)].filter(r);return[]}const a=s[0].y,o=s[1].y,h=s[2].y,c=s[3].y;let l=-a+3*o-3*h+c,u=3*a-6*o+3*h,f=-3*a+3*o,d=a;if(K.approximately(l,0)){if(K.approximately(u,0))return K.approximately(f,0)?[]:[-d/f].filter(r);const A=Ji(f*f-4*u*d),M=2*u;return[(A-f)/M,(-f-A)/M].filter(r)}u/=l,f/=l,d/=l;const p=(3*f-u*u)/3,y=p/3,x=(2*u*u*u-9*u*f+27*d)/27,g=x/2,m=g*g+y*y*y;let v,w,b,S,E;if(m<0){const A=-p/3,M=A*A*A,_=Ji(M),T=-x/(2*_),C=T<-1?-1:T>1?1:T,P=AS(C),R=Ja(_),k=2*R;return b=k*Ci(P/3)-u/3,S=k*Ci((P+Zh)/3)-u/3,E=k*Ci((P+2*Zh)/3)-u/3,[b,S,E].filter(r)}else{if(m===0)return v=g<0?Ja(-g):-Ja(g),b=2*v-u/3,S=-v-u/3,[b,S].filter(r);{const A=Ji(m);return v=Ja(-g+A),w=Ja(g+A),[v-w-u/3].filter(r)}}},droots:function(i){if(i.length===3){const e=i[0],n=i[1],s=i[2],r=e-2*n+s;if(r!==0){const a=-Ji(n*n-e*s),o=-e+n,h=-(a+o)/r,c=-(-a+o)/r;return[h,c]}else if(n!==s&&r===0)return[(2*n-s)/(2*(n-s))];return[]}if(i.length===2){const e=i[0],n=i[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(i,e,n,s,r){let a,o,h,c,l=0,u=0;const f=K.compute(i,e),d=K.compute(i,n),p=f.x*f.x+f.y*f.y;if(s?(a=Ji(En(f.y*d.z-d.y*f.z,2)+En(f.z*d.x-d.z*f.x,2)+En(f.x*d.y-d.x*f.y,2)),o=En(p+f.z*f.z,3/2)):(a=f.x*d.y-f.y*d.x,o=En(p,3/2)),a===0||o===0)return{k:0,r:0};if(l=a/o,u=o/a,!r){const y=K.curvature(i-.001,e,n,s,!0).k,x=K.curvature(i+.001,e,n,s,!0).k;c=(x-l+(l-y))/2,h=(Xa(x-l)+Xa(l-y))/2}return{k:l,r:u,dk:c,adk:h}},inflections:function(i){if(i.length<4)return[];const e=K.align(i,{p1:i[0],p2:i.slice(-1)[0]}),n=e[2].x*e[1].y,s=e[3].x*e[1].y,r=e[1].x*e[2].y,a=e[3].x*e[2].y,o=18*(-3*n+2*s+3*r-a),h=18*(3*n-s-3*r),c=18*(r-n);if(K.approximately(o,0)){if(!K.approximately(h,0)){let d=-c/h;if(0<=d&&d<=1)return[d]}return[]}const l=2*o;if(K.approximately(l,0))return[];const u=h*h-4*o*c;if(u<0)return[];const f=Math.sqrt(u);return[(f-h)/l,-(h+f)/l].filter(function(d){return 0<=d&&d<=1})},bboxoverlap:function(i,e){const n=["x","y"],s=n.length;for(let r=0,a,o,h,c;r<s;r++)if(a=n[r],o=i[a].mid,h=e[a].mid,c=(i[a].size+e[a].size)/2,Xa(o-h)>=c)return!1;return!0},expandbox:function(i,e){e.x.min<i.x.min&&(i.x.min=e.x.min),e.y.min<i.y.min&&(i.y.min=e.y.min),e.z&&e.z.min<i.z.min&&(i.z.min=e.z.min),e.x.max>i.x.max&&(i.x.max=e.x.max),e.y.max>i.y.max&&(i.y.max=e.y.max),e.z&&e.z.max>i.z.max&&(i.z.max=e.z.max),i.x.mid=(i.x.min+i.x.max)/2,i.y.mid=(i.y.min+i.y.max)/2,i.z&&(i.z.mid=(i.z.min+i.z.max)/2),i.x.size=i.x.max-i.x.min,i.y.size=i.y.max-i.y.min,i.z&&(i.z.size=i.z.max-i.z.min)},pairiteration:function(i,e,n){const s=i.bbox(),r=e.bbox(),a=1e5,o=n||.5;if(s.x.size+s.y.size<o&&r.x.size+r.y.size<o)return[(a*(i._t1+i._t2)/2|0)/a+"/"+(a*(e._t1+e._t2)/2|0)/a];let h=i.split(.5),c=e.split(.5),l=[{left:h.left,right:c.left},{left:h.left,right:c.right},{left:h.right,right:c.right},{left:h.right,right:c.left}];l=l.filter(function(f){return K.bboxoverlap(f.left.bbox(),f.right.bbox())});let u=[];return l.length===0||(l.forEach(function(f){u=u.concat(K.pairiteration(f.left,f.right,o))}),u=u.filter(function(f,d){return u.indexOf(f)===d})),u},getccenter:function(i,e,n){const s=e.x-i.x,r=e.y-i.y,a=n.x-e.x,o=n.y-e.y,h=s*Ci(Qi)-r*Vr(Qi),c=s*Vr(Qi)+r*Ci(Qi),l=a*Ci(Qi)-o*Vr(Qi),u=a*Vr(Qi)+o*Ci(Qi),f=(i.x+e.x)/2,d=(i.y+e.y)/2,p=(e.x+n.x)/2,y=(e.y+n.y)/2,x=f+h,g=d+c,m=p+l,v=y+u,w=K.lli8(f,d,x,g,p,y,m,v),b=K.dist(w,i);let S=Za(i.y-w.y,i.x-w.x),E=Za(e.y-w.y,e.x-w.x),A=Za(n.y-w.y,n.x-w.x),M;return S<A?((S>E||E>A)&&(S+=Zh),S>A&&(M=A,A=S,S=M)):A<E&&E<S?(M=A,A=S,S=M):A+=Zh,w.s=S,w.e=A,w.r=b,w},numberSort:function(i,e){return i-e}};class Qa{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return K.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var n=e[0].bbox(),s=1;s<e.length;s++)K.expandbox(n,e[s].bbox());return n}offset(e){const n=[];return this.curves.forEach(function(s){n.push(...s.offset(e))}),new Qa(n)}}const{abs:Ka,min:Fy,max:Ny,cos:RS,sin:OS,acos:kS,sqrt:to}=Math,LS=Math.PI;class se{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),s=!1;if(typeof n[0]=="object"){s=n.length;const p=[];n.forEach(function(y){["x","y","z"].forEach(function(x){typeof y[x]<"u"&&p.push(y[x])})}),n=p}let r=!1;const a=n.length;if(s){if(s>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");r=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!r&&(a===9||a===12)||e&&e[0]&&typeof e[0].z<"u",h=this.points=[];for(let p=0,y=o?3:2;p<a;p+=y){var c={x:n[p],y:n[p+1]};o&&(c.z=n[p+2]),h.push(c)}const l=this.order=h.length-1,u=this.dims=["x","y"];o&&u.push("z"),this.dimlen=u.length;const f=K.align(h,{p1:h[0],p2:h[l]}),d=K.dist(h[0],h[l]);this._linear=f.reduce((p,y)=>p+Ka(y.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,s,r){if(typeof r>"u"&&(r=.5),r===0)return new se(n,n,s);if(r===1)return new se(e,n,n);const a=se.getABC(2,e,n,s,r);return new se(e,a.A,s)}static cubicFromPoints(e,n,s,r,a){typeof r>"u"&&(r=.5);const o=se.getABC(3,e,n,s,r);typeof a>"u"&&(a=K.dist(n,o.C));const h=a*(1-r)/r,c=K.dist(e,s),l=(s.x-e.x)/c,u=(s.y-e.y)/c,f=a*l,d=a*u,p=h*l,y=h*u,x={x:n.x-f,y:n.y-d},g={x:n.x+p,y:n.y+y},m=o.A,v={x:m.x+(x.x-m.x)/(1-r),y:m.y+(x.y-m.y)/(1-r)},w={x:m.x+(g.x-m.x)/r,y:m.y+(g.y-m.y)/r},b={x:e.x+(v.x-e.x)/r,y:e.y+(v.y-e.y)/r},S={x:s.x+(w.x-s.x)/(1-r),y:s.y+(w.y-s.y)/(1-r)};return new se(e,b,S,s)}static getUtils(){return K}getUtils(){return se.getUtils()}static get PolyBezier(){return Qa}valueOf(){return this.toString()}toString(){return K.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,n=e[0].x,s=e[0].y,r=["M",n,s,this.order===2?"Q":"C"];for(let a=1,o=e.length;a<o;a++)r.push(e[a].x),r.push(e[a].y);return r.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=K.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,n=K.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return K.length(this.derivative.bind(this))}static getABC(e=2,n,s,r,a=.5){const o=K.projectionratio(a,e),h=1-o,c={x:o*n.x+h*r.x,y:o*n.y+h*r.y},l=K.abcratio(a,e);return{A:{x:s.x+(s.x-c.x)/l,y:s.y+(s.y-c.y)/l},B:s,C:c,S:n,E:r}}getABC(e,n){n=n||this.get(e);let s=this.points[0],r=this.points[this.order];return se.getABC(this.order,s,n,r,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,s,r;n<e;n++)r=n/(e-1),s=this.compute(r),s.t=r,this._lut.push(s);return this._lut}on(e,n){n=n||5;const s=this.getLUT(),r=[];for(let a=0,o,h=0;a<s.length;a++)o=s[a],K.dist(o,e)<n&&(r.push(o),h+=a/s.length);return r.length?t/=r.length:!1}project(e){const n=this.getLUT(),s=n.length-1,r=K.closest(n,e),a=r.mpos,o=(a-1)/s,h=(a+1)/s,c=.1/s;let l=r.mdist,u=o,f=u,d;l+=1;for(let p;u<h+c;u+=c)d=this.compute(u),p=K.dist(e,d),p<l&&(l=p,f=u);return f=f<0?0:f>1?1:f,d=this.compute(f),d.t=f,d.d=l,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?K.computeWithRatios(e,this.points,this.ratios,this._3d):K.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,n=[e[0]],s=e.length;for(let r=1,a,o;r<s;r++)a=e[r],o=e[r-1],n[r]={x:(s-r)/s*a.x+r/s*o.x,y:(s-r)/s*a.y+r/s*o.y};return n[s]=e[s-1],new se(n)}derivative(e){return K.compute(e,this.dpoints[0],this._3d)}dderivative(e){return K.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new se(K.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return K.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return K.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const n=this.derivative(e),s=to(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/s,y:n.x/s}}__normal3(e){const n=this.derivative(e),s=this.derivative(e+.01),r=to(n.x*n.x+n.y*n.y+n.z*n.z),a=to(s.x*s.x+s.y*s.y+s.z*s.z);n.x/=r,n.y/=r,n.z/=r,s.x/=a,s.y/=a,s.z/=a;const o={x:s.y*n.z-s.z*n.y,y:s.z*n.x-s.x*n.z,z:s.x*n.y-s.y*n.x},h=to(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=h,o.y/=h,o.z/=h;const c=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:c[0]*n.x+c[1]*n.y+c[2]*n.z,y:c[3]*n.x+c[4]*n.y+c[5]*n.z,z:c[6]*n.x+c[7]*n.y+c[8]*n.z}}hull(e){let n=this.points,s=[],r=[],a=0;for(r[a++]=n[0],r[a++]=n[1],r[a++]=n[2],this.order===3&&(r[a++]=n[3]);n.length>1;){s=[];for(let o=0,h,c=n.length-1;o<c;o++)h=K.lerp(e,n[o],n[o+1]),r[a++]=h,s.push(h);n=s}return r}split(e,n){if(e===0&&n)return this.split(n).left;if(n===1)return this.split(e).right;const s=this.hull(e),r={left:this.order===2?new se([s[0],s[3],s[5]]):new se([s[0],s[4],s[7],s[9]]),right:this.order===2?new se([s[5],s[4],s[2]]):new se([s[9],s[8],s[6],s[3]]),span:s};return r.left._t1=K.map(0,0,1,this._t1,this._t2),r.left._t2=K.map(e,0,1,this._t1,this._t2),r.right._t1=K.map(e,0,1,this._t1,this._t2),r.right._t2=K.map(1,0,1,this._t1,this._t2),n?(n=K.map(n,e,1,0,1),r.right.split(n).left):r}extrema(){const e={};let n=[];return this.dims.forEach((function(s){let r=function(o){return o[s]},a=this.dpoints[0].map(r);e[s]=K.droots(a),this.order===3&&(a=this.dpoints[1].map(r),e[s]=e[s].concat(K.droots(a))),e[s]=e[s].filter(function(o){return o>=0&&o<=1}),n=n.concat(e[s].sort(K.numberSort))}).bind(this)),e.values=n.sort(K.numberSort).filter(function(s,r){return n.indexOf(s)===r}),e}bbox(){const e=this.extrema(),n={};return this.dims.forEach((function(s){n[s]=K.getminmax(this,s,e[s])}).bind(this)),n}overlaps(e){const n=this.bbox(),s=e.bbox();return K.bboxoverlap(n,s)}offset(e,n){if(typeof n<"u"){const s=this.get(e),r=this.normal(e),a={c:s,n:r,x:s.x+r.x*n,y:s.y+r.y*n};return this._3d&&(a.z=s.z+r.z*n),a}if(this._linear){const s=this.normal(0),r=this.points.map(function(a){const o={x:a.x+e*s.x,y:a.y+e*s.y};return a.z&&s.z&&(o.z=a.z+e*s.z),o});return[new se(r)]}return this.reduce().map(function(s){return s._linear?s.offset(e)[0]:s.scale(e)})}simple(){if(this.order===3){const r=K.angle(this.points[0],this.points[3],this.points[1]),a=K.angle(this.points[0],this.points[3],this.points[2]);if(r>0&&a<0||r<0&&a>0)return!1}const e=this.normal(0),n=this.normal(1);let s=e.x*n.x+e.y*n.y;return this._3d&&(s+=e.z*n.z),Ka(kS(s))<LS/3}reduce(){let e,n=0,s=0,r=.01,a,o=[],h=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),n=c[0],e=1;e<c.length;e++)s=c[e],a=this.split(n,s),a._t1=n,a._t2=s,o.push(a),n=s;return o.forEach(function(l){for(n=0,s=0;s<=1;)for(s=n+r;s<=1+r;s+=r)if(a=l.split(n,s),!a.simple()){if(s-=r,Ka(n-s)<r)return[];a=l.split(n,s),a._t1=K.map(n,0,1,l._t1,l._t2),a._t2=K.map(s,0,1,l._t1,l._t2),h.push(a),n=s;break}n<1&&(a=l.split(n,1),a._t1=K.map(n,0,1,l._t1,l._t2),a._t2=l._t2,h.push(a))}),h}translate(e,n,s){s=typeof s=="number"?s:n;const r=this.order;let a=this.points.map((o,h)=>(1-h/r)*n+h/r*s);return new se(this.points.map((o,h)=>({x:o.x+e.x*a[h],y:o.y+e.y*a[h]})))}scale(e){const n=this.order;let s=!1;if(typeof e=="function"&&(s=e),s&&n===2)return this.raise().scale(s);const r=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),s?s(0):e,s?s(1):e);const o=s?s(0):e,h=s?s(1):e,c=[this.offset(0,10),this.offset(1,10)],l=[],u=K.lli4(c[0],c[0].c,c[1],c[1].c);if(!u)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(f){const d=l[f*n]=K.copy(a[f*n]);d.x+=(f?h:o)*c[f].n.x,d.y+=(f?h:o)*c[f].n.y}),s?([0,1].forEach(function(f){if(!(n===2&&f)){var d=a[f+1],p={x:d.x-u.x,y:d.y-u.y},y=s?s((f+1)/n):e;s&&!r&&(y=-y);var x=to(p.x*p.x+p.y*p.y);p.x/=x,p.y/=x,l[f+1]={x:d.x+y*p.x,y:d.y+y*p.y}}}),new se(l)):([0,1].forEach(f=>{if(n===2&&f)return;const d=l[f*n],p=this.derivative(f),y={x:d.x+p.x,y:d.y+p.y};l[f+1]=K.lli4(d,y,u,a[f+1])}),new se(l))}outline(e,n,s,r){if(n=n===void 0?e:n,this._linear){const S=this.normal(0),E=this.points[0],A=this.points[this.points.length-1];let M,_,T;s===void 0&&(s=e,r=n),M={x:E.x+S.x*e,y:E.y+S.y*e},T={x:A.x+S.x*s,y:A.y+S.y*s},_={x:(M.x+T.x)/2,y:(M.y+T.y)/2};const C=[M,_,T];M={x:E.x-S.x*n,y:E.y-S.y*n},T={x:A.x-S.x*r,y:A.y-S.y*r},_={x:(M.x+T.x)/2,y:(M.y+T.y)/2};const P=[T,_,M],R=K.makeline(P[2],C[0]),k=K.makeline(C[2],P[0]),I=[R,new se(C),k,new se(P)];return new Qa(I)}const a=this.reduce(),o=a.length,h=[];let c=[],l,u=0,f=this.length();const d=typeof s<"u"&&typeof r<"u";function p(S,E,A,M,_){return function(T){const C=M/A,P=(M+_)/A,R=E-S;return K.map(T,0,1,S+C*R,S+P*R)}}a.forEach(function(S){const E=S.length();d?(h.push(S.scale(p(e,s,f,u,E))),c.push(S.scale(p(-n,-r,f,u,E)))):(h.push(S.scale(e)),c.push(S.scale(-n))),u+=E}),c=c.map(function(S){return l=S.points,l[3]?S.points=[l[3],l[2],l[1],l[0]]:S.points=[l[2],l[1],l[0]],S}).reverse();const y=h[0].points[0],x=h[o-1].points[h[o-1].points.length-1],g=c[o-1].points[c[o-1].points.length-1],m=c[0].points[0],v=K.makeline(g,y),w=K.makeline(x,m),b=[v].concat(h).concat([w]).concat(c);return new Qa(b)}outlineshapes(e,n,s){n=n||e;const r=this.outline(e,n).curves,a=[];for(let o=1,h=r.length;o<h/2;o++){const c=K.makeshape(r[o],r[h-o],s);c.startcap.virtual=o>1,c.endcap.virtual=o<h/2-1,a.push(c)}return a}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof se&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){const n=Fy(e.p1.x,e.p2.x),s=Fy(e.p1.y,e.p2.y),r=Ny(e.p1.x,e.p2.x),a=Ny(e.p1.y,e.p2.y);return K.roots(this.points,e).filter(o=>{var h=this.get(o);return K.between(h.x,n,r)&&K.between(h.y,s,a)})}selfintersects(e){const n=this.reduce(),s=n.length-2,r=[];for(let a=0,o,h,c;a<s;a++)h=n.slice(a,a+1),c=n.slice(a+2),o=this.curveintersects(h,c,e),r.push(...o);return r}curveintersects(e,n,s){const r=[];e.forEach(function(o){n.forEach(function(h){o.overlaps(h)&&r.push({left:o,right:h})})});let a=[];return r.forEach(function(o){const h=K.pairiteration(o.left,o.right,s);h.length>0&&(a=a.concat(h))}),a}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,s,r){const a=(r-s)/4,o=this.get(s+a),h=this.get(r-a),c=K.dist(e,n),l=K.dist(e,o),u=K.dist(e,h);return Ka(l-c)+Ka(u-c)}_iterate(e,n){let s=0,r=1,a;do{a=0,r=1;let o=this.get(s),h,c,l,u,f=!1,d=!1,p,y=r,x=1;do if(d=f,u=l,y=(s+r)/2,h=this.get(y),c=this.get(r),l=K.getccenter(o,h,c),l.interval={start:s,end:r},f=this._error(l,o,s,r)<=e,p=d&&!f,p||(x=r),f){if(r>=1){if(l.interval.end=x=1,u=l,r>1){let m={x:l.x+l.r*RS(l.e),y:l.y+l.r*OS(l.e)};l.e+=K.angle({x:l.x,y:l.y},m,this.get(1))}break}r=r+(r-s)/2}else r=y;while(!p&&a++<100);if(a>=100)break;u=u||l,n.push(u),s=x}while(r<1);return n}}const Gr=N.distanceSquared,Jh=Math.pow,Ki=Math.sqrt,Qh=1e-8,By=1e-4,Dy=Ki(3),Kh=1/3,ci=N.default(),zn=N.default(),Ur=N.default();function ts(i){return i>-Qh&&i<Qh}function qy(i){return i>Qh||i<-Qh}function De(i,e,n,s,r){const a=1-r;return a*a*(a*i+3*r*e)+r*r*(r*s+3*a*n)}function FS(i,e,n,s,r){const a=1-r;return 3*(((e-i)*a+2*(n-e)*r)*a+(s-n)*r*r)}function Ju(i,e,n,s,r,a){const o=s+3*(e-n)-i,h=3*(n-e*2+i),c=3*(e-i),l=i-r,u=h*h-3*o*c,f=h*c-9*o*l,d=c*c-3*h*l;let p=0;if(ts(u)&&ts(f))if(ts(h))a[0]=0;else{const y=-c/h;y>=0&&y<=1&&(a[p++]=y)}else{const y=f*f-4*u*d;if(ts(y)){const x=f/u,g=-h/o+x,m=-x/2;g>=0&&g<=1&&(a[p++]=g),m>=0&&m<=1&&(a[p++]=m)}else if(y>0){const x=Ki(y);let g=u*h+1.5*o*(-f+x),m=u*h+1.5*o*(-f-x);g<0?g=-Jh(-g,Kh):g=Jh(g,Kh),m<0?m=-Jh(-m,Kh):m=Jh(m,Kh);const v=(-h-(g+m))/(3*o);v>=0&&v<=1&&(a[p++]=v)}else{const x=(2*u*h-3*o*f)/(2*Ki(u*u*u)),g=Math.acos(x)/3,m=Ki(u),v=Math.cos(g),w=(-h-2*m*v)/(3*o),b=(-h+m*(v+Dy*Math.sin(g)))/(3*o),S=(-h+m*(v-Dy*Math.sin(g)))/(3*o);w>=0&&w<=1&&(a[p++]=w),b>=0&&b<=1&&(a[p++]=b),S>=0&&S<=1&&(a[p++]=S)}}return p}function Qu(i,e,n,s,r){const a=6*n-12*e+6*i,o=9*e+3*s-3*i-9*n,h=3*e-3*i;let c=0;if(ts(o)){if(qy(a)){const l=-h/a;l>=0&&l<=1&&(r[c++]=l)}}else{const l=a*a-4*o*h;if(ts(l))r[0]=-a/(2*o);else if(l>0){const u=Ki(l),f=(-a+u)/(2*o),d=(-a-u)/(2*o);f>=0&&f<=1&&(r[c++]=f),d>=0&&d<=1&&(r[c++]=d)}}return c}function Ku(i,e,n,s,r,a){const o=(e-i)*r+i,h=(n-e)*r+e,c=(s-n)*r+n,l=(h-o)*r+o,u=(c-h)*r+h,f=(u-l)*r+l;a[0]=i,a[1]=o,a[2]=l,a[3]=f,a[4]=f,a[5]=u,a[6]=c,a[7]=s}function NS(i,e,n,s,r,a,o,h,c,l,u){let f=0,d=.005,p=1/0,y,x,g,m;ci[0]=c,ci[1]=l;for(let v=0;v<1;v+=.05)zn[0]=De(i,n,r,o,v),zn[1]=De(e,s,a,h,v),g=Gr(ci,zn),g<p&&(f=v,p=g);p=1/0;for(let v=0;v<32&&!(d<By);v++)y=f-d,x=f+d,zn[0]=De(i,n,r,o,y),zn[1]=De(e,s,a,h,y),g=Gr(zn,ci),y>=0&&g<p?(f=y,p=g):(Ur[0]=De(i,n,r,o,x),Ur[1]=De(e,s,a,h,x),m=Gr(Ur,ci),x<=1&&m<p?(f=x,p=m):d*=.5);return u&&(u[0]=De(i,n,r,o,f),u[1]=De(e,s,a,h,f)),Ki(p)}function $y(i,e,n,s,r,a,o,h,c){let l=i,u=e,f=0;const d=1/c;for(let p=1;p<=c;p++){let y=p*d;const x=De(i,n,r,o,y),g=De(e,s,a,h,y),m=x-l,v=g-u;f+=Math.sqrt(m*m+v*v),l=x,u=g}return f}function je(i,e,n,s){const r=1-s;return r*(r*i+2*s*e)+s*s*n}function BS(i,e,n,s){return 2*((1-s)*(e-i)+s*(n-e))}function Vy(i,e,n,s,r){const a=i-2*e+n,o=2*(e-i),h=i-s;let c=0;if(ts(a)){if(qy(o)){const l=-h/o;l>=0&&l<=1&&(r[c++]=l)}}else{const l=o*o-4*a*h;if(ts(l)){const u=-o/(2*a);u>=0&&u<=1&&(r[c++]=u)}else if(l>0){const u=Ki(l),f=(-o+u)/(2*a),d=(-o-u)/(2*a);f>=0&&f<=1&&(r[c++]=f),d>=0&&d<=1&&(r[c++]=d)}}return c}function tf(i,e,n){const s=i+n-2*e;return s===0?.5:(i-e)/s}function ef(i,e,n,s,r){const a=(e-i)*s+i,o=(n-e)*s+e,h=(o-a)*s+a;r[0]=i,r[1]=a,r[2]=h,r[3]=h,r[4]=o,r[5]=n}function DS(i,e,n,s,r,a,o,h,c){let l=0,u=.005,f=1/0;ci[0]=o,ci[1]=h;for(let d=0;d<1;d+=.05){zn[0]=je(i,n,r,d),zn[1]=je(e,s,a,d);const p=Gr(ci,zn);p<f&&(l=d,f=p)}f=1/0;for(let d=0;d<32&&!(u<By);d++){const p=l-u,y=l+u;zn[0]=je(i,n,r,p),zn[1]=je(e,s,a,p);const x=Gr(zn,ci);if(p>=0&&x<f)l=p,f=x;else{Ur[0]=je(i,n,r,y),Ur[1]=je(e,s,a,y);const g=Gr(Ur,ci);y<=1&&g<f?(l=y,f=g):u*=.5}}return c&&(c[0]=je(i,n,r,l),c[1]=je(e,s,a,l)),Ki(f)}function Gy(i,e,n,s,r,a,o){let h=i,c=e,l=0;const u=1/o;for(let f=1;f<=o;f++){let d=f*u;const p=je(i,n,r,d),y=je(e,s,a,d),x=p-h,g=y-c;l+=Math.sqrt(x*x+g*g),h=p,c=y}return l}const qS=Object.freeze(Object.defineProperty({__proto__:null,cubicAt:De,cubicDerivativeAt:FS,cubicExtrema:Qu,cubicLength:$y,cubicProjectPoint:NS,cubicRootAt:Ju,cubicSubdivide:Ku,quadraticAt:je,quadraticDerivativeAt:BS,quadraticExtremum:tf,quadraticLength:Gy,quadraticProjectPoint:DS,quadraticRootAt:Vy,quadraticSubdivide:ef},Symbol.toStringTag,{value:"Module"}));class $S{xs;ys;ks;constructor(e,n){this.xs=e,this.ys=n,this.ks=this.getNaturalKs(new Float64Array(this.xs.length))}getNaturalKs(e){const n=this.xs.length-1,s=GS(n+1,n+2);for(let r=1;r<n;r++)s[r][r-1]=1/(this.xs[r]-this.xs[r-1]),s[r][r]=2*(1/(this.xs[r]-this.xs[r-1])+1/(this.xs[r+1]-this.xs[r])),s[r][r+1]=1/(this.xs[r+1]-this.xs[r]),s[r][n+1]=3*((this.ys[r]-this.ys[r-1])/((this.xs[r]-this.xs[r-1])*(this.xs[r]-this.xs[r-1]))+(this.ys[r+1]-this.ys[r])/((this.xs[r+1]-this.xs[r])*(this.xs[r+1]-this.xs[r])));return s[0][0]=2/(this.xs[1]-this.xs[0]),s[0][1]=1/(this.xs[1]-this.xs[0]),s[0][n+1]=3*(this.ys[1]-this.ys[0])/((this.xs[1]-this.xs[0])*(this.xs[1]-this.xs[0])),s[n][n-1]=1/(this.xs[n]-this.xs[n-1]),s[n][n]=2/(this.xs[n]-this.xs[n-1]),s[n][n+1]=3*(this.ys[n]-this.ys[n-1])/((this.xs[n]-this.xs[n-1])*(this.xs[n]-this.xs[n-1])),VS(s,e)}getIndexBefore(e){let n=0,s=this.xs.length,r=0;for(;n<s;)r=Math.floor((n+s)/2),this.xs[r]<e&&r!==n?n=r:this.xs[r]>=e&&r!==s?s=r:s=n;return n===this.xs.length-1?this.xs.length-1:n+1}at(e){let n=this.getIndexBefore(e);const s=(e-this.xs[n-1])/(this.xs[n]-this.xs[n-1]),r=this.ks[n-1]*(this.xs[n]-this.xs[n-1])-(this.ys[n]-this.ys[n-1]),a=-this.ks[n]*(this.xs[n]-this.xs[n-1])+(this.ys[n]-this.ys[n-1]);return(1-s)*this.ys[n-1]+s*this.ys[n]+s*(1-s)*(r*(1-s)+a*s)}}function VS(i,e){const n=i.length;let s=0,r=0;for(;s<n&&r<=n;){let o=0,h=-1/0;for(let c=s;c<n;c++){const l=Math.abs(i[c][r]);l>h&&(o=c,h=l)}if(i[o][r]===0)r++;else{US(i,s,o);for(let c=s+1;c<n;c++){const l=i[c][r]/i[s][r];i[c][r]=0;for(let u=r+1;u<=n;u++)i[c][u]-=i[s][u]*l}s++,r++}}for(let o=n-1;o>=0;o--){var a=0;i[o][o]&&(a=i[o][n]/i[o][o]),e[o]=a;for(let h=o-1;h>=0;h--)i[h][n]-=i[h][o]*a,i[h][o]=0}return e}function GS(i,e){const n=[];for(let s=0;s<i;s++)n.push(new Float64Array(e));return n}function US(i,e,n){let s=i[e];i[e]=i[n],i[n]=s}class WS{firefox=!1;ie=!1;edge=!1;newEdge=!1;weChat=!1;version}class YS{browser=new WS;node=!1;wxa=!1;worker=!1;svgSupported=!1;touchEventsSupported=!1;pointerEventsSupported=!1;domSupported=!1;transformSupported=!1;transform3dSupported=!1;hasGlobalWindow=typeof window<"u"}const es=new YS;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(es.wxa=!0,es.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?es.worker=!0:!es.hasGlobalWindow||"Deno"in window||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Node.js")>-1?(es.node=!0,es.svgSupported=!0):jS(navigator.userAgent,es);function jS(i,e){const n=e.browser,s=i.match(/Firefox\/([\d.]+)/),r=i.match(/MSIE\s([\d.]+)/)||i.match(/Trident\/.+?rv:(([\d.]+))/),a=i.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(i);if(s&&(n.firefox=!0,n.version=s[1]),r&&(n.ie=!0,n.version=r[1]),a&&(n.edge=!0,n.version=a[1],n.newEdge=+a[1].split(".")[0]>18),o&&(n.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported=typeof document<"u"){const c=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in c||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in c)&&!("OTransition"in c),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}}es.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame);const Uy=12,tc=`${Uy}px sans-serif`,HS=20,XS=100,ZS="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function JS(i){const e={};if(typeof JSON>"u")return e;for(let n=0;n<i.length;n++){const s=String.fromCharCode(n+32),r=(i.charCodeAt(n)-HS)/XS;e[s]=r}return e}const QS=JS(ZS),Wr={createCanvas(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){let i,e;return(n,s)=>{if(!i){const r=Wr.createCanvas();i=r&&r.getContext("2d")}if(i)return e!==s&&(e=i.font=s||tc),i.measureText(n);{n=n||"",s=s||tc;const r=/((?:\d+)?\.?\d*)px/.exec(s),a=r&&+r[1]||Uy;let o=0;if(s.indexOf("mono")>=0)o=a*n.length;else for(let h=0;h<n.length;h++){const c=QS[n[h]];o+=c==null?a:c*a}return{width:o}}}}(),loadImage(i,e,n){const s=new Image;return s.onload=e,s.onerror=n,s.src=i,s}};jy(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],(i,e)=>(i["[object "+e+"]"]=!0,i),{}),jy(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],(i,e)=>(i["[object "+e+"Array]"]=!0,i),{});const KS=Array.prototype.slice,Wy=(function(){}).constructor,ec=Wy?Wy.prototype:null;function Yy(i){return!i||typeof i=="string"?!1:typeof i.length=="number"}function jy(i,e,n,s){if(i&&e){for(let r=0,a=i.length;r<a;r++)n=e.call(s,n,i[r],r,i);return n}}function tT(i,e,...n){return function(){return i.apply(e,n.concat(KS.call(arguments)))}}ec&&eT(ec.bind)&&ec.call.bind(ec.bind);function eT(i){return typeof i=="function"}function nc(i){return i==null?null:typeof i.trim=="function"?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}const nT=/cubic-bezier\(([0-9,\.e ]+)\)/;function iT(i){const e=i&&nT.exec(i);if(e){const n=e[1].split(","),s=+nc(n[0]),r=+nc(n[1]),a=+nc(n[2]),o=+nc(n[3]);if(isNaN(s+r+a+o))return;const h=[];return c=>c<=0?0:c>=1?1:Ju(0,s,a,1,c,h)&&De(0,r,o,1,h[0])}}const Hy=Array.prototype.slice;function sT(i){if(Yy(i)){const e=i.length;if(Yy(i[0])){const n=[];for(let s=0;s<e;s++)n.push(Hy.call(i[s]));return n}return Hy.call(i)}return i}function rT(){return new Date().getTime()}const aT=Object.freeze(Object.defineProperty({__proto__:null,cloneValue:sT,createCubicEasingFunc:iT,getTime:rT},Symbol.toStringTag,{value:"Module"})),Yr=Object.freeze({Linear:Object.freeze({None(i){return i},In(i){return i},Out(i){return i},InOut(i){return i}}),Quadratic:Object.freeze({In(i){return i*i},Out(i){return i*(2-i)},InOut(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In(i){return i*i*i},Out(i){return--i*i*i+1},InOut(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In(i){return i*i*i*i},Out(i){return 1- --i*i*i*i},InOut(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In(i){return i*i*i*i*i},Out(i){return--i*i*i*i*i+1},InOut(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In(i){return 1-Math.sin((1-i)*Math.PI/2)},Out(i){return Math.sin(i*Math.PI/2)},InOut(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In(i){return i===0?0:Math.pow(1024,i-1)},Out(i){return i===1?1:1-Math.pow(2,-10*i)},InOut(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In(i){return 1-Math.sqrt(1-i*i)},Out(i){return Math.sqrt(1- --i*i)},InOut(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In(i){return i===1?1:i*i*((1.70158+1)*i-1.70158)},Out(i){return i===0?0:--i*i*((1.70158+1)*i+1.70158)+1},InOut(i){const e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In(i){return 1-Yr.Bounce.Out(1-i)},Out(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut(i){return i<.5?Yr.Bounce.In(i*2)*.5:Yr.Bounce.Out(i*2-1)*.5+.5}}),generatePow(i=4){return i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In(e){return e**i},Out(e){return 1-(1-e)**i},InOut(e){return e<.5?(e*2)**i/2:(1-(2-e*2)**i)/2+.5}}}});let Xy=()=>performance.now();const jr=()=>Xy();function oT(i){Xy=i}class Zy{_tweens={};_tweensAddedDuringUpdate={};constructor(...e){this.add(...e)}getAll(){return Object.keys(this._tweens).map(e=>this._tweens[e])}removeAll(){this._tweens={}}add(...e){for(const n of e)n._group?.remove(n),n._group=this,this._tweens[n.getId()]=n,this._tweensAddedDuringUpdate[n.getId()]=n}remove(...e){for(const n of e)n._group=void 0,delete this._tweens[n.getId()],delete this._tweensAddedDuringUpdate[n.getId()]}allStopped(){return this.getAll().every(e=>!e.isPlaying())}update(e=jr(),n=!0){let s=Object.keys(this._tweens);if(s.length!==0)for(;s.length>0;){this._tweensAddedDuringUpdate={};for(let r=0;r<s.length;r++){const a=this._tweens[s[r]],o=!n;a&&a.update(e,o)===!1&&!n&&this.remove(a)}s=Object.keys(this._tweensAddedDuringUpdate)}}onComplete(e){const n=this.getAll();n.forEach(s=>{const r=s.getCompleteCallback();s.onComplete(()=>{r?.(s),n.filter(o=>!o.isPlaying()).length===n.length-1&&e(n)})})}}const Is={Linear:function(i,e){const n=i.length-1,s=n*e,r=Math.floor(s),a=Is.Utils.Linear;return e<0?a(i[0],i[1],s):e>1?a(i[n],i[n-1],n-s):a(i[r],i[r+1>n?n:r+1],s-r)},Bezier:function(i,e){let n=0;const s=i.length-1,r=Math.pow,a=Is.Utils.Bernstein;for(let o=0;o<=s;o++)n+=r(1-e,s-o)*r(e,o)*i[o]*a(s,o);return n},CatmullRom:function(i,e){const n=i.length-1;let s=n*e,r=Math.floor(s);const a=Is.Utils.CatmullRom;return i[0]===i[n]?(e<0&&(r=Math.floor(s=n*(1+e))),a(i[(r-1+n)%n],i[r],i[(r+1)%n],i[(r+2)%n],s-r)):e<0?i[0]-(a(i[0],i[0],i[1],i[1],-s)-i[0]):e>1?i[n]-(a(i[n],i[n],i[n-1],i[n-1],s-n)-i[n]):a(i[r?r-1:0],i[r],i[n<r+1?n:r+1],i[n<r+2?n:r+2],s-r)},Utils:{Linear:function(i,e,n){return(e-i)*n+i},Bernstein:function(i,e){const n=Is.Utils.Factorial;return n(i)/n(e)/n(i-e)},Factorial:function(){const i=[1];return function(e){let n=1;if(i[e])return i[e];for(let s=e;s>1;s--)n*=s;return i[e]=n,n}}(),CatmullRom:function(i,e,n,s,r){const a=(n-i)*.5,o=(s-e)*.5,h=r*r,c=r*h;return(2*e-2*n+a+o)*c+(-3*e+3*n-2*a-o)*h+a*r+e}}};class eo{static _nextId=0;static nextId(){return eo._nextId++}}const nf=new Zy;let hT=class M_{static autoStartOnUpdate=!1;_isPaused=!1;_pauseStart=0;_valuesStart={};_valuesEnd={};_valuesStartRepeat={};_duration=1e3;_isDynamic=!1;_initialRepeat=0;_repeat=0;_repeatDelayTime;_yoyo=!1;_isPlaying=!1;_reversed=!1;_delayTime=0;_startTime=0;_easingFunction=Yr.Linear.None;_interpolationFunction=Is.Linear;_chainedTweens=[];_onStartCallback;_onStartCallbackFired=!1;_onEveryStartCallback;_onEveryStartCallbackFired=!1;_onUpdateCallback;_onRepeatCallback;_onCompleteCallback;_onStopCallback;_id=eo.nextId();_isChainStopped=!1;_propertiesAreSetUp=!1;_object;_group;constructor(e,n){this._object=e,typeof n=="object"?(this._group=n,n.add(this)):n===!0&&(this._group=nf,nf.add(this))}getId(){return this._id}getCompleteCallback(){return this._onCompleteCallback}isPlaying(){return this._isPlaying}isPaused(){return this._isPaused}getDuration(){return this._duration}to(e,n=1e3){if(this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this}duration(e=1e3){return this._duration=e<0?0:e,this}dynamic(e=!1){return this._isDynamic=e,this}start(e=jr(),n=!1){if(this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(const s in this._valuesStartRepeat)this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){const s={};for(const r in this._valuesEnd)s[r]=this._valuesEnd[r];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this}startFromCurrentValues(e){return this.start(e,!0)}_setupProperties(e,n,s,r,a){for(const o in s){const h=e[o],c=Array.isArray(h),l=c?"array":typeof h;let u=!c&&Array.isArray(s[o]);if(!(l==="undefined"||l==="function")){if(u){const f=s[o];if(f.length===0)continue;const d=[h];for(let p=0,y=f.length;p<y;p+=1){const x=this._handleRelativeValue(h,f[p]);if(isNaN(x)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(x)}u&&(s[o]=d)}if((l==="object"||c)&&h&&!u){n[o]=c?[]:{};const f=h;for(const p in f)n[o][p]=f[p];r[o]=c?[]:{};let d=s[o];if(!this._isDynamic){const p={};for(const y in d)p[y]=d[y];s[o]=d=p}this._setupProperties(f,n[o],d,r[o],a)}else(typeof n[o]>"u"||a)&&(n[o]=h),c||(n[o]*=1),u?r[o]=s[o].slice().reverse():r[o]=n[o]||0}}}stop(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this}end(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this}pause(e=jr()){return this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)}resume(e=jr()){return!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)}stopChainedTweens(){for(let e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this}group(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)}remove(){return this._group?.remove(this),this}delay(e=0){return this._delayTime=e,this}repeat(e=0){return this._initialRepeat=e,this._repeat=e,this}repeatDelay(e){return this._repeatDelayTime=e,this}yoyo(e=!1){return this._yoyo=e,this}easing(e=Yr.Linear.None){return this._easingFunction=e,this}interpolation(e=Is.Linear){return this._interpolationFunction=e,this}chain(...e){return this._chainedTweens=e,this}onStart(e){return this._onStartCallback=e,this}onEveryStart(e){return this._onEveryStartCallback=e,this}onUpdate(e){return this._onUpdateCallback=e,this}onRepeat(e){return this._onRepeatCallback=e,this}onComplete(e){return this._onCompleteCallback=e,this}onStop(e){return this._onStopCallback=e,this}_goToEnd=!1;update(e=jr(),n=M_.autoStartOnUpdate){if(this._isPaused)return!0;let s;if(!this._goToEnd&&!this._isPlaying)if(n)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);const r=e-this._startTime,a=this._duration+(this._repeatDelayTime??this._delayTime),o=this._duration+this._repeat*a,c=(()=>{if(this._duration===0||r>o)return 1;const u=Math.trunc(r/a),f=r-u*a,d=Math.min(f/this._duration,1);return d===0&&r===this._duration?1:d})(),l=this._easingFunction(c);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,l),this._onUpdateCallback&&this._onUpdateCallback(this._object,c),this._duration===0||r>=this._duration)if(this._repeat>0){const u=Math.min(Math.trunc((r-this._duration)/a)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=u);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=a*u,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(let u=0,f=this._chainedTweens.length;u<f;u++)this._chainedTweens[u].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0}_updateProperties(e,n,s,r){for(const a in s){if(n[a]===void 0)continue;const o=n[a]||0;let h=s[a];const c=Array.isArray(e[a]),l=Array.isArray(h);!c&&l?e[a]=this._interpolationFunction(h,r):typeof h=="object"&&h?this._updateProperties(e[a],o,h,r):(h=this._handleRelativeValue(o,h),typeof h=="number"&&(e[a]=o+(h-o)*r))}}_handleRelativeValue(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)}_swapEndStartRepeatValues(e){const n=this._valuesStartRepeat[e],s=this._valuesEnd[e];typeof s=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(s):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n}};const cT="25.0.0",lT=eo.nextId,li=nf,uT=li.getAll.bind(li),fT=li.removeAll.bind(li),dT=li.add.bind(li),pT=li.remove.bind(li),yT=li.update.bind(li),xT={Easing:Yr,Group:Zy,Interpolation:Is,now:jr,setNow:oT,Sequence:eo,nextId:lT,Tween:hT,VERSION:cT,getAll:uT,removeAll:fT,add:dT,remove:pT,update:yT};function sn(i,e,n,s,r){var a=s-i,o=r-e;return a*a+o*o<=n*n}function gT(i,e,n,s,r,a){var o=i-s,h=r-e,c=n+a;return o*o+h*h<=c*c}function no(i,e,n,s,r,a,o){var h=[r-i,a-e],c=[n-i,s-e],l=sf(c,c),u=sf(h,c),f=u/l;f=f<0?0:f,f=f>1?1:f;var d=[c[0]*f+i-r,c[1]*f+e-a],p=sf(d,d);return p<=o*o}function sf(i,e){return i[0]*e[0]+i[1]*e[1]}function mT(i,e,n,s,r,a,o){return no(s,r,a,o,i,e,n)}function rf(i,e,n,s,r,a,o){var h=n/2,c=s/2,l=Math.abs(r-(i+n/2)),u=Math.abs(a-(e+s/2));if(l>h+o||u>c+o)return!1;if(l<=h||u<=c)return!0;var f=l-h,d=u-c;return f*f+d*d<=o*o}function vT(i,e,n,s,r,a,o){return rf(s,r,a,o,i,e,n)}function af(i,e,n,s){return Math.sqrt(Math.pow(i-n,2)+Math.pow(e-s,2))}function of(i,e,n,s,r,a,o){return o=o||1,Math.abs(af(i,e,n,s)-(af(i,e,r,a)+af(n,s,r,a)))<=o}function io(i,e,n,s){var r=i.length,a=!1,o,h;for(o=0,h=r-2;o<r;o+=2)i[o+1]>n!=i[h+1]>n&&e<(i[h]-i[o])*(n-i[o+1])/(i[h+1]-i[o+1])+i[o]&&(a=!a),h=o;if(a)return!0;for(o=0;o<r;o+=2){var c=i[o],l=i[o+1],u,f;if(o===r-2?(u=i[0],f=i[1]):(u=i[o+2],f=i[o+3]),of(c,l,u,f,e,n,s))return!0}return!1}function Jy(i,e,n,s,r){if(io(i,e,n,r))return!0;for(var a=i.length,o=0;o<a-2;o+=2)if(no(i[o],i[o+1],i[o+2],i[o+3],e,n,s))return!0;return no(i[0],i[1],i[a-2],i[a-1],e,n,s)}function wT(i,e,n,s,r){return Jy(s,i,e,n,r)}var Qy=10,ic,sc,hf;function Ky(){ic=[],sc=[];for(var i=0;i<=Qy;i++){var e=4<<i;ic[i]=.5/Math.cos(4*Math.acos(0)/e),sc[i]=.5/(Math.cos(2*Math.acos(0)/e)*Math.cos(2*Math.acos(0)/e))}hf=!0}function tx(i,e,n,s,r,a,o){for(var h=1;h<=Qy;h++){var c=(n+r)*ic[h],l=(s+a)*ic[h],u=i-c,f=e-l;if(u*u+f*f<=o)return!0;var d=r-c,p=a-l;if(u*d+f*p>=0&&u*d+f*p<=d*d+p*p&&(f*d-u*p>=0||o*(d*d+p*p)>=(f*d-u*p)*(f*d-u*p)))return!0;var y=n-c,x=s-l;if(u*y+f*x>=0&&u*y+f*x<=y*y+x*x&&(f*y-u*x<=0||o*(y*y+x*x)>=(f*y-u*x)*(f*y-u*x)))return!0;var g=(n+c)*sc[h],m=(s+l)*sc[h];if((g-i)*(g-i)+(m-e)*(m-e)<o){r=c,a=l;continue}var v=c-g+c,w=l-m+l;if((v-i)*(v-i)+(w-e)*(w-e)<o){n=c,s=l;continue}var b=g-c,S=m-l;if(f*b-u*S<=0||o*(b*b+S*S)>(f*b-u*S)*(f*b-u*S)){if(u*b+f*S>0){if(Math.abs(u*b+f*S)<=b*b+S*S||(i-g)*(n-g)+(e-m)*(s-m)>=0){r=c,a=l;continue}}else if(-(u*b+f*S)<=b*b+S*S||(i-v)*(r-v)+(e-w)*(a-w)>=0){n=c,s=l;continue}}return!1}return!1}function MT(i,e,n,s,r,a,o,h){hf||Ky();var c=Math.abs(r-i)*h,l=Math.abs(a-e)*o;n*=h,s*=o;var u=o*h;return c*c+(s-l)*(s-l)<=u*u||(n-c)*(n-c)+l*l<=u*u||c*s+l*n<=n*s||(c*s+l*n-n*s)*(c*s+l*n-n*s)<=u*u*(n*n+s*s)&&c*n-l*s>=-s*s&&c*n-l*s<=n*n?!0:(c-n)*(c-n)+(l-s)*(l-s)<=u*u||c<=n&&l-u<=s||l<=s&&c-u<=n?tx(c,l,n,0,0,s,u*u):!1}function bT(i,e,n,s,r,a,o){hf||Ky();var h=Math.abs(r-i),c=Math.abs(a-e);return h*h+(s-c)*(s-c)<=o*o||(n-h)*(n-h)+c*c<=o*o||h*s+c*n<=n*s||(h*s+c*n-n*s)*(h*s+c*n-n*s)<=o*o*(n*n+s*s)&&h*n-c*s>=-s*s&&h*n-c*s<=n*n?!0:(h-n)*(h-n)+(c-s)*(c-s)<=o*o||h<=n&&c-o<=s||c<=s&&h-o<=n?tx(h,c,n,0,0,s,o*o):!1}const ex={ellipseCircle:bT,ellipseEllipse:MT};function nx(i,e,n,s,r,a,o){return ex.ellipseCircle(i,e,n,s,r,a,o)}function _T(i,e,n,s,r,a,o){return nx(s,r,a,o,i,e,n)}function ix(i,e,n,s,r,a,o,h){h=h||1;var c=0;if(c+=sn(i,e,n,s,r)?1:0,c+=sn(i,e,n,s+a,r)?1:0,c+=sn(i,e,n,s,r+o)?1:0,c+=sn(i,e,n,s+a,r+o)?1:0,c===0)return rf(s,r,a,o,i,e,n);if(c>=1&&c<=3)return!0;if(c===4)return!sn(i,e,n-h,s,r)||!sn(i,e,n-h,s+a,r)||!sn(i,e,n-h,s,r+o)||!sn(i,e,n-h,s+a,r+o)}function sx(i,e,n,s,r,a,o,h){return h=h||1,no(s,r,a,o,i,e,n)&&!(sn(i,e,n-h,s,r)&&sn(i,e,n-h,a,o))}function rx(i,e,n,s,r,a){return a=a||1,sn(i,e,n,s,r)&&!sn(i,e,n-a,s,r)}function ax(i,e,n,s,r,a,o,h){var c=n-i,l=s-e,u=o-r,f=h-a,d=(-l*(i-r)+c*(e-a))/(-u*l+c*f),p=(u*(e-a)-f*(i-r))/(-u*l+c*f);return d>=0&&d<=1&&p>=0&&p<=1}function rc(i,e,n,s,r,a){var o=r.length;if(io(r,i,e,a))return!0;for(var h=0;h<o;h+=2){var c=(h+2)%o;if(ax(i,e,n,s,r[h],r[h+1],r[c],r[c+1]))return!0}return!1}function ST(i,e,n,s,r,a){return rc(e,n,s,r,i,a)}function cf(i,e){for(var n=i,s=e,r=[n,s],a,o,h,c,l,u,f=0;f<r.length;f++)for(var d=r[f],p=0;p<d.length;p+=2){var y=(p+2)%d.length,x={x:d[y+1]-d[p+1],y:d[p]-d[y]};for(a=o=null,u=0;u<n.length;u+=2)h=x.x*n[u]+x.y*n[u+1],(a===null||h<a)&&(a=h),(o===null||h>o)&&(o=h);for(c=l=null,u=0;u<s.length;u+=2)h=x.x*s[u]+x.y*s[u+1],(c===null||h<c)&&(c=h),(l===null||h>l)&&(l=h);if(o<c||l<a)return!1}return!0}function ox(i,e,n,s,r){var a=[e,n,e+s,n,e+s,n+r,e,n+r];return cf(i,a)}function Hr(i,e,n,s,r,a,o,h){r-=i,o-=i,a-=e,h-=e;var c=Math.pow(o-r,2)/n/n+Math.pow(h-a,2)/s/s,l=2*r*(o-r)/n/n+2*a*(h-a)/s/s,u=r*r/n/n+a*a/s/s-1,f=l*l-4*c*u;if(f===0){var d=-l/2/c;return d>=0&&d<=1}else if(f>0){var p=Math.sqrt(f),y=(-l+p)/2/c,x=(-l-p)/2/c;return y>=0&&y<=1||x>=0&&x<=1}else return!1}function lf(i,e,n,s,r,a,o,h){return Hr(r,a,o,h,i,e,n,s)}function hx(i,e,n,s,r){if(io(i,e,n))return!0;for(var a=i.length,o=0;o<a-2;o+=2)if(lf(i[o],i[o+1],i[o+2],i[o+3],e,n,s,r))return!0;return lf(i[0],i[1],i[a-2],i[a-1],e,n,s,r)}function so(i,e,n,s,r,a){return r>=i&&r<=i+n&&a>=e&&a<=e+s}function TT(i,e,n,s,r,a,o,h){return i<r+o&&i+n>r&&e<a+h&&e+s>a}function ac(i,e,n,s,r){const a=Math.atan2(s-e,n-i)-Math.PI/2,o=r/2,h=Math.cos(a)*o,c=Math.sin(a)*o;return[i-h,e-c,n-h,s-c,n+h,s+c,i+h,e+c]}function ro(i,e,n,s,r,a,o,h,c,l){return c||l?ET(i,e,n,s,r,a,o,h,c,l):ax(i,e,n,s,r,a,o,h)}function ET(i,e,n,s,r,a,o,h,c,l){if(c&&l)return cf(ac(i,e,n,s,c),ac(r,a,o,h,l));if(c)return rc(r,a,o,h,ac(i,e,n,s,c));if(l)return rc(i,e,n,s,ac(r,a,o,h,c))}function cx(i,e,n,s,r,a,o,h){return so(r,a,o,h,i,e)||so(r,a,o,h,n,s)?!0:ro(i,e,n,s,r,a,r+o,a)||ro(i,e,n,s,r+o,a,r+o,a+h)||ro(i,e,n,s,r,a+h,r+o,a+h)||ro(i,e,n,s,r,a,r,a+h)}function zT(i,e,n,s,r,a,o,h){return cx(r,a,o,h,i,e,n,s)}function CT(i,e,n,s,r){return ox(r,i,e,n,s)}function lx(i,e,n,s,r,a,o,h){return so(r,a,o,h,i,e)||Hr(i,e,n,s,r,a,r+o,a)||Hr(i,e,n,s,r,a+h,r+o,a+h)||Hr(i,e,n,s,r,a,r,a+h)||Hr(i,e,n,s,r+o,a,r+o,a+h)}function AT(i,e,n,s,r,a,o,h){return lx(r,a,o,h,i,e,n,s)}function PT(i,e,n,s,r,a,o,h){return ix(r,a,o,i,e,n,s,h)}function IT(i,e,n,s,r,a){return so(n,s,r,a,i,e)}function RT(i,e,n,s){return io(n,i,e,s)}function OT(i,e,n,s,r){return sn(n,s,r,i,e)}function kT(i,e,n,s,r,a){return of(n,s,r,a,i,e)}function ux(i,e,n,s,r,a){var o=Math.pow(r-i,2)/(n*n),h=Math.pow(a-e,2)/(s*s);return o+h<=1}function LT(i,e,n,s,r,a){return ux(n,s,r,a,i,e)}function FT(i,e,n,s,r,a){return rx(i,e,n,s,r,a)}function NT(i,e,n,s,r,a,o,h){return sx(r,a,o,i,e,n,s,h)}function BT(i,e,n,s,r,a,o,h){return ex.ellipseEllipse(i,e,n,s,r,a,o,h)}function DT(i,e,n,s,r){return hx(r,i,e,n,s)}const qT=Object.freeze(Object.defineProperty({__proto__:null,boxBox:TT,boxCircle:rf,boxCircleOutline:PT,boxEllipse:AT,boxLine:zT,boxPoint:so,boxPolygon:CT,circleBox:vT,circleCircle:gT,circleEllipse:_T,circleLine:mT,circleOutlineBox:ix,circleOutlineLine:sx,circleOutlinePoint:rx,circlePoint:sn,circlePolygon:wT,ellipseBox:lx,ellipseCircle:nx,ellipseEllipse:BT,ellipseLine:Hr,ellipsePoint:ux,ellipsePolygon:DT,lineBox:cx,lineCircle:no,lineCircleOutline:NT,lineEllipse:lf,lineLine:ro,linePoint:of,linePolygon:rc,pointBox:IT,pointCircle:OT,pointCircleOutline:FT,pointEllipse:LT,pointLine:kT,pointPolygon:RT,polygonBox:ox,polygonCircle:Jy,polygonEllipse:hx,polygonLine:ST,polygonPoint:io,polygonPolygon:cf},Symbol.toStringTag,{value:"Module"}));class uf{length=0;advance=1;_currentIndex=0;data=[];constructor(e,n=e.length,s=!1,r=0){this.data=e,this.length=n,this.advance=s?-1:1,this._currentIndex=Math.floor(r)%n}get current(){return this.data[this._currentIndex]}get(e=0){const n=(this._currentIndex+e*this.advance)%this.length;return this.data[n]}next(e=0){return this._currentIndex=(this._currentIndex+this.advance+e*this.advance)%this.length,this.current}}class $T extends uf{constructor(e,n=!1,s=0){super([N.create(e.cx,e.top),N.create(e.right,e.cy),N.create(e.cx,e.bottom),N.create(e.left,e.cy)],4,n,s)}}class ff extends uf{constructor(e,n=!1,s=0){super([N.create(e.left,e.top),N.create(e.right,e.top),N.create(e.right,e.bottom),N.create(e.left,e.bottom)],4,n,s)}}class Ai{static default(){return this.fromLTRB(0,0,0,0)}static from(e,n){return this.fromXYWH(e.x,e.x,n.width,n.height)}static fromXYWH(e,n,s,r){return new Ai(e,n,e+s,n+r)}static fromLTRB(e,n,s,r){return new Ai(e,n,s,r)}left=0;top=0;right=0;bottom=0;constructor(e=0,n=0,s=0,r=0){this.left=e,this.top=n,this.right=s,this.bottom=r}get x(){return this.left}get y(){return this.top}get width(){return this.right-this.left}get height(){return this.bottom-this.top}get halfWidth(){return this.width*.5}get halfHeight(){return this.height*.5}get cx(){return(this.left+this.right)/2}get cy(){return(this.top+this.bottom)/2}isEmpty(){return!(this.left<this.right&&this.top<this.bottom)}copy(e){return this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom,this}clone(){return new Ai(this.left,this.top,this.right,this.bottom)}offset(e,n){return this.left+=e,this.right+=e,this.top+=n,this.bottom+=n,this}isSorted(){return this.left<=this.right&&this.top<=this.bottom}isFinite(){let e=0;return e*=this.left,e*=this.top,e*=this.right,e*=this.bottom,Number.isFinite(e)}makeSorted(){const e=this.left,n=this.right,s=this.top,r=this.bottom;return Ai.fromLTRB(Math.min(e,n),Math.min(s,r),Math.max(e,n),Math.max(s,r))}}class VT extends uf{constructor(e,n=!1,s=0){super([],8,n,s);const r=e.getBounds(),a=r.left,o=r.top,h=r.right,c=r.bottom,l=[];l[0]=N.create(a+e.radii(Gn.kUpperLeft_Corner).x,o),l[1]=N.create(h-e.radii(Gn.kUpperRight_Corner).x,o),l[2]=N.create(h,o+e.radii(Gn.kUpperRight_Corner).y),l[3]=N.create(h,c-e.radii(Gn.kLowerRight_Corner).y),l[4]=N.create(h-e.radii(Gn.kLowerRight_Corner).x,c),l[5]=N.create(a+e.radii(Gn.kLowerLeft_Corner).x,c),l[6]=N.create(a,c-e.radii(Gn.kLowerLeft_Corner).y),l[7]=N.create(a,o+e.radii(Gn.kUpperLeft_Corner).y),this.data=l}}function fx(i){let e=!0;for(let n=0;n<4;++n)i[n].x<=0||i[n].y<=0?(i[n].x=0,i[n].y=0):e=!1;return e}function oc(i,e,n,s){return i+e>n?Math.min(s,n/(i+e)):s}function hc(i,e,n){i[n]+e[n]==i[n]?e[n]=0:i[n]+e[n]==e[n]&&(i[n]=0)}function GT(i,e){if(i===e)return i;const n=i>e?-1:1,s=Number.EPSILON*Math.abs(i)||Number.MIN_VALUE;return i+n*s}function cc(i,e,n,s,r){if(n[r]=n[r]*e,s[r]=s[r]*e,n[r]+s[r]>i){let a=n,o=s;a[r]>o[r]&&([o,a]=[a,o]);let h=a[r],c=i-h;for(;c+h>i;)c=GT(c,0);o[r]=c}}function dx(i){return i[0].x==i[3].x&&i[0].y==i[1].y&&i[1].x==i[2].x&&i[3].y==i[2].y}function px(i,e,n){return e<=n&&i<=n-e&&e+i<=n&&n-i>=e&&i>=0}class Gn{static default(){return new Gn}static fromRect(e){return this.default().setRect(e)}static fromOval(e){return this.default().setOval(e)}static kUpperLeft_Corner=0;static kUpperRight_Corner=1;static kLowerRight_Corner=2;static kLowerLeft_Corner=3;type=0;_rect=Ai.default();_radii=[N.default(),N.default(),N.default(),N.default()];radii(e){return this._radii[e]}getType(){return this.type}getBounds(){return this._rect}isEmpty(){return this.type==0}isOval(){return this.type==2}isRect(){return this.type==1}resetRadii(){this._radii.forEach(e=>{e.setXY(0,0)})}copyDadii(e){e.forEach((n,s)=>{this._radii[s].copy(n)})}scaleRadii(){let e=1,n=this._rect,s=this._radii,r=n.right-n.left,a=n.bottom-n.top;return e=oc(s[0].x,s[1].x,r,e),e=oc(s[1].y,s[2].y,a,e),e=oc(s[2].x,s[3].x,r,e),e=oc(s[3].y,s[0].y,a,e),hc(s[0],s[1],0),hc(s[1],s[2],1),hc(s[2],s[3],0),hc(s[3],s[0],1),e<1&&(cc(r,e,s[0],s[1],0),cc(a,e,s[1],s[2],1),cc(r,e,s[2],s[3],0),cc(a,e,s[3],s[0],1)),fx(s),this.computeType(),e<1}initializeRect(e){return e.isFinite()?(this._rect=e.makeSorted(),this._rect.isEmpty()?(this.resetRadii(),this.type=0,!1):!0):(this._rect=Ai.default(),!1)}setRectRadii(e,n){if(this.initializeRect(e)){if(n.every(s=>s.x==0)){this.setRect(e);return}if(this.copyDadii(n),fx(this._radii)){this.setRect(e);return}this.scaleRadii(),this.isValid()||this.setRect(e)}}setRect(e){return this._rect.copy(e),this.resetRadii(),this.type=1,this}setOval(e){if(e.isEmpty()||!e.isFinite())return;this._rect.copy(e.makeSorted());let n=this._rect.halfWidth,s=this._rect.halfHeight;if(n==0||s==0)this.resetRadii(),this.type=1;else{for(let r=0;r<4;++r)this._radii[r].setXY(n,s);this.type=2}}get width(){return this._rect.width}get height(){return this._rect.height}computeType(){if(this._rect.isEmpty()){this.type=0;return}let e=this._radii,n=this._rect,s=!0,r=e[0].x==0||e[0].y==0;for(let a=1;a<4;++a)e[a].x!=0&&e[a].y!=0&&(r=!1),(e[a].x!=e[a-1].x||e[a].y!=e[a-1].y)&&(s=!1);if(r){this.type=1;return}if(s){e[0].x>=n.halfWidth&&e[0].y>=n.halfHeight?this.type=2:this.type=3;return}dx(e)?this.type=4:this.type=5,this.isValid()||this.setRect(this._rect)}areRectAndRadiiValid(e,n){if(!e.isFinite()||!e.isSorted())return!1;for(let s=0;s<4;++s)if(!px(n[s].x,e.left,e.right)||!px(n[s].y,e.top,e.bottom))return!1;return!0}isValid(){let e=this.type,n=this._rect,s=this._radii;if(!this.areRectAndRadiiValid(n,s))return!1;let r=s[0].x==0&&s[0].y==0,a=s[0].x==0||s[0].y==0,o=!0;for(let c=1;c<4;++c)(s[c].x!=0||s[c].y!=0)&&(r=!1),(s[c].x!=s[c-1].x||s[c].y!=s[c-1].y)&&(o=!1),s[c].x!=0&&s[c].y!=0&&(a=!1);let h=dx(s);if(e<0||e>5)return!1;switch(e){case 0:if(!n.isEmpty()||!r||!o||!a)return!1;break;case 1:if(n.isEmpty()||!r||!o||!a)return!1;break;case 2:if(n.isEmpty()||r||!o||a)return!1;for(let c=0;c<4;++c)if(!(Math.abs(s[c].x-n.halfWidth)<=1e-6)||!(Math.abs(s[c].y-n.halfHeight)<=1e-6))return!1;break;case 3:if(n.isEmpty()||r||!o||a)return!1;break;case 4:if(n.isEmpty()||r||o||a||!h)return!1;break;case 5:if(n.isEmpty()||r||o||a||h)return!1;break}return!0}}function UT(i){let e={tl:0,tr:0,br:0,bl:0};return typeof i=="number"?e={tl:i,tr:i,br:i,bl:i}:Array.isArray(i)?i.length===1?e={tl:i[0],tr:i[0],br:i[0],bl:i[0]}:i.length===2?e={tl:i[0],tr:i[1],br:i[0],bl:i[1]}:i.length===3?e={tl:i[0],tr:i[1],br:i[2],bl:i[1]}:i.length===4&&(e={tl:i[0],tr:i[1],br:i[2],bl:i[3]}):i&&(e.tl=i.x??0,e.tr=i.y??0,e.bl=i.z??0,e.br=i.w??0),e}function yx(i){return i!==null&&typeof i=="object"&&("x"in i||"y"in i)&&(typeof i.x=="number"||typeof i.y=="number"||typeof i.x>"u"||typeof i.y>"u")}function WT(i){return typeof i=="number"?{x:i,y:i}:{x:typeof i.x=="number"?i.x:0,y:typeof i.y=="number"?i.y:0}}function YT(i,e,n,s,r=0){if(typeof r=="number")r=[r];else if(yx(r))r=[r];else if(!Array.isArray(r))return;if(Array.isArray(r)){if(r.length===0||r.length>4)throw new RangeError(`Failed to execute 'roundRect' on '${this.constructor.name}': ${r.length} radii provided. Between one and four radii are necessary.`);r.forEach(d=>{if(yx(d)){const p=d;if(typeof p.x=="number"&&p.x<0)throw new RangeError(`Failed to execute 'roundRect' on '${this.constructor.name}': Radius value ${p.x} is negative.`);if(typeof p.y=="number"&&p.y<0)throw new RangeError(`Failed to execute 'roundRect' on '${this.constructor.name}': Radius value ${p.y} is negative.`)}else{if(typeof d!="number")throw new TypeError(`Failed to execute 'roundRect' on '${this.constructor.name}': Radius value ${d} is not a number or DOMPointInit.`);if(typeof d=="number"&&d<0)throw new RangeError(`Failed to execute 'roundRect' on '${this.constructor.name}': Radius value ${d} is negative.`)}})}const a=r.map(WT);if(r.length===1&&a[0].x===0&&a[0].y===0){this.rect(i,e,n,s);return}const o=n/2,h=s/2,c={x:Math.min(o,a[0].x),y:Math.min(h,a[0].y)};let l=c,u=c,f=c;a.length===2&&(l={x:Math.min(o,a[1].x),y:Math.min(h,a[1].y)},f=l),a.length===3&&(l={x:Math.min(o,a[1].x),y:Math.min(h,a[1].y)},f=l,u={x:Math.min(o,a[2].x),y:Math.min(h,a[2].y)}),a.length===4&&(l={x:Math.min(o,a[1].x),y:Math.min(h,a[1].y)},u={x:Math.min(o,a[2].x),y:Math.min(h,a[2].y)},f={x:Math.min(o,a[3].x),y:Math.min(h,a[3].y)}),this.moveTo(i,e+s-f.y),c.x===c.y&&c.x>0?this.arcTo(i,e,i+c.x,e,c.x):c.x>0||c.y>0?this.ellipse(i+c.x,e+c.y,c.x,c.y,0,Math.PI,Math.PI*1.5,!1):this.lineTo(i,e),this.lineTo(i+n-l.x,e),l.x===l.y&&l.x>0?this.arcTo(i+n,e,i+n,e+l.y,l.x):l.x>0||l.y>0?this.ellipse(i+n-l.x,e+l.y,l.x,l.y,0,Math.PI*1.5,0,!1):this.lineTo(i+n,e),this.lineTo(i+n,e+s-u.y),u.x===u.y&&u.x>0?this.arcTo(i+n,e+s,i+n-u.x,e+s,u.x):u.x>0||u.y>0?this.ellipse(i+n-u.x,e+s-u.y,u.x,u.y,0,0,Math.PI*.5,!1):this.lineTo(i+n,e+s),this.lineTo(i+f.x,e+s),f.x===f.y&&f.x>0?this.arcTo(i,e+s,i,e+s-f.y,f.x):f.x>0||f.y>0?this.ellipse(i+f.x,e+s-f.y,f.x,f.y,0,Math.PI*.5,Math.PI,!1):this.lineTo(i,e+s),this.closePath(),this.moveTo(i,e)}const xx=Math.PI*2;function gx(i,e,n=!1){const s=Math.PI*2;let r=i%s;r<=0&&(r+=s);let a=r-i;return i=r,e+=a,!n&&e-i>=s?e=i+s:n&&i-e>=s?e=i-s:!n&&i>e?e=i+(s-(i-e)%s):n&&i<e&&(e=i-(s-(e-i)%s)),{startAngle:i,endAngle:e}}var lc=(i=>(i[i.CW=0]="CW",i[i.CCW=1]="CCW",i[i.Unknown=2147483647]="Unknown",i))(lc||{}),be=(i=>(i[i.MoveTo=0]="MoveTo",i[i.LineTo=1]="LineTo",i[i.QuadCurveTo=2]="QuadCurveTo",i[i.CubicCurveTo=3]="CubicCurveTo",i[i.ConicTo=4]="ConicTo",i[i.Close=5]="Close",i))(be||{}),mx=(i=>(i[i.MoveTo=0]="MoveTo",i[i.LineTo=1]="LineTo",i[i.QuadCurveTo=2]="QuadCurveTo",i[i.ConicTo=4]="ConicTo",i[i.CubicCurveTo=3]="CubicCurveTo",i[i.Close=5]="Close",i[i.Done=6]="Done",i))(mx||{}),vx=(i=>(i[i.Line_SegmentMask=1]="Line_SegmentMask",i[i.Quad_SegmentMask=2]="Quad_SegmentMask",i[i.Conic_SegmentMask=4]="Conic_SegmentMask",i[i.Cubic_SegmentMask=8]="Cubic_SegmentMask",i))(vx||{});class Rs{static default(){return new this}static fromVectices(e){const n=this.default();for(let s=0;s<e.length;s+=2)s===0?n.moveTo(e[s],e[s+1]):n.lineTo(e[s],e[s+1]);return n}static fromPoints(e){const n=this.default();for(let s=0;s<e.length;s++)s===0?n.moveTo(e[s].x,e[s].y):n.lineTo(e[s].x,e[s].y);return n}points=[];verbs=[];_segmentMask=1;_lastMovePointIndex=0;_needMoveTo=!0;_bounds=null;reset(){return this._needMoveTo=!0,this.points.length=0,this.verbs.length=0,this._lastMovePointIndex=0,this._bounds=null,this._segmentMask=1,this}clear(){return this.reset()}get isEmpty(){return this.verbs.length===0}get lastVerb(){return this.verbs[this.verbs.length-1]}get lastPoint(){const e=this.points[this.points.length-2]||0,n=this.points[this.points.length-1]||0;return{x:e,y:n}}get length(){return this.points.length}setLastPoint(e,n){return this.isEmpty?this.moveTo(e,n):(this.points[this.length-2]=e,this.points[this.length-1]=n),this}addPoint(e,n){return this.points.push(e,n),this._bounds=null,this}addVerb(e){return this.verbs.push(e),this}injectMoveToIfNeeded(){this._needMoveTo&&(this.length<=0?this.moveTo(0,0):this.moveTo(this.points[this.length-2],this.points[this.length-1]))}moveTo(e,n){return this._needMoveTo=!1,this.lastVerb===0?(this.points[this._lastMovePointIndex]=e,this.points[this._lastMovePointIndex+1]=n):(this._lastMovePointIndex=this.points.length,this.addVerb(0),this.addPoint(e,n)),this}lineTo(e,n){return this.injectMoveToIfNeeded(),this.addVerb(1),this._segmentMask|=1,this.addPoint(e,n)}quadraticCurveTo(e,n,s,r){return this.injectMoveToIfNeeded(),this.addVerb(2),this.addPoint(e,n),this._segmentMask|=2,this.addPoint(s,r)}bezierCurveTo(e,n,s,r,a,o){return this.cubicCurveTo(e,n,s,r,a,o)}cubicCurveTo(e,n,s,r,a,o){return this.injectMoveToIfNeeded(),this.addVerb(3),this.addPoint(e,n),this.addPoint(s,r),this._segmentMask|=8,this.addPoint(a,o)}conicTo(e,n,s,r,a){const o=4*a/(3*(a+1)),h=this.lastPoint,c=h.x+(e-h.x)*o,l=h.y+(n-h.y)*o,u=s+(e-s)*o,f=r+(n-r)*o;return this.cubicCurveTo(c,l,u,f,s,r)}closePath(){return this.isEmpty||(this.lastVerb!==5&&this.addVerb(5),this._needMoveTo=!0),this}rect(e,n,s,r){return this.moveTo(e,n),this.lineTo(e+s,n),this.lineTo(e+s,n+r),this.lineTo(e,n+r),this.closePath()}roundRect(e,n,s,r,a){let o=UT(a);const h=[N.create(o.tl,o.tl),N.create(o.tr,o.tr),N.create(o.br,o.br),N.create(o.bl,o.bl)];let c=Gn.default();c.setRectRadii(Ai.fromXYWH(e,n,s,r),h),this.addRRect(c)}roundRect2(e,n,s,r,a=0){YT.call(this,e,n,s,r,a)}ellipse2(e,n,s,r,a=0,o=0,h=xx,c=!1){({startAngle:o,endAngle:h}=gx(o,h,c));let l=h-o,u=o;if(Math.abs(l-Math.PI*2)<=1e-6){const f=l/2;this.arcToOval(e,n,s,r,a,u,f,!0),this.arcToOval(e,n,s,r,a,u+f,f,!1)}else this.arcToOval(e,n,s,r,a,u,l,!0)}ellipse(e,n,s,r,a=0,o=0,h=xx,c=!1){({startAngle:o,endAngle:h}=gx(o,h,c));const l=h-o,u=fy(e,n,s,r,a,o);this.isEmpty?this.moveTo(u.x,u.y):this.lineTo(u.x,u.y);const f=Math.ceil(Math.abs(l)/(Math.PI/2));let d=l/f,p=o;for(let y=0;y<f;y++){const x=p+d,g=Lu(e,n,s,r,a,p,x);this.bezierCurveTo(g[2],g[3],g[4],g[5],g[6],g[7]),p=x}return this}ellipseArc(e,n,s,r,a,o,h,c,l){Yh(e,n,s,r,a,o,h,c,l,(u,f,d,p,y,x,g,m,v)=>{v===0&&(this.isEmpty?this.moveTo(u,f):this.lineTo(u,f)),this.cubicCurveTo(d,p,y,x,g,m)})}arc(e,n,s,r,a,o=!1){this.ellipse(e,n,s,s,0,r,a,o)}arcTo(e,n,s,r,a){if(this.injectMoveToIfNeeded(),a===0){this.lineTo(e,n);return}const o=this.lastPoint,h=N.fromPoint(o),c=N.create(e,n),l=N.create(s,r);let u=c.clone().sub(h).normalize(),f=l.clone().sub(c).normalize(),d=u.dot(f),p=u.cross(f);if(!u.isFinite()||!f.isFinite()||Math.abs(p)<=1e-6)return this.lineTo(e,n);let y=Math.abs(a*(1-d)/p),x=c.clone().sub(u.mulScalar(y)),g=c.clone().add(f.mulScalar(y)),m=Math.sqrt(.5+d*.5);this.lineTo(x.x,x.y),this.conicTo(e,n,g.x,g.y,m)}arcTo2(e,n,s,r,a){if(this.injectMoveToIfNeeded(),a===0){this.lineTo(e,n);return}const o=this.lastPoint,h=N.fromPoint(o),c=N.create(e,n),l=N.create(s,r);let u=c.clone().sub(h).normalize(),f=l.clone().sub(c).normalize(),d=u.dot(f),p=u.cross(f);if(Math.abs(p)<=1e-6){this.lineTo(e,n);return}let y=Math.abs(a*(1-d)/p),x=c.clone().sub(u.mulScalar(y)),g=c.clone().add(f.mulScalar(y)),m=p>0;this.lineTo(x.x,x.y),this.ellipseArc(x.x,x.y,g.x,g.y,a,a,0,!1,m)}arcToOval(e,n,s,r,a,o,h,c=!1){const{x1:l,y1:u,x2:f,y2:d,fa:p,fs:y}=ly(e,n,s,r,a,o,h);c&&this.moveTo(l,u),this.ellipseArc(l,u,f,d,s,r,a,!!p,!!y)}addCircle(e,n,s,r=!1){return s>=0&&this.addOval(Ai.fromLTRB(e-s,n-s,e+s,n+s),r),this}addPolygon(e,n=!0){if(e.length<=0)return this;this.moveTo(e[0],e[1]);for(let s=2;s<e.length;s+=2){let r=e[s],a=e[s+1];this.lineTo(r,a)}return n&&this.closePath(),this}addOval(e,n=!1,s=1){let r=new $T(e,n,s),a=new ff(e,n,s+(n?1:0)),o=Math.SQRT1_2;this.moveTo(r.current.x,r.current.y),a.next(),r.next();for(let h=0;h<4;++h)this.conicTo(a.get(h).x,a.get(h).y,r.get(h).x,r.get(h).y,o);this.closePath()}addRect(e,n=!1,s=0){let r=new ff(e,n,s);return this.moveTo(r.get(0).x,r.get(0).y),this.lineTo(r.get(1).x,r.get(1).y),this.lineTo(r.get(2).x,r.get(2).y),this.lineTo(r.get(3).x,r.get(3).y),this.closePath()}addRRect(e,n=!1,s=n?7:6){let r=e.getBounds();if(e.isRect()||e.isEmpty())this.addRect(r,n,(s+1)/2);else if(e.isOval())this.addOval(r,n,s/2);else{const a=(s&1)==+(n==!1);let o=Math.SQRT1_2,h=new VT(e,n,s);const c=s/2+(n?1:0);let l=new ff(r,n,c);if(this.moveTo(h.current.x,h.current.y),a){for(let u=0;u<3;++u)l.next(),h.next(),this.conicTo(l.current.x,l.current.y,h.current.x,h.current.y,o),h.next(),this.lineTo(h.current.x,h.current.y);l.next(),h.next(),this.conicTo(l.current.x,l.current.y,h.current.x,h.current.y,o)}else for(let u=0;u<4;++u)h.next(),this.lineTo(h.current.x,h.current.y),l.next(),h.next(),this.conicTo(l.current.x,l.current.y,h.current.x,h.current.y,o);this.closePath()}}copy(e){return this.points=e.points.slice(),this.verbs=e.verbs.slice(),this._lastMovePointIndex=e._lastMovePointIndex,this._needMoveTo=e._needMoveTo,this}clone(){return Rs.default().copy(this)}equals(e){if(this.points.length!==e.points.length)return!1;for(let n=0;n<this.points.length;n++){const s=this.points[n],r=e.points[n];if(s!==r)return!1}return!0}transform(e){for(let n=0;n<this.points.length;n+=2){const s=this.points[n],r=this.points[n+1];this.points[n]=e[0]*s+e[2]*r+e[4],this.points[n+1]=e[1]*s+e[3]*r+e[5]}}scaleRound(e,n){for(let s=0;s<this.points.length;s+=2){const r=this.points[s],a=this.points[s+1];this.points[s]=Math.round(r*e),this.points[s+1]=Math.round(a*e)}}computeTightBounds(){if(this.isEmpty)return As.empty();if(this._segmentMask===1)return this.getBounds();const e=As.default();return this.visit({moveTo:(n,s)=>{e.expandByXY(n,s)},lineTo:(n,s,r,a)=>{e.expandByXY(r,a)},quadraticCurveTo:(n,s,r,a,o,h)=>{let c=qr.fromXY(n,s,r,a,o,h).getBoundingBox();e.expandByPoint(c.min),e.expandByPoint(c.max)},cubicCurveTo(n,s,r,a,o,h,c,l){let u=Bu.fromXY(n,s,r,a,o,h,c,l).getBoundingBox();e.expandByPoint(u.min),e.expandByPoint(u.max)}}),e}fatten(e=1){const n=Rs.default();return this.isEmpty||this.visit({moveTo:(s,r)=>{n.moveTo(s,r)},lineTo:(s,r,a,o)=>{n.lineTo(a,o)},quadraticCurveTo:(s,r,a,o,h,c)=>{qr.fromXY(s,r,a,o,h,c).fatten(e).forEach(u=>{n.lineTo(u.x,u.y)})},cubicCurveTo:(s,r,a,o,h,c,l,u)=>{Bu.fromXY(s,r,a,o,h,c,l,u).fatten(e).forEach(d=>{n.lineTo(d.x,d.y)})},close:()=>{n.closePath()}}),n}toPolygons(e=!0,n=1){const s=[];let r=null;return this.fatten(n).visit({moveTo:(o,h)=>{r!==null&&s.push(r),r=[o,h]},lineTo:(o,h,c,l)=>{r.push(c,l)},close:(o,h)=>{e&&(r.push(o,h),s.push(r),r=null)}}),r!==null&&s.push(r),s}getBounds(){return this._bounds||(this._bounds=As.default().setFromVertices(this.points)),this._bounds}visit(e){const n=this.points,s=this.verbs;let r=0,a={x:0,y:0};for(let o=0,h=0,c=s.length;o<c;o++)switch(s[o]){case 0:e.moveTo?.(n[h],n[h+1]),a.x=n[h],a.y=n[h+1],r=h,h+=2;break;case 1:e.lineTo?.(a.x,a.y,n[h],n[h+1]),a.x=n[h],a.y=n[h+1],h+=2;break;case 2:e.quadraticCurveTo?.(a.x,a.y,n[h],n[h+1],n[h+2],n[h+3]),a.x=n[h+2],a.y=n[h+3],h+=4;break;case 3:e.cubicCurveTo?.(a.x,a.y,n[h],n[h+1],n[h+2],n[h+3],n[h+4],n[h+5]),a.x=n[h+4],a.y=n[h+5],h+=6;break;case 5:e.close?.(n[r],n[r+1],a.x,a.y);break}}invertVisit(e){const n=this.points,s=this.verbs;let r=0,a=!0,o=!1,h={x:0,y:0};for(let c=s.length-1,l=n.length;c>=0;c--){let u=s[c];switch(a&&(l-=2,a=!1,e.moveTo?.(n[l],n[l+1]),h.x=n[l],h.y=n[l+1],r=l),u){case 0:o&&(e.close?.(n[r],n[r+1],h.x,h.y),o=!1),a=!0;break;case 1:l-=2,e.lineTo?.(h.x,h.y,n[l],n[l+1]),h.x=n[l],h.y=n[l+1];break;case 2:l-=4,e.quadraticCurveTo?.(h.x,h.y,n[l+2],n[l+3],n[l],n[l+1]),h.x=n[l],h.y=n[l+1];break;case 3:l-=6,e.cubicCurveTo?.(h.x,h.y,n[l+4],n[l+5],n[l+2],n[l+3],n[l],n[l+1]),h.x=n[l],h.y=n[l+1];break;case 5:o=!0;break}}}addPath(e,n){return n&&(e=e.clone(),e.transform(n)),this._segmentMask|=e._segmentMask,this._needMoveTo=e._needMoveTo,this._lastMovePointIndex=this.points.length+e._lastMovePointIndex,this.points=this.points.concat(e.points),this.verbs=this.verbs.concat(e.verbs),this}addReversePath(e){e.invertVisit({moveTo:(n,s)=>{this.moveTo(n,s)},lineTo:(n,s,r,a)=>{this.lineTo(r,a)},quadraticCurveTo:(n,s,r,a,o,h)=>{this.quadraticCurveTo(r,a,o,h)},cubicCurveTo:(n,s,r,a,o,h,c,l)=>{this.cubicCurveTo(r,a,o,h,c,l)},close:()=>{this.closePath()}})}reversePathTo(e){e.isEmpty||e.invertVisit({moveTo:(n,s)=>{},lineTo:(n,s,r,a)=>{this.lineTo(r,a)},quadraticCurveTo:(n,s,r,a,o,h)=>{this.quadraticCurveTo(r,a,o,h)},cubicCurveTo:(n,s,r,a,o,h,c,l)=>{this.cubicCurveTo(r,a,o,h,c,l)},close:()=>{this.closePath()}})}offset(e,n){for(let s=0;s<this.points.length;s+=2)this.points[s]+=e,this.points[s+1]+=n}isZeroLengthSincePoint(e){let n=this.points.length/2-e;if(n<2)return!0;let s=this.points[e*2],r=this.points[e*2+1];for(let a=1;a<n;a++)if(!(s===this.points[e+a*2]&&r===this.points[e+a*2+1]))return!1;return!0}finish(){return this.isEmpty||this.verbs.length==1?null:this}toCanvas(e){this.visit({moveTo:(n,s)=>{e.moveTo(n,s)},lineTo:(n,s,r,a)=>{e.lineTo(r,a)},quadraticCurveTo:(n,s,r,a,o,h)=>{e.quadraticCurveTo(r,a,o,h)},cubicCurveTo:(n,s,r,a,o,h,c,l)=>{e.bezierCurveTo(r,a,o,h,c,l)},close:()=>{e.closePath()}})}toPath2D(){const e=new Path2D;return this.toCanvas(e),e}toSvgPath(){let e=[];return this.visit({moveTo:(n,s)=>{e.push(["M",n,s])},lineTo:(n,s,r,a)=>{e.push(["L",r,a])},quadraticCurveTo:(n,s,r,a,o,h)=>{e.push(["Q",r,a,o,h])},cubicCurveTo:(n,s,r,a,o,h,c,l)=>{e.push(["C",r,a,o,h,c,l])},close:()=>{e.push(["Z"])}}),e.map(n=>n[0]+n.slice(1).join(" ")).join("")}toPoints(){const e=[];for(let n=0;n<this.points.length;n+=2)e.push({x:this.points[n],y:this.points[n+1]});return e}}const jT=3402823466e29,df=1/4096,pf=Math.SQRT1_2;function HT(i,e=1e-6){return Math.abs(i)<=e}const Mx=Math.PI,bx=11920929e-14;class yf{static from_points(e){let n=e[0].clone(),s=e[1].clone(),r=e[2].clone(),a=Xr(s.clone().sub(n)),o=r.clone().sub(Xr(s)).add(n);return new this({a:o,b:a,c:n})}a=N.default();b=N.default();c=N.default();constructor(e){e&&Object.assign(this,e)}eval(e){return N.default().copy(this.a).multiply(e).add(this.b).mul(e).add(this.c)}}class _x{static from_points(e){let n=e[0].clone(),s=e[1].clone(),r=e[2].clone(),a=e[3].clone(),o=N.splat(3);return new this({a:a.clone().add(s.clone().sub(r).mul(o)).sub(n),b:o.clone().mul(r.clone().sub(Xr(s)).add(n)),c:o.clone().mul(s.clone().sub(n)),d:n.clone()})}a=N.default();b=N.default();c=N.default();d=N.default();constructor(e){e&&Object.assign(this,e)}eval(e){return N.default().copy(this.a).multiply(e).add(this.b).mul(e).add(this.c).mul(e).add(this.d)}}function Sx(){return new Array(3)}function XT(i,e,n){let s=i[0].clone(),r=i[1].clone(),a=i[2].clone(),o=N.splat(e),h=Pi(s,r,o),c=Pi(r,a,o);n[0]=N.from(s),n[1]=N.from(h),n[2]=N.from(Pi(h,c,o)),n[3]=N.from(c),n[4]=N.from(a)}function ao(i,e,n,s){if(i==0){let c=oo(-n,e);return c?(s[0]=c,1):0}let r=e*e-4*i*n;if(r<0)return 0;r=Math.sqrt(r);let a=r;if(!Number.isFinite(a))return 0;let o=e<0?-(e-a)/2:-(e+a)/2,h=0;{let c=oo(o,i);c&&(s[h]=c,h+=1)}{let c=oo(n,o);c&&(s[h]=c,h+=1)}return h==2&&(s[0]>s[1]?[s[0],s[1]]=[s[1],s[0]]:s[0]==s[1]&&(h-=1)),h}function xf(i,e,n){let s=i[e];return i[e]=i[n],i[n]=s,i}function gf(i,e,n){let s=i[0].clone(),r=i[1].clone(),a=i[2].clone(),o=i[3].clone(),h=N.splat(e),c=Pi(s,r,h),l=Pi(r,a,h),u=Pi(a,o,h),f=Pi(c,l,h),d=Pi(l,u,h),p=Pi(f,d,h);n[0]=N.from(s),n[1]=N.from(c),n[2]=N.from(f),n[3]=N.from(p),n[4]=N.from(d),n[5]=N.from(u),n[6]=N.from(o)}function ZT(i,e,n){return oo(i-e,i-e-e+n)}function oo(i,e){return i<0&&(i=-i,e=-e),e==0||i==0||i>=e?void 0:i/e}function Pi(i,e,n){return N.default().copy(i).add(e.clone().sub(i)).multiply(n)}function Xr(i){return N.default().copy(i).add(i)}function Tx(i){let e=i[1].x-i[0].x,n=i[1].y-i[0].y,s=i[0].x-i[1].x-i[1].x+i[2].x,r=i[0].y-i[1].y-i[1].y+i[2].y,a=-(e*s+n*r),o=s*s+r*r;if(o<0&&(a=-a,o=-o),a<=0)return 0;if(a>=o)return 1;let h=a/o;return(h<0||h>1)&&console.assert(""),h}class Os{static ZERO=0;static ONE=1;static new_clamped(e){return Number.isFinite(e)?We(e,0,1):this.ZERO}}function ho(i,e){return N.from(yf.from_points(i).eval(N.splat(e)))}function Ex(i,e){if(e==Os.ZERO&&i[0]==i[1]||e==Os.ONE&&i[1]==i[2])return i[2].clone().sub(i[0]);let n=i[0].clone(),s=i[1].clone(),r=i[2].clone(),a=s.clone().sub(n),h=r.clone().sub(s).sub(a).clone().mul(N.splat(e)).add(a);return N.from(h).add(h)}function mf(i,e){let n=zx([i[0].x,i[1].x,i[2].x,i[3].x]),s=zx([i[0].y,i[1].y,i[2].y,i[3].y]);for(let a=0;a<4;a++)n[a]+=s[a];let r=JT(n,e);return e.slice(0,r)}function zx(i){let e=i[1]-i[0],n=i[2]-2*i[1]+i[0],s=i[3]+3*(i[1]-i[2])-i[0];return[s*s,3*n*s,2*n*n+s*e,e*n]}function JT(i,e){if(HT(i[0])){let f=Sx(),d=ao(i[1],i[2],i[3],f);for(let p=0;p<d;p++)e[p]=f[p];return d}let n=1/i[0],s=i[1]*n,r=i[2]*n,a=i[3]*n,o=(s*s-r*3)/9,h=(2*s*s*s-9*s*r+27*a)/54,c=o*o*o,l=h*h-c,u=s/3;if(l<0){let f=Math.acos(We(h/Math.sqrt(c),-1,1)),d=-2*Math.sqrt(o);return e[0]=Os.new_clamped(d*Math.cos(f/3)-u),e[1]=Os.new_clamped(d*Math.cos((f+2*Mx)/3)-u),e[2]=Os.new_clamped(d*Math.cos((f-2*Mx)/3)-u),QT(e),KT(e)}else{let f=Math.abs(h)+Math.sqrt(l);return f=tE(f),h>0&&(f=-f),f!=0&&(f+=o/f),e[0]=Os.new_clamped(f-u),1}}function QT(i){i[0]>i[1]&&xf(i,0,1),i[1]>i[2]&&xf(i,1,2),i[0]>i[1]&&xf(i,0,1)}function KT(i){let e=3;return i[1]==i[2]&&(e=2),i[0]==i[1]&&(e=1),e}function tE(i){return Math.pow(i,.3333333)}function uc(i,e){return N.from(_x.from_points(i).eval(N.splat(e)))}function Cx(i,e){if(e==0&&i[0]==i[1]||e==1&&i[2]==i[3]){let n=e==0?i[2].clone().sub(i[0]):i[3].clone().sub(i[1]);return n.x==0&&n.y==0&&(n=i[3].clone().sub(i[0])),n}else return Ax(i,e)}function Ax(i,e){let n=i[0].clone(),s=i[1].clone(),r=i[2].clone(),a=i[3].clone(),o=new yf({a:a.clone().add(N.splat(3).mul(s.clone().sub(r))).sub(n),b:Xr(r.clone().sub(Xr(s)).add(n)),c:s.clone().sub(n)});return N.from(o.eval(N.splat(e)))}function eE(i,e,n,s,r){let a=s-i+3*(e-n),o=2*(i-e-e+n),h=e-i;const c=ao(a,o,h,r);return r.slice(0,c)}function Px(i,e){let n=i[1].x-i[0].x,s=i[1].y-i[0].y,r=i[2].x-2*i[1].x+i[0].x,a=i[2].y-2*i[1].y+i[0].y,o=i[3].x+3*(i[1].x-i[2].x)-i[0].x,h=i[3].y+3*(i[1].y-i[2].y)-i[0].y,c=ao(r*h-a*o,n*h-s*o,n*a-s*r,e);return e.slice(0,c)}function Ix(i){if(i[0].equals(i[1])||i[2].equals(i[3])||Rx(i,0,2)||Rx(i,2,0))return;let e=Array.from({length:3},()=>Os.ZERO),n=mf(i,e);for(let s of n){if(0>=s||s>=1)continue;let a=Ax(i,s).magnitudeSquared(),o=nE(i);if(a<o)return We(s,bx,1-bx)}}function Rx(i,e,n){let s=i[n],r=i[n+1].clone().sub(s),a=[0,0];for(let o=0;o<2;o++){let h=i[e+o].clone().sub(s);a[o]=r.clone().cross(h)}return a[0]*a[1]>=0}function nE(i){return(i[1].distanceSquared(i[0])+i[2].distanceSquared(i[1])+i[3].distanceSquared(i[2]))*1e-8}class Un{points=N.makeZeroArray(3);weight=0;static default(){return new this}static new(e,n,s,r){const a=this.default();return a.points[0].copy(e),a.points[1].copy(n),a.points[2].copy(s),a.weight=r,a}static from_points(e,n){return this.new(e[0],e[1],e[2],n)}static build_unit_arc(e,n,s,r,a){let o=e.dot(n),h=e.cross(n);if(Math.abs(h)<=df&&o>0&&(h>=0&&s==0||h<=0&&s==1))return;s==1&&(h=-h);let l=0;h==0?l=2:o==0?l=h>0?1:3:(h<0&&(l+=2),o<0!=h<0&&(l+=1));let u=[N.create(1,0),N.create(1,1),N.create(0,1),N.create(-1,1),N.create(-1,0),N.create(-1,-1),N.create(0,-1),N.create(1,-1)];const f=pf;let d=l;for(let m=0;m<d;m++)a[m]=Un.new(u[m*2],u[m*2+1],u[m*2+2],f);let p=N.create(o,h),y=u[l*2],x=y.dot(p);if(x<1){let m=N.create(y.x+o,y.y+h),v=Math.sqrt((1+x)/2);m.setLength(1/v),y.equalsEpsilon(m)||(a[d]=Un.new(y,m,p,v),d+=1)}let g=Te.fromSinCos(e.y,e.x);s==1&&(g=g.preScale(1,-1)),r&&g.premultiply(r);for(let m=0;m<d;m++)g.mapPoints(a[m].points,a[m].points);if(d!=0)return a.slice(0,d)}constructor(e){e&&(this.points.forEach((n,s)=>{e.points[s]&&n.copy(e.points[s])}),this.weight=e.weight)}compute_quad_pow2(e){if(e<0||!Number.isFinite(e))return;const n=this;if(!n.points[0].isFinite()||!n.points[1].isFinite()||!n.points[2].isFinite())return;const s=4;let r=n.weight-1,a=r/(4*(2+r)),o=a*(n.points[0].x-2*n.points[1].x+n.points[2].x),h=a*(n.points[0].y-2*n.points[1].y+n.points[2].y),c=Math.sqrt(o*o+h*h),l=0;for(let u=0;u<s&&!(c<=e);u++)c*=.25,l+=1;return Math.max(l,1)}chop_into_quads_pow2(e,n){const s=this;n[0]=s.points[0],vf(s,n.slice(1),e);let a=2*(1<<e)+1;if(n.slice(0,a).some(h=>!Number.isFinite(h)))for(let h=0;h<a-1;h++)this.points[h+1]=this.points[1];return 1<<e}chop(){const e=this;let n=N.splat(1/(1+e.weight)),s=sE(e.weight),r=e.points[0].clone(),a=e.points[1].clone(),o=e.points[2].clone(),c=N.splat(e.weight).clone().mul(a),l=r.clone().add(Xr(c)).add(o).multiply(n).mul(N.splat(.5)),u=N.from(l);if(!u.isFinite()){let f=e.weight,d=f*2,p=1/(1+f)*.5;u.x=(e.points[0].x+d*e.points[1].x+e.points[2].x)*p,u.y=(e.points[0].y+d*e.points[1].y+e.points[2].y)*p}return[new Un({points:[e.points[0],N.from(r.clone().add(c).mul(n)),u],weight:s}),new Un({points:[u,N.from(c.clone().add(o).mul(n)),e.points[2]],weight:s})]}}function iE(i,e,n,s,r){let a=i.dot(e),o=i.cross(e);if(Math.abs(o)<=df&&a>0&&(o>=0&&n==0||o<=0&&n==1))return;n==1&&(o=-o);let c=0;o==0?c=2:a==0?c=o>0?1:3:(o<0&&(c+=2),a<0!=o<0&&(c+=1));let l=[N.create(1,0),N.create(1,1),N.create(0,1),N.create(-1,1),N.create(-1,0),N.create(-1,-1),N.create(0,-1),N.create(1,-1)];const u=pf;let f=c;for(let g=0;g<f;g++)r[g]=Un.from_points(l.slice(g*2),u);let d=N.create(a,o),p=l[c*2],y=p.dot(d);if(y<1){let g=N.create(p.x+a,p.y+o),m=Math.sqrt((1+y)/2);g.setLength(1/m),p.equalsEpsilon(g)||(r[f]=Un.new(p,g,d,m),f+=1)}let x=Te.fromSinCos(i.y,i.x);if(n==1&&(x=x.preScale(1,-1)),x=x.premultiply(s),r.slice(f).forEach((g,m)=>{x.mapPoints(g.points,g.points)}),f!=0)return r.slice(0,f)}function sE(i){return Math.sqrt(.5+i*.5)}function vf(i,e,n){if(n==0)return e[0]=i.points[1],e[1]=i.points[2],e.slice(2);{let s=i.chop(),r=i.points[0].y,a=i.points[2].y;if(fc(r,i.points[1].y,a)){let o=s[0].points[2].y;if(!fc(r,o,a)){let h=Math.abs(o-r)<Math.abs(o-a)?r:a;s[0].points[2].y=h,s[1].points[0].y=h}fc(r,s[0].points[1].y,s[0].points[2].y)||(s[0].points[1].y=r),fc(s[1].points[0].y,s[1].points[1].y,a)||(s[1].points[1].y=a)}return n-=1,e=vf(s[0],e,n),vf(s[1],e,n)}}function fc(i,e,n){return(i-e)*(n-e)<=0}class rE{points=[];len=0;static compute(e,n,s,r){let a=Un.new(e,n,s,r),o=a.compute_quad_pow2(.25);if(o===void 0)return;let h=Array.from({length:64},()=>N.zero()),c=a.chop_into_quads_pow2(o,h);return new this({points:h,len:c})}constructor(e){e&&Object.assign(this,e)}}function aE(i,e,n){if(e.length<=0)n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3];else{let s=e[0],r=N.makeZeroArray(4),a=0;for(let o=0;o<e.length;o++){let h=[];gf(i,s,h);for(let l=0;l<h.length;l++)n[a+l]=h[l];if(o==e.length-1)break;a+=3,r[0]=n[a+0],r[1]=n[a+1],r[2]=n[a+2],r[3]=n[a+3],i=r;let c=oo(e[o+1]-e[o],1-e[o]);c!==void 0?s=c:(n[a+4].copy(i[3]),n[a+5].copy(i[3]),n[a+6].copy(i[3]))}}}function Ox(i,e=1e-6){return Math.abs(i)<=e}var kx=(i=>(i.Miter="miter",i.Round="round",i.Bevel="bevel",i.MiterClip="miter-clip",i))(kx||{}),Lx=(i=>(i.Butt="butt",i.Round="round",i.Square="square",i))(Lx||{}),Fx=(i=>(i.NonZero="nonzero",i.EvenOdd="evenodd",i))(Fx||{});class dc{isAutoClose=!1;path;verbIndex;pointsIndex;lastMoveTo=N.default();lastPoint=N.default();constructor(e){this.isAutoClose=e.isAutoClose??!1,this.verbIndex=e.verbIndex,this.pointsIndex=e.pointsIndex,this.path=e.path,e.lastMoveTo&&this.lastMoveTo.copy(e.lastMoveTo),e.lastPoint&&this.lastPoint.copy(e.lastPoint)}get curVerb(){return this.path.verbs[this.verbIndex-1]}get nextVerb(){return this.path.verbs[this.verbIndex]}copy(e){return this.isAutoClose=e.isAutoClose,this.verbIndex=e.verbIndex,this.pointsIndex=e.pointsIndex,this.lastMoveTo.copy(e.lastMoveTo),this.lastPoint.copy(e.lastPoint),this}clone(){return new dc({isAutoClose:this.isAutoClose,path:this.path,verbIndex:this.verbIndex,pointsIndex:this.pointsIndex,lastMoveTo:this.lastMoveTo,lastPoint:this.lastPoint})}*[Symbol.iterator](){const e=Array.from({length:this.path.points.length/2},(r,a)=>N.create(this.path.points[a*2],this.path.points[a*2+1])),n=this.path.verbs;let s=null;for(;this.verbIndex<n.length;){const r=n[this.verbIndex++];switch(r){case be.MoveTo:this.pointsIndex+=1,s=e[this.pointsIndex-1],this.lastMoveTo.copy(s),this.lastPoint.copy(this.lastMoveTo),yield{type:r,p0:e[this.pointsIndex-1]};break;case be.LineTo:this.pointsIndex+=1,this.lastPoint.copy(e[this.pointsIndex-1]),yield{type:r,p0:e[this.pointsIndex-1]};break;case be.QuadCurveTo:this.pointsIndex+=2,this.lastPoint.copy(e[this.pointsIndex-1]),yield{type:r,p0:e[this.pointsIndex-3],p1:e[this.pointsIndex-2],p2:e[this.pointsIndex-1]};break;case be.CubicCurveTo:this.pointsIndex+=3,this.lastPoint.copy(e[this.pointsIndex-1]),yield{type:r,p0:e[this.pointsIndex-4],p1:e[this.pointsIndex-3],p2:e[this.pointsIndex-2],p3:e[this.pointsIndex-1]};break;case be.Close:const a=this.autoClose();this.lastPoint.copy(this.lastMoveTo),yield a;break}}}hasValidTangent(){let e=this.clone();for(let n of e)switch(n.type){case be.MoveTo:return!1;case be.LineTo:{if(e.lastPoint.equals(n.p0))continue;return!0}case be.QuadCurveTo:{if(e.lastPoint.equals(n.p1)&&e.lastPoint.equals(n.p2))continue;return!0}case be.CubicCurveTo:{if(e.lastPoint.equals(n.p1)&&e.lastPoint.equals(n.p2)&&e.lastPoint.equals(n.p3))continue;return!0}case be.Close:return!1}return!1}setAutoClose(e){this.isAutoClose=e}autoClose(){return this.isAutoClose&&!this.lastPoint.equals(this.lastMoveTo)?(this.verbIndex-=1,{type:be.LineTo,p0:this.lastMoveTo}):{type:be.Close,p0:this.lastPoint,p1:this.lastMoveTo}}}class oE{constructor(e,n){this.inner=e,this.outer=n}swap(){[this.inner,this.outer]=[this.outer,this.inner]}}const wf=.707106781,Mf=(i,e,n,s,r)=>{r.lineTo(n.x,n.y)},hE=(i,e,n,s,r)=>{let a=e.clone();a.cw();let o=i.clone().add(a),h=o.clone().add(e);r.conicTo(h.x,h.y,o.x,o.y,wf),h.copy(o).sub(e),r.conicTo(h.x,h.y,n.x,n.y,wf)},cE=(i,e,n,s,r)=>{let a=e.clone();a.cw(),s?(r.setLastPoint(i.x+e.x+a.x,i.y+e.y+a.y),r.lineTo(i.x-e.x+a.x,i.y-e.y+a.y)):(r.lineTo(i.x+e.x+a.x,i.y+e.y+a.y),r.lineTo(i.x-e.x+a.x,i.y-e.y+a.y),r.lineTo(n.x,n.y))};function Nx(i){return Math.abs(i)<=Tf}function Bx(i){return i>=0?Nx(1-i)?3:2:Nx(1+i)?0:1}function bf(i,e){return i.x*e.y>i.y*e.x}function pc(i,e,n){n.lineTo(i.x,i.y),n.lineTo(i.x-e.x,i.y-e.y)}const Dx=(i,e,n,s,r,a,o,h,c)=>{function l(v,w,b,S,E,A,M,_,T,C){if(_=_.clone(),_.multiplyScalar(b),M=M.clone(),A=A.clone(),C){M.normalize();let P=A.dot(M),R=A.cross(M),k=0;Math.abs(R)<=Tf?k=1/T:k=(1/T-P)/R,A.multiplyScalar(b);let I=A.clone();I.cw();let L=_.clone();L.ccw();let F=N.default();F.addVectors(w,A).add(I.clone().multiplyScalar(k));let B=N.default();F.addVectors(w,_).add(L.clone().multiplyScalar(k)),S?v.outer.setLastPoint(F.x,F.y):v.outer.lineTo(F.x,F.y),v.outer.lineTo(B.x,B.y)}E||v.outer.lineTo(w.x+_.x,w.y+_.y),pc(w,_,v.inner)}function u(v,w,b,S,E,A,M){M=M.clone(),M.multiplyScalar(b),S?v.outer.setLastPoint(w.x+A.x,w.y+A.y):v.outer.lineTo(w.x+A.x,w.y+A.y),E||v.outer.lineTo(w.x+M.x,w.y+M.y),pc(w,M,v.inner)}let f=i.dot(n),d=Bx(f),p=i.clone(),y=n.clone(),x=N.default();if(d==3)return;if(d==0){h=!1,x.subVectors(y,p).multiplyScalar(s/2),l(c,e,s,o,h,p,x,y,r,a);return}let g=!bf(p,y);if(g&&(c.swap(),p.negate(),y.negate()),f==0&&r<=wf){x.addVectors(p,y).multiplyScalar(s),u(c,e,s,o,h,x,y);return}d==1?(x=N.create(y.y-p.y,p.x-y.x),g&&x.negate()):x=N.create(p.x+y.x,p.y+y.y);let m=Math.sqrt((1+f)/2);if(m<r){h=!1,l(c,e,s,o,h,p,x,y,r,a);return}x.setLength(s/m),u(c,e,s,o,h,x,y)},lE=(i,e,n,s,r,a,o,h)=>{let c=n.clone().multiplyScalar(s);bf(i,n)||(h.swap(),c.negate()),h.outer.lineTo(e.x+c.x,e.y+c.y),pc(e,c,h.inner)},uE=(i,e,n,s,r,a,o,h)=>Dx(i,e,n,s,r,!1,a,o,h),fE=(i,e,n,s,r,a,o,h)=>{Dx(i,e,n,s,r,!0,a,o,h)},_f=(i,e,n,s,r,a,o,h)=>{let c=i.dot(n);if(Bx(c)==3)return;let u=i.clone(),f=n.clone(),d=lc.CW;bf(u,f)||(h.swap(),u.negate(),f.negate(),d=lc.CCW);let p=Te.fromRows(s,0,0,s,e.x,e.y),y=new Array(5).fill(0).map(()=>new Un),x=Un.build_unit_arc(u,f,d,p,y);if(x){for(let g of x)h.outer.conicTo(g.points[1].x,g.points[1].y,g.points[2].x,g.points[2].y,g.weight);f.multiplyScalar(s),pc(e,f,h.inner)}};function qx(i,e,n,s,r,a){return a.setLengthFromPoint((e.x-i.x)*n,(e.y-i.y)*n,1)?(a.ccw(),r.copy(a).multiplyScalar(s),!0):!1}function dE(i,e,n,s){return s.setLengthFromPoint(i.x,i.y,1)?(s.ccw(),n.copy(s).multiplyScalar(e),!0):!1}class yc{static default(){return new this}quad=[N.default(),N.default(),N.default()];tangent_start=N.default();tangent_end=N.default();start_t=0;mid_t=0;end_t=0;start_set=!1;end_set=!1;opposite_tangents=!1;init(e,n){return this.start_t=e,this.mid_t=Math.min(1,Math.max(0,(e+n)/2)),this.end_t=n,this.start_set=!1,this.end_set=!1,this.start_t<this.mid_t&&this.mid_t<this.end_t}initWithStart(e){const n=this;return n.init(e.start_t,e.mid_t)?(n.quad[0].copy(e.quad[0]),n.tangent_start.copy(e.tangent_start),n.start_set=!0,!0):!1}initWithEnd(e){const n=this;return n.init(e.mid_t,e.end_t)?(n.quad[2].copy(e.quad[2]),n.tangent_end.copy(e.tangent_end),n.end_set=!0,!0):!1}}function pE(i){let e=Ii(i[1].clone().sub(i[0])),n=Ii(i[2].clone().sub(i[1]));if(e&n)return[N.default(),0];if(e|n)return[N.default(),1];if(!yE(i))return[N.default(),2];let s=Tx(i);if(s==0||s==1)return[N.default(),1];let r=ho(i,s);return[N.create(r.x,r.y),3]}function Ii(i){return+!i.canNormalize()}function yE(i){let e=-1,n=0,s=0;for(let h=0;h<2;h++)for(let c=h+1;c<3;c++){let l=i[c].clone().sub(i[h]),u=Math.max(Math.abs(l.x),Math.abs(l.y));e<u&&(n=h,s=c,e=u)}console.assert(n<=1),console.assert(s>=1&&s<=2),console.assert(n<s);let r=n^s^3,o=e*e*5e-6;return Zr(i[r],i[n],i[s])<=o}function Zr(i,e,n){let s=n.clone().sub(e),r=i.clone().sub(e),a=s.dot(r),o=s.dot(s),h=a/o;return h>=0&&h<=1?N.create(e.x*(1-h)+n.x*h,e.y*(1-h)+n.y*h).distanceSquared(i):i.distanceSquared(e)}function xE(i,e,n){let s=i[1].clone().sub(i[0]),r=[0,0,0];for(let l=0;l<3;l++)r[l]=(e[l].y-i[0].y)*s.x-(e[l].x-i[0].x)*s.y;let a=r[2],o=r[1],h=r[0];a+=h-2*o,o-=h;let c=ao(a,2*o,h,n);return n.slice(0,c)}function Sf(i,e,n){return i.distanceSquared(e)<=n*n}function $x(i){let e=i[1].clone().sub(i[0]),n=i[1].clone().sub(i[2]),s=e.magnitudeSquared(),r=n.magnitudeSquared();return s>r&&([e,n]=[n,e],r=s),e.setLength(r)?e.dot(n)>0:!1}function gE(i,e,n){let s=Math.min(i[0].x,i[1].x,i[2].x);if(e.x+n<s)return!1;let r=Math.max(i[0].x,i[1].x,i[2].x);if(e.x-n>r)return!1;let a=Math.min(i[0].y,i[1].y,i[2].y);if(e.y+n<a)return!1;let o=Math.max(i[0].y,i[1].y,i[2].y);return!(e.y-n>o)}function mE(i,e,n){let s=Ii(i[1].clone().sub(i[0])),r=Ii(i[2].clone().sub(i[1])),a=Ii(i[3].clone().sub(i[2]));if(s&r&a)return 0;if(s+r+a==2)return 1;if(!vE(i))return n&&(s?n.copy(i[2]):n.copy(i[1])),2;let o=[0,0,0];o=mf(i,o);let h=0;for(let c of o){if(0>=c||c>=1)continue;let l=uc(i,c);e[h]=N.create(l.x,l.y),!e[h].equals(i[0])&&!e[h].equals(i[3])&&(h+=1)}switch(h){case 0:return 1;case 1:return 1;case 2:return 4;case 3:return 5;default:return-1}}function vE(i){let e=-1,n=0,s=0;for(let h=0;h<3;h++)for(let c=h+1;c<4;c++){let l=i[c].clone().sub(i[h]),u=Math.max(Math.abs(l.x),Math.abs(l.y));e<u&&(n=h,s=c,e=u)}let r=1+(2>>s)>>n,a=n^s^r,o=e*e*1e-5;return Zr(i[r],i[n],i[s])<=o&&Zr(i[a],i[n],i[s])<=o}const wE={bevel:lE,miter:uE,"miter-clip":fE,round:_f},ME={butt:Mf,round:hE,square:cE},bE=3,Vx=[15,78,33,33],Tf=1/4096;class _E{static computeResolutionScale(e){let n=N.create(e.a,e.b).magnitude(),s=N.create(e.c,e.d).magnitude();if(Number.isFinite(n)&&Number.isFinite(s)){let r=Math.max(n,s);if(r>0)return r}return 1}radius=0;inv_miter_limit=0;res_scale=1;inv_res_scale=1;inv_res_scale_squared=1;first_normal=N.default();prev_normal=N.default();first_unit_normal=N.default();prev_unit_normal=N.default();first_pt=N.default();prev_pt=N.default();first_outer_pt=N.default();first_outer_pt_index_in_contour=0;segment_count=-1;prev_is_line=!1;capper;joiner;inner=Rs.default();outer=Rs.default();cusper=Rs.default();stroke_type=1;recursion_depth=0;found_tangents=!1;join_completed=!1;get moveToPt(){return this.first_pt}builders(){return new oE(this.inner,this.outer)}close(e){this.finishContour(!0,e)}moveTo(e){this.segment_count>0&&this.finishContour(!1,!1),this.segment_count=0,this.first_pt.copy(e),this.prev_pt.copy(e),this.join_completed=!1}finishContour(e,n){const s=this;if(s.segment_count>0){if(e){s.joiner(s.prev_unit_normal,s.prev_pt,s.first_unit_normal,s.radius,s.inv_miter_limit,s.prev_is_line,n,s.builders()),s.outer.closePath();let r=s.inner.lastPoint??N.create(0,0);s.outer.moveTo(r.x,r.y),s.outer.reversePathTo(s.inner),s.outer.closePath()}else{let r=s.inner.lastPoint?N.fromPoint(s.inner.lastPoint):N.create(0,0),a=n?s.inner:null;s.capper(s.prev_pt,s.prev_normal,r,a,s.outer),s.outer.reversePathTo(s.inner),a=s.prev_is_line?s.inner:null,s.capper(s.first_pt,s.first_normal.clone().negate(),s.first_outer_pt,a,s.outer),s.outer.closePath()}s.cusper.isEmpty||(s.outer.addPath(s.cusper),s.cusper.clear())}s.inner.clear(),s.segment_count=-1,s.first_outer_pt_index_in_contour=s.outer.points.length}preJoinTo(e,n,s,r){const a=this;let o=a.prev_pt.x,h=a.prev_pt.y;if(!qx(a.prev_pt,e,a.res_scale,a.radius,s,r)){if(a.capper===Mf)return!1;s.set(a.radius,0),r.set(1,0)}return a.segment_count==0?(a.first_normal.copy(s),a.first_unit_normal.copy(r),a.first_outer_pt=N.create(o+s.x,h+s.y),a.outer.moveTo(a.first_outer_pt.x,a.first_outer_pt.y),a.inner.moveTo(o-s.x,h-s.y)):a.joiner(a.prev_unit_normal,a.prev_pt,r,a.radius,a.inv_miter_limit,a.prev_is_line,n,a.builders()),a.prev_is_line=n,!0}postJoinTo(e,n,s){this.join_completed=!0,this.prev_pt.copy(e),this.prev_unit_normal.copy(s),this.prev_normal.copy(n),this.segment_count+=1}initQuad(e,n,s,r){this.stroke_type=e,this.found_tangents=!1,r.init(n,s)}quadStroke(e,n){let s=this,r=s.compareQuadQuad(e,n);if(r==2)return(s.stroke_type==1?s.outer:s.inner).quadraticCurveTo(n.quad[1].x,n.quad[1].y,n.quad[2].x,n.quad[2].y),!0;if(r==1)return s.addDegenerateLine(n),!0;if(s.recursion_depth+=1,s.recursion_depth>Vx[bE])return!1;let a=yc.default();return a.initWithStart(n),!s.quadStroke(e,a)||(a.initWithEnd(n),!s.quadStroke(e,a))?!1:(s.recursion_depth-=1,!0)}compareQuadQuad(e,n){const s=this;if(!n.start_set){let h=N.zero();s.quadPerpRay(e,n.start_t,h,n.quad[0],n.tangent_start),n.start_set=!0}if(!n.end_set){let h=N.zero();s.quadPerpRay(e,n.end_t,h,n.quad[2],n.tangent_end),n.end_set=!0}let r=s.intersectRay(0,n);if(r!=2)return r;let a=N.zero(),o=N.zero();return s.quadPerpRay(e,n.mid_t,o,a),s.strokeCloseEnough(n.quad.slice(),[a,o],n)}setRayPoints(e,n,s,r){const a=this;n.setLength(a.radius)||n.copy(N.create(a.radius,0));let o=a.stroke_type;s.x=e.x+o*n.y,s.y=e.y-o*n.x,r&&(r.x=s.x+n.x,r.y=s.y+n.y)}quadPerpRay(e,n,s,r,a){let o=this,h=ho(e,n);s.set(h.x,h.y),h=Ex(e,n);let c=N.create(h.x,h.y);c.isZero()&&(c=e[2].sub(e[0])),o.setRayPoints(s,c,r,a)}strokeCloseEnough(e,n,s){const r=this;let o=ho(e,.5);if(Sf(n[0],N.create(o.x,o.y),r.inv_res_scale))return $x(s.quad)?0:2;if(!gE(e,n[0],r.inv_res_scale))return 0;let h=new Array(3).fill(.5);if(h=xE(n,e,h),h.length!=1)return 0;let c=ho(e,h[0]),l=r.inv_res_scale*(1-Math.abs(h[0]-.5)*2);return Sf(n[0],N.create(c.x,c.y),l)?$x(s.quad)?0:2:0}intersectRay(e,n){const s=this;let r=n.quad[0],a=n.quad[2],o=n.tangent_start.clone().sub(r),h=n.tangent_end.clone().sub(a),c=o.cross(h);if(c==0||!Number.isFinite(c))return n.opposite_tangents=o.dot(h)<0,1;n.opposite_tangents=!1;let l=r.clone().sub(a),u=h.cross(l),f=o.cross(l);if(u>=0==f>=0){let p=Zr(r,a,n.tangent_end),y=Zr(a,r,n.tangent_start);return Math.max(p,y)<=s.inv_res_scale_squared?1:0}return u/=c,u>u-1?(e==0&&(n.quad[1].x=r.x*(1-u)+n.tangent_start.x*u,n.quad[1].y=r.y*(1-u)+n.tangent_start.y*u),2):(n.opposite_tangents=o.dot(h)<0,1)}addDegenerateLine(e){const n=this;n.stroke_type==1?n.outer.lineTo(e.quad[2].x,e.quad[2].y):n.inner.lineTo(e.quad[2].x,e.quad[2].y)}setCubicEndNormal(e,n,s,r,a){let o=this,h=e[1].clone().sub(e[0]),c=e[3].clone().sub(e[2]),l=Ii(h),u=Ii(c);if(l&&u){r.copy(n),a.copy(s);return}if(l&&(h=e[2].clone().sub(e[0]),l=Ii(h)),u&&(c=e[3].clone().sub(e[1]),u=Ii(c)),l||u){r.copy(n),a.copy(s);return}return dE(c,o.radius,r,a)}lineTo(e,n){const s=this;let r=s.prev_pt.equalsEpsilon(e,Tf*s.inv_res_scale);if(s.capper,Mf&&r||r&&(s.join_completed||n&&n.hasValidTangent()))return;let a=N.default(),o=N.default();s.preJoinTo(e,!0,a,o)&&(s.outer.lineTo(e.x+a.x,e.y+a.y),s.inner.lineTo(e.x-a.x,e.y-a.y),s.postJoinTo(e,a,o))}quadraticCurveTo(e,n){const s=this;let r=[s.prev_pt,e,n],[a,o]=pE(r);if(o==0){s.lineTo(n);return}if(o==1){s.lineTo(n);return}if(o==3){s.lineTo(a);let p=s.joiner;s.joiner=_f,s.lineTo(n),s.joiner=p;return}let h=N.default(),c=N.default(),l=N.default(),u=N.default();if(!s.preJoinTo(e,!1,h,c)){s.lineTo(n);return}let f=yc.default();s.initQuad(1,0,1,f),s.quadStroke(r,f),s.initQuad(-1,0,1,f),s.quadStroke(r,f),qx(r[1],r[2],s.res_scale,s.radius,l,u)||(l=h,u=c),s.postJoinTo(n,l,u)}bezierCurveTo(e,n,s){const r=this;let a=[r.prev_pt,e,n,s],o=Array.from({length:3},()=>N.zero()),h=N.zero(),c=mE(a,o,h);if(c==0){r.lineTo(s);return}if(c==1){r.lineTo(s);return}if(3<=c&&5>=c){r.lineTo(o[0]);let g=r.joiner;r.joiner=_f,4<=c&&r.lineTo(o[1]),c==5&&r.lineTo(o[2]),r.lineTo(s),r.joiner=g;return}let l=N.zero(),u=N.zero(),f=N.zero(),d=N.zero();if(!r.preJoinTo(h,!1,l,u)){r.lineTo(s);return}let p=new Array(3).fill(.5);p=Px(a,p);let y=0;for(let g=0,m=p.length;g<=m;g++){let v=Number.isFinite(p[g])?p[g]:1,w=yc.default();r.initQuad(1,y,v,w),r.cubicStroke(a,w),r.initQuad(-1,y,v,w),r.cubicStroke(a,w),y=v}let x=Ix(a);if(x){let g=uc(a,x);r.cusper.addCircle(g.x,g.y,r.radius)}r.setCubicEndNormal(a,l,u,f,d),r.postJoinTo(s,f,d)}cubicStroke(e,n){const s=this;if(!s.found_tangents){let a=s.tangentsMeet(e,n);if(a!=2){let o=Sf(n.quad[0],n.quad[2],s.inv_res_scale);if((a==1||o)&&s.cubicMidOnLine(e,n))return s.addDegenerateLine(n),!0}else s.found_tangents=!0}if(s.found_tangents){let a=s.compareQuadCubic(e,n);if(a==2){let o=n.quad;return s.stroke_type==1?s.outer.quadraticCurveTo(o[1].x,o[1].y,o[2].x,o[2].y):s.inner.quadraticCurveTo(o[1].x,o[1].y,o[2].x,o[2].y),!0}if(a==1&&!n.opposite_tangents)return s.addDegenerateLine(n),!0}if(!Number.isFinite(n.quad[2].x)||!Number.isFinite(n.quad[2].x)||(s.recursion_depth+=1,s.recursion_depth>Vx[Number(s.found_tangents)]))return!1;let r=yc.default();return r.initWithStart(n)?s.cubicStroke(e,r)?r.initWithEnd(n)?s.cubicStroke(e,r)?(s.recursion_depth-=1,!0):!1:(s.addDegenerateLine(n),s.recursion_depth-=1,!0):!1:(s.addDegenerateLine(n),s.recursion_depth-=1,!0)}cubicMidOnLine(e,n){let s=this,r=N.zero();return s.cubicQuadMid(e,n,r),Zr(r,n.quad[0],n.quad[2])<s.inv_res_scale_squared}cubicQuadMid(e,n,s){let r=N.zero();this.cubicPerpRay(e,n.mid_t,r,s)}compareQuadCubic(e,n){let s=this;s.cubicQuadEnds(e,n);let r=s.intersectRay(0,n);if(r!=2)return r;let a=N.zero(),o=N.zero();return s.cubicPerpRay(e,n.mid_t,o,a),s.strokeCloseEnough(n.quad.slice(),[a,o],n)}cubicQuadEnds(e,n){const s=this;if(!n.start_set){let r=N.zero();s.cubicPerpRay(e,n.start_t,r,n.quad[0],n.tangent_start),n.start_set=!0}if(!n.end_set){let r=N.zero();s.cubicPerpRay(e,n.end_t,r,n.quad[2],n.tangent_end),n.end_set=!0}}tangentsMeet(e,n){return this.cubicQuadEnds(e,n),this.intersectRay(1,n)}cubicPerpRay(e,n,s,r,a){let o=this;s.copy(uc(e,n));let h=Cx(e,n),c=Array.from({length:7},()=>N.zero());if(h.x==0&&h.y==0){let l=e;Ox(n)?h=e[2].clone().sub(e[0]):Ox(1-n)?h=e[3].clone().sub(e[1]):(gf(e,n,c),h=c[3].clone().sub(c[2]),h.x==0&&h.y==0&&(h=c[3].clone().sub(c[1]),l=c)),h.x==0&&h.y==0&&(h=l[3].clone().sub(l[0]))}o.setRayPoints(s,h,r,a)}stroke(e,n){return this.strokeInner(e,n.strokeWidth,n.miterLimit,n.lineCap,n.lineJoin,this.res_scale)}strokeInner(e,n,s,r,a,o){const h=this;let c=0;a=="miter"&&(s<=1?a="bevel":c=1/s),a=="miter-clip"&&(c=1/s),h.res_scale=o,h.inv_res_scale=1/(o*4),h.inv_res_scale_squared=h.inv_res_scale**2,h.radius=n*.5,h.inv_miter_limit=c,h.first_normal=N.default(),h.prev_normal=N.default(),h.first_unit_normal=N.default(),h.prev_unit_normal=N.default(),h.first_pt=N.default(),h.prev_pt=N.default(),h.first_outer_pt=N.default(),h.first_outer_pt_index_in_contour=0,h.segment_count=-1,h.prev_is_line=!1,h.capper=ME[r],h.joiner=wE[a],h.inner.clear(),h.outer.clear(),h.cusper.clear(),h.stroke_type=1,h.recursion_depth=0,h.found_tangents=!1,h.join_completed=!1;let l=!1,u=new dc({path:e,verbIndex:0,pointsIndex:0,isAutoClose:!0});u.setAutoClose(!0);for(let f of u)switch(f.type){case be.MoveTo:h.moveTo(f.p0);break;case be.LineTo:h.lineTo(f.p0,u),l=!0;break;case be.QuadCurveTo:h.quadraticCurveTo(f.p1,f.p2),l=!1;break;case be.CubicCurveTo:h.bezierCurveTo(f.p1,f.p2,f.p3),l=!1;break;case be.Close:if(r!="butt"){if(h.hasOnlyMoveTo()){h.lineTo(h.moveToPt),l=!0;continue}if(h.isCurrentContourEmpty()){l=!0;continue}}h.close(l);break}return h.finish(l)}finish(e){return this.finishContour(!1,e),this.outer.clone()}hasOnlyMoveTo(){return this.segment_count==0}isCurrentContourEmpty(){return this.inner.isZeroLengthSincePoint(0)&&this.outer.isZeroLengthSincePoint(this.first_outer_pt_index_in_contour)}}const ns={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},SE=new Set(Object.keys(ns).concat(Object.keys(ns).map(i=>i.toLowerCase()))),TE=/([mlhvaqtcsz])([^mlhvaqtcsz]+)?/gi,EE=/-?\d*\.?\d+(e[-+]?\d+)?/gi;function Ef(i,e,n){return i>=e&&i<=n}function Gx(i){return Ef(i.charCodeAt(0),1,32)}function xc(i){return Ef(i.charCodeAt(0),48,57)}function Ux(i){return Gx(i)||i===","}function zE(i){return Ef(i.charCodeAt(0),97,122)}function CE(i){return String.fromCharCode(i.charCodeAt(0)-97+65)}function zf(i){let e=0;for(;i.length>0&&Gx(i[e]);)e++;return i.slice(e)}function gc(i){let e=0;for(;i.length>0&&Ux(i[e]);)e++;return i.slice(e)}function AE(i,e){i=zf(i);let n=0;for(n<i.length&&(i[n]==="+"||i[n]==="-")&&n++;n<i.length&&xc(i[n]);)n++;if(n<i.length&&i[n]===".")for(n++;n<i.length&&xc(i[n]);)n++;if(n<i.length&&(i[n]==="e"||i[n]==="E"))for(n++,n<i.length&&(i[n]==="+"||i[n]==="-")&&n++;n<i.length&&xc(i[n]);)n++;return n==0?(e.value=i,0):(e.value=i.substring(n),Number(i.substring(0,n)))}function Wx(i,e){i=zf(i);let n={value:""},s=AE(i,n);return i==n.value?"":(e&&(e.value=s),n.value)}function Yx(i,e,n,s){return i=Wx(i,e),i?(n&&(e.value+=s),i=gc(i),i):""}function PE(i,e,n){if(n>0){let s=0,r={value:0};for(;i=Wx(i,r),e[s]=r.value,!(--n==0||i.length<=0);)i=gc(i),s++}return i}function ks(i,e,n,s,r){if(i=PE(i,e,n),s)for(let a=0;a<n;a+=2)e[a]+=r.x,e[a+1]+=r.y;return i}function jx(i,e){let n=0,s=0,r=0,a=0,o=0,h=0,c=0,l=0,u="";for(let f=0,d=e.length;f<d;f++){const p=e[f];switch(p[0]){case"M":i.moveTo(p[1],p[2]),n=p[1],s=p[2],r=n,a=s;break;case"L":i.lineTo(p[1],p[2]),n=p[1],s=p[2];break;case"H":i.lineTo(p[1],s),n=p[1];break;case"V":i.lineTo(n,p[1]),s=p[1];break;case"Q":i.quadraticCurveTo(p[1],p[2],p[3],p[4]),o=p[1],h=p[2],n=p[3],s=p[4];break;case"T":c=n,l=s,(u==="Q"||u==="T")&&(c-=o-n,l-=h-s),i.quadraticCurveTo(c,l,p[1],p[2]),o=c,h=l,n=p[1],s=p[2];break;case"C":i.bezierCurveTo(p[1],p[2],p[3],p[4],p[5],p[6]),o=p[3],h=p[4],n=p[5],s=p[6];break;case"S":c=n,l=s,(u==="C"||u==="S")&&(c-=o-n,l-=h-s),i.bezierCurveTo(c,l,p[1],p[2],p[3],p[4]),o=p[1],h=p[2],n=p[3],s=p[4];break;case"A":{let y=n,x=s,g=p[1],m=p[2],v=p[3],w=!!p[4],b=!!p[5],S=p[6],E=p[7],A=S,M=E;Yh(y,x,S,E,g,m,v,w,b,(_,T,C,P,R,k,I,L,F)=>{i.bezierCurveTo(C,P,R,k,I,L),A=I,M=L}),n=A,s=M}break;case"Z":i.closePath(),n=r,s=a;break}u=p[0]}}function IE(i,e){const n=Xx(e);jx(i,n)}function RE(i){const e=i.match(EE);return e?e.map(Number):[]}function Hx(i){const e=[],n=String(i).trim();return n[0]!=="M"&&n[0]!=="m"||n.replace(TE,(s,r,a)=>{const o=RE(a);let h=r.toUpperCase(),c=r;if(h==="M"&&o.length>2&&(e.push([c,...o.splice(0,2)]),c=c==="m"?"l":"L"),o.length<ns[h])return"";for(e.push([c,...o.splice(0,ns[h])]);o.length>=ns[h]&&o.length&&ns[h];)e.push([c,...o.splice(0,ns[h])]);return""}),e}function Cf(i,e){let n={x:0,y:0},s={x:0,y:0},r={x:0,y:0},a=new Float32Array(7),o={value:0},h="",c="",l=!1;for(;e.length&&(e=zf(e),e[0]!=="");){let u=e[0];if(xc(u)||u==="-"||u==="+"||u==="."){if(h==""||h=="Z")return!1}else Ux(u)||(h=u,l=!1,zE(u)&&(l=!0,h=CE(u)),e=e.substring(1)),e=gc(e);switch(h){case"M":e=ks(e,a,2,l,s),i.moveTo(a[0],a[1]),c="",h="L",s.x=a[0],s.y=a[1];break;case"L":e=ks(e,a,2,l,s),i.lineTo(a[0],a[1]),s.x=a[0],s.y=a[1];break;case"H":e=Yx(e,o,l,s.x),i.lineTo(o.value,s.y),s.x=o.value;break;case"V":e=Yx(e,o,l,s.y),i.lineTo(s.x,o.value),s.y=o.value;break;case"C":e=ks(e,a,6,l,s),i.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]),r.x=a[2],r.y=a[3],s.x=a[4],s.y=a[5];break;case"S":e=ks(e,a.subarray(2),4,l,s),a[0]=s.x,a[1]=s.y,(c=="C"||c=="S")&&(a[0]-=r.x-s.x,a[1]-=r.y-s.y),i.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]),r.x=a[2],r.y=a[3],s.x=a[4],s.y=a[5];break;case"Q":e=ks(e,a,4,l,s),i.quadraticCurveTo(a[0],a[1],a[2],a[3]),r.x=a[0],r.y=a[1],s.x=a[2],s.y=a[3];break;case"T":e=ks(e,a.subarray(1),2,l,s),a[0]=s.x,a[1]=s.y,(c=="Q"||c=="T")&&(a[0]-=r.x-s.x,a[1]-=r.y-s.y),i.quadraticCurveTo(a[0],a[1],a[2],a[3]),r.x=a[0],r.y=a[1],s.x=a[2],s.y=a[3];break;case"A":e=ks(e,a,7,!1);let f=s.x,d=s.y,p=a[0],y=a[1],x=a[2],g=!!a[3],m=!!a[4],v=a[5],w=a[6];v=l?v+s.x:v,w=l?w+s.y:w,Yh(f,d,v,w,p,y,x,g,m,(b,S,E,A,M,_,T,C,P)=>{i.bezierCurveTo(E,A,M,_,T,C),s.x=T,s.y=C});break;case"Z":i.closePath(),s.x=n.x,s.y=n.y;break;default:return!1}c==""&&(n.x=s.x,n.y=s.y),c=h}return!0}function Xx(i){const e=[];let n=Hx(i),s=0,r=0,a=0,o=0,h=0,c=0,l=0,u=0;for(let f=0,d=n.length;f<d;f++){const p=n[f];let y=p[0].toUpperCase(),x=y!==p[0],g=p.slice(1);switch(y){case"M":s=x?s+g[0]:g[0],r=x?r+g[1]:g[1],g[0]=s,g[1]=r,a=s,o=r;break;case"L":s=x?s+g[0]:g[0],r=x?r+g[1]:g[1],g[0]=s,g[1]=r;break;case"H":s=x?s+g[0]:g[0],g[0]=s;break;case"V":r=x?r+g[0]:g[0],g[0]=r;break;case"Q":h=x?s+g[0]:g[0],c=x?r+g[1]:g[1],s=x?s+g[2]:g[2],r=x?r+g[3]:g[3],g[0]=h,g[1]=c,g[2]=s,g[3]=r;break;case"T":s=x?s+g[0]:g[0],r=x?r+g[1]:g[1],g[0]=s,g[1]=r;break;case"C":h=x?s+g[0]:g[0],c=x?r+g[1]:g[1],l=x?s+g[2]:g[2],u=x?r+g[3]:g[3],s=x?s+g[4]:g[4],r=x?r+g[5]:g[5],g[0]=h,g[1]=c,g[2]=l,g[3]=u,g[4]=s,g[5]=r;break;case"S":l=x?s+g[0]:g[0],u=x?r+g[1]:g[1],s=x?s+g[2]:g[2],r=x?r+g[3]:g[3],g[0]=l,g[1]=u,g[2]=s,g[3]=r;break;case"A":let m=g[0],v=g[1],w=g[2],b=g[3],S=g[4];s=x?s+g[5]:g[5],r=x?r+g[6]:g[6],g[0]=m,g[1]=v,g[2]=w,g[3]=b,g[4]=S,g[5]=s,g[6]=r;break;case"Z":s=a,r=o;break}e.push([y].concat(g))}return e}class Af{commands=[];dirty=!1;_cb=null;constructor(e){typeof e=="string"?Cf(this,e):e instanceof Af&&(this.commands=[...e.commands])}fromSvgPath(e){Cf(this,e)}onChange(e){this._cb=e}equals(e){if(this.commands.length!==e.commands.length)return!1;for(let n=0;n<this.commands.length;n++){const s=this.commands[n],r=e.commands[n];if(s[0]!==r[0])return!1;for(let a=1;a<s.length;a++)if(s[a]!==r[a])return!1}return!0}reset(){this.commands.length=0,this.dirty=!0,this._cb?.()}clone(){return new this.constructor(this)}addCmd(e,n){this.commands.push([e].concat(n)),this.dirty=!0,this._cb?.()}addPath(e,n){this.commands=e.commands.slice()}arc(e,n,s,r,a,o=!1){this.addCmd("AC",[e,n,s,r,a,o])}arcTo(e,n,s,r,a){this.addCmd("AT",[e,n,s,r,a])}bezierCurveTo(e,n,s,r,a,o){this.addCmd("C",[e,n,s,r,a,o])}closePath(){this.commands.length>0&&this.commands[this.commands.length-1][0]!=="Z"&&this.addCmd("Z",[])}ellipse(e,n,s,r,a,o,h,c=!1){this.addCmd("E",[e,n,s,r,a,o,h,c])}lineTo(e,n){this.addCmd("L",[e,n])}moveTo(e,n){this.addCmd("M",[e,n])}quadraticCurveTo(e,n,s,r){this.addCmd("Q",[e,n,s,r])}rect(e,n,s,r){this.addCmd("R",[e,n,s,r])}roundRect(e,n,s,r,a){this.addCmd("RR",[e,n,s,r,a])}toPath2D(e=new Path2D){return this.toCanvas(e)}toCanvas(e){for(const n of this.commands)switch(n[0]){case"M":e.moveTo(n[1],n[2]);break;case"L":e.lineTo(n[1],n[2]);break;case"Q":e.quadraticCurveTo(n[1],n[2],n[3],n[4]);break;case"C":e.bezierCurveTo(n[1],n[2],n[3],n[4],n[5],n[6]);break;case"AC":e.arc(n[1],n[2],n[3],n[4],n[5],n[6]);break;case"E":e.ellipse(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]);break;case"AT":e.arcTo(n[1],n[2],n[3],n[4],n[5]);break;case"RR":e.roundRect(n[1],n[2],n[3],n[4],n[5]);break;case"R":e.rect(n[1],n[2],n[3],n[4]);break;case"Z":e.closePath();break}return e}}const OE=Object.freeze(Object.defineProperty({__proto__:null,AutoConicToQuads:rE,Command:ns,CommandSet:SE,Conic:Un,CubicCoeff:_x,FillRule:Fx,LineCap:Lx,LineJoin:kx,PathBuilder:Rs,PathDirection:lc,PathIterVerb:mx,PathSegmentsIter:dc,PathStroker:_E,PathVerb:be,ProxyPath2D:Af,QuadCoeff:yf,SCALAR_MAX:jT,SCALAR_NEARLY_ZERO:df,SCALAR_ROOT_2_OVER_2:pf,SegmentMask:vx,build_unit_arc:iE,chop_cubic_at:aE,chop_cubic_at2:gf,chop_quad_at:XT,eval_cubic_pos_at:uc,eval_cubic_tangent_at:Cx,eval_quad_at:ho,eval_quad_tangent_at:Ex,find_cubic_cusp:Ix,find_cubic_extrema:eE,find_cubic_inflections:Px,find_cubic_max_curvature:mf,find_quad_extrema:ZT,find_quad_max_curvature:Tx,find_unit_quad_roots:ao,new_t_values:Sx,parseSvgPath:Xx,parseSvgPathData:Hx,pathFromSvgPath:Cf,pathFromSvgPath2:IE,pathFromSvgPathCommand:jx},Symbol.toStringTag,{value:"Module"})),Zx=Math.PI*2;function mc(i){return i%=Zx,i<0&&(i+=Zx),i}const co=Math.PI*2;function Jx(i,e,n,s,r,a,o,h,c){if(o===0)return!1;const l=o;h-=i,c-=e;const u=Math.sqrt(h*h+c*c);if(u-l>n||u+l<n)return!1;if(Math.abs(s-r)%co<1e-4)return!0;if(a){const d=s;s=mc(r),r=mc(d)}else s=mc(s),r=mc(r);s>r&&(r+=co);let f=Math.atan2(c,h);return f<0&&(f+=co),f>=s&&f<=r||f+co>=s&&f+co<=r}const kE=Object.freeze(Object.defineProperty({__proto__:null,containStroke:Jx},Symbol.toStringTag,{value:"Module"}));function Qx(i,e,n,s,r,a,o,h,c,l,u){if(c===0)return!1;const f=c;return u>e+f&&u>s+f&&u>a+f&&u>h+f||u<e-f&&u<s-f&&u<a-f&&u<h-f||l>i+f&&l>n+f&&l>r+f&&l>o+f||l<i-f&&l<n-f&&l<r-f&&l<o-f?!1:ky(i,e,n,s,r,a,o,h,l,u,null)<=f/2}const LE=Object.freeze(Object.defineProperty({__proto__:null,containStroke:Qx},Symbol.toStringTag,{value:"Module"}));function Ls(i,e,n,s,r,a,o){if(r===0)return!1;const h=r;let c=0,l=i;if(o>e+h&&o>s+h||o<e-h&&o<s-h||a>i+h&&a>n+h||a<i-h&&a<n-h)return!1;if(i!==n)c=(e-s)/(i-n),l=(i*s-n*e)/(i-n);else return Math.abs(a-i)<=h/2;const u=c*a-o+l;return u*u/(c*c+1)<=h/2*h/2}const FE=Object.freeze(Object.defineProperty({__proto__:null,containStroke:Ls},Symbol.toStringTag,{value:"Module"}));function Kx(i,e,n,s,r,a,o,h,c){if(o===0)return!1;const l=o;return c>e+l&&c>s+l&&c>a+l||c<e-l&&c<s-l&&c<a-l||h>i+l&&h>n+l&&h>r+l||h<i-l&&h<n-l&&h<r-l?!1:Oy(i,e,n,s,r,a,h,c,null)<=l/2}const NE=Object.freeze(Object.defineProperty({__proto__:null,containStroke:Kx},Symbol.toStringTag,{value:"Module"}));function Ri(i,e,n,s,r,a){if(a>e&&a>s||a<e&&a<s||s===e)return 0;const o=(a-e)/(s-e);let h=s<e?1:-1;(o===1||o===0)&&(h=s<e?.5:-.5);const c=o*(n-i)+i;return c===r?1/0:c>r?h:0}const BE=Object.freeze(Object.defineProperty({__proto__:null,default:Ri},Symbol.toStringTag,{value:"Module"})),Fs={M:"M",L:"L",C:"C",Q:"Q",Z:"Z",R:"R",E:"E"},Ns=Math.PI*2,DE=1e-4;function qE(i,e){return Math.abs(i-e)<DE}const He=[-1,-1,-1],Cn=[-1,-1];function $E(){const i=Cn[0];Cn[0]=Cn[1],Cn[1]=i}function tg(i,e,n,s,r,a,o,h,c,l){if(l>e&&l>s&&l>a&&l>h||l<e&&l<s&&l<a&&l<h)return 0;const u=Ju(e,s,a,h,l,He);if(u===0)return 0;{let f=0,d=-1,p=0,y=0;for(let x=0;x<u;x++){let g=He[x],m=g===0||g===1?.5:1;De(i,n,r,o,g)<c||(d<0&&(d=Qu(e,s,a,h,Cn),Cn[1]<Cn[0]&&d>1&&$E(),p=De(e,s,a,h,Cn[0]),d>1&&(y=De(e,s,a,h,Cn[1]))),d===2?g<Cn[0]?f+=p<e?m:-m:g<Cn[1]?f+=y<p?m:-m:f+=h<y?m:-m:g<Cn[0]?f+=p<e?m:-m:f+=h<p?m:-m)}return f}}function eg(i,e,n,s,r,a,o,h){if(h>e&&h>s&&h>a||h<e&&h<s&&h<a)return 0;const c=Vy(e,s,a,h,He);if(c===0)return 0;{const l=tf(e,s,a);if(l>=0&&l<=1){let u=0,f=je(e,s,a,l);for(let d=0;d<c;d++){let p=He[d]===0||He[d]===1?.5:1;je(i,n,r,He[d])<o||(He[d]<l?u+=f<e?p:-p:u+=a<f?p:-p)}return u}else{const u=He[0]===0||He[0]===1?.5:1;return je(i,n,r,He[0])<o?0:a<e?u:-u}}}function ng(i,e,n,s,r,a,o,h){if(h-=e,h>n||h<-n)return 0;const c=Math.sqrt(n*n-h*h);He[0]=-c,He[1]=c;const l=Math.abs(s-r);if(l<1e-4)return 0;if(l>=Ns-1e-4){s=0,r=Ns;const f=a?1:-1;return o>=He[0]+i&&o<=He[1]+i?f:0}if(s>r){const f=s;s=r,r=f}s<0&&(s+=Ns,r+=Ns);let u=0;for(let f=0;f<2;f++){const d=He[f];if(d+i>o){let p=Math.atan2(h,d),y=a?1:-1;p<0&&(p=Ns+p),(p>=s&&p<=r||p+Ns>=s&&p+Ns<=r)&&(p>Math.PI/2&&p<Math.PI*1.5&&(y=-y),u+=y)}}return u}function ig(i,e,n,s,r){const a=i.commands,o=i.commands.length;let h=0,c=0,l=0,u=0,f=0,d,p;for(let y=0;y<o;){let x=0,g=a[y];const m=g[x++];switch(c=g[x],l=g[x+1],u=c,f=l,m){case Fs.M:u=g[x++],f=g[x++],c=u,l=f;break;case Fs.L:if(n){if(Ls(c,l,g[x],g[x+1],e,s,r))return!0}else h+=Ri(c,l,g[x],g[x+1],s,r)||0;c=g[x++],l=g[x++];break;case Fs.C:if(n){if(Qx(c,l,g[x++],g[x++],g[x++],g[x++],g[x],g[x+1],e,s,r))return!0}else h+=tg(c,l,g[x++],g[x++],g[x++],g[x++],g[x],g[x+1],s,r)||0;c=g[x++],l=g[x++];break;case Fs.Q:if(n){if(Kx(c,l,g[x++],g[x++],g[x],g[x+1],e,s,r))return!0}else h+=eg(c,l,g[x++],g[x++],g[x],g[x+1],s,r)||0;c=g[x++],l=g[x++];break;case Fs.E:const v=g[x++],w=g[x++],b=g[x++],S=g[x++],E=g[x++],A=g[x++];x+=1;const M=!!(1-g[x++]);d=Math.cos(E)*b+v,p=Math.sin(E)*S+w,u=d,f=p;const _=(s-v)*S/b+v;if(n){if(Jx(v,w,S,E,E+A,M,e,_,r))return!0}else h+=ng(v,w,S,E,E+A,M,_,r);c=Math.cos(E+A)*b+v,l=Math.sin(E+A)*S+w;break;case Fs.R:u=c=g[x++],f=l=g[x++];const T=g[x++],C=g[x++];if(d=u+T,p=f+C,n){if(Ls(u,f,d,f,e,s,r)||Ls(d,f,d,p,e,s,r)||Ls(d,p,u,p,e,s,r)||Ls(u,p,u,f,e,s,r))return!0}else h+=Ri(d,f,d,p,s,r),h+=Ri(u,p,u,f,s,r);break;case Fs.Z:if(n){if(Ls(c,l,u,f,e,s,r))return!0}else h+=Ri(c,l,u,f,s,r);c=u,l=f;break}}return!n&&!qE(l,f)&&(h+=Ri(c,l,u,f,s,r)||0),h!==0}function VE(i,e,n){return ig(i,0,!1,e,n)}function GE(i,e,n,s){return ig(i,e,!0,n,s)}const UE=Object.freeze(Object.defineProperty({__proto__:null,contain:VE,containStroke:GE,windingArc:ng,windingCubic:tg,windingLine:Ri,windingQuadratic:eg},Symbol.toStringTag,{value:"Module"})),WE=1e-8;function sg(i,e){return Math.abs(i-e)<WE}function YE(i,e,n){let s=0,r=i[0];if(!r)return!1;for(let o=1;o<i.length;o++){const h=i[o];s+=Ri(r[0],r[1],h[0],h[1],e,n),r=h}const a=i[0];return(!sg(r[0],a[0])||!sg(r[1],a[1]))&&(s+=Ri(r[0],r[1],a[0],a[1],e,n)),s!==0}const jE=Object.freeze(Object.defineProperty({__proto__:null,contain:YE},Symbol.toStringTag,{value:"Module"})),Bs=Math.min,Jr=Math.max,Pf=Math.abs,rg=["x","y"],HE=["width","height"],Ds=new Be,qs=new Be,$s=new Be,Vs=new Be,gn=og(),lo=gn.minTv,If=gn.maxTv,uo=[0,0];class ze{x=0;y=0;width=0;height=0;constructor(e,n,s,r){ze.set(this,e,n,s,r)}static set(e,n,s,r,a){return r<0&&(n=n+r,r=-r),a<0&&(s=s+a,a=-a),e.x=n,e.y=s,e.width=r,e.height=a,e}union(e){const n=Bs(e.x,this.x),s=Bs(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Jr(e.x+e.width,this.x+this.width)-n:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Jr(e.y+e.height,this.y+this.height)-s:this.height=e.height,this.x=n,this.y=s}applyTransform(e){ze.applyTransform(this,this,e)}calculateTransform(e){const n=this,s=e.width/n.width,r=e.height/n.height,a=Te.default();return Te.translate(a,a,[-n.x,-n.y]),Te.scale(a,a,[s,r]),Te.translate(a,a,[e.x,e.y]),a}intersect(e,n,s){return ze.intersect(this,e,n,s)}static intersect(e,n,s,r){s&&Be.set(s,0,0);const a=r&&r.outIntersectRect||null,o=r&&r.clamp;if(a&&(a.x=a.y=a.width=a.height=NaN),!e||!n)return!1;e instanceof ze||(e=ze.set(XE,e.x,e.y,e.width,e.height)),n instanceof ze||(n=ze.set(ZE,n.x,n.y,n.width,n.height));const h=!!s;gn.reset(r,h);const c=gn.touchThreshold,l=e.x+c,u=e.x+e.width-c,f=e.y+c,d=e.y+e.height-c,p=n.x+c,y=n.x+n.width-c,x=n.y+c,g=n.y+n.height-c;if(l>u||f>d||p>y||x>g)return!1;const m=!(u<p||y<l||d<x||g<f);return(h||a)&&(uo[0]=1/0,uo[1]=0,ag(l,u,p,y,0,h,a,o),ag(f,d,x,g,1,h,a,o),h&&Be.copy(s,m?gn.useDir?gn.dirMinTv:lo:If)),m}static contain(e,n,s){return n>=e.x&&n<=e.x+e.width&&s>=e.y&&s<=e.y+e.height}contain(e,n){return ze.contain(this,e,n)}clone(){return new ze(this.x,this.y,this.width,this.height)}copy(e){ze.copy(this,e)}plain(){return{x:this.x,y:this.y,width:this.width,height:this.height}}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)}isZero(){return this.width===0||this.height===0}static create(e){return new ze(e.x,e.y,e.width,e.height)}static copy(e,n){return e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height,e}static applyTransform(e,n,s){if(!s){e!==n&&ze.copy(e,n);return}if(s[1]<1e-5&&s[1]>-1e-5&&s[2]<1e-5&&s[2]>-1e-5){const o=s[0],h=s[3],c=s[4],l=s[5];e.x=n.x*o+c,e.y=n.y*h+l,e.width=n.width*o,e.height=n.height*h,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Ds.x=$s.x=n.x,Ds.y=Vs.y=n.y,qs.x=Vs.x=n.x+n.width,qs.y=$s.y=n.y+n.height,Ds.transform(s),Vs.transform(s),qs.transform(s),$s.transform(s),e.x=Bs(Ds.x,qs.x,$s.x,Vs.x),e.y=Bs(Ds.y,qs.y,$s.y,Vs.y);const r=Jr(Ds.x,qs.x,$s.x,Vs.x),a=Jr(Ds.y,qs.y,$s.y,Vs.y);e.width=r-e.x,e.height=a-e.y}}const XE=new ze(0,0,0,0),ZE=new ze(0,0,0,0);function ag(i,e,n,s,r,a,o,h){const c=Pf(e-n),l=Pf(s-i),u=Bs(c,l),f=rg[r],d=rg[1-r],p=HE[r];e<n||s<i?c<l?(a&&(If[f]=-c),h&&(o[f]=e,o[p]=0)):(a&&(If[f]=l),h&&(o[f]=i,o[p]=0)):(o&&(o[f]=Jr(i,n),o[p]=Bs(e,s)-o[f]),a&&(u<uo[0]||gn.useDir)&&(uo[0]=Bs(u,uo[0]),(c<l||!gn.bidirectional)&&(lo[f]=c,lo[d]=0,gn.useDir&&gn.calcDirMTV()),(c>=l||!gn.bidirectional)&&(lo[f]=-l,lo[d]=0,gn.useDir&&gn.calcDirMTV())))}function og(){let i=0;const e=new Be,n=new Be,s={minTv:new Be,maxTv:new Be,useDir:!1,dirMinTv:new Be,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset(a,o){s.touchThreshold=0,a&&a.touchThreshold!=null&&(s.touchThreshold=Jr(0,a.touchThreshold)),s.negativeSize=!1,o&&(s.minTv.set(1/0,1/0),s.maxTv.set(0,0),s.useDir=!1,a&&a.direction!=null&&(s.useDir=!0,s.dirMinTv.copy(s.minTv),n.copy(s.minTv),i=a.direction,s.bidirectional=a.bidirectional==null||!!a.bidirectional,s.bidirectional||e.set(Math.cos(i),Math.sin(i))))},calcDirMTV(){const a=s.minTv,o=s.dirMinTv,h=a.y*a.y+a.x*a.x,c=Math.sin(i),l=Math.cos(i),u=c*a.y+l*a.x;if(r(u)){r(a.x)&&r(a.y)&&o.set(0,0);return}if(n.x=h*l/u,n.y=h*c/u,r(n.x)&&r(n.y)){o.set(0,0);return}(s.bidirectional||e.dot(n)>0)&&n.len()<o.len()&&o.copy(n)}};function r(a){return Pf(a)<1e-10}return s}class Rf{value;key;next;prev;constructor(e){this.value=e}}let hg=class{head;tail;_len=0;insert(e){const n=new Rf(e);return this.insertEntry(n),n}insertEntry(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++}remove(e){const n=e.prev,s=e.next;n?n.next=s:this.head=s,s?s.prev=n:this.tail=n,e.next=e.prev=null,this._len--}len(){return this._len}clear(){this.head=this.tail=null,this._len=0}};class cg{_list=new hg;_maxSize=10;_lastRemovedEntry;_map={};constructor(e){this._maxSize=e}put(e,n){const s=this._list,r=this._map;let a=null;if(r[e]==null){const o=s.len();let h=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){const c=s.head;s.remove(c),delete r[c.key],a=c.value,this._lastRemovedEntry=c}h?h.value=n:h=new Rf(n),h.key=e,s.insertEntry(h),r[e]=h}return a}get(e){const n=this._map[e],s=this._list;if(n!=null)return n!==s.tail&&(s.remove(n),s.insertEntry(n)),n.value}clear(){this._list.clear(),this._map={}}len(){return this._list.len()}}function JE(i,e){return kf(vc(e),i)}function vc(i){wc||(wc=new cg(100)),i=i||tc;let e=wc.get(i);return e||(e={font:i,strWidthCache:new cg(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:Wr.measureText("",i).width,asciiCharWidth:Wr.measureText("a",i).width},wc.put(i,e)),e}let wc;function QE(i){if(Of>=lg)return;i=i||tc;const e=[],n=+new Date;for(let r=0;r<=127;r++)e[r]=Wr.measureText(String.fromCharCode(r),i).width;const s=+new Date-n;return s>16?Of=lg:s>2&&Of++,e}let Of=0;const lg=5;function KE(i,e){return i.asciiWidthMapTried||(i.asciiWidthMap=QE(i.font),i.asciiWidthMapTried=!0),0<=e&&e<=127?i.asciiWidthMap!=null?i.asciiWidthMap[e]:i.asciiCharWidth:i.stWideCharWidth}function kf(i,e){const n=i.strWidthCache;let s=n.get(e);return s==null&&(s=Wr.measureText(e,i.font).width,n.put(e,s)),s}function Lf(i,e,n,s){const r=kf(vc(e),i),a=dg(e),o=ug(0,r,n),h=fg(0,a,s);return new ze(o,h,r,a)}function tz(i,e,n,s){const r=((i||"")+"").split(`
`);if(r.length===1)return Lf(r[0],e,n,s);{const o=new ze(0,0,0,0);for(let h=0;h<r.length;h++){const c=Lf(r[h],e,n,s);h===0?o.copy(c):o.union(c)}return o}}function ug(i,e,n,s){return n==="right"?s?i+=e:i-=e:n==="center"&&(s?i+=e/2:i-=e/2),i}function fg(i,e,n,s){return n==="middle"?s?i+=e/2:i-=e/2:n==="bottom"&&(s?i+=e:i-=e),i}function dg(i){return vc(i).stWideCharWidth}function ez(i,e){return Wr.measureText(i,e)}function Ff(i,e){return typeof i=="string"?i.lastIndexOf("%")>=0?parseFloat(i)/100*e:parseFloat(i):i}function nz(i,e,n){const s=e.position||"inside",r=e.distance!=null?e.distance:5,a=n.height,o=n.width,h=a/2;let c=n.x,l=n.y,u="left",f="top";if(s instanceof Array)c+=Ff(s[0],n.width),l+=Ff(s[1],n.height),u=null,f=null;else switch(s){case"left":c-=r,l+=h,u="right",f="middle";break;case"right":c+=r+o,l+=h,f="middle";break;case"top":c+=o/2,l-=r,u="center",f="bottom";break;case"bottom":c+=o/2,l+=a+r,u="center";break;case"inside":c+=o/2,l+=h,u="center",f="middle";break;case"insideLeft":c+=r,l+=h,f="middle";break;case"insideRight":c+=o-r,l+=h,u="right",f="middle";break;case"insideTop":c+=o/2,l+=r,u="center";break;case"insideBottom":c+=o/2,l+=a-r,u="center",f="bottom";break;case"insideTopLeft":c+=r,l+=r;break;case"insideTopRight":c+=o-r,l+=r,u="right";break;case"insideBottomLeft":c+=r,l+=a-r,f="bottom";break;case"insideBottomRight":c+=o-r,l+=a-r,u="right",f="bottom";break}return i=i||{},i.x=c,i.y=l,i.align=u,i.verticalAlign=f,i}const iz=Object.freeze(Object.defineProperty({__proto__:null,arc:kE,cubic:LE,line:FE,path:UE,polygon:jE,quadratic:NE,text:Object.freeze(Object.defineProperty({__proto__:null,adjustTextX:ug,adjustTextY:fg,calculateTextPosition:nz,ensureFontMeasureInfo:vc,getBoundingRect:tz,getLineHeight:dg,getWidth:JE,innerGetBoundingRect:Lf,measureCharWidth:KE,measureText:ez,measureWidth:kf,parsePercent:Ff},Symbol.toStringTag,{value:"Module"})),windingLine:BE},Symbol.toStringTag,{value:"Module"})),rn=Math.min,an=Math.max,Nf=Math.sin,Bf=Math.cos,Gs=Math.PI*2,Mc=tt.create(),bc=tt.create(),_c=tt.create();function sz(i,e,n){if(i.length===0)return;let s=i[0],r=s[0],a=s[0],o=s[1],h=s[1];for(let c=1;c<i.length;c++)s=i[c],r=rn(r,s[0]),a=an(a,s[0]),o=rn(o,s[1]),h=an(h,s[1]);e[0]=r,e[1]=o,n[0]=a,n[1]=h}function Df(i,e,n,s,r,a){r[0]=rn(i,n),r[1]=rn(e,s),a[0]=an(i,n),a[1]=an(e,s)}const pg=[],yg=[];function xg(i,e,n,s,r,a,o,h,c,l){const u=Qu,f=De;let d=u(i,n,r,o,pg);c[0]=1/0,c[1]=1/0,l[0]=-1/0,l[1]=-1/0;for(let p=0;p<d;p++){const y=f(i,n,r,o,pg[p]);c[0]=rn(y,c[0]),l[0]=an(y,l[0])}d=u(e,s,a,h,yg);for(let p=0;p<d;p++){const y=f(e,s,a,h,yg[p]);c[1]=rn(y,c[1]),l[1]=an(y,l[1])}c[0]=rn(i,c[0]),l[0]=an(i,l[0]),c[0]=rn(o,c[0]),l[0]=an(o,l[0]),c[1]=rn(e,c[1]),l[1]=an(e,l[1]),c[1]=rn(h,c[1]),l[1]=an(h,l[1])}function gg(i,e,n,s,r,a,o,h){const c=tf,l=je,u=an(rn(c(i,n,r),1),0),f=an(rn(c(e,s,a),1),0),d=l(i,n,r,u),p=l(e,s,a,f);o[0]=rn(i,r,d),o[1]=rn(e,a,p),h[0]=an(i,r,d),h[1]=an(e,a,p)}function mg(i,e,n,s,r,a,o,h,c){const l=tt.min,u=tt.max,f=Math.abs(r-a);if(f%Gs<1e-4&&f>1e-4){h[0]=i-n,h[1]=e-s,c[0]=i+n,c[1]=e+s;return}if(Mc[0]=Bf(r)*n+i,Mc[1]=Nf(r)*s+e,bc[0]=Bf(a)*n+i,bc[1]=Nf(a)*s+e,l(h,Mc,bc),u(c,Mc,bc),r=r%Gs,r<0&&(r=r+Gs),a=a%Gs,a<0&&(a=a+Gs),r>a&&!o?a+=Gs:r<a&&o&&(r+=Gs),o){const d=a;a=r,r=d}for(let d=0;d<a;d+=Math.PI/2)d>r&&(_c[0]=Bf(d)*n+i,_c[1]=Nf(d)*s+e,l(h,_c,h),u(c,_c,c))}const rz=()=>typeof window<"u"&&typeof window.document<"u";let qf=1;rz()&&(qf=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));const Ut={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Us=tt.create(),Ws=tt.create(),ui=tt.create(),is=tt.create(),fi=tt.create(),di=tt.create(),$f=Math.min,Vf=Math.max,Ys=Math.cos,js=Math.sin,Oi=Math.abs,Gf=Math.PI,ss=Gf*2,Uf=typeof Float32Array<"u",fo=[];function Wf(i){return Math.round(i/Gf*1e8)/1e8%2*Gf}function vg(i,e){let n=Wf(i[0]);n<0&&(n+=ss);let s=n-i[0],r=i[1];r+=s,!e&&r-n>=ss?r=n+ss:e&&n-r>=ss?r=n-ss:!e&&n>r?r=n+(ss-Wf(n-r)):e&&n<r&&(r=n-(ss-Wf(r-n))),i[0]=n,i[1]=r}class Yf{dpr=1;data;_version;_saveData;_pendingPtX;_pendingPtY;_pendingPtDist;_ctx;_xi=0;_yi=0;_x0=0;_y0=0;_len=0;_pathSegLen;_pathLen;_ux;_uy;static CMD=Ut;constructor(e){e&&(this._saveData=!1),this._saveData&&(this.data=[])}increaseVersion(){this._version++}getVersion(){return this._version}setScale(e,n,s){s=s||0,s>0&&(this._ux=Oi(s/qf/e)||0,this._uy=Oi(s/qf/n)||0)}setDPR(e){this.dpr=e}setContext(e){this._ctx=e}getContext(){return this._ctx}beginPath(){return this._ctx&&this._ctx.beginPath(),this.reset(),this}reset(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++}moveTo(e,n){return this._drawPendingPt(),this.addData(Ut.M,e,n),this._ctx&&this._ctx.moveTo(e,n),this._x0=e,this._y0=n,this._xi=e,this._yi=n,this}lineTo(e,n){const s=Oi(e-this._xi),r=Oi(n-this._yi),a=s>this._ux||r>this._uy;if(this.addData(Ut.L,e,n),this._ctx&&a&&this._ctx.lineTo(e,n),a)this._xi=e,this._yi=n,this._pendingPtDist=0;else{const o=s*s+r*r;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=n,this._pendingPtDist=o)}return this}bezierCurveTo(e,n,s,r,a,o){return this._drawPendingPt(),this.addData(Ut.C,e,n,s,r,a,o),this._ctx&&this._ctx.bezierCurveTo(e,n,s,r,a,o),this._xi=a,this._yi=o,this}quadraticCurveTo(e,n,s,r){return this._drawPendingPt(),this.addData(Ut.Q,e,n,s,r),this._ctx&&this._ctx.quadraticCurveTo(e,n,s,r),this._xi=s,this._yi=r,this}arc(e,n,s,r,a,o=!1){this._drawPendingPt(),fo[0]=r,fo[1]=a,vg(fo,o),r=fo[0],a=fo[1];let h=a-r;return this.addData(Ut.A,e,n,s,s,r,h,0,o?0:1),this._ctx&&this._ctx.arc(e,n,s,r,a,o),this._xi=Ys(a)*s+e,this._yi=js(a)*s+n,this}arcTo(e,n,s,r,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,n,s,r,a),this}rect(e,n,s,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,n,s,r),this.addData(Ut.R,e,n,s,r),this}closePath(){this._drawPendingPt(),this.addData(Ut.Z);const e=this._ctx,n=this._x0,s=this._y0;return e&&e.closePath(),this._xi=n,this._yi=s,this}fill(e){e&&e.fill(),this.toStatic()}stroke(e){e&&e.stroke(),this.toStatic()}len(){return this._len}setData(e){if(!this._saveData)return;const n=e.length;!(this.data&&this.data.length===n)&&Uf&&(this.data=new Float32Array(n));for(let s=0;s<n;s++)this.data[s]=e[s];this._len=n}appendPath(e){if(!this._saveData)return;e instanceof Array||(e=[e]);const n=e.length;let s=0,r=this._len;for(let o=0;o<n;o++)s+=e[o].len();const a=this.data;if(Uf&&(a instanceof Float32Array||!a)&&(this.data=new Float32Array(r+s),r>0&&a))for(let o=0;o<r;o++)this.data[o]=a[o];for(let o=0;o<n;o++){const h=e[o].data;for(let c=0;c<h.length;c++)this.data[r++]=h[c]}this._len=r}addData(e,n,s,r,a,o,h,c,l){if(!this._saveData)return;let u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(let f=0;f<arguments.length;f++)u[this._len++]=arguments[f]}_drawPendingPt(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)}_expandData(){if(!(this.data instanceof Array)){const e=[];for(let n=0;n<this._len;n++)e[n]=this.data[n];this.data=e}}toStatic(){if(!this._saveData)return;this._drawPendingPt();const e=this.data;e instanceof Array&&(e.length=this._len,Uf&&this._len>11&&(this.data=new Float32Array(e)))}getBoundingRect(){ui[0]=ui[1]=fi[0]=fi[1]=Number.MAX_VALUE,is[0]=is[1]=di[0]=di[1]=-Number.MAX_VALUE;const e=this.data;let n=0,s=0,r=0,a=0,o;for(o=0;o<this._len;){const h=e[o++],c=o===1;switch(c&&(n=e[o],s=e[o+1],r=n,a=s),h){case Ut.M:n=r=e[o++],s=a=e[o++],fi[0]=r,fi[1]=a,di[0]=r,di[1]=a;break;case Ut.L:Df(n,s,e[o],e[o+1],fi,di),n=e[o++],s=e[o++];break;case Ut.C:xg(n,s,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],fi,di),n=e[o++],s=e[o++];break;case Ut.Q:gg(n,s,e[o++],e[o++],e[o],e[o+1],fi,di),n=e[o++],s=e[o++];break;case Ut.A:const l=e[o++],u=e[o++],f=e[o++],d=e[o++],p=e[o++],y=e[o++]+p;o+=1;const x=!e[o++];c&&(r=Ys(p)*f+l,a=js(p)*d+u),mg(l,u,f,d,p,y,x,fi,di),n=Ys(y)*f+l,s=js(y)*d+u;break;case Ut.R:r=n=e[o++],a=s=e[o++];const g=e[o++],m=e[o++];Df(r,a,r+g,a+m,fi,di);break;case Ut.Z:n=r,s=a;break}tt.min(ui,ui,fi),tt.max(is,is,di)}return o===0&&(ui[0]=ui[1]=is[0]=is[1]=0),new ze(ui[0],ui[1],is[0]-ui[0],is[1]-ui[1])}_calculateLength(){const e=this.data,n=this._len,s=this._ux,r=this._uy;let a=0,o=0,h=0,c=0;this._pathSegLen||(this._pathSegLen=[]);const l=this._pathSegLen;let u=0,f=0;for(let d=0;d<n;){const p=e[d++],y=d===1;y&&(a=e[d],o=e[d+1],h=a,c=o);let x=-1;switch(p){case Ut.M:a=h=e[d++],o=c=e[d++];break;case Ut.L:{const A=e[d++],M=e[d++],_=A-a,T=M-o;(Oi(_)>s||Oi(T)>r||d===n-1)&&(x=Math.sqrt(_*_+T*T),a=A,o=M);break}case Ut.C:{const A=e[d++],M=e[d++],_=e[d++],T=e[d++],C=e[d++],P=e[d++];x=$y(a,o,A,M,_,T,C,P,10),a=C,o=P;break}case Ut.Q:{const A=e[d++],M=e[d++],_=e[d++],T=e[d++];x=Gy(a,o,A,M,_,T,10),a=_,o=T;break}case Ut.A:const g=e[d++],m=e[d++],v=e[d++],w=e[d++],b=e[d++];let S=e[d++];const E=S+b;d+=1,y&&(h=Ys(b)*v+g,c=js(b)*w+m),x=Vf(v,w)*$f(ss,Math.abs(S)),a=Ys(E)*v+g,o=js(E)*w+m;break;case Ut.R:{h=a=e[d++],c=o=e[d++];const A=e[d++],M=e[d++];x=A*2+M*2;break}case Ut.Z:{const A=h-a,M=c-o;x=Math.sqrt(A*A+M*M),a=h,o=c;break}}x>=0&&(l[f++]=x,u+=x)}return this._pathLen=u,u}rebuildPath(e,n){const s=this.data,r=this._ux,a=this._uy,o=this._len;let h=0,c=0,l=0,u=0,f=0,d=0;const p=n<1;let y=[],x,g=0,m=0,v=0,w=0,b=0,S=0;if(!(p&&(this._pathSegLen||this._calculateLength(),y=this._pathSegLen,x=this._pathLen,v=n*x,!v)))t:for(let E=0;E<o;){const A=s[E++],M=E===1;switch(M&&(l=s[E],u=s[E+1],h=l,c=u),A!==Ut.L&&w>0&&(e.lineTo(b,S),w=0),A){case Ut.M:h=l=s[E++],c=u=s[E++],e.moveTo(l,u);break;case Ut.L:{f=s[E++],d=s[E++];const rt=Oi(f-l),ft=Oi(d-u);if(rt>r||ft>a){if(p){const lt=y[m++];if(g+lt>v){const wt=(v-g)/lt;e.lineTo(l*(1-wt)+f*wt,u*(1-wt)+d*wt);break t}g+=lt}e.lineTo(f,d),l=f,u=d,w=0}else{const lt=rt*rt+ft*ft;lt>w&&(b=f,S=d,w=lt)}break}case Ut.C:{const rt=s[E++],ft=s[E++],lt=s[E++],wt=s[E++],Yt=s[E++],ye=s[E++];if(p){const ie=y[m++];if(g+ie>v){const Se=(v-g)/ie;Ku(l,rt,lt,Yt,Se,Us),Ku(u,ft,wt,ye,Se,Ws),e.bezierCurveTo(Us[1],Ws[1],Us[2],Ws[2],Us[3],Ws[3]);break t}g+=ie}e.bezierCurveTo(rt,ft,lt,wt,Yt,ye),l=Yt,u=ye;break}case Ut.Q:{const rt=s[E++],ft=s[E++],lt=s[E++],wt=s[E++];if(p){const Yt=y[m++];if(g+Yt>v){const ye=(v-g)/Yt;ef(l,rt,lt,ye,Us),ef(u,ft,wt,ye,Ws),e.quadraticCurveTo(Us[1],Ws[1],Us[2],Ws[2]);break t}g+=Yt}e.quadraticCurveTo(rt,ft,lt,wt),l=lt,u=wt;break}case Ut.A:const _=s[E++],T=s[E++],C=s[E++],P=s[E++];let R=s[E++],k=s[E++];const I=s[E++],L=!s[E++],F=C>P?C:P,B=Oi(C-P)>.001;let V=R+k,J=!1;if(p){const rt=y[m++];g+rt>v&&(V=R+k*(v-g)/rt,J=!0),g+=rt}if(B&&e.ellipse?e.ellipse(_,T,C,P,I,R,V,L):e.arc(_,T,F,R,V,L),J)break t;M&&(h=Ys(R)*C+_,c=js(R)*P+T),l=Ys(V)*C+_,u=js(V)*P+T;break;case Ut.R:h=l=s[E],c=u=s[E+1],f=s[E++],d=s[E++];const j=s[E++],ht=s[E++];if(p){const rt=y[m++];if(g+rt>v){let ft=v-g;e.moveTo(f,d),e.lineTo(f+$f(ft,j),d),ft-=j,ft>0&&e.lineTo(f+j,d+$f(ft,ht)),ft-=ht,ft>0&&e.lineTo(f+Vf(j-ft,0),d+ht),ft-=j,ft>0&&e.lineTo(f,d+Vf(ht-ft,0));break t}g+=rt}e.rect(f,d,j,ht);break;case Ut.Z:if(p){const rt=y[m++];if(g+rt>v){const ft=(v-g)/rt;e.lineTo(l*(1-ft)+h*ft,u*(1-ft)+c*ft);break t}g+=rt}e.closePath(),l=h,u=c}}}clone(){const e=new Yf,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e}canSave(){return!!this._saveData}static initDefaultProps=function(){const e=Yf.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}()}const az=Object.freeze(Object.defineProperty({__proto__:null,Entry:Rf,LinkedList:hg,createIntersectContext:og,fromArc:mg,fromCubic:xg,fromLine:Df,fromPoints:sz,fromQuadratic:gg,normalizeArcAngles:vg},Symbol.toStringTag,{value:"Module"})),wg=i=>()=>i,jf=i=>{const e=i?(n,s)=>s.minus(n).abs().isLessThanOrEqualTo(i):wg(!1);return(n,s)=>e(n,s)?0:n.comparedTo(s)};function oz(i){const e=i?(n,s,r,a,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(a.minus(s).exponentiatedBy(2).plus(o.minus(r).exponentiatedBy(2)).times(i)):wg(!1);return(n,s,r)=>{const a=n.x,o=n.y,h=r.x,c=r.y,l=o.minus(c).times(s.x.minus(h)).minus(a.minus(h).times(s.y.minus(c)));return e(l,a,o,h,c)?0:l.comparedTo(0)}}var hz=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Hf=Math.ceil,An=Math.floor,on="[BigNumber Error] ",Mg=on+"Number primitive has more than 15 significant digits: ",Wn=1e14,Et=14,Xf=9007199254740991,Zf=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],rs=1e7,Ce=1e9;function bg(i){var e,n,s,r=v.prototype={constructor:v,toString:null,valueOf:null},a=new v(1),o=20,h=4,c=-7,l=21,u=-1e7,f=1e7,d=!1,p=1,y=0,x={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},g="0123456789abcdefghijklmnopqrstuvwxyz",m=!0;function v(M,_){var T,C,P,R,k,I,L,F,B=this;if(!(B instanceof v))return new v(M,_);if(_==null){if(M&&M._isBigNumber===!0){B.s=M.s,!M.c||M.e>f?B.c=B.e=null:M.e<u?B.c=[B.e=0]:(B.e=M.e,B.c=M.c.slice());return}if((I=typeof M=="number")&&M*0==0){if(B.s=1/M<0?(M=-M,-1):1,M===~~M){for(R=0,k=M;k>=10;k/=10,R++);R>f?B.c=B.e=null:(B.e=R,B.c=[M]);return}F=String(M)}else{if(!hz.test(F=String(M)))return s(B,F,I);B.s=F.charCodeAt(0)==45?(F=F.slice(1),-1):1}(R=F.indexOf("."))>-1&&(F=F.replace(".","")),(k=F.search(/e/i))>0?(R<0&&(R=k),R+=+F.slice(k+1),F=F.substring(0,k)):R<0&&(R=F.length)}else{if(re(_,2,g.length,"Base"),_==10&&m)return B=new v(M),E(B,o+B.e+1,h);if(F=String(M),I=typeof M=="number"){if(M*0!=0)return s(B,F,I,_);if(B.s=1/M<0?(F=F.slice(1),-1):1,v.DEBUG&&F.replace(/^0\.0*|\./,"").length>15)throw Error(Mg+M)}else B.s=F.charCodeAt(0)===45?(F=F.slice(1),-1):1;for(T=g.slice(0,_),R=k=0,L=F.length;k<L;k++)if(T.indexOf(C=F.charAt(k))<0){if(C=="."){if(k>R){R=L;continue}}else if(!P&&(F==F.toUpperCase()&&(F=F.toLowerCase())||F==F.toLowerCase()&&(F=F.toUpperCase()))){P=!0,k=-1,R=0;continue}return s(B,String(M),I,_)}I=!1,F=n(F,_,10,B.s),(R=F.indexOf("."))>-1?F=F.replace(".",""):R=F.length}for(k=0;F.charCodeAt(k)===48;k++);for(L=F.length;F.charCodeAt(--L)===48;);if(F=F.slice(k,++L)){if(L-=k,I&&v.DEBUG&&L>15&&(M>Xf||M!==An(M)))throw Error(Mg+B.s*M);if((R=R-k-1)>f)B.c=B.e=null;else if(R<u)B.c=[B.e=0];else{if(B.e=R,B.c=[],k=(R+1)%Et,R<0&&(k+=Et),k<L){for(k&&B.c.push(+F.slice(0,k)),L-=Et;k<L;)B.c.push(+F.slice(k,k+=Et));k=Et-(F=F.slice(k)).length}else k-=L;for(;k--;F+="0");B.c.push(+F)}}else B.c=[B.e=0]}v.clone=bg,v.ROUND_UP=0,v.ROUND_DOWN=1,v.ROUND_CEIL=2,v.ROUND_FLOOR=3,v.ROUND_HALF_UP=4,v.ROUND_HALF_DOWN=5,v.ROUND_HALF_EVEN=6,v.ROUND_HALF_CEIL=7,v.ROUND_HALF_FLOOR=8,v.EUCLID=9,v.config=v.set=function(M){var _,T;if(M!=null)if(typeof M=="object"){if(M.hasOwnProperty(_="DECIMAL_PLACES")&&(T=M[_],re(T,0,Ce,_),o=T),M.hasOwnProperty(_="ROUNDING_MODE")&&(T=M[_],re(T,0,8,_),h=T),M.hasOwnProperty(_="EXPONENTIAL_AT")&&(T=M[_],T&&T.pop?(re(T[0],-Ce,0,_),re(T[1],0,Ce,_),c=T[0],l=T[1]):(re(T,-Ce,Ce,_),c=-(l=T<0?-T:T))),M.hasOwnProperty(_="RANGE"))if(T=M[_],T&&T.pop)re(T[0],-Ce,-1,_),re(T[1],1,Ce,_),u=T[0],f=T[1];else if(re(T,-Ce,Ce,_),T)u=-(f=T<0?-T:T);else throw Error(on+_+" cannot be zero: "+T);if(M.hasOwnProperty(_="CRYPTO"))if(T=M[_],T===!!T)if(T)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))d=T;else throw d=!T,Error(on+"crypto unavailable");else d=T;else throw Error(on+_+" not true or false: "+T);if(M.hasOwnProperty(_="MODULO_MODE")&&(T=M[_],re(T,0,9,_),p=T),M.hasOwnProperty(_="POW_PRECISION")&&(T=M[_],re(T,0,Ce,_),y=T),M.hasOwnProperty(_="FORMAT"))if(T=M[_],typeof T=="object")x=T;else throw Error(on+_+" not an object: "+T);if(M.hasOwnProperty(_="ALPHABET"))if(T=M[_],typeof T=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(T))m=T.slice(0,10)=="0123456789",g=T;else throw Error(on+_+" invalid: "+T)}else throw Error(on+"Object expected: "+M);return{DECIMAL_PLACES:o,ROUNDING_MODE:h,EXPONENTIAL_AT:[c,l],RANGE:[u,f],CRYPTO:d,MODULO_MODE:p,POW_PRECISION:y,FORMAT:x,ALPHABET:g}},v.isBigNumber=function(M){if(!M||M._isBigNumber!==!0)return!1;if(!v.DEBUG)return!0;var _,T,C=M.c,P=M.e,R=M.s;t:if({}.toString.call(C)=="[object Array]"){if((R===1||R===-1)&&P>=-Ce&&P<=Ce&&P===An(P)){if(C[0]===0){if(P===0&&C.length===1)return!0;break t}if(_=(P+1)%Et,_<1&&(_+=Et),String(C[0]).length==_){for(_=0;_<C.length;_++)if(T=C[_],T<0||T>=Wn||T!==An(T))break t;if(T!==0)return!0}}}else if(C===null&&P===null&&(R===null||R===1||R===-1))return!0;throw Error(on+"Invalid BigNumber: "+M)},v.maximum=v.max=function(){return b(arguments,-1)},v.minimum=v.min=function(){return b(arguments,1)},v.random=function(){var M=9007199254740992,_=Math.random()*M&2097151?function(){return An(Math.random()*M)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(T){var C,P,R,k,I,L=0,F=[],B=new v(a);if(T==null?T=o:re(T,0,Ce),k=Hf(T/Et),d)if(crypto.getRandomValues){for(C=crypto.getRandomValues(new Uint32Array(k*=2));L<k;)I=C[L]*131072+(C[L+1]>>>11),I>=9e15?(P=crypto.getRandomValues(new Uint32Array(2)),C[L]=P[0],C[L+1]=P[1]):(F.push(I%1e14),L+=2);L=k/2}else if(crypto.randomBytes){for(C=crypto.randomBytes(k*=7);L<k;)I=(C[L]&31)*281474976710656+C[L+1]*1099511627776+C[L+2]*4294967296+C[L+3]*16777216+(C[L+4]<<16)+(C[L+5]<<8)+C[L+6],I>=9e15?crypto.randomBytes(7).copy(C,L):(F.push(I%1e14),L+=7);L=k/7}else throw d=!1,Error(on+"crypto unavailable");if(!d)for(;L<k;)I=_(),I<9e15&&(F[L++]=I%1e14);for(k=F[--L],T%=Et,k&&T&&(I=Zf[Et-T],F[L]=An(k/I)*I);F[L]===0;F.pop(),L--);if(L<0)F=[R=0];else{for(R=-1;F[0]===0;F.splice(0,1),R-=Et);for(L=1,I=F[0];I>=10;I/=10,L++);L<Et&&(R-=Et-L)}return B.e=R,B.c=F,B}}(),v.sum=function(){for(var M=1,_=arguments,T=new v(_[0]);M<_.length;)T=T.plus(_[M++]);return T},n=function(){var M="0123456789";function _(T,C,P,R){for(var k,I=[0],L,F=0,B=T.length;F<B;){for(L=I.length;L--;I[L]*=C);for(I[0]+=R.indexOf(T.charAt(F++)),k=0;k<I.length;k++)I[k]>P-1&&(I[k+1]==null&&(I[k+1]=0),I[k+1]+=I[k]/P|0,I[k]%=P)}return I.reverse()}return function(T,C,P,R,k){var I,L,F,B,V,J,j,ht,rt=T.indexOf("."),ft=o,lt=h;for(rt>=0&&(B=y,y=0,T=T.replace(".",""),ht=new v(C),J=ht.pow(T.length-rt),y=B,ht.c=_(ki(In(J.c),J.e,"0"),10,P,M),ht.e=ht.c.length),j=_(T,C,P,k?(I=g,M):(I=M,g)),F=B=j.length;j[--B]==0;j.pop());if(!j[0])return I.charAt(0);if(rt<0?--F:(J.c=j,J.e=F,J.s=R,J=e(J,ht,ft,lt,P),j=J.c,V=J.r,F=J.e),L=F+ft+1,rt=j[L],B=P/2,V=V||L<0||j[L+1]!=null,V=lt<4?(rt!=null||V)&&(lt==0||lt==(J.s<0?3:2)):rt>B||rt==B&&(lt==4||V||lt==6&&j[L-1]&1||lt==(J.s<0?8:7)),L<1||!j[0])T=V?ki(I.charAt(1),-ft,I.charAt(0)):I.charAt(0);else{if(j.length=L,V)for(--P;++j[--L]>P;)j[L]=0,L||(++F,j=[1].concat(j));for(B=j.length;!j[--B];);for(rt=0,T="";rt<=B;T+=I.charAt(j[rt++]));T=ki(T,F,I.charAt(0))}return T}}(),e=function(){function M(C,P,R){var k,I,L,F,B=0,V=C.length,J=P%rs,j=P/rs|0;for(C=C.slice();V--;)L=C[V]%rs,F=C[V]/rs|0,k=j*L+F*J,I=J*L+k%rs*rs+B,B=(I/R|0)+(k/rs|0)+j*F,C[V]=I%R;return B&&(C=[B].concat(C)),C}function _(C,P,R,k){var I,L;if(R!=k)L=R>k?1:-1;else for(I=L=0;I<R;I++)if(C[I]!=P[I]){L=C[I]>P[I]?1:-1;break}return L}function T(C,P,R,k){for(var I=0;R--;)C[R]-=I,I=C[R]<P[R]?1:0,C[R]=I*k+C[R]-P[R];for(;!C[0]&&C.length>1;C.splice(0,1));}return function(C,P,R,k,I){var L,F,B,V,J,j,ht,rt,ft,lt,wt,Yt,ye,ie,Se,xe,te,Zt=C.s==P.s?1:-1,H=C.c,Z=P.c;if(!H||!H[0]||!Z||!Z[0])return new v(!C.s||!P.s||(H?Z&&H[0]==Z[0]:!Z)?NaN:H&&H[0]==0||!Z?Zt*0:Zt/0);for(rt=new v(Zt),ft=rt.c=[],F=C.e-P.e,Zt=R+F+1,I||(I=Wn,F=Pn(C.e/Et)-Pn(P.e/Et),Zt=Zt/Et|0),B=0;Z[B]==(H[B]||0);B++);if(Z[B]>(H[B]||0)&&F--,Zt<0)ft.push(1),V=!0;else{for(ie=H.length,xe=Z.length,B=0,Zt+=2,J=An(I/(Z[0]+1)),J>1&&(Z=M(Z,J,I),H=M(H,J,I),xe=Z.length,ie=H.length),ye=xe,lt=H.slice(0,xe),wt=lt.length;wt<xe;lt[wt++]=0);te=Z.slice(),te=[0].concat(te),Se=Z[0],Z[1]>=I/2&&Se++;do{if(J=0,L=_(Z,lt,xe,wt),L<0){if(Yt=lt[0],xe!=wt&&(Yt=Yt*I+(lt[1]||0)),J=An(Yt/Se),J>1)for(J>=I&&(J=I-1),j=M(Z,J,I),ht=j.length,wt=lt.length;_(j,lt,ht,wt)==1;)J--,T(j,xe<ht?te:Z,ht,I),ht=j.length,L=1;else J==0&&(L=J=1),j=Z.slice(),ht=j.length;if(ht<wt&&(j=[0].concat(j)),T(lt,j,wt,I),wt=lt.length,L==-1)for(;_(Z,lt,xe,wt)<1;)J++,T(lt,xe<wt?te:Z,wt,I),wt=lt.length}else L===0&&(J++,lt=[0]);ft[B++]=J,lt[0]?lt[wt++]=H[ye]||0:(lt=[H[ye]],wt=1)}while((ye++<ie||lt[0]!=null)&&Zt--);V=lt[0]!=null,ft[0]||ft.splice(0,1)}if(I==Wn){for(B=1,Zt=ft[0];Zt>=10;Zt/=10,B++);E(rt,R+(rt.e=B+F*Et-1)+1,k,V)}else rt.e=F,rt.r=+V;return rt}}();function w(M,_,T,C){var P,R,k,I,L;if(T==null?T=h:re(T,0,8),!M.c)return M.toString();if(P=M.c[0],k=M.e,_==null)L=In(M.c),L=C==1||C==2&&(k<=c||k>=l)?Tc(L,k):ki(L,k,"0");else if(M=E(new v(M),_,T),R=M.e,L=In(M.c),I=L.length,C==1||C==2&&(_<=R||R<=c)){for(;I<_;L+="0",I++);L=Tc(L,R)}else if(_-=k,L=ki(L,R,"0"),R+1>I){if(--_>0)for(L+=".";_--;L+="0");}else if(_+=R-I,_>0)for(R+1==I&&(L+=".");_--;L+="0");return M.s<0&&P?"-"+L:L}function b(M,_){for(var T,C,P=1,R=new v(M[0]);P<M.length;P++)C=new v(M[P]),(!C.s||(T=Hs(R,C))===_||T===0&&R.s===_)&&(R=C);return R}function S(M,_,T){for(var C=1,P=_.length;!_[--P];_.pop());for(P=_[0];P>=10;P/=10,C++);return(T=C+T*Et-1)>f?M.c=M.e=null:T<u?M.c=[M.e=0]:(M.e=T,M.c=_),M}s=function(){var M=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,T=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,k,I,L){var F,B=I?k:k.replace(P,"");if(C.test(B))R.s=isNaN(B)?null:B<0?-1:1;else{if(!I&&(B=B.replace(M,function(V,J,j){return F=(j=j.toLowerCase())=="x"?16:j=="b"?2:8,!L||L==F?J:V}),L&&(F=L,B=B.replace(_,"$1").replace(T,"0.$1")),k!=B))return new v(B,F);if(v.DEBUG)throw Error(on+"Not a"+(L?" base "+L:"")+" number: "+k);R.s=null}R.c=R.e=null}}();function E(M,_,T,C){var P,R,k,I,L,F,B,V=M.c,J=Zf;if(V){t:{for(P=1,I=V[0];I>=10;I/=10,P++);if(R=_-P,R<0)R+=Et,k=_,L=V[F=0],B=An(L/J[P-k-1]%10);else if(F=Hf((R+1)/Et),F>=V.length)if(C){for(;V.length<=F;V.push(0));L=B=0,P=1,R%=Et,k=R-Et+1}else break t;else{for(L=I=V[F],P=1;I>=10;I/=10,P++);R%=Et,k=R-Et+P,B=k<0?0:An(L/J[P-k-1]%10)}if(C=C||_<0||V[F+1]!=null||(k<0?L:L%J[P-k-1]),C=T<4?(B||C)&&(T==0||T==(M.s<0?3:2)):B>5||B==5&&(T==4||C||T==6&&(R>0?k>0?L/J[P-k]:0:V[F-1])%10&1||T==(M.s<0?8:7)),_<1||!V[0])return V.length=0,C?(_-=M.e+1,V[0]=J[(Et-_%Et)%Et],M.e=-_||0):V[0]=M.e=0,M;if(R==0?(V.length=F,I=1,F--):(V.length=F+1,I=J[Et-R],V[F]=k>0?An(L/J[P-k]%J[k])*I:0),C)for(;;)if(F==0){for(R=1,k=V[0];k>=10;k/=10,R++);for(k=V[0]+=I,I=1;k>=10;k/=10,I++);R!=I&&(M.e++,V[0]==Wn&&(V[0]=1));break}else{if(V[F]+=I,V[F]!=Wn)break;V[F--]=0,I=1}for(R=V.length;V[--R]===0;V.pop());}M.e>f?M.c=M.e=null:M.e<u&&(M.c=[M.e=0])}return M}function A(M){var _,T=M.e;return T===null?M.toString():(_=In(M.c),_=T<=c||T>=l?Tc(_,T):ki(_,T,"0"),M.s<0?"-"+_:_)}return r.absoluteValue=r.abs=function(){var M=new v(this);return M.s<0&&(M.s=1),M},r.comparedTo=function(M,_){return Hs(this,new v(M,_))},r.decimalPlaces=r.dp=function(M,_){var T,C,P,R=this;if(M!=null)return re(M,0,Ce),_==null?_=h:re(_,0,8),E(new v(R),M+R.e+1,_);if(!(T=R.c))return null;if(C=((P=T.length-1)-Pn(this.e/Et))*Et,P=T[P])for(;P%10==0;P/=10,C--);return C<0&&(C=0),C},r.dividedBy=r.div=function(M,_){return e(this,new v(M,_),o,h)},r.dividedToIntegerBy=r.idiv=function(M,_){return e(this,new v(M,_),0,1)},r.exponentiatedBy=r.pow=function(M,_){var T,C,P,R,k,I,L,F,B,V=this;if(M=new v(M),M.c&&!M.isInteger())throw Error(on+"Exponent not an integer: "+A(M));if(_!=null&&(_=new v(_)),I=M.e>14,!V.c||!V.c[0]||V.c[0]==1&&!V.e&&V.c.length==1||!M.c||!M.c[0])return B=new v(Math.pow(+A(V),I?M.s*(2-Sc(M)):+A(M))),_?B.mod(_):B;if(L=M.s<0,_){if(_.c?!_.c[0]:!_.s)return new v(NaN);C=!L&&V.isInteger()&&_.isInteger(),C&&(V=V.mod(_))}else{if(M.e>9&&(V.e>0||V.e<-1||(V.e==0?V.c[0]>1||I&&V.c[1]>=24e7:V.c[0]<8e13||I&&V.c[0]<=9999975e7)))return R=V.s<0&&Sc(M)?-0:0,V.e>-1&&(R=1/R),new v(L?1/R:R);y&&(R=Hf(y/Et+2))}for(I?(T=new v(.5),L&&(M.s=1),F=Sc(M)):(P=Math.abs(+A(M)),F=P%2),B=new v(a);;){if(F){if(B=B.times(V),!B.c)break;R?B.c.length>R&&(B.c.length=R):C&&(B=B.mod(_))}if(P){if(P=An(P/2),P===0)break;F=P%2}else if(M=M.times(T),E(M,M.e+1,1),M.e>14)F=Sc(M);else{if(P=+A(M),P===0)break;F=P%2}V=V.times(V),R?V.c&&V.c.length>R&&(V.c.length=R):C&&(V=V.mod(_))}return C?B:(L&&(B=a.div(B)),_?B.mod(_):R?E(B,y,h,k):B)},r.integerValue=function(M){var _=new v(this);return M==null?M=h:re(M,0,8),E(_,_.e+1,M)},r.isEqualTo=r.eq=function(M,_){return Hs(this,new v(M,_))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(M,_){return Hs(this,new v(M,_))>0},r.isGreaterThanOrEqualTo=r.gte=function(M,_){return(_=Hs(this,new v(M,_)))===1||_===0},r.isInteger=function(){return!!this.c&&Pn(this.e/Et)>this.c.length-2},r.isLessThan=r.lt=function(M,_){return Hs(this,new v(M,_))<0},r.isLessThanOrEqualTo=r.lte=function(M,_){return(_=Hs(this,new v(M,_)))===-1||_===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(M,_){var T,C,P,R,k=this,I=k.s;if(M=new v(M,_),_=M.s,!I||!_)return new v(NaN);if(I!=_)return M.s=-_,k.plus(M);var L=k.e/Et,F=M.e/Et,B=k.c,V=M.c;if(!L||!F){if(!B||!V)return B?(M.s=-_,M):new v(V?k:NaN);if(!B[0]||!V[0])return V[0]?(M.s=-_,M):new v(B[0]?k:h==3?-0:0)}if(L=Pn(L),F=Pn(F),B=B.slice(),I=L-F){for((R=I<0)?(I=-I,P=B):(F=L,P=V),P.reverse(),_=I;_--;P.push(0));P.reverse()}else for(C=(R=(I=B.length)<(_=V.length))?I:_,I=_=0;_<C;_++)if(B[_]!=V[_]){R=B[_]<V[_];break}if(R&&(P=B,B=V,V=P,M.s=-M.s),_=(C=V.length)-(T=B.length),_>0)for(;_--;B[T++]=0);for(_=Wn-1;C>I;){if(B[--C]<V[C]){for(T=C;T&&!B[--T];B[T]=_);--B[T],B[C]+=Wn}B[C]-=V[C]}for(;B[0]==0;B.splice(0,1),--F);return B[0]?S(M,B,F):(M.s=h==3?-1:1,M.c=[M.e=0],M)},r.modulo=r.mod=function(M,_){var T,C,P=this;return M=new v(M,_),!P.c||!M.s||M.c&&!M.c[0]?new v(NaN):!M.c||P.c&&!P.c[0]?new v(P):(p==9?(C=M.s,M.s=1,T=e(P,M,0,3),M.s=C,T.s*=C):T=e(P,M,0,p),M=P.minus(T.times(M)),!M.c[0]&&p==1&&(M.s=P.s),M)},r.multipliedBy=r.times=function(M,_){var T,C,P,R,k,I,L,F,B,V,J,j,ht,rt,ft,lt=this,wt=lt.c,Yt=(M=new v(M,_)).c;if(!wt||!Yt||!wt[0]||!Yt[0])return!lt.s||!M.s||wt&&!wt[0]&&!Yt||Yt&&!Yt[0]&&!wt?M.c=M.e=M.s=null:(M.s*=lt.s,!wt||!Yt?M.c=M.e=null:(M.c=[0],M.e=0)),M;for(C=Pn(lt.e/Et)+Pn(M.e/Et),M.s*=lt.s,L=wt.length,V=Yt.length,L<V&&(ht=wt,wt=Yt,Yt=ht,P=L,L=V,V=P),P=L+V,ht=[];P--;ht.push(0));for(rt=Wn,ft=rs,P=V;--P>=0;){for(T=0,J=Yt[P]%ft,j=Yt[P]/ft|0,k=L,R=P+k;R>P;)F=wt[--k]%ft,B=wt[k]/ft|0,I=j*F+B*J,F=J*F+I%ft*ft+ht[R]+T,T=(F/rt|0)+(I/ft|0)+j*B,ht[R--]=F%rt;ht[R]=T}return T?++C:ht.splice(0,1),S(M,ht,C)},r.negated=function(){var M=new v(this);return M.s=-M.s||null,M},r.plus=function(M,_){var T,C=this,P=C.s;if(M=new v(M,_),_=M.s,!P||!_)return new v(NaN);if(P!=_)return M.s=-_,C.minus(M);var R=C.e/Et,k=M.e/Et,I=C.c,L=M.c;if(!R||!k){if(!I||!L)return new v(P/0);if(!I[0]||!L[0])return L[0]?M:new v(I[0]?C:P*0)}if(R=Pn(R),k=Pn(k),I=I.slice(),P=R-k){for(P>0?(k=R,T=L):(P=-P,T=I),T.reverse();P--;T.push(0));T.reverse()}for(P=I.length,_=L.length,P-_<0&&(T=L,L=I,I=T,_=P),P=0;_;)P=(I[--_]=I[_]+L[_]+P)/Wn|0,I[_]=Wn===I[_]?0:I[_]%Wn;return P&&(I=[P].concat(I),++k),S(M,I,k)},r.precision=r.sd=function(M,_){var T,C,P,R=this;if(M!=null&&M!==!!M)return re(M,1,Ce),_==null?_=h:re(_,0,8),E(new v(R),M,_);if(!(T=R.c))return null;if(P=T.length-1,C=P*Et+1,P=T[P]){for(;P%10==0;P/=10,C--);for(P=T[0];P>=10;P/=10,C++);}return M&&R.e+1>C&&(C=R.e+1),C},r.shiftedBy=function(M){return re(M,-Xf,Xf),this.times("1e"+M)},r.squareRoot=r.sqrt=function(){var M,_,T,C,P,R=this,k=R.c,I=R.s,L=R.e,F=o+4,B=new v("0.5");if(I!==1||!k||!k[0])return new v(!I||I<0&&(!k||k[0])?NaN:k?R:1/0);if(I=Math.sqrt(+A(R)),I==0||I==1/0?(_=In(k),(_.length+L)%2==0&&(_+="0"),I=Math.sqrt(+_),L=Pn((L+1)/2)-(L<0||L%2),I==1/0?_="5e"+L:(_=I.toExponential(),_=_.slice(0,_.indexOf("e")+1)+L),T=new v(_)):T=new v(I+""),T.c[0]){for(L=T.e,I=L+F,I<3&&(I=0);;)if(P=T,T=B.times(P.plus(e(R,P,F,1))),In(P.c).slice(0,I)===(_=In(T.c)).slice(0,I))if(T.e<L&&--I,_=_.slice(I-3,I+1),_=="9999"||!C&&_=="4999"){if(!C&&(E(P,P.e+o+2,0),P.times(P).eq(R))){T=P;break}F+=4,I+=4,C=1}else{(!+_||!+_.slice(1)&&_.charAt(0)=="5")&&(E(T,T.e+o+2,1),M=!T.times(T).eq(R));break}}return E(T,T.e+o+1,h,M)},r.toExponential=function(M,_){return M!=null&&(re(M,0,Ce),M++),w(this,M,_,1)},r.toFixed=function(M,_){return M!=null&&(re(M,0,Ce),M=M+this.e+1),w(this,M,_)},r.toFormat=function(M,_,T){var C,P=this;if(T==null)M!=null&&_&&typeof _=="object"?(T=_,_=null):M&&typeof M=="object"?(T=M,M=_=null):T=x;else if(typeof T!="object")throw Error(on+"Argument not an object: "+T);if(C=P.toFixed(M,_),P.c){var R,k=C.split("."),I=+T.groupSize,L=+T.secondaryGroupSize,F=T.groupSeparator||"",B=k[0],V=k[1],J=P.s<0,j=J?B.slice(1):B,ht=j.length;if(L&&(R=I,I=L,L=R,ht-=R),I>0&&ht>0){for(R=ht%I||I,B=j.substr(0,R);R<ht;R+=I)B+=F+j.substr(R,I);L>0&&(B+=F+j.slice(R)),J&&(B="-"+B)}C=V?B+(T.decimalSeparator||"")+((L=+T.fractionGroupSize)?V.replace(new RegExp("\\d{"+L+"}\\B","g"),"$&"+(T.fractionGroupSeparator||"")):V):B}return(T.prefix||"")+C+(T.suffix||"")},r.toFraction=function(M){var _,T,C,P,R,k,I,L,F,B,V,J,j=this,ht=j.c;if(M!=null&&(I=new v(M),!I.isInteger()&&(I.c||I.s!==1)||I.lt(a)))throw Error(on+"Argument "+(I.isInteger()?"out of range: ":"not an integer: ")+A(I));if(!ht)return new v(j);for(_=new v(a),F=T=new v(a),C=L=new v(a),J=In(ht),R=_.e=J.length-j.e-1,_.c[0]=Zf[(k=R%Et)<0?Et+k:k],M=!M||I.comparedTo(_)>0?R>0?_:F:I,k=f,f=1/0,I=new v(J),L.c[0]=0;B=e(I,_,0,1),P=T.plus(B.times(C)),P.comparedTo(M)!=1;)T=C,C=P,F=L.plus(B.times(P=F)),L=P,_=I.minus(B.times(P=_)),I=P;return P=e(M.minus(T),C,0,1),L=L.plus(P.times(F)),T=T.plus(P.times(C)),L.s=F.s=j.s,R=R*2,V=e(F,C,R,h).minus(j).abs().comparedTo(e(L,T,R,h).minus(j).abs())<1?[F,C]:[L,T],f=k,V},r.toNumber=function(){return+A(this)},r.toPrecision=function(M,_){return M!=null&&re(M,1,Ce),w(this,M,_,2)},r.toString=function(M){var _,T=this,C=T.s,P=T.e;return P===null?C?(_="Infinity",C<0&&(_="-"+_)):_="NaN":(M==null?_=P<=c||P>=l?Tc(In(T.c),P):ki(In(T.c),P,"0"):M===10&&m?(T=E(new v(T),o+P+1,h),_=ki(In(T.c),T.e,"0")):(re(M,2,g.length,"Base"),_=n(ki(In(T.c),P,"0"),10,M,C,!0)),C<0&&T.c[0]&&(_="-"+_)),_},r.valueOf=r.toJSON=function(){return A(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,i!=null&&v.set(i),v}function Pn(i){var e=i|0;return i>0||i===e?e:e-1}function In(i){for(var e,n,s=1,r=i.length,a=i[0]+"";s<r;){for(e=i[s++]+"",n=Et-e.length;n--;e="0"+e);a+=e}for(r=a.length;a.charCodeAt(--r)===48;);return a.slice(0,r+1||1)}function Hs(i,e){var n,s,r=i.c,a=e.c,o=i.s,h=e.s,c=i.e,l=e.e;if(!o||!h)return null;if(n=r&&!r[0],s=a&&!a[0],n||s)return n?s?0:-h:o;if(o!=h)return o;if(n=o<0,s=c==l,!r||!a)return s?0:!r^n?1:-1;if(!s)return c>l^n?1:-1;for(h=(c=r.length)<(l=a.length)?c:l,o=0;o<h;o++)if(r[o]!=a[o])return r[o]>a[o]^n?1:-1;return c==l?0:c>l^n?1:-1}function re(i,e,n,s){if(i<e||i>n||i!==An(i))throw Error(on+(s||"Argument")+(typeof i=="number"?i<e||i>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function Sc(i){var e=i.c.length-1;return Pn(i.e/Et)==e&&i.c[e]%2!=0}function Tc(i,e){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(e<0?"e":"e+")+e}function ki(i,e,n){var s,r;if(e<0){for(r=n+".";++e;r+=n);i=r+i}else if(s=i.length,++e>s){for(r=n,e-=s;--e;r+=n);i+=r}else e<s&&(i=i.slice(0,e)+"."+i.slice(e));return i}var Yn=bg(),cz=class{key;left=null;right=null;constructor(i){this.key=i}},po=class extends cz{constructor(i){super(i)}},lz=class{size=0;modificationCount=0;splayCount=0;splay(i){const e=this.root;if(e==null)return this.compare(i,i),-1;let n=null,s=null,r=null,a=null,o=e;const h=this.compare;let c;for(;;)if(c=h(o.key,i),c>0){let l=o.left;if(l==null||(c=h(l.key,i),c>0&&(o.left=l.right,l.right=o,o=l,l=o.left,l==null)))break;n==null?s=o:n.left=o,n=o,o=l}else if(c<0){let l=o.right;if(l==null||(c=h(l.key,i),c<0&&(o.right=l.left,l.left=o,o=l,l=o.right,l==null)))break;r==null?a=o:r.right=o,r=o,o=l}else break;return r!=null&&(r.right=o.left,o.left=a),n!=null&&(n.left=o.right,o.right=s),this.root!==o&&(this.root=o,this.splayCount++),c}splayMin(i){let e=i,n=e.left;for(;n!=null;){const s=n;e.left=s.right,s.right=e,e=s,n=e.left}return e}splayMax(i){let e=i,n=e.right;for(;n!=null;){const s=n;e.right=s.left,s.left=e,e=s,n=e.right}return e}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let n=this.root;const s=n,r=n.left;if(this.size--,r==null)this.root=n.right;else{const a=n.right;n=this.splayMax(r),n.right=a,this.root=n}return this.modificationCount++,s}addNewRoot(i,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=i;return}e<0?(i.left=n,i.right=n.right,n.right=null):(i.right=n,i.left=n.left,n.left=null),this.root=i}_first(){const i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){const i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,e)=>i<e?-1:i>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Ec=class Lh extends lz{root=null;compare;validKey;constructor(e,n){super(),this.compare=e??this.defaultCompare(),this.validKey=n??(s=>s!=null&&s!=null)}delete(e){return this.validKey(e)?this._delete(e)!=null:!1}deleteAll(e){for(const n of e)this.delete(n)}forEach(e){const n=this[Symbol.iterator]();let s;for(;s=n.next(),!s.done;)e(s.value,s.value,this)}add(e){const n=this.splay(e);return n!=0&&this.addNewRoot(new po(e),n),this}addAndReturn(e){const n=this.splay(e);return n!=0&&this.addNewRoot(new po(e),n),this.root.key}addAll(e){for(const n of e)this.add(n)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(e){if(e==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(e)<0)return this.root.key;let s=this.root.left;if(s==null)return null;let r=s.right;for(;r!=null;)s=r,r=s.right;return s.key}firstAfter(e){if(e==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(e)>0)return this.root.key;let s=this.root.right;if(s==null)return null;let r=s.left;for(;r!=null;)s=r,r=s.left;return s.key}retainAll(e){const n=new Lh(this.compare,this.validKey),s=this.modificationCount;for(const r of e){if(s!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(r)&&this.splay(r)==0&&n.add(this.root.key)}n.size!=this.size&&(this.root=n.root,this.size=n.size,this.modificationCount++)}lookup(e){return!this.validKey(e)||this.splay(e)!=0?null:this.root.key}intersection(e){const n=new Lh(this.compare,this.validKey);for(const s of this)e.has(s)&&n.add(s);return n}difference(e){const n=new Lh(this.compare,this.validKey);for(const s of this)e.has(s)||n.add(s);return n}union(e){const n=this.clone();return n.addAll(e),n}clone(){const e=new Lh(this.compare,this.validKey);return e.size=this.size,e.root=this.copyNode(this.root),e}copyNode(e){if(e==null)return null;function n(r,a){let o,h;do{if(o=r.left,h=r.right,o!=null){const c=new po(o.key);a.left=c,n(o,c)}if(h!=null){const c=new po(h.key);a.right=c,r=h,a=c}}while(h!=null)}const s=new po(e.key);return n(e,s),s}toSet(){return this.clone()}entries(){return new fz(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new uz(this.wrap())}[Symbol.toStringTag]="[object Set]"},_g=class{tree;path=new Array;modificationCount=null;splayCount;constructor(i){this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],e=i.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},uz=class extends _g{getValue(i){return i.key}},fz=class extends _g{getValue(i){return[i.key,i.key]}};const dz=i=>i,pz=i=>{if(i){const e=new Ec(jf(i)),n=new Ec(jf(i)),s=(a,o)=>o.addAndReturn(a),r=a=>({x:s(a.x,e),y:s(a.y,n)});return r({x:new Yn(0),y:new Yn(0)}),r}return dz},Jf=i=>({set:e=>{Li=Jf(e)},reset:()=>Jf(i),compare:jf(i),snap:pz(i),orient:oz(i)});let Li=Jf();const yo=(i,e)=>i.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(i.ur.y),Qf=(i,e)=>{if(e.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(e.ll.y))return null;const n=i.ll.x.isLessThan(e.ll.x)?e.ll.x:i.ll.x,s=i.ur.x.isLessThan(e.ur.x)?i.ur.x:e.ur.x,r=i.ll.y.isLessThan(e.ll.y)?e.ll.y:i.ll.y,a=i.ur.y.isLessThan(e.ur.y)?i.ur.y:e.ur.y;return{ll:{x:n,y:r},ur:{x:s,y:a}}},zc=(i,e)=>i.x.times(e.y).minus(i.y.times(e.x)),Sg=(i,e)=>i.x.times(e.x).plus(i.y.times(e.y)),Cc=i=>Sg(i,i).sqrt(),yz=(i,e,n)=>{const s={x:e.x.minus(i.x),y:e.y.minus(i.y)},r={x:n.x.minus(i.x),y:n.y.minus(i.y)};return zc(r,s).div(Cc(r)).div(Cc(s))},xz=(i,e,n)=>{const s={x:e.x.minus(i.x),y:e.y.minus(i.y)},r={x:n.x.minus(i.x),y:n.y.minus(i.y)};return Sg(r,s).div(Cc(r)).div(Cc(s))},Tg=(i,e,n)=>e.y.isZero()?null:{x:i.x.plus(e.x.div(e.y).times(n.minus(i.y))),y:n},Eg=(i,e,n)=>e.x.isZero()?null:{x:n,y:i.y.plus(e.y.div(e.x).times(n.minus(i.x)))},gz=(i,e,n,s)=>{if(e.x.isZero())return Eg(n,s,i.x);if(s.x.isZero())return Eg(i,e,n.x);if(e.y.isZero())return Tg(n,s,i.y);if(s.y.isZero())return Tg(i,e,n.y);const r=zc(e,s);if(r.isZero())return null;const a={x:n.x.minus(i.x),y:n.y.minus(i.y)},o=zc(a,e).div(r),h=zc(a,s).div(r),c=i.x.plus(h.times(e.x)),l=n.x.plus(o.times(s.x)),u=i.y.plus(h.times(e.y)),f=n.y.plus(o.times(s.y)),d=c.plus(l).div(2),p=u.plus(f).div(2);return{x:d,y:p}};class Rn{point;isLeft;segment;otherSE;consumedBy;static compare(e,n){const s=Rn.comparePoints(e.point,n.point);return s!==0?s:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Ac.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}constructor(e,n){e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let s=0,r=n.length;s<r;s++){const a=n[s];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const s=this.point.events[n];if(s.segment.consumedBy===void 0)for(let r=n+1;r<e;r++){const a=this.point.events[r];a.consumedBy===void 0&&s.otherSE.point.events===a.otherSE.point.events&&s.segment.consume(a.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,s=this.point.events.length;n<s;n++){const r=this.point.events[n];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}getLeftmostComparator(e){const n=new Map,s=r=>{const a=r.otherSE;n.set(r,{sine:yz(this.point,e.point,a.point),cosine:xz(this.point,e.point,a.point)})};return(r,a)=>{n.has(r)||s(r),n.has(a)||s(a);const{sine:o,cosine:h}=n.get(r),{sine:c,cosine:l}=n.get(a);return o.isGreaterThanOrEqualTo(0)&&c.isGreaterThanOrEqualTo(0)?h.isLessThan(l)?1:h.isGreaterThan(l)?-1:0:o.isLessThan(0)&&c.isLessThan(0)?h.isLessThan(l)?-1:h.isGreaterThan(l)?1:0:c.isLessThan(o)?-1:c.isGreaterThan(o)?1:0}}}let mz=0,Ac=class bu{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(e,n){const s=e.leftSE.point.x,r=n.leftSE.point.x,a=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(s))return 1;if(a.isLessThan(r))return-1;const h=e.leftSE.point.y,c=n.leftSE.point.y,l=e.rightSE.point.y,u=n.rightSE.point.y;if(s.isLessThan(r)){if(c.isLessThan(h)&&c.isLessThan(l))return 1;if(c.isGreaterThan(h)&&c.isGreaterThan(l))return-1;const f=e.comparePoint(n.leftSE.point);if(f<0)return 1;if(f>0)return-1;const d=n.comparePoint(e.rightSE.point);return d!==0?d:-1}if(s.isGreaterThan(r)){if(h.isLessThan(c)&&h.isLessThan(u))return-1;if(h.isGreaterThan(c)&&h.isGreaterThan(u))return 1;const f=n.comparePoint(e.leftSE.point);if(f!==0)return f;const d=e.comparePoint(n.rightSE.point);return d<0?1:d>0?-1:1}if(h.isLessThan(c))return-1;if(h.isGreaterThan(c))return 1;if(a.isLessThan(o)){const f=n.comparePoint(e.rightSE.point);if(f!==0)return f}if(a.isGreaterThan(o)){const f=e.comparePoint(n.rightSE.point);if(f<0)return 1;if(f>0)return-1}if(!a.eq(o)){const f=l.minus(h),d=a.minus(s),p=u.minus(c),y=o.minus(r);if(f.isGreaterThan(d)&&p.isLessThan(y))return 1;if(f.isLessThan(d)&&p.isGreaterThan(y))return-1}return a.isGreaterThan(o)?1:a.isLessThan(o)||l.isLessThan(u)?-1:l.isGreaterThan(u)?1:e.id<n.id?-1:e.id>n.id?1:0}constructor(e,n,s,r){this.id=++mz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=s,this.windings=r}static fromRing(e,n,s){let r,a,o;const h=Rn.comparePoints(e,n);if(h<0)r=e,a=n,o=1;else if(h>0)r=n,a=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const c=new Rn(r,!0),l=new Rn(a,!1);return new bu(c,l,[s],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Li.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),s=e.bbox(),r=Qf(n,s);if(r===null)return null;const a=this.leftSE.point,o=this.rightSE.point,h=e.leftSE.point,c=e.rightSE.point,l=yo(n,h)&&this.comparePoint(h)===0,u=yo(s,a)&&e.comparePoint(a)===0,f=yo(n,c)&&this.comparePoint(c)===0,d=yo(s,o)&&e.comparePoint(o)===0;if(u&&l)return d&&!f?o:!d&&f?c:null;if(u)return f&&a.x.eq(c.x)&&a.y.eq(c.y)?null:a;if(l)return d&&o.x.eq(h.x)&&o.y.eq(h.y)?null:h;if(d&&f)return null;if(d)return o;if(f)return c;const p=gz(a,this.vector(),h,e.vector());return p===null||!yo(r,p)?null:Li.snap(p)}split(e){const n=[],s=e.events!==void 0,r=new Rn(e,!0),a=new Rn(e,!1),o=this.rightSE;this.replaceRightSE(a),n.push(a),n.push(r);const h=new bu(r,o,this.rings.slice(),this.windings.slice());return Rn.comparePoints(h.leftSE.point,h.rightSE.point)>0&&h.swapEvents(),Rn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),s&&(r.checkForConsuming(),a.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,s=this.windings.length;n<s;n++)this.windings[n]*=-1}consume(e){let n=this,s=e;for(;n.consumedBy;)n=n.consumedBy;for(;s.consumedBy;)s=s.consumedBy;const r=bu.compare(n,s);if(r!==0){if(r>0){const a=n;n=s,s=a}if(n.prev===s){const a=n;n=s,s=a}for(let a=0,o=s.rings.length;a<o;a++){const h=s.rings[a],c=s.windings[a],l=n.rings.indexOf(h);l===-1?(n.rings.push(h),n.windings.push(c)):n.windings[l]+=c}s.rings=null,s.windings=null,s.consumedBy=n,s.leftSE.consumedBy=n.leftSE,s.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,s=this._afterState.windings,r=this._afterState.multiPolys;for(let h=0,c=this.rings.length;h<c;h++){const l=this.rings[h],u=this.windings[h],f=n.indexOf(l);f===-1?(n.push(l),s.push(u)):s[f]+=u}const a=[],o=[];for(let h=0,c=n.length;h<c;h++){if(s[h]===0)continue;const l=n[h],u=l.poly;if(o.indexOf(u)===-1)if(l.isExterior)a.push(u);else{o.indexOf(u)===-1&&o.push(u);const f=a.indexOf(l.poly);f!==-1&&a.splice(f,1)}}for(let h=0,c=a.length;h<c;h++){const l=a[h].multiPoly;r.indexOf(l)===-1&&r.push(l)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(pi.type){case"union":{const s=e.length===0,r=n.length===0;this._isInResult=s!==r;break}case"intersection":{let s,r;e.length<n.length?(s=e.length,r=n.length):(s=n.length,r=e.length),this._isInResult=r===pi.numMultiPolys&&s<r;break}case"xor":{const s=Math.abs(e.length-n.length);this._isInResult=s%2===1;break}case"difference":{const s=r=>r.length===1&&r[0].isSubject;this._isInResult=s(e)!==s(n);break}}return this._isInResult}};class zg{poly;isExterior;segments;bbox;constructor(e,n,s){if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=s,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Li.snap({x:new Yn(e[0][0]),y:new Yn(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let a=r;for(let o=1,h=e.length;o<h;o++){if(typeof e[o][0]!="number"||typeof e[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const c=Li.snap({x:new Yn(e[o][0]),y:new Yn(e[o][1])});c.x.eq(a.x)&&c.y.eq(a.y)||(this.segments.push(Ac.fromRing(a,c,this)),c.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=c.x),c.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=c.y),c.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=c.x),c.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=c.y),a=c)}(!r.x.eq(a.x)||!r.y.eq(a.y))&&this.segments.push(Ac.fromRing(a,r,this))}getSweepEvents(){const e=[];for(let n=0,s=this.segments.length;n<s;n++){const r=this.segments[n];e.push(r.leftSE),e.push(r.rightSE)}return e}}class vz{multiPoly;exteriorRing;interiorRings;bbox;constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new zg(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let s=1,r=e.length;s<r;s++){const a=new zg(e[s],this,!1);a.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,s=this.interiorRings.length;n<s;n++){const r=this.interiorRings[n].getSweepEvents();for(let a=0,o=r.length;a<o;a++)e.push(r[a])}return e}}class Cg{isSubject;polys;bbox;constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new Yn(Number.POSITIVE_INFINITY),y:new Yn(Number.POSITIVE_INFINITY)},ur:{x:new Yn(Number.NEGATIVE_INFINITY),y:new Yn(Number.NEGATIVE_INFINITY)}};for(let s=0,r=e.length;s<r;s++){const a=new vz(e[s],this);a.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,s=this.polys.length;n<s;n++){const r=this.polys[n].getSweepEvents();for(let a=0,o=r.length;a<o;a++)e.push(r[a])}return e}}class Pc{events;poly;_isExteriorRing;_enclosingRing;static factory(e){const n=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];if(!a.isInResult()||a.ringOut)continue;let o=null,h=a.leftSE,c=a.rightSE;const l=[h],u=h.point,f=[];for(;o=h,h=c,l.push(h),h.point!==u;)for(;;){const d=h.getAvailableLinkedEvents();if(d.length===0){const x=l[0].point,g=l[l.length-1].point;throw new Error(`Unable to complete output ring starting at [${x.x}, ${x.y}]. Last matching segment found ends at [${g.x}, ${g.y}].`)}if(d.length===1){c=d[0].otherSE;break}let p=null;for(let x=0,g=f.length;x<g;x++)if(f[x].point===h.point){p=x;break}if(p!==null){const x=f.splice(p)[0],g=l.splice(x.index);g.unshift(g[0].otherSE),n.push(new Pc(g.reverse()));continue}f.push({index:l.length,point:h.point});const y=h.getLeftmostComparator(o);c=d.sort(y)[0].otherSE;break}n.push(new Pc(l))}return n}constructor(e){this.events=e;for(let n=0,s=e.length;n<s;n++)e[n].segment.ringOut=this;this.poly=null}getGeom(){let e=this.events[0].point;const n=[e];for(let l=1,u=this.events.length-1;l<u;l++){const f=this.events[l].point,d=this.events[l+1].point;Li.orient(f,e,d)!==0&&(n.push(f),e=f)}if(n.length===1)return null;const s=n[0],r=n[1];Li.orient(s,e,r)===0&&n.shift(),n.push(n[0]);const a=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,h=this.isExteriorRing()?n.length:-1,c=[];for(let l=o;l!=h;l+=a)c.push([n[l].x.toNumber(),n[l].y.toNumber()]);return c}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let e=this.events[0];for(let r=1,a=this.events.length;r<a;r++){const o=this.events[r];Rn.compare(e,o)>0&&(e=o)}let n=e.segment.prevInResult(),s=n?n.prevInResult():null;for(;;){if(!n)return null;if(!s)return n.ringOut;if(s.ringOut!==n.ringOut)return s.ringOut?.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut?.enclosingRing();n=s.prevInResult(),s=n?n.prevInResult():null}}}class Ag{exteriorRing;interiorRings;constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const n=[e];for(let s=0,r=this.interiorRings.length;s<r;s++){const a=this.interiorRings[s].getGeom();a!==null&&n.push(a)}return n}}class wz{rings;polys;constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,s=this.polys.length;n<s;n++){const r=this.polys[n].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){const n=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];if(!a.poly)if(a.isExteriorRing())n.push(new Ag(a));else{const o=a.enclosingRing();o?.poly||n.push(new Ag(o)),o?.poly?.addInterior(a)}}return n}}class Mz{queue;tree;segments;constructor(e,n=Ac.compare){this.queue=e,this.tree=new Ec(n),this.segments=[]}process(e){const n=e.segment,s=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(n),s;e.isLeft&&this.tree.add(n);let r=n,a=n;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do a=this.tree.firstAfter(a);while(a!=null&&a.consumedBy!=null);if(e.isLeft){let o=null;if(r){const c=r.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(o=c),!r.isAnEndpoint(c))){const l=this._splitSafely(r,c);for(let u=0,f=l.length;u<f;u++)s.push(l[u])}}let h=null;if(a){const c=a.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(h=c),!a.isAnEndpoint(c))){const l=this._splitSafely(a,c);for(let u=0,f=l.length;u<f;u++)s.push(l[u])}}if(o!==null||h!==null){let c=null;o===null?c=h:h===null?c=o:c=Rn.comparePoints(o,h)<=0?o:h,this.queue.delete(n.rightSE),s.push(n.rightSE);const l=n.split(c);for(let u=0,f=l.length;u<f;u++)s.push(l[u])}s.length>0?(this.tree.delete(n),s.push(e)):(this.segments.push(n),n.prev=r)}else{if(r&&a){const o=r.getIntersection(a);if(o!==null){if(!r.isAnEndpoint(o)){const h=this._splitSafely(r,o);for(let c=0,l=h.length;c<l;c++)s.push(h[c])}if(!a.isAnEndpoint(o)){const h=this._splitSafely(a,o);for(let c=0,l=h.length;c<l;c++)s.push(h[c])}}}this.tree.delete(n)}return s}_splitSafely(e,n){this.tree.delete(e);const s=e.rightSE;this.queue.delete(s);const r=e.split(n);return r.push(s),e.consumedBy===void 0&&this.tree.add(e),r}}class bz{type;numMultiPolys;run(e,n,s){pi.type=e;const r=[new Cg(n,!0)];for(let u=0,f=s.length;u<f;u++)r.push(new Cg(s[u],!1));if(pi.numMultiPolys=r.length,pi.type==="difference"){const u=r[0];let f=1;for(;f<r.length;)Qf(r[f].bbox,u.bbox)!==null?f++:r.splice(f,1)}if(pi.type==="intersection")for(let u=0,f=r.length;u<f;u++){const d=r[u];for(let p=u+1,y=r.length;p<y;p++)if(Qf(d.bbox,r[p].bbox)===null)return[]}const a=new Ec(Rn.compare);for(let u=0,f=r.length;u<f;u++){const d=r[u].getSweepEvents();for(let p=0,y=d.length;p<y;p++)a.add(d[p])}const o=new Mz(a);let h=null;for(a.size!=0&&(h=a.first(),a.delete(h));h;){const u=o.process(h);for(let f=0,d=u.length;f<d;f++){const p=u[f];p.consumedBy===void 0&&a.add(p)}a.size!=0?(h=a.first(),a.delete(h)):h=null}Li.reset();const c=Pc.factory(o.segments);return new wz(c).getGeom()}}const pi=new bz,_z=(i,...e)=>pi.run("union",i,e),Sz=(i,...e)=>pi.run("intersection",i,e),Tz=(i,...e)=>pi.run("xor",i,e),Ez=(i,...e)=>pi.run("difference",i,e),zz=Li.set,Cz=Object.freeze(Object.defineProperty({__proto__:null,difference:Ez,intersection:Sz,setPrecision:zz,union:_z,xor:Tz},Symbol.toStringTag,{value:"Module"})),Az=0,Pg=1,Ig=2,Rg=4,Og=8;function Ic(i,e,n){let s=Az;return i<n.left?s|=Pg:i>n.right&&(s|=Ig),e<n.top?s|=Rg:e>n.bottom&&(s|=Og),s}function Rc(i,e){let[[n,s],[r,a]]=i,o=Ic(n,s,e),h=Ic(r,a,e);for(;;)if(o|h){if(o&h)return!1;{const{top:c,right:l,bottom:u,left:f}=e;let d,p;const y=h>o?h:o;y&Og?(d=n+(r-n)*(u-s)/(a-s),p=u):y&Rg?(d=n+(r-n)*(c-s)/(a-s),p=c):y&Ig?(p=s+(a-s)*(l-n)/(r-n),d=l):y&Pg&&(p=s+(a-s)*(f-n)/(r-n),d=f),y==o?(n=d,s=p,o=Ic(n,s,e)):(r=d,a=p,h=Ic(r,a,e))}}else return!0}function Oc(i,e){return i.left<=e.right&&e.left<=i.right&&i.top<=e.bottom&&e.top<=i.bottom}function kg(i,e){return i?{top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom),left:Math.min(i.left,e.left)}:e}function Qr(i,e){return i?{top:Math.min(i.top,e[1]),right:Math.max(i.right,e[0]),bottom:Math.max(i.bottom,e[1]),left:Math.min(i.left,e[0])}:{top:e[1],right:e[0],bottom:e[1],left:e[0]}}function Lg(i){return Math.max(i.right-i.left,i.bottom-i.top)}function kc(i,e){return{top:i[1]-e,right:i[0]+e,bottom:i[1]+e,left:i[0]-e}}function Pz(i,e){return{top:i.top-e,right:i.right+e,bottom:i.bottom+e,left:i.left-e}}class Xs{constructor(e,n,s=16){this.boundingBox=e,this.depth=n,this.innerNodeCapacity=s}subtrees=null;pairs=[];insert(e,n){if(!Oc(e,this.boundingBox))return!1;if(this.depth>0&&this.pairs.length>=this.innerNodeCapacity){this.ensureSubtrees();for(let s=0;s<this.subtrees.length;s++)this.subtrees[s].insert(e,n)}else this.pairs.push([e,n]);return!0}find(e,n=new Set){if(!Oc(e,this.boundingBox))return n;for(let s=0;s<this.pairs.length;s++){const[r,a]=this.pairs[s];Oc(e,r)&&n.add(a)}if(this.subtrees)for(let s=0;s<this.subtrees.length;s++)this.subtrees[s].find(e,n);return n}findOnLineSegment(e,n=new Set){if(!Rc(e,this.boundingBox))return n;for(const[s,r]of this.pairs)Rc(e,s)&&n.add(r);if(this.subtrees)for(const s of this.subtrees)s.findOnLineSegment(e,n);return n}ensureSubtrees(){if(this.subtrees)return;const{top:e,right:n,bottom:s,left:r}=this.boundingBox,a=(this.boundingBox.left+this.boundingBox.right)/2,o=(this.boundingBox.top+this.boundingBox.bottom)/2;this.subtrees=[new Xs({top:e,right:a,bottom:o,left:r},this.depth-1,this.innerNodeCapacity),new Xs({top:e,right:n,bottom:o,left:a},this.depth-1,this.innerNodeCapacity),new Xs({top:o,right:a,bottom:s,left:r},this.depth-1,this.innerNodeCapacity),new Xs({top:o,right:n,bottom:s,left:a},this.depth-1,this.innerNodeCapacity)]}}class Lc extends Error{constructor(e){super("Assertion error: "+e)}}function Fg(i,e){if(!i)throw new Lc(`Expected 'cond' to be truthy: ${e}`)}function yi(i,e){if(i==null)throw new Lc(`Expected 'val' to be defined, but received ${i}: ${e}`)}function Ng(i,e,n){if(i!==e)throw new Lc(`Expected 'lhs' to equal ${e}, but received ${i}: ${n}`)}function Iz(i){throw new Lc(`Reached code that was supposed to be unreachable: ${i}`)}const Fc=1e-12;function Bg(i){const e=i[1],n=i[2],s=i[3],r=i[4],a=-e[0]+3*n[0]-3*s[0]+r[0],o=-e[1]+3*n[1]-3*s[1]+r[1],h=3*e[0]-6*n[0]+3*s[0],c=3*e[1]-6*n[1]+3*s[1],l=-3*e[0]+3*n[0],u=-3*e[1]+3*n[1],f=o*h-a*c,d=a*u-o*l,p=(-3*a*a*u*u+6*a*o*l*u+4*a*h*c*u-4*a*c*c*l-3*o*o*l*l-4*o*h*h*u+4*o*h*c*l)/(a*a*c*c-2*a*o*h*c+o*o*h*h);if(p<0)return null;const y=(d/f+Math.sqrt(p))/2,x=(d/f-Math.sqrt(p))/2;return Fc<=y&&y<=1-Fc&&Fc<=x&&x<=1-Fc?[y,x]:null}const Dg=2*Math.PI;function Rz(i,e,n,s,r){return(i-e)/(n-e)*(r-s)+s}function jn(i,e,n){return i+(e-i)*n}function qg(i){return i/180*Math.PI}function $g(i,e){const s=Math.sign(i[0]*e[1]-i[1]*e[0]);return s===0&&Math.abs(i[0]+e[0])<1e-12&&Math.abs(i[1]+e[1])<1e-12?Math.PI:s*Math.acos(tt.dot(i,e)/tt.len(i)/tt.len(e))}function Qt(){return[0,0]}function Xe(i,e,n=0){return Math.abs(i[0]-e[0])<=n&&Math.abs(i[1]-e[1])<=n}function Kf(i){return i[1]}function Vg(i){switch(i[0]){case"L":return i[2];case"C":return i[4];case"Q":return i[3];case"A":return i[7]}}function Nc(i){switch(i[0]){case"L":return["L",i[2],i[1]];case"C":return["C",i[4],i[3],i[2],i[1]];case"Q":return["Q",i[3],i[2],i[1]];case"A":return["A",i[7],i[2],i[3],i[4],i[5],!i[6],i[1]]}}const Bc=(()=>{const i=Qt(),e=Dr.create(),n=Qt(),s=Qt();return function([a,o,h,c,l,u,f,d]){if(h===0||c===0)return null;Dr.fromRotation(e,-qg(l)),tt.sub(i,o,d),tt.scale(i,i,.5),tt.transformMat2(i,i,e);let p=h*h,y=c*c;const x=i[0]*i[0],g=i[1]*i[1];h=Math.abs(h),c=Math.abs(c);const m=x/p+g/y+1e-12;if(m>1){const _=Math.sqrt(m);h*=_,c*=_;const T=Math.abs(m);p*=T,y*=T}const v=u===f?-1:1,w=Math.sqrt((p*y-p*g-y*x)/(p*g+y*x)),b=v*w*(h*i[1]/c),S=v*w*(-c*i[0]/h);Dr.transpose(e,e),tt.add(n,o,d),tt.scale(n,n,.5),tt.transformMat2(s,[b,S],e),tt.add(s,s,n);const E=[(i[0]-b)/h,(i[1]-S)/c],A=$g([1,0],E);let M=$g(E,[(-i[0]-b)/h,(-i[1]-S)/c]);return!f&&M>0?M-=Dg:f&&M<0&&(M+=Dg),{center:[s[0],s[1]],theta1:A,deltaTheta:M,rx:h,ry:c,phi:l}}})(),Gg=(()=>{const i=Qt(),e=Qt(),n=Dr.create();return function({center:r,theta1:a,deltaTheta:o,rx:h,ry:c,phi:l}){Dr.fromRotation(n,l),tt.set(i,h*Math.cos(a),c*Math.sin(a)),tt.transformMat2(i,i,n),tt.add(i,i,r),tt.set(e,h*Math.cos(a+o),c*Math.sin(a+o)),tt.transformMat2(e,e,n),tt.add(e,e,r);const u=Math.abs(o)>Math.PI,f=o>0;return["A",[i[0],i[1]],h,c,l,u,f,[e[0],e[1]]]}})(),Kr=(()=>{const i=Qt(),e=Qt(),n=Qt(),s=Qt(),r=Qt(),a=Qt();return function(h,c){switch(h[0]){case"L":tt.lerp(a,h[1],h[2],c);break;case"C":tt.lerp(i,h[1],h[2],c),tt.lerp(e,h[2],h[3],c),tt.lerp(n,h[3],h[4],c),tt.lerp(s,i,e,c),tt.lerp(r,e,n,c),tt.lerp(a,s,r,c);break;case"Q":tt.lerp(i,h[1],h[2],c),tt.lerp(e,h[2],h[3],c),tt.lerp(a,i,e,c);break;case"A":{const l=Bc(h);if(!l){tt.lerp(a,h[1],h[7],c);break}const{deltaTheta:u,phi:f,theta1:d,rx:p,ry:y,center:x}=l,g=d+c*u;tt.set(a,p*Math.cos(g),y*Math.sin(g)),tt.rotate(a,a,[0,0],f),tt.add(a,a,x);break}}return[a[0],a[1]]}})(),Ug=(()=>{const i=Zi.create(),e=Zi.create();return function(s,r=Math.PI/2){const a=Bc(s);if(!a)return[["L",s[1],s[7]]];const{center:o,theta1:h,deltaTheta:c,rx:l,ry:u}=a,f=Math.ceil(Math.abs(c)/r);Zi.fromTranslation(i,o),Zi.rotate(i,i,qg(s[4])),Zi.scale(i,i,[l,u]);const d=[],p=c/f,y=4/3*Math.tan(p/4),x=Math.sin(p),g=Math.cos(p);for(let m=0;m<f;m++){const v=[1,0],w=[1,y],b=[g+y*x,x-y*g],S=[g,x];Zi.fromRotation(e,h+m*p),Zi.mul(e,i,e),tt.transformMat2d(v,v,e),tt.transformMat2d(w,w,e),tt.transformMat2d(b,b,e),tt.transformMat2d(S,S,e),d.push(["C",v,w,b,S])}return d}})();function Wg(i,e,n,s,r){const a=jn(i,e,r),o=jn(e,n,r),h=jn(n,s,r),c=jn(a,o,r),l=jn(o,h,r);return jn(c,l,r)}function Yg(i,e,n,s){let r=Math.min(i,s),a=Math.max(i,s);const o=3*(-i+3*e-3*n+s),h=6*(i-2*e+n),c=3*(e-i),l=h*h-4*o*c;if(l<0||o===0)return[r,a];const u=Math.sqrt(l),f=(-h-u)/(2*o);if(0<f&&f<1){const p=Wg(i,e,n,s,f);r=Math.min(r,p),a=Math.max(a,p)}const d=(-h+u)/(2*o);if(0<d&&d<1){const p=Wg(i,e,n,s,d);r=Math.min(r,p),a=Math.max(a,p)}return[r,a]}function Oz(i,e,n,s){const r=jn(i,e,s),a=jn(e,n,s);return jn(r,a,s)}function jg(i,e,n){let s=Math.min(i,n),r=Math.max(i,n);const a=i-2*e+n;if(a===0)return[s,r];const o=(i-e)/a;if(0<=o&&o<=1){const h=Oz(i,e,n,o);s=Math.min(s,h),r=Math.max(r,h)}return[s,r]}function as(i,e,n){const s=(i-e)/(n-e);return 0<=s&&s<=1}function On(i){switch(i[0]){case"L":return{top:Math.min(i[1][1],i[2][1]),right:Math.max(i[1][0],i[2][0]),bottom:Math.max(i[1][1],i[2][1]),left:Math.min(i[1][0],i[2][0])};case"C":{const[e,n]=Yg(i[1][0],i[2][0],i[3][0],i[4][0]),[s,r]=Yg(i[1][1],i[2][1],i[3][1],i[4][1]);return{top:s,right:n,bottom:r,left:e}}case"Q":{const[e,n]=jg(i[1][0],i[2][0],i[3][0]),[s,r]=jg(i[1][1],i[2][1],i[3][1]);return{top:s,right:n,bottom:r,left:e}}case"A":{const e=Bc(i);if(!e)return Qr(kc(i[1],0),i[7]);const{theta1:n,deltaTheta:s,phi:r,center:a,rx:o,ry:h}=e;if(r===0||o===h){const u=n+s;let f=Qr(kc(i[1],0),i[7]);return(as(-Math.PI,n,u)||as(Math.PI,n,u))&&(f=Qr(f,[a[0]-o,a[1]])),(as(-Math.PI/2,n,u)||as(3*Math.PI/2,n,u))&&(f=Qr(f,[a[0],a[1]-h])),(as(0,n,u)||as(2*Math.PI,n,u))&&(f=Qr(f,[a[0]+o,a[1]])),(as(Math.PI/2,n,u)||as(5*Math.PI/2,n,u))&&(f=Qr(f,[a[0],a[1]+h])),Pz(f,1e-11)}const c=Ug(i,Math.PI/16);let l=null;for(const u of c)l=kg(l,On(u));return l||kc(i[1],0)}}}function Hg(i,e){const n=i[1],s=i[2],r=tt.lerp(Qt(),n,s,e);return[["L",n,r],["L",r,s]]}function Dc(i,e){const n=i[1],s=i[2],r=i[3],a=i[4],o=tt.lerp(Qt(),n,s,e),h=tt.lerp(Qt(),s,r,e),c=tt.lerp(Qt(),r,a,e),l=tt.lerp(Qt(),o,h,e),u=tt.lerp(Qt(),h,c,e),f=tt.lerp(Qt(),l,u,e);return[["C",n,o,l,f],["C",f,u,c,a]]}function kz(i,e){const n=i[1],s=i[2],r=i[3],a=tt.lerp(Qt(),n,s,e),o=tt.lerp(Qt(),s,r,e),h=tt.lerp(Qt(),a,o,e);return[["Q",n,a,h],["Q",h,o,r]]}function Lz(i,e){const n=Bc(i);if(!n)return Hg(["L",i[1],i[7]],e);const s=n.deltaTheta*e;return[Gg({...n,deltaTheta:s}),Gg({...n,theta1:n.theta1+s,deltaTheta:n.deltaTheta-s})]}function t0(i,e){switch(i[0]){case"L":return Hg(i,e);case"C":return Dc(i,e);case"Q":return kz(i,e);case"A":return Lz(i,e)}}function e0([[i,e],[n,s]],[[r,a],[o,h]],c){const l=n-i,u=r-o,f=r-i,d=s-e,p=a-h,y=a-e,x=l*p-d*u;if(Math.abs(x)<c.collinear)return null;const g=(f*p-y*u)/x,m=(l*y-d*f)/x;return-c.param<=g&&g<=1+c.param&&-c.param<=m&&m<=1+c.param?[g,m]:null}function Fz(i,e,n){return!!e0(i,e,n)}function Xg(i){const[e,n]=t0(i.seg,.5),s=(i.startParam+i.endParam)/2;return[{seg:e,startParam:i.startParam,endParam:s,boundingBox:On(e)},{seg:n,startParam:s,endParam:i.endParam,boundingBox:On(n)}]}function Zg(i){switch(i[0]){case"L":return[i[1],i[2]];case"C":return[i[1],i[4]];case"Q":return[i[1],i[3]];case"A":return[i[1],i[7]]}}function Nz({seg:i,boundingBox:e},{seg:n,boundingBox:s},r){return i[0]==="L"?n[0]==="L"?Fz([i[1],i[2]],[n[1],n[2]],r):Rc([i[1],i[2]],s):n[0]==="L"?Rc([n[1],n[2]],e):Oc(e,s)}function n0(i,e,n){const s=i[0];if(e[0]!==s)return!1;switch(s){case"L":return Xe(i[1],e[1],n)&&Xe(i[2],e[2],n);case"C":return Xe(i[1],e[1],n)&&Xe(i[2],e[2],n)&&Xe(i[3],e[3],n)&&Xe(i[4],e[4],n);case"Q":return Xe(i[1],e[1],n)&&Xe(i[2],e[2],n)&&Xe(i[3],e[3],n);case"A":return Xe(i[1],e[1],n)&&Math.abs(i[2]-e[2])<n&&Math.abs(i[3]-e[3])<n&&(Math.abs(i[2]-i[3])<n||Math.abs(i[4]-e[4])<n)&&i[5]===e[5]&&i[6]===e[6]&&Xe(i[7],e[7],n)}}function Bz(i,e,n){const s=tt.sub([0,0],i[1],i[0]),r=tt.sub([0,0],e[1],e[0]);tt.normalize(s,s),tt.normalize(r,r);const a=Math.abs(tt.dot(s,r));return Math.abs(a-1)<n}const Dz=(()=>{const i=Qt(),e=Qt(),n=Qt(),s=Qt(),r=Qt(),a=Qt();return function(h,c){tt.sub(i,h[1],h[0]),tt.sub(e,c[1],c[0]),tt.scale(i,i,1/tt.squaredLength(i)),tt.scale(e,e,1/tt.squaredLength(e));const l=[];tt.sub(n,c[0],h[0]);const u=tt.dot(n,i);u>=0&&u<=1&&l.push([u,0]),tt.sub(s,c[1],h[0]);const f=tt.dot(s,i);f>=0&&f<=1&&l.push([f,1]),tt.sub(r,h[0],c[0]);const d=tt.dot(r,e);d>=0&&d<=1&&l.push([0,d]),tt.sub(a,h[1],c[0]);const p=tt.dot(a,e);return p>=0&&p<=1&&l.push([1,p]),l}})();function Jg(i,e,n){if(i[0]==="L"&&e[0]==="L"){const o=[i[1],i[2]],h=[e[1],e[2]];if(Bz(o,h,n.collinear))return Dz(o,h);const c=e0(o,h,n);return c?[c]:[]}let s=[[{seg:i,startParam:0,endParam:1,boundingBox:On(i)},{seg:e,startParam:0,endParam:1,boundingBox:On(e)}]];const r=[];function a(o){return Lg(o.boundingBox)<=n.linear||o.endParam-o.startParam<n.param}for(;s.length;){const o=[];for(const[h,c]of s){if(n0(h.seg,c.seg,n.point))continue;const l=a(h),u=a(c);if(l&&u){const f=Zg(h.seg),d=Zg(c.seg),p=e0(f,d,n);p&&r.push([jn(h.startParam,h.endParam,p[0]),jn(c.startParam,c.endParam,p[1])])}else{const f=l?[h]:Xg(h),d=u?[c]:Xg(c);for(const p of f)for(const y of d)Nz(p,y,n)&&o.push([p,y])}}s=o}return r}function qz(i){return typeof i=="number"}function $z(i){return typeof i=="string"}function Vz(i){return typeof i=="boolean"}const xo=Object.hasOwn;function qc(i){const e=new WeakMap;return(n,...s)=>{if(e.has(n))return e.get(n);{const r=i(n,...s);return e.set(n,r),r}}}function Gz(i,e){return i.reduce((n,s)=>n+(e(s)?1:0),0)}function*$c(i,e){let n=0;for(const s of i)yield e(s,n++)}const Uz=8,Wz=8,hn={point:1e-6,linear:1e-4,param:1e-8,collinear:Number.MIN_VALUE*64};var Qg=(i=>(i[i.Union=0]="Union",i[i.Difference=1]="Difference",i[i.Intersection=2]="Intersection",i[i.Exclusion=3]="Exclusion",i[i.Division=4]="Division",i[i.Fracture=5]="Fracture",i))(Qg||{}),Kg=(i=>(i[i.NonZero=0]="NonZero",i[i.EvenOdd=1]="EvenOdd",i))(Kg||{});function Yz(i){return i.values().next().value}function tm(){let i=0;return qc(()=>i++)}function em(i){return e=>({seg:e,parent:i})}function jz(i){for(let e=0;e<i.length;e++){const n=i[e];if(n.seg[0]!=="C")continue;const s=Bg(n.seg);if(!s)continue;s[0]>s[1]&&s.reverse();const[r,a]=s;if(Math.abs(r-a)<hn.param){const[o,h]=Dc(n.seg,r);i[e]={seg:o,parent:n.parent},i.push({seg:h,parent:n.parent})}else{const[o,h]=Dc(n.seg,r),[c,l]=Dc(h,(a-r)/(1-r));i[e]={seg:o,parent:n.parent},i.push({seg:c,parent:n.parent},{seg:l,parent:n.parent})}}}function Hz(i){const e=i.map(h=>({...h,boundingBox:On(h.seg)})),n=e.reduce((h,{boundingBox:c})=>kg(h,c),null);if(!n)return{edges:[],totalBoundingBox:null};const s=new Xs(n,Uz),r={};function a(h,c){xo(r,h)||(r[h]=[]),r[h].push(c)}for(let h=0;h<e.length;h++){const c=e[h],l=s.find(c.boundingBox);for(const u of l){const f=i[u],d=Jg(c.seg,f.seg,hn);for(const[p,y]of d)a(h,p),a(u,y)}s.insert(c.boundingBox,h)}const o=[];for(let h=0;h<e.length;h++){const c=e[h];if(!xo(r,h)){o.push(c);continue}const l=r[h];l.sort();let u=c.seg,f=0;for(let d=0;d<l.length;d++){const p=l[d];if(p>1-hn.param)break;const y=(p-f)/(1-f);if(f=p,y<hn.param||y>1-hn.param)continue;const[x,g]=t0(u,y);o.push({seg:x,boundingBox:On(x),parent:c.parent}),u=g}o.push({seg:u,boundingBox:On(u),parent:c.parent})}return{edges:o,totalBoundingBox:n}}function Xz(i,e){const n=new Xs(e,Wz),s=[];function r(c){const l=kc(c,hn.point),u=n.find(l);if(u.size)return Yz(u);{const f={point:c,outgoingEdges:[]};return n.insert(l,f),s.push(f),f}}const a=tm(),o={};return{edges:i.flatMap(c=>{const l=r(Kf(c.seg)),u=r(Vg(c.seg));if(l===u)switch(c.seg[0]){case"L":return[];case"C":if(Xe(c.seg[1],c.seg[2],hn.point)&&Xe(c.seg[3],c.seg[4],hn.point))return[];break;case"Q":if(Xe(c.seg[1],c.seg[2],hn.point))return[];break;case"A":if(c.seg[5]===!1)return[];break}const f=`${a(l)}:${a(u)}`;if(xo(o,f)){const x=o[f].find(g=>n0(g[0].seg,c.seg,hn.point));if(x)return x[1].parent|=c.parent,x[2].parent|=c.parent,[]}const d=`${a(u)}:${a(l)}`;if(xo(o,d)){const x=Nc(c.seg),g=o[d].find(m=>n0(m[0].seg,x,hn.point));if(g)return g[0].parent===c.parent?[]:(g[1].parent|=c.parent,g[1].directionFlagA=c.parent===1,g[1].directionFlagB=c.parent===2,g[2].parent|=c.parent,g[2].directionFlagA=c.parent===1,g[2].directionFlagB=c.parent===2,[])}const p={...c,incidentVertices:[l,u],directionFlag:!1,directionFlagA:!1,directionFlagB:!1,twin:null},y={...c,incidentVertices:[u,l],directionFlag:!0,directionFlagA:c.parent===1,directionFlagB:c.parent===2,twin:p};return p.twin=y,l.outgoingEdges.push(p),u.outgoingEdges.push(y),xo(o,f)?o[f].push([c,p,y]):o[f]=[[c,p,y]],[p,y]}),vertices:s}}function go(i){return i.outgoingEdges.length}function Zz({vertices:i}){const e=[],n=[],s=qc(c=>{const l={outgoingEdges:[]};return n.push(l),l}),r=tm(),a={},o=new WeakSet;for(const c of i){if(go(c)===2)continue;const l=s(c);for(const u of c.outgoingEdges){const f=[];let d=u;for(;d.parent===u.parent&&d.directionFlag===u.directionFlag&&d.directionFlagA===u.directionFlagA&&d.directionFlagB===u.directionFlagB&&go(d.incidentVertices[1])===2;){f.push(d.seg),o.add(d.incidentVertices[1]);const[v,w]=d.incidentVertices[1].outgoingEdges;Fg(v.twin===d||w.twin===d,"Wrong twin structure."),d=v.twin===d?w:v}f.push(d.seg);const p=s(d.incidentVertices[1]);yi(d.twin,"Edge doesn't have a twin."),yi(u.twin,"Edge doesn't have a twin.");const y=`${r(u)}-${r(d)}`,x=`${r(d.twin)}-${r(u.twin)}`,g=a[x]??null,m={segments:f,parent:u.parent,incidentVertices:[l,p],directionFlag:u.directionFlag,directionFlagA:u.directionFlagA,directionFlagB:u.directionFlagB,twin:g};g&&(g.twin=m),a[y]=m,l.outgoingEdges.push(m),e.push(m)}}const h=[];for(const c of i){if(go(c)!==2||o.has(c))continue;let l=c.outgoingEdges[0];const u={segments:[],parent:l.parent,directionFlag:l.directionFlag,directionFlagA:l.directionFlagA,directionFlagB:l.directionFlagB};do{u.segments.push(l.seg),o.add(l.incidentVertices[0]),Ng(go(l.incidentVertices[1]),2,"Found an unvisited vertex of order != 2.");const[f,d]=l.incidentVertices[1].outgoingEdges;Fg(f.twin===l||d.twin===l,"Wrong twin structure."),l=f.twin===l?d:f}while(l.incidentVertices[0]!==c);h.push(u)}return{edges:e,vertices:n,cycles:h}}function Jz(i){function e(o){const h=new WeakSet,c=new WeakMap;function l(u,f,d){if(c.has(u))return c.get(u);c.set(u,d);let p=1/0;for(const y of u.outgoingEdges)y.parent&o&&y!==f&&(p=Math.min(p,l(y.incidentVertices[1],y.twin,d+1)));return p<=d&&h.add(u),p}for(const u of i.edges)u.parent&o&&l(u.incidentVertices[0],null,0);return h}const n=e(1),s=e(2);function r(o){return n.has(o)||s.has(o)}function a(o){return(o.parent&1)===1&&n.has(o.incidentVertices[0])&&n.has(o.incidentVertices[1])||(o.parent&2)===2&&s.has(o.incidentVertices[0])&&s.has(o.incidentVertices[1])}i.vertices=i.vertices.filter(r);for(const o of i.vertices)o.outgoingEdges=o.outgoingEdges.filter(a);i.edges=i.edges.filter(a)}function Qz({directionFlag:i,segments:e}){let n,s;const r=e[0];return i?(n=Kr(r,1),s=Kr(r,1-hn.param)):(n=Kr(r,0),s=Kr(r,hn.param)),Math.atan2(s[1]-n[1],s[0]-n[0])}function Kz({vertices:i}){const e=qc(Qz);for(const n of i)go(n)>2&&n.outgoingEdges.sort((s,r)=>e(s)-e(r))}function tC(i){const{outgoingEdges:e}=i.incidentVertices[1],n=e.findIndex(s=>s.twin===i);return e[(n+1)%e.length]}const eC=qc(i=>i.incidentEdges.flatMap(e=>{const s=[];for(const r of e.segments)for(let a=0;a<64;a++){const o=a/64,h=e.directionFlag?1-o:o;s.push(Kr(r,h))}return s}));function nm(i,e,n){const s=i>=n,r=e<n;return s===r}function im(i,e,n){return nm(i[1],e[1],n[1])?Rz(n[1],i[1],e[1],i[0],e[0])>=n[0]:!1}function nC(i,e){if(i.length<=2)return 0;let n=i[i.length-1],s=0;for(const r of i)im(n,r,e)&&(s+=r[1]>n[1]?-1:1),n=r;return s}function sm(i){const e=eC(i);for(let n=0;n<e.length;n++){const s=e[n],r=e[(n+1)%e.length],a=e[(n+2)%e.length],o=[(s[0]+r[0]+a[0])/3,(s[1]+r[1]+a[1])/3],h=nC(e,o);if(h!==0)return{winding:h,point:o}}Iz("No ear in polygon found.")}function iC({edges:i,cycles:e}){const n=[],s=new WeakMap;for(const h of i){if(s.has(h))continue;const c={incidentEdges:[],flag:0};let l=h;do{yi(l.twin,"Edge doesn't have a twin");const u=s.get(l.twin)??null,f={segments:l.segments,parent:l.parent,incidentVertex:c,directionFlag:l.directionFlag,directionFlagA:l.directionFlagA,directionFlagB:l.directionFlagB,twin:u};u&&(u.twin=f),s.set(l,f),c.incidentEdges.push(f),l=tC(l)}while(l!==h);n.push(c)}for(const h of e){const c={incidentEdges:[],flag:0},l={segments:h.segments,parent:h.parent,incidentVertex:c,directionFlag:h.directionFlag,directionFlagA:h.directionFlagA,directionFlagB:h.directionFlagB,twin:null},u={incidentEdges:[],flag:0},f={segments:[...h.segments].reverse(),parent:h.parent,incidentVertex:u,directionFlag:!h.directionFlag,directionFlagA:!h.directionFlagA,directionFlagB:!h.directionFlagB,twin:l};l.twin=f,c.incidentEdges.push(l),u.incidentEdges.push(f),n.push(c,u)}const r=[],a=new WeakSet,o=new WeakSet;for(const h of n){if(a.has(h))continue;const c=[],l=[],u=d=>{a.has(d)||c.push(d),a.add(d);for(const p of d.incidentEdges){if(o.has(p))continue;const{twin:y}=p;yi(y,"Edge doesn't have a twin."),l.push(p,y),o.add(p),o.add(y),u(y.incidentVertex)}};u(h);const f=c.find(d=>sm(d).winding<0);yi(f,"No outer face of a component found."),Ng(Gz(c,d=>sm(d).winding<0),1,"Multiple outer faces found."),r.push({vertices:c,edges:l,outerFace:f})}return r}function i0(i,e){return nm(i.top,i.bottom,e[1])&&i.right>=e[0]}function sC(i,e){const n=On(i);if(!i0(n,e))return 0;let s=[{boundingBox:n,seg:i}],r=0;for(;s.length>0;){const a=[];for(const{boundingBox:o,seg:h}of s)if(Lg(o)<hn.linear)im(Kf(h),Vg(h),e)&&r++;else{const c=t0(h,.5),l=On(c[0]);i0(l,e)&&a.push({boundingBox:l,seg:c[0]});const u=On(c[1]);i0(u,e)&&a.push({boundingBox:u,seg:c[1]})}s=a}return r}function rm(i,e){const n=Kf(i.edges[0].segments[0]);for(const s of e.vertices){if(s===e.outerFace)continue;let r=0;for(const a of s.incidentEdges)for(const o of a.segments)r+=sC(o,n);if(r%2===1)return s}return null}function rC(i){let e=[];function n(s,r){let a=!1;for(const o of s){const h=rm(r,o.component);if(h){if(o.outgoingEdges.has(h)){const c=o.outgoingEdges.get(h);o.outgoingEdges.set(h,n(c,r))}else o.outgoingEdges.set(h,[{component:r,outgoingEdges:new Map}]);a=!0;break}}if(a)return s;{const o={component:r,outgoingEdges:new Map},h=[o];for(const c of s){const l=rm(c.component,r);l?o.outgoingEdges.has(l)?o.outgoingEdges.get(l).push(c):o.outgoingEdges.set(l,[c]):h.push(c)}return h}}for(const s of i)e=n(e,s);return e}function am(i,e){switch(e){case 0:return i===0?0:1;case 1:return i%2===0?0:1}}function aC(i,e,n){function s(r,a,o){const h=new WeakSet;function c(l,u,f){if(h.has(l))return;h.add(l);const d=am(u,e),p=am(f,n);l.flag=d|p<<1;for(const y of l.incidentEdges){const x=y.twin;yi(x,"Edge doesn't have a twin.");let g=u;y.parent&1&&(g+=y.directionFlagA?-1:1);let m=f;y.parent&2&&(m+=y.directionFlagB?-1:1),c(x.incidentVertex,g,m)}if(r.outgoingEdges.has(l)){const y=r.outgoingEdges.get(l);for(const x of y)s(x,u,f)}}yi(r.component.outerFace,"Component doesn't have an outer face."),c(r.component.outerFace,a,o)}for(const r of i)s(r,0,0)}function*oC(i,e){function*n(s){for(const r of s.component.vertices)e(r)&&(yield r);for(const r of s.outgoingEdges.values())for(const a of r)yield*n(a)}for(const s of i)yield*n(s)}function*hC(i){function e(r){return yi(r.twin,"Edge doesn't have a twin."),i.has(r.incidentVertex)===i.has(r.twin.incidentVertex)}const n=new WeakMap;for(const r of i){let a=r.incidentEdges[r.incidentEdges.length-1];for(const o of r.incidentEdges)n.set(a,o),a=o}const s=new WeakSet;for(const r of i)for(const a of r.incidentEdges){if(e(a)||s.has(a))continue;let o=a;do for(o.directionFlag?yield*$c(o.segments,Nc):yield*o.segments,s.add(o),o=n.get(o);e(o);)yi(o.twin,"Edge doesn't have a twin."),o=n.get(o.twin);while(o!==a)}}function cC(i,e){const n=[];function s(r){for(const a of r.component.vertices){if(!e(a)||a===r.component.outerFace)continue;const o=[];for(const h of a.incidentEdges)h.directionFlag?o.push(...h.segments.map(Nc)):o.push(...h.segments);if(r.outgoingEdges.has(a))for(const h of r.outgoingEdges.get(a)){const{outerFace:c}=h.component;yi(c,"Component has no outer face.");for(const l of c.incidentEdges)l.directionFlag?o.push(...l.segments.map(Nc)):o.push(...l.segments)}n.push(o)}for(const a of r.outgoingEdges.values())for(const o of a)s(o)}for(const r of i)s(r);return n}const lC={0:({flag:i})=>i>0,1:({flag:i})=>i===1,2:({flag:i})=>i===3,3:({flag:i})=>i===1||i===2,4:({flag:i})=>(i&1)===1,5:({flag:i})=>i>0};function uC(i,e,n,s,r){const a=[...$c(i,em(1)),...$c(n,em(2))];jz(a);const{edges:o,totalBoundingBox:h}=Hz(a);if(!h)return[];const c=Xz(o,h),l=Zz(c);Jz(l),Kz(l);const u=iC(l),f=rC(u);aC(f,e,s);const d=lC[r];switch(r){case 4:case 5:return cC(f,d);default:{const p=new Set(oC(f,d));return[[...hC(p)]]}}}function*fC(i){let e=[0,0],n=e;for(const s of i)switch(s[0]){case"M":yield s,e=n=s[1];break;case"L":yield s,e=s[1];break;case"C":yield s,e=s[3];break;case"S":yield s,e=s[2];break;case"Q":yield s,e=s[2];break;case"T":yield s,e=s[1];break;case"A":yield s,e=s[6];break;case"Z":case"z":e=n,yield["Z"];break;case"H":e=[s[1],e[1]],yield["L",e];break;case"V":e=[e[0],s[1]],yield["L",e];break;case"m":e=n=[e[0]+s[1],e[1]+s[2]],yield["M",e];break;case"l":e=[e[0]+s[1],e[1]+s[2]],yield["L",e];break;case"h":e=[e[0]+s[1],e[1]],yield["L",e];break;case"v":e=[e[0],e[1]+s[1]],yield["L",e];break;case"c":yield["C",[e[0]+s[1],e[1]+s[2]],[e[0]+s[3],e[1]+s[4]],e=[e[0]+s[5],e[1]+s[6]]];break;case"s":yield["S",[e[0]+s[1],e[1]+s[2]],e=[e[0]+s[3],e[1]+s[4]]];break;case"q":yield["Q",[e[0]+s[1],e[1]+s[2]],e=[e[0]+s[3],e[1]+s[4]]];break;case"t":yield["T",e=[e[0]+s[1],e[1]+s[2]]];break;case"a":yield["A",s[1],s[2],s[3],s[4],s[5],e=[e[0]+s[6],e[1]+s[7]]];break}}function om(i,e){return[2*i[0]-e[0],2*i[1]-e[1]]}function*hm(i){let e=null,n=null,s=null;function r(){throw new Error("Bad SVG path data sequence.")}for(const a of fC(i))switch(a[0]){case"M":n=e=a[1],s=null;break;case"L":n||r(),yield["L",n,a[1]],n=a[1],s=null;break;case"C":n||r(),yield["C",n,a[1],a[2],a[3]],n=a[3],s=a[2];break;case"S":n||r(),s||r(),yield["C",n,om(n,s),a[1],a[2]],n=a[2],s=a[1];break;case"Q":n||r(),yield["Q",n,a[1],a[2]],n=a[2],s=a[1];break;case"T":n||r(),s||r(),s=om(n,s),yield["Q",n,s,a[1]],n=a[1];break;case"A":n||r(),yield["A",n,a[1],a[2],a[3],a[4],a[5],a[6]],n=a[6],s=null;break;case"Z":case"z":n||r(),e||r(),yield["L",n,e],n=e,s=null;break}}function*cm(i,e=1e-4){let n=null;for(const s of i)switch((!n||!Xe(s[1],n,e))&&(yield["M",s[1]]),s[0]){case"L":yield["L",n=s[2]];break;case"C":yield["C",s[2],s[3],n=s[4]];break;case"Q":yield["Q",s[2],n=s[3]];break;case"A":yield["A",s[2],s[3],s[4],s[5],s[6],n=s[7]];break}}const lm=Symbol();function*um(i){const e=/(-?\d*(?:\d\.|\.\d|\d)\d*(?:[eE][+\-]?\d+)?)/y,n=/([MLCSQTAZHVmlhvcsqtaz])/y,s=/([01])/y,r=/\s*,?\s*/y;let a=0;function o(){r.lastIndex=a,r.exec(i)!==null&&(a=r.lastIndex)}let h="M",c=-1;function l(){if(o(),a>i.length-1)return lm;n.lastIndex=a;const d=n.exec(i);if(!d)switch(h){case"M":return"L";case"m":return"l";case"Z":case"z":if(a===c)throw new Error(`Invalid path data. Invalid syntax at index ${a}.`);return c=a,h;default:return h}return a=n.lastIndex,d[1]}function u(){o(),e.lastIndex=a;const d=e.exec(i);if(!d)throw new Error(`Invalid path data. Expected a number at index ${a}.`);return a=e.lastIndex,Number(d[1])}function f(){o(),s.lastIndex=a;const d=s.exec(i);if(!d)throw new Error(`Invalid path data. Expected a flag at index ${a}.`);return a=s.lastIndex,d[1]==="1"}for(;;)switch(l()){case"M":yield[h="M",[u(),u()]];break;case"L":yield[h="L",[u(),u()]];break;case"C":yield[h="C",[u(),u()],[u(),u()],[u(),u()]];break;case"S":yield[h="S",[u(),u()],[u(),u()]];break;case"Q":yield[h="Q",[u(),u()],[u(),u()]];break;case"T":yield[h="T",[u(),u()]];break;case"A":yield[h="A",u(),u(),u(),f(),f(),[u(),u()]];break;case"Z":case"z":yield[h="Z"];break;case"H":yield[h="H",u()];break;case"V":yield[h="V",u()];break;case"m":yield[h="m",u(),u()];break;case"l":yield[h="l",u(),u()];break;case"h":yield[h="h",u()];break;case"v":yield[h="v",u()];break;case"c":yield[h="c",u(),u(),u(),u(),u(),u()];break;case"s":yield[h="s",u(),u(),u(),u()];break;case"q":yield[h="q",u(),u(),u(),u()];break;case"t":yield[h="t",u(),u()];break;case"a":yield[h="a",u(),u(),u(),f(),f(),u(),u()];break;case lm:return}}function dC(i){return[...hm(um(i))]}function pC(i,e=1e-4){function n(s){return $z(s)?s:qz(s)?s.toFixed(12):Vz(s)?s?"1":"0":s.map(r=>r.toFixed(12)).join(",")}return[...$c(cm(i,e),s=>s.map(n).join(" "))].join(" ")}const yC=Object.freeze(Object.defineProperty({__proto__:null,FillRule:Kg,PathBooleanOperation:Qg,arcSegmentToCubics:Ug,commandsFromPathData:um,pathBoolean:uC,pathCubicSegmentSelfIntersection:Bg,pathFromCommands:hm,pathFromPathData:dC,pathSegmentBoundingBox:On,pathSegmentIntersection:Jg,pathToCommands:cm,pathToPathData:pC,samplePathSegmentAt:Kr},Symbol.toStringTag,{value:"Module"}));function fm(i){return"("+i.x+";"+i.y+")"}function s0(i){var e=i.toString();return e==="[object Object]"?fm(i):e}function dm(i,e){return i.y===e.y?i.x-e.x:i.y-e.y}function xC(i,e){return i.x===e.x&&i.y===e.y}var Fi=function(i,e){this.name="PointError",this.points=e=e||[],this.message=i||"Invalid Points!";for(var n=0;n<e.length;n++)this.message+=" "+s0(e[n])};Fi.prototype=new Error,Fi.prototype.constructor=Fi;var Lt=function(i,e){this.x=+i||0,this.y=+e||0,this._p2t_edge_list=null};Lt.prototype.toString=function(){return fm(this)},Lt.prototype.toJSON=function(){return{x:this.x,y:this.y}},Lt.prototype.clone=function(){return new Lt(this.x,this.y)},Lt.prototype.set_zero=function(){return this.x=0,this.y=0,this},Lt.prototype.set=function(i,e){return this.x=+i||0,this.y=+e||0,this},Lt.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},Lt.prototype.add=function(i){return this.x+=i.x,this.y+=i.y,this},Lt.prototype.sub=function(i){return this.x-=i.x,this.y-=i.y,this},Lt.prototype.mul=function(i){return this.x*=i,this.y*=i,this},Lt.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Lt.prototype.normalize=function(){var i=this.length();return this.x/=i,this.y/=i,i},Lt.prototype.equals=function(i){return this.x===i.x&&this.y===i.y},Lt.negate=function(i){return new Lt(-i.x,-i.y)},Lt.add=function(i,e){return new Lt(i.x+e.x,i.y+e.y)},Lt.sub=function(i,e){return new Lt(i.x-e.x,i.y-e.y)},Lt.mul=function(i,e){return new Lt(i*e.x,i*e.y)},Lt.cross=function(i,e){return typeof i=="number"?typeof e=="number"?i*e:new Lt(-i*e.y,i*e.x):typeof e=="number"?new Lt(e*i.y,-e*i.x):i.x*e.y-i.y*e.x},Lt.toString=s0,Lt.compare=dm,Lt.cmp=dm,Lt.equals=xC,Lt.dot=function(i,e){return i.x*e.x+i.y*e.y};var Rt=function(i,e,n){this.points_=[i,e,n],this.neighbors_=[null,null,null],this.interior_=!1,this.constrained_edge=[!1,!1,!1],this.delaunay_edge=[!1,!1,!1]},r0=s0;Rt.prototype.toString=function(){return"["+r0(this.points_[0])+r0(this.points_[1])+r0(this.points_[2])+"]"},Rt.prototype.getPoint=function(i){return this.points_[i]},Rt.prototype.GetPoint=Rt.prototype.getPoint,Rt.prototype.getPoints=function(){return this.points_},Rt.prototype.getNeighbor=function(i){return this.neighbors_[i]},Rt.prototype.containsPoint=function(i){var e=this.points_;return i===e[0]||i===e[1]||i===e[2]},Rt.prototype.containsEdge=function(i){return this.containsPoint(i.p)&&this.containsPoint(i.q)},Rt.prototype.containsPoints=function(i,e){return this.containsPoint(i)&&this.containsPoint(e)},Rt.prototype.isInterior=function(){return this.interior_},Rt.prototype.setInterior=function(i){return this.interior_=i,this},Rt.prototype.markNeighborPointers=function(i,e,n){var s=this.points_;if(i===s[2]&&e===s[1]||i===s[1]&&e===s[2])this.neighbors_[0]=n;else if(i===s[0]&&e===s[2]||i===s[2]&&e===s[0])this.neighbors_[1]=n;else if(i===s[0]&&e===s[1]||i===s[1]&&e===s[0])this.neighbors_[2]=n;else throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call")},Rt.prototype.markNeighbor=function(i){var e=this.points_;i.containsPoints(e[1],e[2])?(this.neighbors_[0]=i,i.markNeighborPointers(e[1],e[2],this)):i.containsPoints(e[0],e[2])?(this.neighbors_[1]=i,i.markNeighborPointers(e[0],e[2],this)):i.containsPoints(e[0],e[1])&&(this.neighbors_[2]=i,i.markNeighborPointers(e[0],e[1],this))},Rt.prototype.clearNeighbors=function(){this.neighbors_[0]=null,this.neighbors_[1]=null,this.neighbors_[2]=null},Rt.prototype.clearDelaunayEdges=function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},Rt.prototype.pointCW=function(i){var e=this.points_;return i===e[0]?e[2]:i===e[1]?e[0]:i===e[2]?e[1]:null},Rt.prototype.pointCCW=function(i){var e=this.points_;return i===e[0]?e[1]:i===e[1]?e[2]:i===e[2]?e[0]:null},Rt.prototype.neighborCW=function(i){return i===this.points_[0]?this.neighbors_[1]:i===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},Rt.prototype.neighborCCW=function(i){return i===this.points_[0]?this.neighbors_[2]:i===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},Rt.prototype.getConstrainedEdgeCW=function(i){return i===this.points_[0]?this.constrained_edge[1]:i===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},Rt.prototype.getConstrainedEdgeCCW=function(i){return i===this.points_[0]?this.constrained_edge[2]:i===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},Rt.prototype.getConstrainedEdgeAcross=function(i){return i===this.points_[0]?this.constrained_edge[0]:i===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},Rt.prototype.setConstrainedEdgeCW=function(i,e){i===this.points_[0]?this.constrained_edge[1]=e:i===this.points_[1]?this.constrained_edge[2]=e:this.constrained_edge[0]=e},Rt.prototype.setConstrainedEdgeCCW=function(i,e){i===this.points_[0]?this.constrained_edge[2]=e:i===this.points_[1]?this.constrained_edge[0]=e:this.constrained_edge[1]=e},Rt.prototype.getDelaunayEdgeCW=function(i){return i===this.points_[0]?this.delaunay_edge[1]:i===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},Rt.prototype.getDelaunayEdgeCCW=function(i){return i===this.points_[0]?this.delaunay_edge[2]:i===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},Rt.prototype.setDelaunayEdgeCW=function(i,e){i===this.points_[0]?this.delaunay_edge[1]=e:i===this.points_[1]?this.delaunay_edge[2]=e:this.delaunay_edge[0]=e},Rt.prototype.setDelaunayEdgeCCW=function(i,e){i===this.points_[0]?this.delaunay_edge[2]=e:i===this.points_[1]?this.delaunay_edge[0]=e:this.delaunay_edge[1]=e},Rt.prototype.neighborAcross=function(i){return i===this.points_[0]?this.neighbors_[0]:i===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},Rt.prototype.oppositePoint=function(i,e){var n=i.pointCW(e);return this.pointCW(n)},Rt.prototype.legalize=function(i,e){var n=this.points_;if(i===n[0])n[1]=n[0],n[0]=n[2],n[2]=e;else if(i===n[1])n[2]=n[1],n[1]=n[0],n[0]=e;else if(i===n[2])n[0]=n[2],n[2]=n[1],n[1]=e;else throw new Error("poly2tri Invalid Triangle.legalize() call")},Rt.prototype.index=function(i){var e=this.points_;if(i===e[0])return 0;if(i===e[1])return 1;if(i===e[2])return 2;throw new Error("poly2tri Invalid Triangle.index() call")},Rt.prototype.edgeIndex=function(i,e){var n=this.points_;if(i===n[0]){if(e===n[1])return 2;if(e===n[2])return 1}else if(i===n[1]){if(e===n[2])return 0;if(e===n[0])return 2}else if(i===n[2]){if(e===n[0])return 1;if(e===n[1])return 0}return-1},Rt.prototype.markConstrainedEdgeByIndex=function(i){this.constrained_edge[i]=!0},Rt.prototype.markConstrainedEdgeByEdge=function(i){this.markConstrainedEdgeByPoints(i.p,i.q)},Rt.prototype.markConstrainedEdgeByPoints=function(i,e){var n=this.points_;e===n[0]&&i===n[1]||e===n[1]&&i===n[0]?this.constrained_edge[2]=!0:e===n[0]&&i===n[2]||e===n[2]&&i===n[0]?this.constrained_edge[1]=!0:(e===n[1]&&i===n[2]||e===n[2]&&i===n[1])&&(this.constrained_edge[0]=!0)};function a0(i,e){if(!i)throw new Error(e||"Assert Failed")}var o0=function(i,e){this.point=i,this.triangle=e||null,this.next=null,this.prev=null,this.value=i.x},xi=function(i,e){this.head_=i,this.tail_=e,this.search_node_=i};xi.prototype.head=function(){return this.head_},xi.prototype.setHead=function(i){this.head_=i},xi.prototype.tail=function(){return this.tail_},xi.prototype.setTail=function(i){this.tail_=i},xi.prototype.search=function(){return this.search_node_},xi.prototype.setSearch=function(i){this.search_node_=i},xi.prototype.findSearchNode=function(){return this.search_node_},xi.prototype.locateNode=function(i){var e=this.search_node_;if(i<e.value){for(;e=e.prev;)if(i>=e.value)return this.search_node_=e,e}else for(;e=e.next;)if(i<e.value)return this.search_node_=e.prev,e.prev;return null},xi.prototype.locatePoint=function(i){var e=i.x,n=this.findSearchNode(e),s=n.point.x;if(e===s){if(i!==n.point)if(i===n.prev.point)n=n.prev;else if(i===n.next.point)n=n.next;else throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call")}else if(e<s)for(;(n=n.prev)&&i!==n.point;);else for(;(n=n.next)&&i!==n.point;);return n&&(this.search_node_=n),n};const gC=Object.freeze(Object.defineProperty({__proto__:null,AdvancingFront:xi,Node:o0},Symbol.toStringTag,{value:"Module"}));var mo=1e-12,Vc={CW:1,CCW:-1,COLLINEAR:0};function mC(i,e,n){var s=(i.x-n.x)*(e.y-n.y),r=(i.y-n.y)*(e.x-n.x),a=s-r;return a>-mo&&a<mo?Vc.COLLINEAR:a>0?Vc.CCW:Vc.CW}function vC(i,e,n,s){var r=(i.x-e.x)*(s.y-e.y)-(s.x-e.x)*(i.y-e.y);if(r>=-mo)return!1;var a=(i.x-n.x)*(s.y-n.y)-(s.x-n.x)*(i.y-n.y);return!(a<=mo)}function wC(i,e,n){var s=e.x-i.x,r=e.y-i.y,a=n.x-i.x,o=n.y-i.y;return s*a+r*o<0}var MC=mo,pe=Vc,_e=mC,pm=vC,ym=wC;function xm(i){i.initTriangulation(),i.createAdvancingFront(),bC(i),_C(i)}function bC(i){var e,n=i.pointCount();for(e=1;e<n;++e)for(var s=i.getPoint(e),r=SC(i,s),a=s._p2t_edge_list,o=0;a&&o<a.length;++o)TC(i,a[o],r)}function _C(i){for(var e=i.front().head().next.triangle,n=i.front().head().next.point;!e.getConstrainedEdgeCW(n);)e=e.neighborCCW(n);i.meshClean(e)}function SC(i,e){var n=i.locateNode(e),s=EC(i,e,n);return e.x<=n.point.x+MC&&ta(i,n),zC(i,s),s}function TC(i,e,n){i.edge_event.constrained_edge=e,i.edge_event.right=e.p.x>e.q.x,!gm(n.triangle,e.p,e.q)&&(RC(i,e,n),h0(i,e.p,e.q,n.triangle,e.q))}function h0(i,e,n,s,r){if(!gm(s,e,n)){var a=s.pointCCW(r),o=_e(n,a,e);if(o===pe.COLLINEAR)throw new Fi("poly2tri EdgeEvent: Collinear not supported!",[n,a,e]);var h=s.pointCW(r),c=_e(n,h,e);if(c===pe.COLLINEAR)throw new Fi("poly2tri EdgeEvent: Collinear not supported!",[n,h,e]);o===c?(o===pe.CW?s=s.neighborCCW(r):s=s.neighborCW(r),h0(i,e,n,s,r)):u0(i,e,n,s,r)}}function gm(i,e,n){var s=i.edgeIndex(e,n);if(s!==-1){i.markConstrainedEdgeByIndex(s);var r=i.getNeighbor(s);return r&&r.markConstrainedEdgeByPoints(e,n),!0}return!1}function EC(i,e,n){var s=new Rt(e,n.point,n.next.point);s.markNeighbor(n.triangle),i.addToMap(s);var r=new o0(e);return r.next=n.next,r.prev=n,n.next.prev=r,n.next=r,os(i,s)||i.mapTriangleToNodes(s),r}function ta(i,e){var n=new Rt(e.prev.point,e.point,e.next.point);n.markNeighbor(e.prev.triangle),n.markNeighbor(e.triangle),i.addToMap(n),e.prev.next=e.next,e.next.prev=e.prev,os(i,n)||i.mapTriangleToNodes(n)}function zC(i,e){for(var n=e.next;n.next&&!ym(n.point,n.next.point,n.prev.point);)ta(i,n),n=n.next;for(n=e.prev;n.prev&&!ym(n.point,n.next.point,n.prev.point);)ta(i,n),n=n.prev;e.next&&e.next.next&&CC(e)&&PC(i,e)}function CC(i){var e=i.point.x-i.next.next.point.x,n=i.point.y-i.next.next.point.y;return a0(n>=0,"unordered y"),e>=0||Math.abs(e)<n}function os(i,e){for(var n=0;n<3;++n)if(!e.delaunay_edge[n]){var s=e.getNeighbor(n);if(s){var r=e.getPoint(n),a=s.oppositePoint(e,r),o=s.index(a);if(s.constrained_edge[o]||s.delaunay_edge[o]){e.constrained_edge[n]=s.constrained_edge[o];continue}var h=AC(r,e.pointCCW(r),e.pointCW(r),a);if(h){e.delaunay_edge[n]=!0,s.delaunay_edge[o]=!0,mm(e,r,s,a);var c=!os(i,e);return c&&i.mapTriangleToNodes(e),c=!os(i,s),c&&i.mapTriangleToNodes(s),e.delaunay_edge[n]=!1,s.delaunay_edge[o]=!1,!0}}}return!1}function AC(i,e,n,s){var r=i.x-s.x,a=i.y-s.y,o=e.x-s.x,h=e.y-s.y,c=r*h,l=o*a,u=c-l;if(u<=0)return!1;var f=n.x-s.x,d=n.y-s.y,p=f*a,y=r*d,x=p-y;if(x<=0)return!1;var g=o*d,m=f*h,v=r*r+a*a,w=o*o+h*h,b=f*f+d*d,S=v*(g-m)+w*x+b*u;return S>0}function mm(i,e,n,s){var r,a,o,h;r=i.neighborCCW(e),a=i.neighborCW(e),o=n.neighborCCW(s),h=n.neighborCW(s);var c,l,u,f;c=i.getConstrainedEdgeCCW(e),l=i.getConstrainedEdgeCW(e),u=n.getConstrainedEdgeCCW(s),f=n.getConstrainedEdgeCW(s);var d,p,y,x;d=i.getDelaunayEdgeCCW(e),p=i.getDelaunayEdgeCW(e),y=n.getDelaunayEdgeCCW(s),x=n.getDelaunayEdgeCW(s),i.legalize(e,s),n.legalize(s,e),n.setDelaunayEdgeCCW(e,d),i.setDelaunayEdgeCW(e,p),i.setDelaunayEdgeCCW(s,y),n.setDelaunayEdgeCW(s,x),n.setConstrainedEdgeCCW(e,c),i.setConstrainedEdgeCW(e,l),i.setConstrainedEdgeCCW(s,u),n.setConstrainedEdgeCW(s,f),i.clearNeighbors(),n.clearNeighbors(),r&&n.markNeighbor(r),a&&i.markNeighbor(a),o&&i.markNeighbor(o),h&&n.markNeighbor(h),i.markNeighbor(n)}function PC(i,e){for(_e(e.point,e.next.point,e.next.next.point)===pe.CCW?i.basin.left_node=e.next.next:i.basin.left_node=e.next,i.basin.bottom_node=i.basin.left_node;i.basin.bottom_node.next&&i.basin.bottom_node.point.y>=i.basin.bottom_node.next.point.y;)i.basin.bottom_node=i.basin.bottom_node.next;if(i.basin.bottom_node!==i.basin.left_node){for(i.basin.right_node=i.basin.bottom_node;i.basin.right_node.next&&i.basin.right_node.point.y<i.basin.right_node.next.point.y;)i.basin.right_node=i.basin.right_node.next;i.basin.right_node!==i.basin.bottom_node&&(i.basin.width=i.basin.right_node.point.x-i.basin.left_node.point.x,i.basin.left_highest=i.basin.left_node.point.y>i.basin.right_node.point.y,vm(i,i.basin.bottom_node))}}function vm(i,e){if(!IC(i,e)){ta(i,e);var n;if(!(e.prev===i.basin.left_node&&e.next===i.basin.right_node)){if(e.prev===i.basin.left_node){if(n=_e(e.point,e.next.point,e.next.next.point),n===pe.CW)return;e=e.next}else if(e.next===i.basin.right_node){if(n=_e(e.point,e.prev.point,e.prev.prev.point),n===pe.CCW)return;e=e.prev}else e.prev.point.y<e.next.point.y?e=e.prev:e=e.next;vm(i,e)}}}function IC(i,e){var n;return i.basin.left_highest?n=i.basin.left_node.point.y-e.point.y:n=i.basin.right_node.point.y-e.point.y,i.basin.width>n}function RC(i,e,n){i.edge_event.right?OC(i,e,n):kC(i,e,n)}function OC(i,e,n){for(;n.next.point.x<e.p.x;)_e(e.q,n.next.point,e.p)===pe.CCW?wm(i,e,n):n=n.next}function wm(i,e,n){n.point.x<e.p.x&&(_e(n.point,n.next.point,n.next.next.point)===pe.CCW?c0(i,e,n):(Mm(i,e,n),wm(i,e,n)))}function c0(i,e,n){ta(i,n.next),n.next.point!==e.p&&_e(e.q,n.next.point,e.p)===pe.CCW&&_e(n.point,n.next.point,n.next.next.point)===pe.CCW&&c0(i,e,n)}function Mm(i,e,n){_e(n.next.point,n.next.next.point,n.next.next.next.point)===pe.CCW?c0(i,e,n.next):_e(e.q,n.next.next.point,e.p)===pe.CCW&&Mm(i,e,n.next)}function kC(i,e,n){for(;n.prev.point.x>e.p.x;)_e(e.q,n.prev.point,e.p)===pe.CW?bm(i,e,n):n=n.prev}function bm(i,e,n){n.point.x>e.p.x&&(_e(n.point,n.prev.point,n.prev.prev.point)===pe.CW?l0(i,e,n):(_m(i,e,n),bm(i,e,n)))}function _m(i,e,n){_e(n.prev.point,n.prev.prev.point,n.prev.prev.prev.point)===pe.CW?l0(i,e,n.prev):_e(e.q,n.prev.prev.point,e.p)===pe.CW&&_m(i,e,n.prev)}function l0(i,e,n){ta(i,n.prev),n.prev.point!==e.p&&_e(e.q,n.prev.point,e.p)===pe.CW&&_e(n.point,n.prev.point,n.prev.prev.point)===pe.CW&&l0(i,e,n)}function u0(i,e,n,s,r){var a=s.neighborAcross(r);a0(a,"FLIP failed due to missing triangle!");var o=a.oppositePoint(s,r);if(s.getConstrainedEdgeAcross(r)){var h=s.index(r);throw new Fi("poly2tri Intersecting Constraints",[r,o,s.getPoint((h+1)%3),s.getPoint((h+2)%3)])}if(pm(r,s.pointCCW(r),s.pointCW(r),o))if(mm(s,r,a,o),i.mapTriangleToNodes(s),i.mapTriangleToNodes(a),r===n&&o===e)n===i.edge_event.constrained_edge.q&&e===i.edge_event.constrained_edge.p&&(s.markConstrainedEdgeByPoints(e,n),a.markConstrainedEdgeByPoints(e,n),os(i,s),os(i,a));else{var c=_e(n,o,e);s=LC(i,c,s,a,r,o),u0(i,e,n,s,r)}else{var l=Sm(e,n,a,o);Tm(i,e,n,s,a,l),h0(i,e,n,s,r)}}function LC(i,e,n,s,r,a){var o;return e===pe.CCW?(o=s.edgeIndex(r,a),s.delaunay_edge[o]=!0,os(i,s),s.clearDelaunayEdges(),n):(o=n.edgeIndex(r,a),n.delaunay_edge[o]=!0,os(i,n),n.clearDelaunayEdges(),s)}function Sm(i,e,n,s){var r=_e(e,s,i);if(r===pe.CW)return n.pointCCW(s);if(r===pe.CCW)return n.pointCW(s);throw new Fi("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[e,s,i])}function Tm(i,e,n,s,r,a){var o=r.neighborAcross(a);a0(o,"FLIP failed due to missing triangle");var h=o.oppositePoint(r,a);if(pm(n,s.pointCCW(n),s.pointCW(n),h))u0(i,n,h,o,h);else{var c=Sm(e,n,o,h);Tm(i,e,n,s,o,c)}}const FC=Object.freeze(Object.defineProperty({__proto__:null,triangulate:xm},Symbol.toStringTag,{value:"Module"})),f0=o0;var Em=.3,NC=function(i,e){if(this.p=i,this.q=e,i.y>e.y)this.q=i,this.p=e;else if(i.y===e.y){if(i.x>e.x)this.q=i,this.p=e;else if(i.x===e.x)throw new Fi("poly2tri Invalid Edge constructor: repeated points!",[i])}this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)},zm=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};zm.prototype.clear=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};var BC=function(){this.constrained_edge=null,this.right=!1},Vt=function(i,e){e=e||{},this.triangles_=[],this.map_=[],this.points_=e.cloneArrays?i.slice(0):i,this.edge_list=[],this.pmin_=this.pmax_=null,this.front_=null,this.head_=null,this.tail_=null,this.af_head_=null,this.af_middle_=null,this.af_tail_=null,this.basin=new zm,this.edge_event=new BC,this.initEdges(this.points_)};Vt.prototype.addHole=function(i){this.initEdges(i);var e,n=i.length;for(e=0;e<n;e++)this.points_.push(i[e]);return this},Vt.prototype.AddHole=Vt.prototype.addHole,Vt.prototype.addHoles=function(i){var e,n=i.length;for(e=0;e<n;e++)this.initEdges(i[e]);return this.points_=this.points_.concat.apply(this.points_,i),this},Vt.prototype.addPoint=function(i){return this.points_.push(i),this},Vt.prototype.AddPoint=Vt.prototype.addPoint,Vt.prototype.addPoints=function(i){return this.points_=this.points_.concat(i),this},Vt.prototype.triangulate=function(){return xm(this),this},Vt.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}},Vt.prototype.getTriangles=function(){return this.triangles_},Vt.prototype.GetTriangles=Vt.prototype.getTriangles,Vt.prototype.front=function(){return this.front_},Vt.prototype.pointCount=function(){return this.points_.length},Vt.prototype.head=function(){return this.head_},Vt.prototype.setHead=function(i){this.head_=i},Vt.prototype.tail=function(){return this.tail_},Vt.prototype.setTail=function(i){this.tail_=i},Vt.prototype.getMap=function(){return this.map_},Vt.prototype.initTriangulation=function(){var i=this.points_[0].x,e=this.points_[0].x,n=this.points_[0].y,s=this.points_[0].y,r,a=this.points_.length;for(r=1;r<a;r++){var o=this.points_[r];o.x>i&&(i=o.x),o.x<e&&(e=o.x),o.y>n&&(n=o.y),o.y<s&&(s=o.y)}this.pmin_=new Lt(e,s),this.pmax_=new Lt(i,n);var h=Em*(i-e),c=Em*(n-s);this.head_=new Lt(i+h,s-c),this.tail_=new Lt(e-h,s-c),this.points_.sort(Lt.compare)},Vt.prototype.initEdges=function(i){var e,n=i.length;for(e=0;e<n;++e)this.edge_list.push(new NC(i[e],i[(e+1)%n]))},Vt.prototype.getPoint=function(i){return this.points_[i]},Vt.prototype.addToMap=function(i){this.map_.push(i)},Vt.prototype.locateNode=function(i){return this.front_.locateNode(i.x)},Vt.prototype.createAdvancingFront=function(){var i,e,n,s=new Rt(this.points_[0],this.tail_,this.head_);this.map_.push(s),i=new f0(s.getPoint(1),s),e=new f0(s.getPoint(0),s),n=new f0(s.getPoint(2)),this.front_=new gC(i,n),i.next=e,e.next=n,e.prev=i,n.prev=e},Vt.prototype.removeNode=function(i){},Vt.prototype.mapTriangleToNodes=function(i){for(var e=0;e<3;++e)if(!i.getNeighbor(e)){var n=this.front_.locatePoint(i.pointCW(i.getPoint(e)));n&&(n.triangle=i)}},Vt.prototype.removeFromMap=function(i){var e,n=this.map_,s=n.length;for(e=0;e<s;e++)if(n[e]===i){n.splice(e,1);break}},Vt.prototype.meshClean=function(i){for(var e=[i],n,s;n=e.pop();)if(!n.isInterior())for(n.setInterior(!0),this.triangles_.push(n),s=0;s<3;s++)n.constrained_edge[s]||e.push(n.getNeighbor(s))};var DC=window.poly2tri;const qC=Object.freeze(Object.defineProperty({__proto__:null,Point:Lt,PointError:Fi,SweepContext:Vt,Triangle:Rt,noConflict:function(){return global.poly2tri=DC,yn},sweep:FC},Symbol.toStringTag,{value:"Module"})),Cm=As.default();let $C=class b_{constructor(e,n,s){this.cx=e,this.cy=n,this.radius=s}clone(){return new b_(this.cx,this.cy,this.radius)}copy(e){return this.cx=e.cx,this.cy=e.cy,this.radius=e.radius,this}setRadius(e){return this.radius=e,this}setCenter(e,n){return this.cx=e,this.cy=n,this}getArea(){return Math.PI*this.radius**2}getCircumference(){return 2*Math.PI*this.radius}distanceTo(e,n){return Math.sqrt((e-this.cx)**2+(n-this.cy)**2)}contains(e,n){return this.distanceTo(e,n)<=this.radius}containsStroke(e,n,s,r=.5){const a=this.distanceTo(e,n),o=s*.5,h=(r-.5)*2*o,c=this.radius+h;return Math.abs(a-c)<=o}containsBoundingRect(e,n){return Cm.fromCircle(this.cx,this.cy,this.radius),Cm.containsXY(e,n)}getBoundingBox(e){return e.fromCircle(this.cx,this.cy,this.radius),e}},VC=class __{start=N.default();end=N.default();constructor(e=N.default(),n=N.default()){this.start.copy(e),this.end.copy(n)}get length(){return this.end.distance(this.start)}get lengthSquared(){return this.end.distanceSquared(this.start)}clone(){return new __(this.start,this.end)}copy(e){this.start.copy(e.start),this.end.copy(e.end)}offset(e){const n=this.end.clone().sub(this.start).normalize().perp();return this.start.add(n.clone().multiplyScalar(e)),this.end.add(n.clone().multiplyScalar(e)),this}getDelta(e=N.default()){return e.subVectors(this.end,this.start)}getCenter(e=N.default()){return N.lerp(e,this.start,this.end,.5)}distanceTo(e,n){const s=N.create(e,n),r=this.end.clone().sub(this.start),a=s.clone().sub(this.start);let o=a.dot(r)/r.dot(r);return o=We(o,0,1),a.distance(r.multiplyScalar(o))}intersectionFromLine(e,n=N.default()){const s=this.getDelta(),r=e.getDelta(),a=s.cross(r);if(a===0)return null;const o=e.start.clone().sub(this.start),h=o.cross(r)/a,c=o.cross(s)/a;return h<0||h>1||c<0||c>1?null:(n.copy(s).multiplyScalar(h).add(this.start),n)}intercept(){const e=this.getDelta(),n=e.y,s=-e.x,r=e.cross(this.start);return{x:-r/n,y:-r/s}}contains(e,n){return this.distanceTo(e,n)<1e-6}containsStroke(e,n,s,r=.5){const a=s*.5,o=(r-.5)*2*a;return this.clone().offset(o).distanceTo(e,n)<=a}getBoundingBox(e){let n=Math.min(this.start.x,this.end.x),s=Math.min(this.start.y,this.end.y),r=Math.abs(this.start.x-this.end.x),a=Math.abs(this.start.y-this.end.y);return e.fromRect(n,s,r,a),e}};function GC(i,e,n,s,r,a){let o=r-n,h=a-s,c=i-n,l=e-s;if(o!==0||h!==0){let u=(c*o+l*h)/(o*o+h*h);return u=We(u,0,1),Math.hypot(c-o*u,c-h*u)}return Number.POSITIVE_INFINITY}let UC=class{vertices;constructor(e){this.vertices=e}getVectors(){return this.vertices.map(e=>N.create(e.x,e.y))}getArea(){let e=0;for(let n=0;n<this.vertices.length;n++){const s=this.vertices[n],r=this.vertices[(n+1)%this.vertices.length];e+=s.x*r.y-s.y*r.x}return Math.abs(e/2)}getBoundingBox(e){return e.setFromPoints(this.vertices),e}contains(e,n,s){let r=0;for(let a=0;a<this.vertices.length;a++){let o=this.vertices[a],h=this.vertices[(a+1)%this.vertices.length],c=o.x,l=o.y,u=h.x,f=h.y;n>l!=n>f&&e<(u-c)*(n-l)/(f-l)+c&&(s==="nonzero"?r+=l<f?1:-1:s==="evenodd"&&r++)}return r%2!==0}containsStroke(e,n,s,r=.5){const a=s*.5,o=(r-.5)*2*a;for(let h=0;h<this.vertices.length;h++){let{x:c,y:l}=this.vertices[h],{x:u,y:f}=this.vertices[(h+1)%this.vertices.length];const d=Math.hypot(u-c,f-l),p=(u-c)/d,y=(f-l)/d;c=c-y*o,l=l+p*o,u=u-y*o,f=f+p*o;const x=GC(e,n,c,l,u,f);if(Math.abs(x)<=a)return!0}return!1}},WC=class{constructor(e,n,s,r){this.x=e,this.y=n,this.width=s,this.height=r}getCenter(){return N.create(this.x+this.width/2,this.y+this.height/2)}getArea(){return this.width*this.height}getPerimeter(){return 2*(this.width+this.height)}distanceTo(e,n){const s=this.getCenter(),r=this.width/2,a=this.height/2,o=Math.abs(e-s.x)-r,h=Math.abs(n-s.y)-a,c=Math.max(0,o),l=Math.max(0,h);return c>0||l>0?Math.sqrt(c*c+l*l):Math.min(0,Math.max(o,h))}containsPoint(e,n){return!(e<this.x||e>this.x+this.width||n<this.y||n>this.y+this.height)}containsStroke(e,n,s,r=.5){const a=this.distanceTo(e,n),o=s*.5,h=(r-.5)*2*o;return Math.abs(a-h)<=o}};class YC{constructor(e,n){this.m=e,this.x0=n}static from(e,n){return new this(e,n.x-e*n.y)}static fromPoint(e,n){return this.from((n.x-e.x)/(n.y-e.y),e)}static fromFloat(e){return new this(0,e)}getX(e){return this.m*e+this.x0}}class jC{static fromLine(e,n,s,r){return new this(e,n,s.getX(e),s.getX(n),r.getX(e),r.getX(n))}y0=0;y1=0;x0=0;x1=0;x2=0;x3=0;constructor(e,n,s,r,a,o){this.y0=e,this.y1=n,this.x0=s,this.x1=r,this.x2=a,this.x3=o}getArea(){const{y0:e,y1:n,x2:s,x3:r,x0:a,x1:o}=this;return(n-e)*(s+r-a-o)*.5}}const HC=Object.freeze(Object.defineProperty({__proto__:null,Circle:$C,Line:VC,Polygon:UC,RasterizeLine:YC,Rectangle:WC,Trapezoid:jC,Triangle:class Lr{constructor(e,n,s,r,a,o){this.x1=e,this.y1=n,this.x2=s,this.y2=r,this.x3=a,this.y3=o}getArea(){return Math.abs(.5*(this.x1*(this.y2-this.y3)+this.x2*(this.y3-this.y1)+this.x3*(this.y1-this.y2)))}containsPoint(e,n){const s=this.getArea(),r=new Lr(e,n,this.x1,this.y1,this.x2,this.y2).getArea(),a=new Lr(e,n,this.x2,this.y2,this.x3,this.y3).getArea(),o=new Lr(e,n,this.x3,this.y3,this.x1,this.y1).getArea();return Math.abs(s-(r+a+o))<1e-9}getBarycentricCoordinates(e,n){const s=this.getArea(),r=new Lr(e,n,this.x2,this.y2,this.x3,this.y3).getArea(),a=new Lr(e,n,this.x3,this.y3,this.x1,this.y1).getArea(),o=new Lr(e,n,this.x1,this.y1,this.x2,this.y2).getArea(),h=r/s,c=a/s,l=o/s;return{u:h,v:c,w:l}}}},Symbol.toStringTag,{value:"Module"}));function Gc(i,e,n){let s=0,r=1;const a=e.x-i.x,o=e.y-i.y,h=(c,l)=>{if(c==0&&l<0)return!1;const u=l/c;if(c<0){if(u>r)return!1;u>s&&(s=u)}else if(c>0){if(u<s)return!1;u<r&&(r=u)}return!0};return!h(-a,i.x-n.xmin)||!h(a,n.xmax-i.x)||!h(-o,i.y-n.ymin)||!h(o,n.ymax-i.y)?null:[{x:i.x+s*a,y:i.y+s*o},{x:i.x+r*a,y:i.y+r*o}]}function XC(i,e,n){return Gc(i,e,n)}const ZC=0,Am=1,Pm=2,Im=4,Rm=8;function ea(i,e){let n=ZC;return i.x<e.xmin?n|=Am:i.x>e.xmax&&(n|=Pm),i.y<e.ymin?n|=Im:i.y>e.ymax&&(n|=Rm),n}function JC(i,e,n){let s=ea(i,n),r=ea(e,n);for(;;){if(!(s|r))return[i,e];if(s&r)return null;let a=0,o=0;const h=s||r;h&Rm?(a=i.x+(e.x-i.x)*(n.ymax-i.y)/(e.y-i.y),o=n.ymax):h&Im?(a=i.x+(e.x-i.x)*(n.ymin-i.y)/(e.y-i.y),o=n.ymin):h&Pm?(o=i.y+(e.y-i.y)*(n.xmax-i.x)/(e.x-i.x),a=n.xmax):h&Am&&(o=i.y+(e.y-i.y)*(n.xmin-i.x)/(e.x-i.x),a=n.xmin),h===s?(i={x:a,y:o},s=ea(i,n)):(e={x:a,y:o},r=ea(e,n))}}function d0(i,e,n){let s=ea(i,n),r=ea(e,n);if(!(s|r))return[i,e];if(s&r||Math.abs(e.x-i.x)<1e-6&&Math.abs(e.y-i.y)<1e-6)return null;const a={x:(i.x+e.x)/2,y:(i.y+e.y)/2};return[...d0(i,a,n)||[],...d0(a,e,n)||[]]}function QC(i,e,n){return Gc(i,e,n)}function KC(i,e,n){return Gc(i,e,n)}const t5=(i,e)=>{const n=h=>{let c=0;return h.x<e.left&&(c|=1),h.x>e.right&&(c|=2),h.y<e.bottom&&(c|=4),h.y>e.top&&(c|=8),c};let[s,r]=i,a=n(s),o=n(r);for(;;){if((a|o)===0)return[s,r];if((a&o)!==0)return null;const h=a!==0?a:o;let c={x:0,y:0};h&8?(c.x=s.x+(r.x-s.x)*(e.top-s.y)/(r.y-s.y),c.y=e.top):h&4?(c.x=s.x+(r.x-s.x)*(e.bottom-s.y)/(r.y-s.y),c.y=e.bottom):h&2?(c.y=s.y+(r.y-s.y)*(e.right-s.x)/(r.x-s.x),c.x=e.right):h&1&&(c.y=s.y+(r.y-s.y)*(e.left-s.x)/(r.x-s.x),c.x=e.left),h===a?(s=c,a=n(s)):(r=c,o=n(r))}},e5=(i,e)=>{let n=[i[0],i[1]];for(const s of e){const r=[];for(let a=0;a<n.length;a++){const o=n[a],h=n[(a+1)%n.length],c=s.normal[0]*(o.x-s.point.x)+s.normal[1]*(o.y-s.point.y),l=s.normal[0]*(h.x-s.point.x)+s.normal[1]*(h.y-s.point.y);if(c<=0&&r.push(o),c<0&&l>0||c>0&&l<0){const u=-c/(l-c);r.push({x:o.x+u*(h.x-o.x),y:o.y+u*(h.y-o.y)})}}n=r}return n},n5=(i,e,n=1)=>{const s=(o,h)=>{let c=o,l=h;for(;Math.hypot(l.x-c.x,l.y-c.y)>n;){const u={x:(c.x+l.x)/2,y:(c.y+l.y)/2};u.x<e.left||u.x>e.right||u.y<e.bottom||u.y>e.top?l=u:c=u}return c},r=s(i[0],i[1]),a=s(i[1],i[0]);return Math.abs(r.x-a.x)>n||Math.abs(r.y-a.y)>n?[r,a]:null};function i5(i,e){let n=i;for(let s=0;s<e.length;s++){const r=e[s],a=e[(s+1)%e.length],o=n;if(n=[],o.length===0)break;let h=o[o.length-1];for(const c of o){const l=Om(h,r,a);if(Om(c,r,a)){if(!l){const f=km(h,c,r,a);f&&n.push(f)}n.push(c)}else if(l){const f=km(h,c,r,a);f&&n.push(f)}h=c}}return n}function Om(i,e,n){return(n.x-e.x)*(i.y-e.y)>(n.y-e.y)*(i.x-e.x)}function km(i,e,n,s){const r=e.x-i.x,a=e.y-i.y,o=s.x-n.x,h=s.y-n.y,c=r*h-a*o;if(c===0)return null;const l=n.x-i.x,u=n.y-i.y,f=(l*h-u*o)/c;return{x:i.x+f*(e.x-i.x),y:i.y+f*(e.y-i.y)}}const s5=Object.freeze(Object.defineProperty({__proto__:null,CohenSutherlandClip:t5,MidpointClip:n5,SutherlandHodgmanClip:e5,cohenSutherland:JC,cyrusBeck:KC,equationBasedClipping:QC,liangBarsky:Gc,midpointSubdivision:d0,nichollLeeNicholl:XC,sutherlandHodgmanClip:i5},Symbol.toStringTag,{value:"Module"}));var Ze=(i=>(i[i.ODD=0]="ODD",i[i.NONZERO=1]="NONZERO",i[i.POSITIVE=2]="POSITIVE",i[i.NEGATIVE=3]="NEGATIVE",i[i.ABS_GEQ_TWO=4]="ABS_GEQ_TWO",i))(Ze||{}),Hn=(i=>(i[i.POLYGONS=0]="POLYGONS",i[i.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",i[i.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS",i))(Hn||{});function yt(i,e=void 0){if(!i)throw e||"Assertion Failed!"}let dt=class Dt{static vertEq(e,n){return e.s===n.s&&e.t===n.t}static vertLeq(e,n){return e.s<n.s||e.s===n.s&&e.t<=n.t}static transLeq(e,n){return e.t<n.t||e.t===n.t&&e.s<=n.s}static edgeGoesLeft(e){return Dt.vertLeq(e.Dst,e.Org)}static edgeGoesRight(e){return Dt.vertLeq(e.Org,e.Dst)}static vertL1dist(e,n){return Math.abs(e.s-n.s)+Math.abs(e.t-n.t)}static edgeEval(e,n,s){yt(Dt.vertLeq(e,n)&&Dt.vertLeq(n,s));var r=n.s-e.s,a=s.s-n.s;return r+a>0?r<a?n.t-e.t+(e.t-s.t)*(r/(r+a)):n.t-s.t+(s.t-e.t)*(a/(r+a)):0}static edgeSign(e,n,s){yt(Dt.vertLeq(e,n)&&Dt.vertLeq(n,s));var r=n.s-e.s,a=s.s-n.s;return r+a>0?(n.t-s.t)*r+(n.t-e.t)*a:0}static transEval(e,n,s){yt(Dt.transLeq(e,n)&&Dt.transLeq(n,s));var r=n.t-e.t,a=s.t-n.t;return r+a>0?r<a?n.s-e.s+(e.s-s.s)*(r/(r+a)):n.s-s.s+(s.s-e.s)*(a/(r+a)):0}static transSign(e,n,s){yt(Dt.transLeq(e,n)&&Dt.transLeq(n,s));var r=n.t-e.t,a=s.t-n.t;return r+a>0?(n.s-s.s)*r+(n.s-e.s)*a:0}static vertCCW(e,n,s){return e.s*(n.t-s.t)+n.s*(s.t-e.t)+s.s*(e.t-n.t)>=0}static interpolate(e,n,s,r){return e=e<0?0:e,s=s<0?0:s,e<=s?s===0?(n+r)/2:n+(r-n)*(e/(e+s)):r+(n-r)*(s/(e+s))}static intersect(e,n,s,r,a){var o,h,c;Dt.vertLeq(e,n)||(c=e,e=n,n=c),Dt.vertLeq(s,r)||(c=s,s=r,r=c),Dt.vertLeq(e,s)||(c=e,e=s,s=c,c=n,n=r,r=c),Dt.vertLeq(s,n)?Dt.vertLeq(n,r)?(o=Dt.edgeEval(e,s,n),h=Dt.edgeEval(s,n,r),o+h<0&&(o=-o,h=-h),a.s=Dt.interpolate(o,s.s,h,n.s)):(o=Dt.edgeSign(e,s,n),h=-Dt.edgeSign(e,r,n),o+h<0&&(o=-o,h=-h),a.s=Dt.interpolate(o,s.s,h,r.s)):a.s=(s.s+n.s)/2,Dt.transLeq(e,n)||(c=e,e=n,n=c),Dt.transLeq(s,r)||(c=s,s=r,r=c),Dt.transLeq(e,s)||(c=e,e=s,s=c,c=n,n=r,r=c),Dt.transLeq(s,n)?Dt.transLeq(n,r)?(o=Dt.transEval(e,s,n),h=Dt.transEval(s,n,r),o+h<0&&(o=-o,h=-h),a.t=Dt.interpolate(o,s.t,h,n.t)):(o=Dt.transSign(e,s,n),h=-Dt.transSign(e,r,n),o+h<0&&(o=-o,h=-h),a.t=Dt.interpolate(o,s.t,h,r.t)):a.t=(s.t+n.t)/2}};class vo{next=null;prev=null;anEdge=null;trail=null;n=0;marked=!1;inside=!1}class Uc{constructor(e){this.side=e}next=null;Org=null;Sym=null;Onext=null;Lnext=null;Lface=null;activeRegion=null;winding=0;get Rface(){return this.Sym.Lface}set Rface(e){this.Sym.Lface=e}get Dst(){return this.Sym.Org}set Dst(e){this.Sym.Org=e}get Oprev(){return this.Sym.Lnext}set Oprev(e){this.Sym.Lnext=e}get Lprev(){return this.Onext.Sym}set Lprev(e){this.Onext.Sym=e}get Dprev(){return this.Lnext.Sym}set Dprev(e){this.Lnext.Sym=e}get Rprev(){return this.Sym.Onext}set Rprev(e){this.Sym.Onext=e}get Dnext(){return this.Sym.Onext.Sym}set Dnext(e){this.Sym.Onext.Sym=e}get Rnext(){return this.Sym.Lnext.Sym}set Rnext(e){this.Sym.Lnext.Sym=e}}class na{next=null;prev=null;anEdge=null;coords=[0,0,0];s=0;t=0;pqHandle=0;n=0;idx=0}class Lm{vHead;fHead;eHead;eHeadSym;constructor(){const e=new na,n=new vo,s=new Uc(0),r=new Uc(1);e.next=e.prev=e,e.anEdge=null,n.next=n.prev=n,s.next=s,s.Sym=r,r.next=r,r.Sym=s,this.vHead=e,this.fHead=n,this.eHead=s,this.eHeadSym=r}makeEdge_(e){var n=new Uc(0),s=new Uc(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return s.next=r,r.Sym.next=n,n.next=e,e.Sym.next=s,n.Sym=s,n.Onext=n,n.Lnext=s,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,s.Sym=n,s.Onext=s,s.Lnext=n,s.Org=null,s.Lface=null,s.winding=0,s.activeRegion=null,n}splice_(e,n){var s=e.Onext,r=n.Onext;s.Sym.Lnext=n,r.Sym.Lnext=e,e.Onext=r,n.Onext=s}makeVertex_(e,n,s){var r=e;yt(r,"Vertex can't be null!");var a=s.prev;r.prev=a,a.next=r,r.next=s,s.prev=r,r.anEdge=n;var o=n;do o.Org=r,o=o.Onext;while(o!==n)}makeFace_(e,n,s){var r=e;yt(r,"Face can't be null");var a=s.prev;r.prev=a,a.next=r,r.next=s,s.prev=r,r.anEdge=n,r.trail=null,r.marked=!1,r.inside=s.inside;var o=n;do o.Lface=r,o=o.Lnext;while(o!==n)}killEdge_(e){e.Sym.side<e.side&&(e=e.Sym);var n=e.next,s=e.Sym.next;n.Sym.next=s,s.Sym.next=n}killVertex_(e,n){var s=e.anEdge,r=s;do r.Org=n,r=r.Onext;while(r!==s);var a=e.prev,o=e.next;o.prev=a,a.next=o}killFace_(e,n){var s=e.anEdge,r=s;do r.Lface=n,r=r.Lnext;while(r!==s);var a=e.prev,o=e.next;o.prev=a,a.next=o}makeEdge(){var e=new na,n=new na,s=new vo,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(n,r.Sym,this.vHead),this.makeFace_(s,r,this.fHead),r}splice(e,n){var s=!1,r=!1;if(e!==n){if(n.Org!==e.Org&&(r=!0,this.killVertex_(n.Org,e.Org)),n.Lface!==e.Lface&&(s=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(n,e),!r){var a=new na;this.makeVertex_(a,n,e.Org),e.Org.anEdge=e}if(!s){var o=new vo;this.makeFace_(o,n,e.Lface),e.Lface.anEdge=e}}}delete(e){var n=e.Sym,s=!1;if(e.Lface!==e.Rface&&(s=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!s){var r=new vo;this.makeFace_(r,e,e.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(e.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(e)}addEdgeVertex(e){var n=this.makeEdge_(e),s=n.Sym;this.splice_(n,e.Lnext),n.Org=e.Dst;var r=new na;return this.makeVertex_(r,s,n.Org),n.Lface=s.Lface=e.Lface,n}splitEdge(e){var n=this.addEdgeVertex(e),s=n.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,s),e.Dst=s.Org,s.Dst.anEdge=s.Sym,s.Rface=e.Rface,s.winding=e.winding,s.Sym.winding=e.Sym.winding,s}connect(e,n){var s=!1,r=this.makeEdge_(e),a=r.Sym;if(n.Lface!==e.Lface&&(s=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(a,n),r.Org=e.Dst,a.Org=n.Org,r.Lface=a.Lface=e.Lface,e.Lface.anEdge=a,!s){var o=new vo;this.makeFace_(o,r,e.Lface)}return r}zapFace(e){var n=e.anEdge,s,r,a,o,h;r=n.Lnext;do s=r,r=s.Lnext,s.Lface=null,s.Rface===null&&(s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),a=s.Sym,a.Onext===a?this.killVertex_(a.Org,null):(a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),this.killEdge_(s));while(s!=n);o=e.prev,h=e.next,h.prev=o,o.next=h}countFaceVerts_(e){var n=e.anEdge,s=0;do s++,n=n.Lnext;while(n!==e.anEdge);return s}mergeConvexFaces(e){var n,s,r,a,o,h,c;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(s=n.anEdge,o=s.Org;r=s.Lnext,a=s.Sym,a&&a.Lface&&a.Lface.inside&&(h=this.countFaceVerts_(n),c=this.countFaceVerts_(a.Lface),h+c-2<=e&&dt.vertCCW(s.Lprev.Org,s.Org,a.Lnext.Lnext.Org)&&dt.vertCCW(a.Lprev.Org,a.Org,s.Lnext.Lnext.Org)&&(r=a.Lnext,this.delete(a),s=null,a=null)),!(s&&s.Lnext.Org===o);)s=r;return!0}check(){var e=this.fHead,n=this.vHead,s=this.eHead,r,a,o,h,c,l;for(a=e,a=e;(r=a.next)!==e;a=r){yt(r.prev===a),c=r.anEdge;do yt(c.Sym!==c),yt(c.Sym.Sym===c),yt(c.Lnext.Onext.Sym===c),yt(c.Onext.Sym.Lnext===c),yt(c.Lface===r),c=c.Lnext;while(c!==r.anEdge)}for(yt(r.prev===a&&r.anEdge===null),h=n,h=n;(o=h.next)!==n;h=o){yt(o.prev===h),c=o.anEdge;do yt(c.Sym!==c),yt(c.Sym.Sym===c),yt(c.Lnext.Onext.Sym===c),yt(c.Onext.Sym.Lnext===c),yt(c.Org===o),c=c.Onext;while(c!==o.anEdge)}for(yt(o.prev===h&&o.anEdge===null),l=s,l=s;(c=l.next)!==s;l=c)yt(c.Sym.next===l.Sym),yt(c.Sym!==c),yt(c.Sym.Sym===c),yt(c.Org!==null),yt(c.Dst!==null),yt(c.Lnext.Onext.Sym===c),yt(c.Onext.Sym.Lnext===c);yt(c.Sym.next===l.Sym&&c.Sym===this.eHeadSym&&c.Sym.Sym===c&&c.Org===null&&c.Dst===null&&c.Lface===null&&c.Rface===null)}}class Fm{handle=null}class Nm{key=null;node=0}class r5{constructor(e,n){this.leq=n,this.max=e,this.nodes=[],this.handles=[];for(let s=0;s<e+1;s++)this.nodes[s]=new Fm,this.handles[s]=new Nm;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}max=0;nodes=[];handles=[];initialized=!1;freeList=0;size=0;floatDown_(e){var n=this.nodes,s=this.handles,r,a,o;for(r=n[e].handle;;){if(o=e<<1,o<this.size&&this.leq(s[n[o+1].handle].key,s[n[o].handle].key)&&++o,yt(o<=this.max),a=n[o].handle,o>this.size||this.leq(s[r].key,s[a].key)){n[e].handle=r,s[r].node=e;break}n[e].handle=a,s[a].node=e,e=o}}floatUp_(e){var n=this.nodes,s=this.handles,r,a,o;for(r=n[e].handle;;){if(o=e>>1,a=n[o].handle,o===0||this.leq(s[a].key,s[r].key)){n[e].handle=r,s[r].node=e;break}n[e].handle=a,s[a].node=e,e=o}}init(){for(let e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0}min(){return this.handles[this.nodes[1].handle].key}insert(e){var n,s;if(n=++this.size,n*2>this.max){this.max*=2;var r,a;for(a=this.nodes.length,this.nodes.length=this.max+1,r=a;r<this.nodes.length;r++)this.nodes[r]=new Fm;for(a=this.handles.length,this.handles.length=this.max+1,r=a;r<this.handles.length;r++)this.handles[r]=new Nm}return this.freeList===0?s=n:(s=this.freeList,this.freeList=this.handles[s].node),this.nodes[n].handle=s,this.handles[s].node=n,this.handles[s].key=e,this.initialized&&this.floatUp_(n),s}extractMin(){var e=this.nodes,n=this.handles,s=e[1].handle,r=n[s].key;return this.size>0&&(e[1].handle=e[this.size].handle,n[e[1].handle].node=1,n[s].key=null,n[s].node=this.freeList,this.freeList=s,--this.size,this.size>0&&this.floatDown_(1)),r}delete(e){var n=this.nodes,s=this.handles,r;yt(e>=1&&e<=this.max&&s[e].key!==null),r=s[e].node,n[r].handle=n[this.size].handle,s[n[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(s[n[r>>1].handle].key,s[n[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),s[e].key=null,s[e].node=this.freeList,this.freeList=e}}class p0{eUp=null;nodeUp=null;windingNumber=0;inside=!1;sentinel=!1;dirty=!1;fixUpperEdge=!1}class Bm{key=null;next=null;prev=null}class a5{constructor(e,n){this.frame=e,this.leq=n,this.head.next=this.head,this.head.prev=this.head}head=new Bm;min(){return this.head.next}max(){return this.head.prev}insert(e){return this.insertBefore(this.head,e)}search(e){let n=this.head;do n=n.next;while(n.key!==null&&!this.leq(this.frame,e,n.key));return n}insertBefore(e,n){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,n));const s=new Bm;return s.key=n,s.next=e.next,e.next.prev=s,s.prev=e,e.next=s,s}delete(e){e.next.prev=e.prev,e.prev.next=e.next}}class X{static regionBelow(e){return e.nodeUp.prev.key}static regionAbove(e){return e.nodeUp.next.key}static debugEvent(e){}static addWinding(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding}static edgeLeq(e,n,s){var r=e.event,a=n.eUp,o=s.eUp;if(a.Dst===r)return o.Dst===r?dt.vertLeq(a.Org,o.Org)?dt.edgeSign(o.Dst,a.Org,o.Org)<=0:dt.edgeSign(a.Dst,o.Org,a.Org)>=0:dt.edgeSign(o.Dst,r,o.Org)<=0;if(o.Dst===r)return dt.edgeSign(a.Dst,r,a.Org)>=0;const h=dt.edgeEval(a.Dst,r,a.Org),c=dt.edgeEval(o.Dst,r,o.Org);return h>=c}static deleteRegion(e,n){n.fixUpperEdge&&yt(n.eUp.winding===0),n.eUp.activeRegion=null,e.dict.delete(n.nodeUp)}static fixUpperEdge(e,n,s){yt(n.fixUpperEdge),e.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=s,s.activeRegion=n}static topLeftRegion(e,n){var s=n.eUp.Org,r;do n=X.regionAbove(n);while(n.eUp.Org===s);if(n.fixUpperEdge){if(r=e.mesh.connect(X.regionBelow(n).eUp.Sym,n.eUp.Lnext),r===null)return null;X.fixUpperEdge(e,n,r),n=X.regionAbove(n)}return n}static topRightRegion(e){var n=e.eUp.Dst;do e=X.regionAbove(e);while(e.eUp.Dst===n);return e}static addRegionBelow(e,n,s){var r=new p0;return r.eUp=s,r.nodeUp=e.dict.insertBefore(n.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,s.activeRegion=r,r}static isWindingInside(e,n){switch(e.windingRule){case Ze.ODD:return(n&1)!==0;case Ze.NONZERO:return n!==0;case Ze.POSITIVE:return n>0;case Ze.NEGATIVE:return n<0;case Ze.ABS_GEQ_TWO:return n>=2||n<=-2}throw new Error("Invalid winding rulle")}static computeWinding(e,n){n.windingNumber=X.regionAbove(n).windingNumber+n.eUp.winding,n.inside=X.isWindingInside(e,n.windingNumber)}static finishRegion(e,n){var s=n.eUp,r=s.Lface;r.inside=n.inside,r.anEdge=s,X.deleteRegion(e,n)}static finishLeftRegions(e,n,s){for(var r,a=null,o=n,h=n.eUp;o!==s;){if(o.fixUpperEdge=!1,a=X.regionBelow(o),r=a.eUp,r.Org!=h.Org){if(!a.fixUpperEdge){X.finishRegion(e,o);break}r=e.mesh.connect(h.Lprev,r.Sym),X.fixUpperEdge(e,a,r)}h.Onext!==r&&(e.mesh.splice(r.Oprev,r),e.mesh.splice(h,r)),X.finishRegion(e,o),h=a.eUp,o=a}return h}static addRightEdges(e,n,s,r,a,o){var h,c,l,u,f=!0;l=s;do yt(dt.vertLeq(l.Org,l.Dst)),X.addRegionBelow(e,n,l.Sym),l=l.Onext;while(l!==r);for(a===null&&(a=X.regionBelow(n).eUp.Rprev),c=n,u=a;h=X.regionBelow(c),l=h.eUp.Sym,l.Org===u.Org;)l.Onext!==u&&(e.mesh.splice(l.Oprev,l),e.mesh.splice(u.Oprev,l)),h.windingNumber=c.windingNumber-l.winding,h.inside=X.isWindingInside(e,h.windingNumber),c.dirty=!0,!f&&X.checkForRightSplice(e,c)&&(X.addWinding(l,u),X.deleteRegion(e,c),e.mesh.delete(u)),f=!1,c=h,u=l;c.dirty=!0,yt(c.windingNumber-l.winding===h.windingNumber),o&&X.walkDirtyRegions(e,c)}static spliceMergeVertices(e,n,s){e.mesh.splice(n,s)}static vertexWeights(e,n,s){var r=dt.vertL1dist(n,e),a=dt.vertL1dist(s,e),o=.5*a/(r+a),h=.5*r/(r+a);e.coords[0]+=o*n.coords[0]+h*s.coords[0],e.coords[1]+=o*n.coords[1]+h*s.coords[1],e.coords[2]+=o*n.coords[2]+h*s.coords[2]}static getIntersectData(e,n,s,r,a,o){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,X.vertexWeights(n,s,r),X.vertexWeights(n,a,o)}static checkForRightSplice(e,n){var s=X.regionBelow(n),r=n.eUp,a=s.eUp;if(dt.vertLeq(r.Org,a.Org)){if(dt.edgeSign(a.Dst,r.Org,a.Org)>0)return!1;dt.vertEq(r.Org,a.Org)?r.Org!==a.Org&&(e.pq.delete(r.Org.pqHandle),X.spliceMergeVertices(e,a.Oprev,r)):(e.mesh.splitEdge(a.Sym),e.mesh.splice(r,a.Oprev),n.dirty=s.dirty=!0)}else{if(dt.edgeSign(r.Dst,a.Org,r.Org)<0)return!1;X.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),e.mesh.splice(a.Oprev,r)}return!0}static checkForLeftSplice(e,n){var s=X.regionBelow(n),r=n.eUp,a=s.eUp,o;if(yt(!dt.vertEq(r.Dst,a.Dst)),dt.vertLeq(r.Dst,a.Dst)){if(dt.edgeSign(r.Dst,a.Dst,r.Org)<0)return!1;X.regionAbove(n).dirty=n.dirty=!0,o=e.mesh.splitEdge(r),e.mesh.splice(a.Sym,o),o.Lface.inside=n.inside}else{if(dt.edgeSign(a.Dst,r.Dst,a.Org)>0)return!1;n.dirty=s.dirty=!0,o=e.mesh.splitEdge(a),e.mesh.splice(r.Lnext,a.Sym),o.Rface.inside=n.inside}return!0}static checkForIntersect(e,n){var s=X.regionBelow(n),r=n.eUp,a=s.eUp,o=r.Org,h=a.Org,c=r.Dst,l=a.Dst,u,f,d=new na,p,y;if(yt(!dt.vertEq(l,c)),yt(dt.edgeSign(c,e.event,o)<=0),yt(dt.edgeSign(l,e.event,h)>=0),yt(o!==e.event&&h!==e.event),yt(!n.fixUpperEdge&&!s.fixUpperEdge),o===h||(u=Math.min(o.t,c.t),f=Math.max(h.t,l.t),u>f))return!1;if(dt.vertLeq(o,h)){if(dt.edgeSign(l,o,h)>0)return!1}else if(dt.edgeSign(c,h,o)<0)return!1;return dt.intersect(c,o,l,h,d),yt(Math.min(o.t,c.t)<=d.t),yt(d.t<=Math.max(h.t,l.t)),yt(Math.min(l.s,c.s)<=d.s),yt(d.s<=Math.max(h.s,o.s)),dt.vertLeq(d,e.event)&&(d.s=e.event.s,d.t=e.event.t),p=dt.vertLeq(o,h)?o:h,dt.vertLeq(p,d)&&(d.s=p.s,d.t=p.t),dt.vertEq(d,o)||dt.vertEq(d,h)?(X.checkForRightSplice(e,n),!1):!dt.vertEq(c,e.event)&&dt.edgeSign(c,e.event,d)>=0||!dt.vertEq(l,e.event)&&dt.edgeSign(l,e.event,d)<=0?l===e.event?(e.mesh.splitEdge(r.Sym),e.mesh.splice(a.Sym,r),n=X.topLeftRegion(e,n),r=X.regionBelow(n).eUp,X.finishLeftRegions(e,X.regionBelow(n),s),X.addRightEdges(e,n,r.Oprev,r,r,!0),!0):c===e.event?(e.mesh.splitEdge(a.Sym),e.mesh.splice(r.Lnext,a.Oprev),s=n,n=X.topRightRegion(n),y=X.regionBelow(n).eUp.Rprev,s.eUp=a.Oprev,a=X.finishLeftRegions(e,s,null),X.addRightEdges(e,n,a.Onext,r.Rprev,y,!0),!0):(dt.edgeSign(c,e.event,d)>=0&&(X.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),r.Org.s=e.event.s,r.Org.t=e.event.t),dt.edgeSign(l,e.event,d)<=0&&(n.dirty=s.dirty=!0,e.mesh.splitEdge(a.Sym),a.Org.s=e.event.s,a.Org.t=e.event.t),!1):(e.mesh.splitEdge(r.Sym),e.mesh.splitEdge(a.Sym),e.mesh.splice(a.Oprev,r),r.Org.s=d.s,r.Org.t=d.t,r.Org.pqHandle=e.pq.insert(r.Org),X.getIntersectData(e,r.Org,o,c,h,l),X.regionAbove(n).dirty=n.dirty=s.dirty=!0,!1)}static walkDirtyRegions(e,n){for(var s=X.regionBelow(n),r,a;;){for(;s.dirty;)n=s,s=X.regionBelow(s);if(!n.dirty&&(s=n,n=X.regionAbove(n),n===null||!n.dirty))return;if(n.dirty=!1,r=n.eUp,a=s.eUp,r.Dst!==a.Dst&&X.checkForLeftSplice(e,n)&&(s.fixUpperEdge?(X.deleteRegion(e,s),e.mesh.delete(a),s=X.regionBelow(n),a=s.eUp):n.fixUpperEdge&&(X.deleteRegion(e,n),e.mesh.delete(r),n=X.regionAbove(s),r=n.eUp)),r.Org!==a.Org)if(r.Dst!==a.Dst&&!n.fixUpperEdge&&!s.fixUpperEdge&&(r.Dst===e.event||a.Dst===e.event)){if(X.checkForIntersect(e,n))return}else X.checkForRightSplice(e,n);r.Org===a.Org&&r.Dst===a.Dst&&(X.addWinding(a,r),X.deleteRegion(e,n),e.mesh.delete(r),n=X.regionAbove(s))}}static connectRightVertex(e,n,s){var r,a=s.Onext,o=X.regionBelow(n),h=n.eUp,c=o.eUp,l=!1;if(h.Dst!==c.Dst&&X.checkForIntersect(e,n),dt.vertEq(h.Org,e.event)&&(e.mesh.splice(a.Oprev,h),n=X.topLeftRegion(e,n),a=X.regionBelow(n).eUp,X.finishLeftRegions(e,X.regionBelow(n),o),l=!0),dt.vertEq(c.Org,e.event)&&(e.mesh.splice(s,c.Oprev),s=X.finishLeftRegions(e,o,null),l=!0),l){X.addRightEdges(e,n,s.Onext,a,a,!0);return}dt.vertLeq(c.Org,h.Org)?r=c.Oprev:r=h,r=e.mesh.connect(s.Lprev,r),X.addRightEdges(e,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,X.walkDirtyRegions(e,n)}static connectLeftDegenerate(e,n,s){var r,a,o,h,c;if(r=n.eUp,dt.vertEq(r.Org,s)){yt(!1),X.spliceMergeVertices(e,r,s.anEdge);return}if(!dt.vertEq(r.Dst,s)){e.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(e.mesh.delete(r.Onext),n.fixUpperEdge=!1),e.mesh.splice(s.anEdge,r),X.sweepEvent(e,s);return}yt(!1),n=X.topRightRegion(n),c=X.regionBelow(n),o=c.eUp.Sym,a=h=o.Onext,c.fixUpperEdge&&(yt(a!==o),X.deleteRegion(e,c),e.mesh.delete(o),o=a.Oprev),e.mesh.splice(s.anEdge,o),dt.edgeGoesLeft(a)||(a=null),X.addRightEdges(e,n,o.Onext,h,a,!0)}static connectLeftVertex(e,n){var s,r,a,o,h,c,l=new p0;if(l.eUp=n.anEdge.Sym,s=e.dict.search(l).key,r=X.regionBelow(s),!!r){if(o=s.eUp,h=r.eUp,dt.edgeSign(o.Dst,n,o.Org)===0){X.connectLeftDegenerate(e,s,n);return}if(a=dt.vertLeq(h.Dst,o.Dst)?s:r,s.inside||a.fixUpperEdge){if(a===s)c=e.mesh.connect(n.anEdge.Sym,o.Lnext);else{var u=e.mesh.connect(h.Dnext,n.anEdge);c=u.Sym}a.fixUpperEdge?X.fixUpperEdge(e,a,c):X.computeWinding(e,X.addRegionBelow(e,s,c)),X.sweepEvent(e,n)}else X.addRightEdges(e,s,n.anEdge,n.anEdge,null,!0)}}static sweepEvent(e,n){e.event=n;for(var s=n.anEdge;s.activeRegion===null;)if(s=s.Onext,s===n.anEdge){X.connectLeftVertex(e,n);return}var r=X.topLeftRegion(e,s.activeRegion);yt(r!==null);var a=X.regionBelow(r),o=a.eUp,h=X.finishLeftRegions(e,a,null);h.Onext===o?X.connectRightVertex(e,r,h):X.addRightEdges(e,r,h.Onext,o,o,!0)}static addSentinel(e,n,s,r){var a=new p0,o=e.mesh.makeEdge();o.Org.s=s,o.Org.t=r,o.Dst.s=n,o.Dst.t=r,e.event=o.Dst,a.eUp=o,a.windingNumber=0,a.inside=!1,a.fixUpperEdge=!1,a.sentinel=!0,a.dirty=!1,a.nodeUp=e.dict.insert(a)}static initEdgeDict(e){e.dict=new a5(e,X.edgeLeq);var n=e.bmax[0]-e.bmin[0],s=e.bmax[1]-e.bmin[1],r=e.bmin[0]-n,a=e.bmax[0]+n,o=e.bmin[1]-s,h=e.bmax[1]+s;X.addSentinel(e,r,a,o),X.addSentinel(e,r,a,h)}static doneEdgeDict(e){for(var n,s=0;(n=e.dict.min().key)!==null;)n.sentinel||(yt(n.fixUpperEdge),yt(++s===1)),yt(n.windingNumber===0),X.deleteRegion(e,n)}static removeDegenerateEdges(e){var n,s,r,a=e.mesh.eHead;for(n=a.next;n!==a;n=s)s=n.next,r=n.Lnext,dt.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(X.spliceMergeVertices(e,r,n),e.mesh.delete(n),n=r,r=n.Lnext),r.Lnext===n&&(r!==n&&((r===s||r===s.Sym)&&(s=s.next),e.mesh.delete(r)),(n===s||n===s.Sym)&&(s=s.next),e.mesh.delete(n))}static initPriorityQ(e){var n,s,r,a=0;for(r=e.mesh.vHead,s=r.next;s!==r;s=s.next)a++;for(a+=8,n=e.pq=new r5(a,dt.vertLeq),r=e.mesh.vHead,s=r.next;s!==r;s=s.next)s.pqHandle=n.insert(s);return s!==r?!1:(n.init(),!0)}static donePriorityQ(e){e.pq=null}static removeDegenerateFaces(e,n){var s,r,a;for(s=n.fHead.next;s!==n.fHead;s=r)r=s.next,a=s.anEdge,yt(a.Lnext!==a),a.Lnext.Lnext===a&&(X.addWinding(a.Onext,a),e.mesh.delete(a));return!0}static computeInterior(e,n=!0){var s,r;if(X.removeDegenerateEdges(e),!X.initPriorityQ(e))return!1;for(X.initEdgeDict(e);(s=e.pq.extractMin())!==null;){for(;r=e.pq.min(),!(r===null||!dt.vertEq(r,s));)r=e.pq.extractMin(),X.spliceMergeVertices(e,s.anEdge,r.anEdge);X.sweepEvent(e,s)}return e.event=e.dict.min().key.eUp.Org,X.doneEdgeDict(e),X.donePriorityQ(e),X.removeDegenerateFaces(e,e.mesh),n&&e.mesh.check(),!0}}class Dm{mesh=new Lm;normal=[0,0,0];sUnit=[0,0,0];tUnit=[0,0,0];bmin=[0,0];bmax=[0,0];windingRule=Ze.ODD;dict=null;pq=null;event=null;vertexIndexCounter=0;vertices=[];vertexIndices=[];vertexCount=0;elements=[];elementCount=0;dot_(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}normalize_(e){let n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!n)throw"Zero-size vector!";n=Math.sqrt(n),e[0]/=n,e[1]/=n,e[2]/=n}longAxis_(e){let n=0;return Math.abs(e[1])>Math.abs(e[0])&&(n=1),Math.abs(e[2])>Math.abs(e[n])&&(n=2),n}computeNormal_(e){let n,s,r,a,o,h,c=[0,0,0],l=[0,0,0],u=[0,0,0],f=[0,0,0],d=[0,0,0];const p=[null,null,null],y=[null,null,null],x=this.mesh.vHead;n=x.next;for(let m=0;m<3;++m)a=n.coords[m],l[m]=a,y[m]=n,c[m]=a,p[m]=n;for(n=x.next;n!==x;n=n.next)for(let m=0;m<3;++m)a=n.coords[m],a<l[m]&&(l[m]=a,y[m]=n),a>c[m]&&(c[m]=a,p[m]=n);let g=0;if(c[1]-l[1]>c[0]-l[0]&&(g=1),c[2]-l[2]>c[g]-l[g]&&(g=2),l[g]>=c[g]){e[0]=0,e[1]=0,e[2]=1;return}for(h=0,s=y[g],r=p[g],u[0]=s.coords[0]-r.coords[0],u[1]=s.coords[1]-r.coords[1],u[2]=s.coords[2]-r.coords[2],n=x.next;n!==x;n=n.next)f[0]=n.coords[0]-r.coords[0],f[1]=n.coords[1]-r.coords[1],f[2]=n.coords[2]-r.coords[2],d[0]=u[1]*f[2]-u[2]*f[1],d[1]=u[2]*f[0]-u[0]*f[2],d[2]=u[0]*f[1]-u[1]*f[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>h&&(h=o,e[0]=d[0],e[1]=d[1],e[2]=d[2]);h<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(u)]=1)}checkOrientation_(){var e=this.mesh.fHead,n,s=this.mesh.vHead,r;let a=0;for(let o=e.next;o!==e;o=o.next)if(r=o.anEdge,!(r.winding<=0))do a+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext;while(r!==o.anEdge);if(a<0){for(n=s.next;n!==s;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}}projectPolygon_(){let e=this.mesh.vHead,n=[0,0,0],s,r,a=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),a=!0),s=this.sUnit,r=this.tUnit;let o=this.longAxis_(n);s[o]=0,s[(o+1)%3]=1,s[(o+2)%3]=0,r[o]=0,r[(o+1)%3]=0,r[(o+2)%3]=n[o]>0?1:-1;for(let c=e.next;c!==e;c=c.next)c.s=this.dot_(c.coords,s),c.t=this.dot_(c.coords,r);a&&this.checkOrientation_();let h=!0;for(let c=e.next;c!==e;c=c.next)h?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,h=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))}addWinding_(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding}tessellateMonoRegion_(e,n){let s,r;if(s=n.anEdge,!(s.Lnext!==s&&s.Lnext.Lnext!==s))throw"Mono region invalid";for(;dt.vertLeq(s.Dst,s.Org);s=s.Lprev);for(;dt.vertLeq(s.Org,s.Dst);s=s.Lnext);r=s.Lprev;let a;for(;s.Lnext!==r;)if(dt.vertLeq(s.Dst,r.Org)){for(;r.Lnext!==s&&(dt.edgeGoesLeft(r.Lnext)||dt.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)a=e.connect(r.Lnext,r),r=a.Sym;r=r.Lprev}else{for(;r.Lnext!==s&&(dt.edgeGoesRight(s.Lprev)||dt.edgeSign(s.Dst,s.Org,s.Lprev.Org)>=0);)a=e.connect(s,s.Lprev),s=a.Sym;s=s.Lnext}if(r.Lnext===s)throw"Mono region invalid";for(;r.Lnext.Lnext!==s;)a=e.connect(r.Lnext,r),r=a.Sym;return!0}tessellateInterior_(e){let n;for(let s=e.fHead.next;s!==e.fHead;s=n)if(n=s.next,s.inside&&!this.tessellateMonoRegion_(e,s))return!1;return!0}discardExterior_(e){let n;for(let s=e.fHead.next;s!==e.fHead;s=n)n=s.next,s.inside||e.zapFace(s)}setWindingNumber_(e,n,s){let r;for(let a=e.eHead.next;a!==e.eHead;a=r)r=a.next,a.Rface.inside!==a.Lface.inside?a.winding=a.Lface.inside?n:-n:s?e.delete(a):a.winding=0}getNeighbourFace_(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n}outputPolymesh_(e,n,s,r){let a,o=0,h=0,c;s>3&&e.mergeConvexFaces(s);for(let f=e.vHead.next;f!==e.vHead;f=f.next)f.n=-1;for(let f=e.fHead.next;f!==e.fHead;f=f.next)if(f.n=-1,!!f.inside){a=f.anEdge,c=0;do{let d=a.Org;d.n===-1&&(d.n=h,h++),c++,a=a.Lnext}while(a!==f.anEdge);if(c>s)throw"Face vertex greater that support polygon";f.n=o,++o}this.elementCount=o,n===Hn.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*s,this.vertexCount=h,this.vertices=[],this.vertices.length=h*r,this.vertexIndices=[],this.vertexIndices.length=h;for(let f=e.vHead.next;f!==e.vHead;f=f.next)if(f.n!==-1){var l=f.n*r;this.vertices[l+0]=f.coords[0],this.vertices[l+1]=f.coords[1],r>2&&(this.vertices[l+2]=f.coords[2]),this.vertexIndices[f.n]=f.idx}let u=0;for(let f=e.fHead.next;f!==e.fHead;f=f.next)if(f.inside){a=f.anEdge,c=0;do{let d=a.Org;this.elements[u++]=d.n,c++,a=a.Lnext}while(a!==f.anEdge);for(let d=c;d<s;++d)this.elements[u++]=-1;if(n===Hn.CONNECTED_POLYGONS){a=f.anEdge;do this.elements[u++]=this.getNeighbourFace_(a),a=a.Lnext;while(a!==f.anEdge);for(let d=c;d<s;++d)this.elements[u++]=-1}}}outputContours_(e,n){let s,r,a=0,o=0;this.vertexCount=0,this.elementCount=0;for(let u=e.fHead.next;u!==e.fHead;u=u.next)if(u.inside){r=s=u.anEdge;do this.vertexCount++,s=s.Lnext;while(s!==r);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;let h=0,c=0,l=0;a=0;for(let u=e.fHead.next;u!==e.fHead;u=u.next)if(u.inside){o=0,r=s=u.anEdge;do this.vertices[h++]=s.Org.coords[0],this.vertices[h++]=s.Org.coords[1],n>2&&(this.vertices[h++]=s.Org.coords[2]),this.vertexIndices[c++]=s.Org.idx,o++,s=s.Lnext;while(s!==r);this.elements[l++]=a,this.elements[l++]=o,a+=o}}addContour(e,n){this.mesh===null&&(this.mesh=new Lm),e<2&&(e=2),e>3&&(e=3);let s=null;for(let r=0;r<n.length;r+=e)s===null?(s=this.mesh.makeEdge(),this.mesh.splice(s,s.Sym)):(this.mesh.splitEdge(s),s=s.Lnext),s.Org.coords[0]=n[r+0],s.Org.coords[1]=n[r+1],e>2?s.Org.coords[2]=n[r+2]:s.Org.coords[2]=0,s.Org.idx=this.vertexIndexCounter++,s.winding=1,s.Sym.winding=-1}tesselate(e=Ze.ODD,n=Hn.POLYGONS,s,r,a,o=!0){if(this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,a&&(this.normal[0]=a[0],this.normal[1]=a[1],this.normal[2]=a[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),X.computeInterior(this,o);var h=this.mesh;return n===Hn.BOUNDARY_CONTOURS?this.setWindingNumber_(h,1,!0):this.tessellateInterior_(h),o&&h.check(),n===Hn.BOUNDARY_CONTOURS?this.outputContours_(h,r):this.outputPolymesh_(h,n,s,r),!0}}function o5({windingRule:i=Ze.ODD,elementType:e=Hn.POLYGONS,polySize:n=3,vertexSize:s=2,normal:r=[0,0,1],contours:a=[],strict:o=!0,debug:h=!1}){if(!a&&o)throw new Error("Contours can't be empty");if(!a)return;const c=new Dm;for(let l=0;l<a.length;l++)c.addContour(s||2,a[l]);return c.tesselate(i,e,n,s,r,o),{vertices:c.vertices,vertexIndices:c.vertexIndices,vertexCount:c.vertexCount,elements:c.elements,elementCount:c.elementCount,mesh:h?c.mesh:void 0}}const h5=Ze.ODD,c5=Ze.NONZERO,l5=Ze.POSITIVE,u5=Ze.NEGATIVE,f5=Ze.ABS_GEQ_TWO,d5=Hn.POLYGONS,p5=Hn.CONNECTED_POLYGONS,y5=Hn.BOUNDARY_CONTOURS,x5=Object.freeze(Object.defineProperty({__proto__:null,BOUNDARY_CONTOURS:y5,CONNECTED_POLYGONS:p5,ELEMENT:Hn,POLYGONS:d5,Tesselator:Dm,WINDING:Ze,WINDING_ABS_GEQ_TWO:f5,WINDING_NEGATIVE:u5,WINDING_NONZERO:c5,WINDING_ODD:h5,WINDING_POSITIVE:l5,tesselate:o5},Symbol.toStringTag,{value:"Module"}));function qm(i=10){return Math.random().toString(36).substr(2,i)}function g5(i,...e){return i instanceof Function?i(...e):i}function wo(i,...e){return e.includes(i)}const m5=(i,e)=>i.concat(e);function $m(i,e,n=m5){for(const s of Object.keys(e))s in i&&Array.isArray(i[s])&&Array.isArray(e[s])?i[s]=n(i[s],e[s]):s in i&&i[s]instanceof Object&&e[s]instanceof Object?$m(i[s],e[s]):i[s]=e[s]}function v5(i,e=0){return e?+setTimeout(i,e):(i(),0)}function w5(i){return new Promise(e=>setTimeout(e,i))}function M5(){let i=()=>{},e=()=>{};const n=new Promise((s,r)=>{i=s,e=r});return n.catch(s=>s),{promise:n,resolve:i,reject:e}}class Vm extends Error{constructor(e){super("[Cache Error]"),this.data=e}}function b5(i){const e=new Map;return function(...n){const s=n.join("--");if(!e.has(s))try{e.set(s,i(...n))}catch(a){e.set(s,new Vm(a))}const r=e.get(s);if(r instanceof Vm)throw r.data;return r}}function _5(i,e=0,n=!1){let s=!1,r=!1;return(...a)=>{s?r=!0:(n?r=!0:i(...a),s=!0,setTimeout(()=>{r&&i(...a),s=r=!1},e))}}function S5(i){return function(e,n){if(!e||Array.isArray(this)||i.includes(e))return n}}function T5(i,e,n){if(!i)return e;try{return JSON.parse(i,n?S5(n):void 0)||e}catch{return e}}function y0(i,e){return new Array(e).fill(i)}function x0(i,e,n){const s=[];for(let r=0;r<e;++r)s.push(y0(i,n));return s}function Wc(i,e){const n=[];for(let s=0;s<e;++s)n.push(i(s));return n}function Gm(i,e,n){const s=[];for(let r=0;r<e;++r){const a=[];for(let o=0;o<n;++o)a.push(i(r,o));s.push(a)}return s}function Um(i,e,n=1){const s=[];if(e===void 0&&i>=0)for(let r=0;r<i;r+=n)s.push(r);else if(e===void 0)for(let r=0;r>i;r-=n)s.push(r);else if(i<=e)for(let r=i;r<=e;r+=n)s.push(r);else for(let r=i;r>=e;r-=n)s.push(r);return s}function g0(i,e=0){return i[i.length-1-e]}function qe(i){return i.reduce((e,n)=>e+n,0)}function Wm(i,e,n=!1){return i.slice(0).sort((s,r)=>{const a=e(s),o=e(r);return a<o?n?1:-1:a>o?n?-1:1:0})}function E5(i){let e=0;return()=>i[e++%i.length]}function Ym(i){return i.filter((e,n)=>i.indexOf(e)===n)}function m0(i){return i.reduce((e,n)=>e.concat(Array.isArray(n)?m0(n):n),[])}function z5(i){let e=0;return i.map(n=>e+=n)}function C5(i,e){const n=[];for(let s=0;s<i.length;s+=e)n.push(i.slice(s,s+e));return n}function A5(i,e=1){const n=i.length;e=(e%n+n)%n;const s=i.slice(0,e);return i.slice(e).concat(s)}function P5(i,e){return i.filter(n=>e.includes(n))}function I5(i,e){const n=e.filter(r=>!i.includes(r)),s=i.filter(r=>!e.includes(r));return[...n,...s]}function R5(...i){return i.reduce((e,n)=>e.concat(n),[])}function O5(i){return i.map(e=>e.map(n=>{let s=n?`${n}`:"";return s.match(/[,\n"']/)&&(s=`"${s.replace(/"/g,'""')}"`),s}).join(",")).join(`
`)}class k5{root;constructor(e){const n=e.length,s=e.map(r=>({val:r}));for(const[r,a]of s.entries())a.next=s[(r+1)%n],a.prev=s[(r-1+n)%n];this.root=s[0]}*traverse(){let e=this.root;for(;e;)if(yield e,e=e.next,e===this.root)return}get array(){return Array.from(this.traverse())}delete(e){if(e===this.root){if(e.next===e)return this.root=void 0;this.root=e.next}e.prev.next=e.next,e.next.prev=e.prev}}var jm=(i=>(i[i.first=0]="first",i[i.firstGreater=1]="firstGreater",i))(jm||{});function Hm(i,e,n){let s=0,r=i.length-1,a=-1;for(;s<=r;){const o=Math.floor((s+r)/2),h=i[o].val;h<e?s=o+1:h>e?(n===1&&(a=o),r=o-1):n===0?(a=o,r=o-1):n===1&&(s=o+1)}return a}function L5(i,e,n){let s=Hm(i,n,0);if(s<0)return-1;for(;i[s].val===n;){if(i[s].item===e)return s;s+=1}return-1}function Yc(i,e=/\s+/){return i?i.trim().split(e):[]}function F5(i){return i.replace(/\S+/g,e=>e.charAt(0).toUpperCase()+e.slice(1))}function N5(i){return i.toLowerCase().replace(/^-/,"").replace(/-(.)/g,(e,n)=>n.toUpperCase())}function B5(i){return i===i.split("").reverse().join("")}function Xm(i,e,n=!1){const s=x0(0,i.length+1,e.length+1);for(let r=0;r<=i.length;r++)s[r][0]=r;for(let r=0;r<=e.length;r++)s[0][r]=r;for(let r=1;r<=i.length;r++)for(let a=1;a<=e.length;a++)s[r][a]=Math.min(s[r-1][a-1]+(i.charAt(r-1)===e.charAt(a-1)?0:1),s[r-1][a]+1,s[r][a-1]+1);return n?Math.min(...s[i.length]):s[i.length][e.length]}function D5(i,e){const n=i.length/2,s=e.map(a=>({w:a,d:Xm(i,a)})).filter(({d:a})=>a<n),r=Wm(s,a=>a.d)[0];return r?r.w:void 0}class q5{events=new Map;on(e,n){for(const s of Yc(e))this.events.has(s)||this.events.set(s,[]),this.events.get(s).push(n)}one(e,n){const s=r=>{this.off(e,s),n(r)};this.on(e,s)}off(e,n){for(const s of Yc(e))this.events.has(s)&&this.events.set(s,this.events.get(s).filter(r=>r!==n))}trigger(e,n){for(const s of Yc(e))if(this.events.has(s))for(const r of this.events.get(s))r(n)}}const $5=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,V5=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,G5=/rgba?\(([0-9.]+), ?([0-9.]+), ?([0-9.]+)(, ?([0-9.]+))?\)/,U5=["#22ab24","#009ea6","#0f82f2","#6d3bbf","#cd0e66","#eb4726","#fd8c00"];function Zm(i){return i.length===1?`0${i}`:i}function Jm(i,e){if(e<=0)return jc.from(i[0]);if(e>=1)return jc.from(g0(i));const n=Math.floor(e*(i.length-1)),s=e*(i.length-1)-n;return jc.mix(i[n+1],i[n],s)}function v0(i,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(e-i)*6*n:n<1/2?e:n<2/3?i+(e-i)*(2/3-n)*6:i}let jc=class Ne{constructor(e,n,s,r=1){this.r=e,this.g=n,this.b=s,this.a=r}get hex(){const e=[this.r,this.g,this.b].map(s=>Zm(Math.round(s).toString(16))),n=this.a>=1?"":Zm(Math.round(this.a*255).toString(16));return`#${e.join("")}${n}`}get rgb(){return`rgba(${[this.r,this.g,this.b].map(n=>Math.round(n)).join(",")},${this.a})`}get brightness(){return(this.r*299+this.g*587+this.g*114)/1e3}get hsl(){const e=this.r/255,n=this.g/255,s=this.b/255,r=Math.max(e,n,s),a=Math.min(e,n,s),o=(a+r)/2,h=r-a;if(r===a)return[0,0,Math.round(o*100)];let c=e===r?(n-s)/h:n===r?2+(s-e)/h:4+(e-n)/h;c=Math.min(c*60,360),c<0&&(c+=360);const l=o<=.5?h/(r+a):h/(2-r-a);return[Math.round(c),Math.round(l*100),Math.round(o*100)]}get chroma(){return Math.max(this.r,this.g,this.b)-Math.min(this.r,this.g,this.b)}toString(){return this.rgb}copy(){return new Ne(this.r,this.g,this.b,this.a)}static from(e){return typeof e!="string"?e:e.startsWith("#")?Ne.fromHex(e):Ne.fromRgb(e)}static fromRgb(e){const n=e.match(G5);if(!n)return new Ne(0,0,0);const s=n[4]?+n[5]||0:1;return new Ne(+n[1],+n[2],+n[3],s)}static fromHex(e){e=e.replace($5,(s,r,a,o)=>r+r+a+a+o+o);const n=V5.exec(e);return n?new Ne(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),n[4]?parseInt(n[4],16)/255:1):new Ne(0,0,0)}static fromHsl(e,n,s){if(e/=360,n/=100,s/=100,n===0){const l=Math.round(s*255);return new Ne(l,l,l)}const r=s<.5?s*(1+n):s+n-s*n,a=2*s-r,o=v0(a,r,e+1/3),h=v0(a,r,e),c=v0(a,r,e-1/3);return new Ne(Math.round(o*255),Math.round(h*255),Math.round(c*255))}static rainbow(e){return Wc(n=>Jm(U5,n/(e-1)),e)}static gradient(e,n){return Wc(s=>Jm(e,s/(n-1)),n)}static shades(e,n,s=.5){const r=Ne.mix("#fff",e,s),a=Ne.mix("#000",e,s);return Ne.gradient([r,e,a],n)}static mix(e,n,s=.5){return e=Ne.from(e),n=Ne.from(n),new Ne(s*e.r+(1-s)*n.r,s*e.g+(1-s)*n.g,s*e.b+(1-s)*n.b,s*e.a+(1-s)*n.a)}static mixMany(e,n){n||(n=e.map(()=>1));const s=qe(n),r=e.map(g=>g.hsl),a=r.map(g=>g[0]),o=a.map(g=>g<180?g+360:g),h=n.map((g,m)=>g*Math.sqrt(e[m].chroma)),c=qe(h),l=qe(a.map((g,m)=>g*h[m]))/c,u=qe(o.map((g,m)=>g*h[m]))/c,f=qe(a.map((g,m)=>Math.abs(g-l)*h[m])),d=qe(o.map((g,m)=>Math.abs(g-u)*h[m])),p=f<=d?l:u%360,y=qe(r.map((g,m)=>n[m]*g[1]))/s,x=qe(r.map((g,m)=>n[m]*g[2]))/s;return Ne.fromHsl(p,y,x)}};class W5{constructor(e){this.maxSize=e}store=new Map;list=[];has(e){return this.store.has(e)}get(e){const n=this.store.get(e);return n&&this.touch(e,n),n?n.val:void 0}set(e,n){const s=this.store.get(e);if(s){s.val=n,this.touch(e,s);return}if(this.list.push(e),this.store.set(e,{val:n,i:this.list.length}),this.list.length>this.maxSize){const r=this.list.shift();this.store.delete(r)}}getOrSet(e,n){const s=this.get(e);if(s)return s;const r=n(e);return this.set(e,r),r}touch(e,n){this.list.splice(n.i,1).push(e),n.i=this.list.length}}function Y5(i){return i[Symbol.iterator]().next().value}function*j5(...i){for(const e of i)yield*e}function H5(i,e){for(const n of i)if(!e(n))return!1;return!0}function X5(i,e){for(const n of i)if(e(n))return!0;return!1}function*Z5(i,e){let n=0;for(const s of i)e(s,n)&&(yield s),n+=1}function*J5(i,e){let n=0;for(const s of i)yield e(s,n),n+=1}function*Q5(i,e){for(const n of i)for(const s of e(n))yield s}function*K5(i,e){for(const n of i)for(const s of e)yield[n,s]}function*tA(i){const e=i.length;for(let n=0;n<e;++n)for(let s=n+1;s<e;++s)yield[i[n],i[s]]}function eA(i,e,n=1/0,s){let r,a=n;for(const o of i){const h=e(o);if(h<a&&(r=o,a=h,s!==void 0&&a<s))return r}return r}const nA=Object.freeze(Object.defineProperty({__proto__:null,BinarySearchType:jm,Cache:W5,Color:jc,EventTarget:q5,LinkedList:k5,autoCorrect:D5,binaryIndexOf:L5,binarySearch:Hm,cache:b5,chunk:C5,concat:j5,cumulative:z5,deepExtend:$m,defer:M5,delay:v5,difference:I5,every:H5,filter:Z5,findMin:eA,first:Y5,flatMap:Q5,flatten:m0,intersect:P5,isOneOf:wo,isPalindrome:B5,join:R5,last:g0,list:Um,listPairs:tA,loop:E5,map:J5,pairs:K5,repeat:y0,repeat2D:x0,rotate:A5,run:g5,safeToJSON:T5,some:X5,sortBy:Wm,stringDistance:Xm,tabulate:Wc,tabulate2D:Gm,throttle:_5,toCSV:O5,toCamelCase:N5,toTitleCase:F5,total:qe,uid:qm,unique:Ym,wait:w5,words:Yc},Symbol.toStringTag,{value:"Module"})),Hc=1e-6;function Tt(i,e,n=Hc){return isNaN(i)||isNaN(e)?!1:Math.abs(i-e)<n}function Ni(i,e=Hc){return Tt(i,Math.round(i),e)}function Xn(i,e,n,s=Hc){return e>n&&([e,n]=[n,e]),i>e+s&&i<n-s}function Qm(i,e=Hc){return Tt(i,0,e)?0:i>0?1:-1}const Km=/(\d+)(\d{3})/,iA=["","k","m","b","t","q"];function sA(i){let[e,n]=i.split(".");for(;Km.test(e);)e=e.replace(Km,"$1,$2");return e+(n?`.${n}`:"")}function rA(i,e=6){if(!e)return`${i}`;const n=`${Math.abs(Math.floor(i))}`.length,s=n+(i<0?1:0);if(s<=e)return`${bo(i,e-s)}`;const r=Math.floor(Math.log10(Math.abs(i))/3),a=iA[r],o=e-(n%3||3)-(a?1:0)-(i<0?1:0);return bo(i/Math.pow(10,3*r),o)+a}function Mo(i,e=0,n=!0){const s=rA(i,e).replace("-","");return n?sA(s):s}function aA(i,e=6){const n=Math.abs(i);if(Xn(n,Math.pow(10,-e),Math.pow(10,e)))return Mo(i,e);if(n>Number.MAX_VALUE)return`${Math.sign(i)<0?"":""}`;if(n<Number.MIN_VALUE)return"0";const[s,r]=i.toExponential().split("e"),a=r.replace("+","").replace("-",""),o=a.startsWith("");return`${s.slice(0,5)}  10^${(o?"(":"")+a+(o?")":"")}`}const oA=/^-?0,[0-9]+$/,hA=/^-?([0-9]+(,[0-9]{3})*)?\.?[0-9]*$/,cA=/^-?[0-9]+(\.[0-9]{3})*,?[0-9]*$/;function lA(i){return i=i.replace(/^/,"-").trim(),!i||i.match(/[^0-9.,-]/)?NaN:oA.test(i)?parseFloat(i.replace(/,/,".")):hA.test(i)?parseFloat(i.replace(/,/g,"")):cA.test(i)?parseFloat(i.replace(/\./g,"").replace(/,/,".")):NaN}function uA(i){if(Math.abs(i)%100>=11&&Math.abs(i)%100<=13)return`${i}th`;switch(i%10){case 1:return`${i}st`;case 2:return`${i}nd`;case 3:return`${i}rd`;default:return`${i}th`}}const w0=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],tv=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],fA=[""," thousand"," million"," billion"," trillion"," quadrillion"," quintillion"," sextillion"];function dA(i){const[e,n,s]=i.split(""),r=e==="0"?"":` ${w0[+e]} hundred`;return n+s==="00"?r:+n<2?`${r} ${w0[+(n+s)]}`:s==="0"?`${r} ${tv[+n]}`:`${r} ${tv[+n]}-${w0[+s]}`}function pA(i){if(i===0)return"zero";const e=Math.round(Math.abs(i)).toString(),n=Math.ceil(e.length/3),s=e.padStart(3*n,"0");let r="";for(let a=0;a<n;a+=1){const o=s.substr(a*3,3);o!=="000"&&(r+=dA(o)+fA[n-1-a])}return r.trim()}function yA(i){return`${Math.abs(i)}`.split("").reverse().map(n=>+n)}function bo(i,e=0){const n=Math.pow(10,e);return Math.round(i*n)/n}function M0(i,e=1){return Math.round(i/e)*e}function Zn(i,e=-1/0,n=1/0){return Math.min(n,Math.max(e,i))}function Xc(i,e,n=.5){return i+(e-i)*n}function kn(i){return i*i}function xA(i){return i*i*i}function ev(i,e){return(i%e+e)%e}function gA(i,e){return e===void 0?Math.log(i):Math.log(i)/Math.log(e)}function nv(i,e,n){if(Tt(i,0)&&Tt(e,0))return[];if(Tt(i,0))return[-n/e];const s=-e/2/i,r=Math.sqrt(e*e-4*i*n)/2/i;return[s+r,s-r]}function mA(i,e){let n=0,s=1;for(const r of e)n+=s*r,s*=i;return n}function vA(i){if(i===0)return 1;if(i<0)return NaN;let e=1;for(let n=2;n<=i;++n)e*=n;return e}function iv(i,e){if(e<0||e>i)return 0;if(e===0)return 1;if(2*e>i)return iv(i,i-e);let n=1;for(let s=1;s<=e;++s)n*=(i-s+1)/s;return Math.round(n)}function wA(i){const e=[];return sv(i,e,[]),e}function sv(i,e,n){for(let s=0;s<i.length;s++){const r=i.splice(s,1)[0];n.push(r),i.length===0&&e.push(n.slice()),sv(i,e,n),i.splice(s,0,r),n.pop()}}function rv(i,e=0){const n=i.slice(0),s=av(n);return e?s.filter(r=>r.length===e):s}function av(i){if(i.length===1)return[[],i];const e=i.pop(),n=av(i),s=[];for(const r of n)s.push(r,[...r,e]);return s}const Zc=(i,e)=>{const n=i<0?"":"";return Math.abs(i)===1&&e?n+e:n+Math.abs(i)+(e||"")};class ae{constructor(e=0,n=0){this.re=e,this.im=n}get modulus(){return Math.sqrt(this.re*this.re+this.im*this.im)}get argument(){return Math.atan2(this.im,this.re)}get conjugate(){return new ae(this.re,-this.im)}root(e,n=0){const s=Math.pow(this.modulus,1/e),r=(this.argument+n*2*Math.PI)/e;return new ae(s*Math.cos(r),s*Math.sin(r))}toString(e=2){const n=bo(this.re,e),s=bo(this.im,e);return s===0?Zc(n):n===0?Zc(s,"i"):[Zc(n),s<0?"":"+",Zc(Math.abs(s),"i")].join(" ")}add(e){return ae.sum(this,e)}subtract(e){return ae.difference(this,e)}multiply(e){return ae.product(this,e)}divide(e){return ae.quotient(this,e)}static sum(e,n){return typeof e=="number"&&(e=new ae(e,0)),typeof n=="number"&&(n=new ae(n,0)),new ae(e.re+n.re,e.im+n.im)}static difference(e,n){return typeof e=="number"&&(e=new ae(e,0)),typeof n=="number"&&(n=new ae(n,0)),new ae(e.re-n.re,e.im-n.im)}static product(e,n){typeof e=="number"&&(e=new ae(e,0)),typeof n=="number"&&(n=new ae(n,0));const s=e.re*n.re-e.im*n.im,r=e.im*n.re+e.re*n.im;return new ae(s,r)}static quotient(e,n){if(typeof e=="number"&&(e=new ae(e,0)),typeof n=="number"&&(n=new ae(n,0)),Math.abs(n.re)<Number.EPSILON||Math.abs(n.im)<Number.EPSILON)return new ae(1/0,1/0);const s=n.re*n.re+n.im*n.im,r=(e.re*n.re+e.im*n.im)/s,a=(e.im*n.re-e.re*n.im)/s;return new ae(r,a)}static exp(e){typeof e=="number"&&(e=new ae(e,0));const n=Math.exp(e.re);return new ae(n*Math.cos(e.im),n*Math.sin(e.im))}}function _o(...i){const[e,...n]=i;if(n.length>1)return _o(e,_o(...n));let s=Math.abs(e),r=Math.abs(n[0]);for(;r;)[s,r]=[r,s%r];return s}function Jc(...i){const[e,...n]=i;return n.length>1?Jc(e,Jc(...n)):Math.abs(e*n[0])/_o(e,n[0])}function So(i){if(i%1!==0||i<2)return!1;if(i%2===0)return i===2;if(i%3===0)return i===3;const e=Math.sqrt(i);for(let n=5;n<=e;n+=6)if(i%n===0||i%(n+2)===0)return!1;return!0}function Qc(i){if(i===1)return[];if(So(i))return[i];const e=Math.sqrt(i);for(let n=2;n<=e;++n)if(i%n===0)return Qc(n).concat(Qc(i/n));return[]}function ov(i){return Ym(Qc(i))}function MA(i=100){if(i<2)return[];const e=[2];for(let n=3;n<=i;n++){let s=!1;for(const r of e)s=s||n%r===0;s||e.push(n)}return e}function bA(i){if(i<2||i>16)throw new Error("Invalid number of digits.");const e=[1,3,7,9],n=Math.pow(10,i-2);for(;;){const r=10*(Math.floor(Math.random()*9*n)+n)+e[Math.floor(4*Math.random())];if(So(r))return r}}function _A(i){if(i===4)return[2,2];let e=i/2,n=i/2;for(e%2===0&&(e--,n++);e>=3;){if(So(e)&&So(n))return[e,n];e-=2,n+=2}return[-1,-1]}function SA(i){if(i<=0)throw Error("Number should be greater than zero");let e=i;for(const n of ov(i))e*=(n-1)/n;return e}const TA=/^([0-9\-.]*)([%kmbtq]?)(\/([0-9\-.]+))?([%]?)$/,hv=i=>i>=Number.MAX_SAFE_INTEGER;class qt{constructor(e,n,s){this.unit=s,this.num=n!==void 0&&n<0?-e:e,n!==void 0&&Math.abs(n)!==1&&e!==0&&(this.den=Math.abs(n))}num;den;valueOf(){return this.value}toMixed(){if(!this.den||this.unit)return this.toString();const e=Math.abs(this.num)%this.den,n=Math.abs(Math.trunc(this.value));return n?`${this.sign<0?"":""}${n} ${e}/${this.den}`:this.toString()}toExpr(e,n=4){const s=this.value;if(Math.abs(s)>=Number.MAX_VALUE)return"";if((hv(this.num)||this.den&&hv(this.den))&&(e="decimal"),e==="scientific"||Math.abs(s)>=Number.MAX_SAFE_INTEGER){const[r,a]=this.value.toExponential(n-1).split("e");if(Math.abs(+a)>=n){const o=a.startsWith("-"),h=`${o?"(":""}${o?a:a.slice(1)}${o?")":""}`;return`${r.replace(/\.?0+$/,"")}  10^${h}${this.unit||""}`}}if(!this.unit&&!this.den||e==="decimal"||e==="scientific"){const r=Mo(this.value,n);return r.match(/^[\d.]+$/g)?r:`"${r}"`}else return e==="mixed"?this.toMixed():this.toString()}toString(e=4){const n=!this.den&&!this.unit;let s=Mo(this.num,this.den?0:e,n),r=this.unit||"";const a=this.den?`/${Mo(this.den,0,n)}`:"";return s==="0"&&(r=""),r===""&&!this.den&&(s==="1"||s==="1")&&(s=s.replace("1","")),`${s}${a}${r}`}toMathML(){let e=`<mn>${this.num}</mn>`;return this.den!==void 0&&(e=`<mfrac>${e}<mn>${this.den}</mn></mfrac>`),this.unit&&(e+=this.unit===""?"<mi></mi>":"<mo>%</mo>"),e}get value(){const e=this.unit==="%"?.01:this.unit===""?Math.PI:1;return this.num*e/(this.den||1)}get sign(){return Math.sign(this.num)}get simplified(){if(!this.den)return this;const e=_o(Math.abs(this.num),this.den);return new qt(this.num/e,this.den/e,this.unit)}get inverse(){return this.den?new qt(1/this.num,void 0,this.unit):new qt(this.den,this.num)}get negative(){return new qt(-this.num,this.den,this.unit)}get fraction(){if(!(this.unit||!Ni(this.num)))return[this.num,this.den||1]}static fromString(e){e=e.toLowerCase().replace(/[\s,"]/g,"").replace("","-").replace("pi","");const n=e.match(TA);if(!n)return;let s=n[2]||n[5]||void 0,r=n[1]?+n[1]:void 0;const a=n[4]?+n[4]:void 0;if(s===""&&(!n[1]||n[1]==="-")&&(r=n[1]?-1:1),r===void 0||isNaN(r))return;const o=s?"kmbtq".indexOf(s):-1;if(o>=0&&(r*=1e3**(o+1),s=void 0),a===void 0)return new qt(r,void 0,s);if(!(isNaN(a)||Tt(a,0)))return!Ni(r)||!Ni(a)?new qt(r/a,void 0,s):new qt(r,a,s)}static fractionFromDecimal(e,n=1e3,s=1e-12){let r=[1,0],a=[0,1];const o=Math.abs(e);let h=o;for(;Math.abs(r[0]/a[0]-o)>s;){const c=Math.floor(h);if(r=[c*r[0]+r[1],r[0]],a=[c*a[0]+a[1],a[0]],a[0]>n)return new qt(e);h=1/(h-c)}return Tt(r[0]/a[0],o,s)?new qt(Qm(e)*r[0],a[0]===1?void 0:a[0]):new qt(e)}clamp(e,n){const s=this.value;return e!==void 0&&s<e?new qt(e):n!==void 0&&s>n?new qt(n):this}add(e){return qt.sum(this,e)}subtract(e){return qt.difference(this,e)}multiply(e){return qt.product(this,e)}divide(e){return qt.quotient(this,e)}static sum(e,n){if(typeof n=="number"&&(n=new qt(n)),e.num===0)return n;if(e.unit!==n.unit)return new qt(e.value+n.value);if(!e.den&&!n.den)return new qt(e.num+n.num,void 0,e.unit);if(e.den||([e,n]=[n,e]),!Ni(n.num))return new qt(e.value+n.value,void 0,e.unit);const s=Jc(e.den,n.den||1),r=s/e.den,a=s/(n.den||1);return new qt(e.num*r+n.num*a,s,e.unit)}static difference(e,n){return typeof n=="number"&&(n=new qt(n)),qt.sum(e,n.negative)}static product(e,n){if(typeof n=="number"&&(n=new qt(n)),!e.unit&&!e.den&&Ni(e.num))return new qt(e.num*n.num,n.den,n.unit);if(!n.unit&&!n.den&&Ni(n.num))return new qt(e.num*n.num,e.den,e.unit);if(e.unit===""||n.unit===""||!Ni(e.num)||!Ni(n.num))return new qt(e.value*n.value);const s=(e.unit==="%"?100:1)*(n.unit==="%"?100:1);return new qt(e.num*n.num,(e.den||1)*(n.den||1)*s)}static quotient(e,n){return typeof n=="number"&&(n=new qt(n)),qt.product(e,n.inverse)}}function cv(i,e,n){return x0(i,e,n)}function lv(i=2){const e=cv(0,i,i);for(let n=0;n<i;++n)e[n][n]=1;return e}function EA(i){const e=Math.sin(i),n=Math.cos(i);return[[n,-e],[e,n]]}function zA(i){return[[1,i],[0,1]]}function CA(i){const e=Math.sin(2*i),n=Math.cos(2*i);return[[n,e],[e,-n]]}function uv(...i){const[e,...n]=i,s=n.length>1?uv(...n):n[0];if(e.length!==s.length||e[0].length!==s[0].length)throw new Error("Matrix sizes dont match");const r=[];for(let a=0;a<e.length;++a){const o=[];for(let h=0;h<e[a].length;++h)o.push(e[a][h]+s[a][h]);r.push(o)}return r}function AA(i,e){return i.map(n=>n.map(s=>s*e))}function Kc(...i){const[e,...n]=i,s=n.length>1?Kc(...n):n[0];if(e[0].length!==s.length)throw new Error("Matrix sizes dont match.");const r=[];for(let a=0;a<e.length;++a){const o=[];for(let h=0;h<s[0].length;++h){let c=0;for(let l=0;l<s.length;++l)c+=e[a][l]*s[l][h];o.push(c)}r.push(o)}return r}function fv(i){const e=[];for(let n=0;n<i[0].length;++n){const s=[];for(let r=0;r<i.length;++r)s.push(i[r][n]);e.push(s)}return e}function PA(i){if(i.length!==i[0].length)throw new Error("Not a square matrix.");const e=i.length;if(e===1)return i[0][0];if(e===2)return i[0][0]*i[1][1]-i[0][1]*i[1][0];let n=0;for(let s=0;s<e;++s){let r=i[0][s],a=i[0][s];for(let o=1;o<e;++o)a*=i[o][(s+o)%e],r*=i[o][(s-o+e)%e];n+=a-r}return n}function dv(i){const e=i.length;if(e!==i[0].length)throw new Error("Not a square matrix.");const n=lv(e),s=Gm((r,a)=>i[r][a],e,e);for(let r=0;r<e;++r){let a=s[r][r];if(Tt(a,0)){for(let o=r+1;o<e;++o)if(s[o][r]!==0){for(let h=0;h<e;++h)[s[o][h],s[r][h]]=[s[r][h],s[o][h]],[n[o][h],n[r][h]]=[n[r][h],n[o][h]];break}if(a=s[r][r],Tt(a,0))throw new Error("Matrix not invertible.")}for(let o=0;o<e;++o)s[r][o]=s[r][o]/a,n[r][o]=n[r][o]/a;for(let o=0;o<e;++o){if(o===r)continue;const h=s[o][r];for(let c=0;c<e;++c)s[o][c]-=h*s[r][c],n[o][c]-=h*n[r][c]}}return n}const IA=Object.freeze(Object.defineProperty({__proto__:null,determinant:PA,fill:cv,identity:lv,inverse:dv,product:Kc,reflection:CA,rotation:EA,scalarProduct:AA,shear:zA,sum:uv,transpose:fv},Symbol.toStringTag,{value:"Module"}));function RA(i){i=i.slice(0);for(let e=i.length-1;e>0;--e){const n=Math.floor(Math.random()*(e+1));[i[e],i[n]]=[i[n],i[e]]}return i}function OA(i,e){const n=e===void 0?0:i,s=e===void 0?i:e-i+1;return n+Math.floor(s*Math.random())}function pv(i){const e=Math.random()*qe(i);let n=0;return i.findIndex(s=>(n+=s)>=e)}function kA(i){return i[Math.floor(i.length*Math.random())]}const tl=new Map;function LA(i,e){e||(e=qm()),tl.has(e)||tl.set(e,y0(1,i));const n=tl.get(e),s=pv(n.map(r=>r*r));return n[s]-=1,n[s]<=0&&tl.set(e,n.map(r=>r+1)),s}function yv(i=.5){return Math.random()<i?1:0}function FA(i=1,e=.5){let n=0;for(let s=0;s<i;++s)n+=yv(e);return n}function NA(i=1){if(i<=0)return 0;const e=Math.exp(-i);let n=1,s=0;for(;n>e;++s)n*=Math.random();return s-1}function b0(i=0,e=1){return i+(e-i)*Math.random()}function BA(i=0,e=1){const n=Math.random(),s=Math.random();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*s)*Math.sqrt(e)+i}function DA(i=1){return i<=0?0:-Math.log(Math.random())/i}function qA(i=.5){if(!(i<=0||i>1))return Math.floor(Math.log(Math.random())/Math.log(1-i))}function $A(){let i,e,n;do e=2*Math.random()-1,n=2*Math.random()-1,i=e*e+n*n;while(i>=1);return e/n}function VA(i,e=1,n=0){return Math.exp(-((i-e)**2)/(2*n))/Math.sqrt(2*Math.PI*n)}const xv=7,gv=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];function mv(i){if(i<.5)return Math.PI/(Math.sin(Math.PI*i)*mv(1-i));i-=1;let e=gv[0];for(let s=1;s<xv+2;s++)e+=gv[s]/(i+s);const n=i+xv+.5;return Math.sqrt(2*Math.PI)*Math.pow(n,i+.5)*Math.exp(-n)*e}function vv(i,e,n,s=1){let r=0;for(let a=e;a<n;a+=s)r+=i(a)*s||0;return r}function GA(i,e){return 1-vv(s=>Math.pow(s,(e-2)/2)*Math.exp(-s/2),0,i)/Math.pow(2,e/2)/mv(e/2)}const UA=Object.freeze(Object.defineProperty({__proto__:null,bernoulli:yv,binomial:FA,cauchy:$A,chiCDF:GA,exponential:DA,find:kA,geometric:qA,integer:OA,integrate:vv,normal:BA,normalPDF:VA,poisson:NA,shuffle:RA,smart:LA,uniform:b0,weighted:pv},Symbol.toStringTag,{value:"Module"}));function WA(i,e){let n=1,s=i[0];for(let r=1;r<i.length;++r)n*=e,s+=n*i[r];return s}function YA(i,e=!1){let n=0,s=0,r=0,a=0;const o=i.length;for(let l=0;l<o;l++)n+=i[l][0],s+=i[l][1],r+=i[l][0]*i[l][0],a+=i[l][0]*i[l][1];if(e)return[0,a/r];const h=(o*a-n*s)/(o*r-n*n);return[s/o-h*n/o,h]}function jA(i){const e=[0,0,0,0,0,0];for(const a of i)e[0]+=a[0],e[1]+=a[1],e[2]+=a[0]*a[0]*a[1],e[3]+=a[1]*Math.log(a[1]),e[4]+=a[0]*a[1]*Math.log(a[1]),e[5]+=a[0]*a[1];const n=e[1]*e[2]-e[5]*e[5],s=Math.exp((e[2]*e[3]-e[5]*e[4])/n),r=(e[1]*e[4]-e[5]*e[3])/n;return[s,r]}function HA(i){const e=[0,0,0,0],n=i.length;for(const a of i)e[0]+=Math.log(a[0]),e[1]+=a[1]*Math.log(a[0]),e[2]+=a[1],e[3]+=Math.pow(Math.log(a[0]),2);const s=(n*e[1]-e[2]*e[0])/(n*e[3]-e[0]*e[0]);return[(e[2]-s*e[0])/n,s]}function XA(i){const e=[0,0,0,0],n=i.length;for(const a of i)e[0]+=Math.log(a[0]),e[1]+=Math.log(a[1])*Math.log(a[0]),e[2]+=Math.log(a[1]),e[3]+=Math.pow(Math.log(a[0]),2);const s=(n*e[1]-e[2]*e[0])/(n*e[3]-e[0]*e[0]);return[Math.exp((e[2]-s*e[0])/n),s]}function wv(i,e=2){const n=i.map(c=>Um(e+1).map(l=>Math.pow(c[0],l))),s=fv(n),r=i.map(c=>[c[1]]),a=Kc(s,n),o=dv(a);return Kc(o,s,r).map(c=>c[0])}function Mv(i,e){const s=i.reduce((o,h)=>o+h[1],0)/i.length,r=i.reduce((o,h)=>o+(h[1]-s)**2,0);return 1-i.reduce((o,h)=>o+(h[1]-e(h[0]))**2,0)/r}function ZA(i,e=.85,n=8){if(!(i.length<=1))for(let s=1;s<n;++s){const r=wv(i,s),a=h=>WA(r,h);if(Mv(i,a)>=e)return{order:s,coefficients:r,fn:a}}}const JA=Object.freeze(Object.defineProperty({__proto__:null,bestPolynomial:ZA,coefficient:Mv,exponential:jA,linear:YA,logarithmic:HA,polynomial:wv,power:XA},Symbol.toStringTag,{value:"Module"}));function bv(i){return i.length?qe(i)/i.length:0}function _v(i,e,n=1){const s=i.length;if(!s)return 0;const r=i.slice(0).sort((h,c)=>h-c);if(e===0)return r[0];if(e===1)return r[s-1];if(![1,2,3].includes(n))throw new RangeError("Invalid quantile method.");const a=n===1?s*e-.5:n===2?(s-1)*e:(s+1)*e-1;if(Number.isInteger(a))return r[a];const o=Math.floor(a);return Xc(r[o],r[o+1],a-o)}function QA(i,e=1){return _v(i,.5,e)}function KA(i){const e=new Map;let n=-1,s;for(const r of i){e.has(r)||e.set(r,0);const a=e.get(r)+1;e.set(r,a),a===n?s=void 0:a>n&&(n=a,s=r)}return s}function Sv(i){if(!i.length)return;const e=bv(i);return i.reduce((s,r)=>s+(r-e)**2,0)/(i.length-1)}function _0(i){const e=Sv(i);return e?Math.sqrt(e):0}function Tv(i,e){if(i.length!==e.length)throw new Error("Array length mismatch.");return(i.reduce((s,r,a)=>s+r*e[a],0)-qe(i)*qe(e)/i.length)/i.length}function tP(i,e){if(i.length!==e.length)throw new Error("Array length mismatch.");const n=Tv(i,e),s=_0(i),r=_0(e);return n/(s*r)}class el extends Array{constructor(...e){super();for(const n of e)this.push(n)}get magnitude(){let e=0;for(let n=0;n<this.length;++n)e+=this[n]**2;return Math.sqrt(e)}get unitVector(){return this.scale(1/this.magnitude)}scale(e){return this.map(n=>e*n)}static sum(e,n){if(e.length!==n.length)throw new Error("Mismatched vector sizes.");return e.map((s,r)=>s+n[r])}static difference(e,n){if(e.length!==n.length)throw new Error("Mismatched vector sizes.");return e.map((s,r)=>s-n[r])}static product(e,n){if(e.length!==n.length)throw new Error("Mismatched vector sizes.");return e.map((s,r)=>s*n[r])}static dot(e,n){return qe(el.product(e,n))}static cross(e,n){if(e.length!==3||n.length!==3)throw new Error("Cross product requires vectors of size 3.");return new el(e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0])}static equals(e,n){const s=e.length;if(s!==n.length)return!1;for(let r=0;r<s;++r)if(!Tt(e[r],n[r]))return!1;return!0}}const eP=Object.freeze(Object.defineProperty({__proto__:null,Complex:ae,Matrix:IA,Random:UA,Regression:JA,Vector:el,XNumber:qt,binomial:iv,clamp:Zn,correlation:tP,covariance:Tv,cube:xA,digits:yA,eulerPhi:SA,factorial:vA,gcd:_o,generatePrime:bA,goldbach:_A,isBetween:Xn,isInteger:Ni,isPrime:So,lcm:Jc,lerp:Xc,listPrimes:MA,log:gA,mean:bv,median:QA,mod:ev,mode:KA,nearlyEquals:Tt,numberFormat:Mo,parseNumber:lA,permutations:wA,polynomial:mA,primeFactorisation:Qc,primeFactors:ov,quadratic:nv,quantile:_v,round:bo,roundTo:M0,scientificFormat:aA,sign:Qm,square:kn,stdDev:_0,subsets:rv,toOrdinal:uA,toWord:pA,variance:Sv},Symbol.toStringTag,{value:"Module"})),Le=2*Math.PI;function ia(i,e){const n=Math.atan2(i.y-(e?e.y:0),i.x-(e?e.x:0));return ev(n,Le)}function Ev(i,e){let n,s=1/0,r=-1;for(const[a,o]of e.entries()){const h=o.project(i),c=st.distance(i,h);c<s&&(n=h,s=c,r=a)}return n?[n,r]:void 0}let st=class Jt{constructor(e=0,n=0){this.x=e,this.y=n}type="point";get unitVector(){return Tt(this.length,0)?new Jt(1,0):this.scale(1/this.length)}get length(){return Math.sqrt(this.x**2+this.y**2)}get inverse(){return new Jt(-this.x,-this.y)}get flip(){return new Jt(this.y,this.x)}get perpendicular(){return new Jt(-this.y,this.x)}get array(){return[this.x,this.y]}distanceFromLine(e){return Jt.distance(this,e.project(this))}clamp(e,n=0){const s=Zn(this.x,e.xMin+n,e.xMax-n),r=Zn(this.y,e.yMin+n,e.yMax-n);return new Jt(s,r)}changeCoordinates(e,n){const s=n.xMin+(this.x-e.xMin)/e.dx*n.dx,r=n.yMin+(this.y-e.yMin)/e.dy*n.dy;return new Jt(s,r)}add(e){return Jt.sum(this,e)}subtract(e){return Jt.difference(this,e)}round(e=1){return new Jt(M0(this.x,e),M0(this.y,e))}floor(){return new Jt(Math.floor(this.x),Math.floor(this.y))}mod(e,n=e){return new Jt(this.x%e,this.y%n)}angle(e=mn){return ia(this,e)}snap(e,n=5){return Tt(this.x,e.x,n)?new Jt(e.x,this.y):Tt(this.y,e.y,n)?new Jt(this.x,e.y):this}static average(...e){const n=qe(e.map(r=>r.x))/e.length,s=qe(e.map(r=>r.y))/e.length;return new Jt(n,s)}static dot(e,n){return e.x*n.x+e.y*n.y}static sum(e,n){return new Jt(e.x+n.x,e.y+n.y)}static difference(e,n){return new Jt(e.x-n.x,e.y-n.y)}static distance(e,n){return Math.sqrt(kn(e.x-n.x)+kn(e.y-n.y))}static manhattan(e,n){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)}static interpolate(e,n,s=.5){return new Jt(Xc(e.x,n.x,s),Xc(e.y,n.y,s))}static interpolateList(e,n=.5){const s=e.length-1,r=Math.floor(Zn(n,0,1)*s);return Jt.interpolate(e[r],e[r+1],s*n-r)}static fromPolar(e,n=1){return new Jt(n*Math.cos(e),n*Math.sin(e))}static random(e){const n=b0(e.xMin,e.xMax),s=b0(e.yMin,e.yMax);return new Jt(n,s)}static equals(e,n,s){return Tt(e.x,n.x,s)&&Tt(e.y,n.y,s)}static colinear(e,n,s,r){const a=e.x-n.x,o=e.y-n.y,h=n.x-s.x,c=n.y-s.y;return Tt(a*c,h*o,r)}transform(e){const n=e[0][0]*this.x+e[0][1]*this.y+e[0][2],s=e[1][0]*this.x+e[1][1]*this.y+e[1][2];return new Jt(n,s)}rotate(e,n=mn){if(Tt(e,0))return this;const s=this.x-n.x,r=this.y-n.y,a=Math.cos(e),o=Math.sin(e),h=s*a-r*o+n.x,c=s*o+r*a+n.y;return new Jt(h,c)}reflect(e){const n=e.p2.x-e.p1.x,s=e.p2.y-e.p1.y,r=this.x-e.p1.x,a=this.y-e.p1.y,o=(n*a-s*r)/(n*n+s*s),h=this.x+2*o*s,c=this.y-2*o*n;return new Jt(h,c)}scale(e,n=e){return new Jt(this.x*e,this.y*n)}shift(e,n=e){return new Jt(this.x+e,this.y+n)}translate(e){return this.shift(e.x,e.y)}equals(e,n){return Jt.equals(this,e,n)}toString(){return`point(${this.x},${this.y})`}};const mn=new st(0,0);function nl(i){return["polygon","polyline","rectangle","triangle"].includes(i.type)}function zv(i){return["polygon","triangle"].includes(i.type)}function S0(i){return i.type==="polyline"}function T0(i){return i.type==="rectangle"}function Zs(i){return["line","ray","segment"].includes(i.type)}function Cv(i){return i.type==="line"}function To(i){return i.type==="ray"}function Eo(i){return i.type==="segment"}function Js(i){return i.type==="circle"}function E0(i){return i.type==="ellipse"}function zo(i){return i.type==="arc"}function Av(i){return i.type==="sector"}function Co(i){return i.type==="angle"}function nP(i){return i.type==="point"}let vn=class Fh{constructor(e,n){this.p1=e,this.p2=n}type="line";flag;["constructor"];get length(){return st.distance(this.p1,this.p2)}get lengthSquared(){return(this.p1.x-this.p2.x)**2+(this.p1.y-this.p2.y)**2}get midpoint(){return st.average(this.p1,this.p2)}get slope(){return(this.p2.y-this.p1.y)/(this.p2.x-this.p1.x)}get intercept(){return this.p1.y-this.slope*this.p1.x}get angle(){return ia(this.p2,this.p1)}get unitVector(){return this.p2.subtract(this.p1).unitVector}get perpendicularVector(){return new st(this.p2.y-this.p1.y,this.p1.x-this.p2.x).unitVector}parallel(e){return new Fh(e,e.add(this.p2).subtract(this.p1))}perpendicular(e){const n=this.line.project(e);return st.equals(e,n)?new Fh(n,n.add(this.perpendicularVector.scale(this.length/2))):new Fh(n,e)}get perpendicularBisector(){return this.perpendicular(this.midpoint)}distanceSquared(e){const n=this.project(e);return(e.x-n.x)**2+(e.y-n.y)**2}get line(){return this.type==="line"?this:new Fh(this.p1,this.p2)}get ray(){return To(this)?this:new Pv(this.p1,this.p2)}get segment(){return Eo(this)?this:new Qs(this.p1,this.p2)}offset(e){const n=st.difference(this.p2,this.p1),s=st.difference(e,this.p1);return st.dot(n,s)/this.lengthSquared}project(e){return this.at(this.offset(e))}side(e,n){const s=st.difference(this.p2,this.p1),r=st.difference(e,this.p1),a=r.x*s.y-r.y*s.x;return Tt(a,0,n)?0:Math.sign(a)}contains(e,n){return this.side(e,n)===0}at(e){return st.interpolate(this.p1,this.p2,e)}transform(e){return new this.constructor(this.p1.transform(e),this.p2.transform(e))}rotate(e,n=mn){return Tt(e,0)?this:new this.constructor(this.p1.rotate(e,n),this.p2.rotate(e,n))}reflect(e){return new this.constructor(this.p1.reflect(e),this.p2.reflect(e))}scale(e,n=e){return new this.constructor(this.p1.scale(e,n),this.p2.scale(e,n))}shift(e,n=e){return new this.constructor(this.p1.shift(e,n),this.p2.shift(e,n))}translate(e){return this.shift(e.x,e.y)}equals(e,n){return this.contains(e.p1,n)&&this.contains(e.p2,n)}toString(){return`line(${this.p1},${this.p2})`}},Pv=class extends vn{type="ray";equals(e,n){return e.type!=="ray"||!this.p1.equals(e.p1,n)?!1:this.p2.equals(e.p2,n)?!0:e.contains(this.p2,n)||this.contains(e.p2,n)}contains(e,n){if(!super.contains(e,n))return!1;const s=this.offset(e);return Tt(s,0,n)||s>0}toString(){return`ray(${this.p1},${this.p2})`}};class Qs extends vn{type="segment";contains(e,n){return super.contains(e,n)?this.p1.equals(e,n)||this.p2.equals(e,n)?!0:Tt(this.p1.x,this.p2.x,n)?Xn(e.y,this.p1.y,this.p2.y):Xn(e.x,this.p1.x,this.p2.x):!1}project(e){const n=st.difference(this.p2,this.p1),s=st.difference(e,this.p1),r=Zn(st.dot(n,s)/this.lengthSquared,0,1);return this.p1.add(n.scale(r))}contract(e){return new Qs(this.at(e),this.at(1-e))}equals(e,n,s=!1){return e.type!=="segment"?!1:this.p1.equals(e.p1,n)&&this.p2.equals(e.p2,n)||!s&&this.p1.equals(e.p2,n)&&this.p2.equals(e.p1,n)}toString(){return`segment(${this.p1},${this.p2})`}}let il=class $a{constructor(e=mn,n=1){this.c=e,this.r=n}type="circle";get circumference(){return Le*this.r}get area(){return Math.PI*this.r**2}get arc(){const e=this.c.shift(this.r,0);return new Ao(this.c,e,Le)}tangentAt(e){const n=this.at(e),s=this.c.rotate(Math.PI/2,n);return new vn(n,s)}collision(e){const n=this.c.x<e.p.x?e.p.x:this.c.x>e.p.x+e.w?e.p.x+e.w:this.c.x,s=this.c.y<e.p.y?e.p.y:this.c.y>e.p.y+e.h?e.p.y+e.h:this.c.y;return st.distance(this.c,new st(n,s))<=this.r}project(e){const n=e.subtract(this.c).unitVector.scale(this.r);return st.sum(this.c,n)}at(e){const n=Le*e;return this.c.shift(this.r*Math.cos(n),this.r*Math.sin(n))}offset(e){return ia(e,this.c)/Le}contains(e){return st.distance(e,this.c)<=this.r}transform(e){const n=Math.abs(e[0][0])+Math.abs(e[1][1]);return new $a(this.c.transform(e),this.r*n/2)}rotate(e,n=mn){return Tt(e,0)?this:new $a(this.c.rotate(e,n),this.r)}reflect(e){return new $a(this.c.reflect(e),this.r)}scale(e,n=e){return new $a(this.c.scale(e,n),this.r*(e+n)/2)}shift(e,n=e){return new $a(this.c.shift(e,n),this.r)}translate(e){return this.shift(e.x,e.y)}equals(e,n){return Tt(this.r,e.r,n)&&this.c.equals(e.c,n)}toString(){return`circle(${this.c},${this.r})`}};class Ao{constructor(e,n,s){this.c=e,this.start=n,this.angle=s}type="arc";["constructor"];get circle(){return new il(this.c,this.radius)}get radius(){return st.distance(this.c,this.start)}get end(){return this.start.rotate(this.angle,this.c)}get startAngle(){return ia(this.start,this.c)}contract(e){return new this.constructor(this.c,this.at(e/2),this.angle*(1-e))}get minor(){return this.angle<=Math.PI?this:new this.constructor(this.c,this.end,Le-this.angle)}get major(){return this.angle>=Math.PI?this:new this.constructor(this.c,this.end,Le-this.angle)}get center(){return this.at(.5)}project(e){const n=this.startAngle,s=n+this.angle;let r=ia(e,this.c);return s>Le&&r<s-Le&&(r+=Le),r=Zn(r,n,s),this.c.shift(this.radius,0).rotate(r,this.c)}at(e){return this.start.rotate(this.angle*e,this.c)}offset(e){return new sl(this.start,this.c,e).rad/this.angle}contains(e){return e.equals(this.project(e))}transform(e){return new this.constructor(this.c.transform(e),this.start.transform(e),this.angle)}rotate(e,n=mn){return Tt(e,0)?this:new this.constructor(this.c.rotate(e,n),this.start.rotate(e,n),this.angle)}reflect(e){return new this.constructor(this.c.reflect(e),this.start.reflect(e),this.angle)}scale(e,n=e){return new this.constructor(this.c.scale(e,n),this.start.scale(e,n),this.angle)}shift(e,n=e){return new this.constructor(this.c.shift(e,n),this.start.shift(e,n),this.angle)}translate(e){return this.shift(e.x,e.y)}equals(){return!1}toString(){return`arc(${this.c},${this.start},${this.angle})`}}class Iv extends Ao{type="sector";contains(e){return st.distance(e,this.c)<=this.radius&&new sl(this.start,this.c,e).rad<=this.angle}toString(){return`sector(${this.c},${this.start},${this.angle})`}}function iP(i,e){return Tt(i.p1.x,i.p2.x)?Xn(e.y,i.p1.y,i.p2.y):Xn(e.x,i.p1.x,i.p2.x)}function sP(i,e){return Tt(i.p1.x,i.p2.x)?(e.y-i.p1.y)/(i.p2.y-i.p1.y)>0:(e.x-i.p1.x)/(i.p2.x-i.p1.x)>0}function rP(i,e){return Xn(i.offset(e),0,1)}function aP(i,e){const n=i.p1.x-i.p2.x,s=i.p1.y-i.p2.y,r=e.p1.x-e.p2.x,a=e.p1.y-e.p2.y,o=n*a-s*r;if(Tt(o,0))return[];const h=i.p1.x*i.p2.y-i.p1.y*i.p2.x,c=e.p1.x*e.p2.y-e.p1.y*e.p2.x,l=h*r-n*c,u=h*a-s*c;return[new st(l/o,u/o)]}function oP(i,e){const n=st.distance(i.c,e.c);if(n>i.r+e.r)return[];if(n<Math.abs(i.r-e.r))return[];if(Tt(n,0)&&Tt(i.r,e.r))return[];if(Tt(n,i.r+e.r))return[new vn(i.c,e.c).midpoint];const s=(kn(i.r)-kn(e.r)+kn(n))/(2*n),r=Math.sqrt(kn(i.r)-kn(s)),a=(e.c.x-i.c.x)*s/n+(e.c.y-i.c.y)*r/n+i.c.x,o=(e.c.y-i.c.y)*s/n-(e.c.x-i.c.x)*r/n+i.c.y,h=(e.c.x-i.c.x)*s/n-(e.c.y-i.c.y)*r/n+i.c.x,c=(e.c.y-i.c.y)*s/n+(e.c.x-i.c.x)*r/n+i.c.y;return[new st(a,o),new st(h,c)]}function Rv(i,e){const n=i.p2.x-i.p1.x,s=i.p2.y-i.p1.y,r=kn(n)+kn(s),a=e.c.x,o=e.c.y,h=(i.p1.x-a)*(i.p2.y-o)-(i.p2.x-a)*(i.p1.y-o),c=kn(e.r)*r-kn(h);if(c<0)return[];const l=h*s/r,u=-h*n/r;if(Tt(c,0))return[e.c.shift(l,u)];const f=n*(s<0?-1:1)*Math.sqrt(c)/r,d=Math.abs(s)*Math.sqrt(c)/r;return[e.c.shift(l+f,u+d),e.c.shift(l-f,u-d)]}function hP(i,e){let n=[];const s=zo(i)?i.circle:i,r=zo(e)?e.circle:e;Zs(i)&&Zs(e)?n=aP(i,e):Zs(s)&&Js(r)?n=Rv(s,r):Js(s)&&Zs(r)?n=Rv(r,s):Js(s)&&Js(r)&&(n=oP(s,r));for(const a of[i,e])Eo(a)&&(n=n.filter(o=>iP(a,o))),To(a)&&(n=n.filter(o=>sP(a,o))),zo(a)&&(n=n.filter(o=>rP(a,o)));return n}function hs(...i){if(i.length<2)return[];if(i.length>2)return m0(rv(i,2).map(s=>hs(...s)));let[e,n]=i;if(Co(e)&&(e=e.shape(!0)),Co(n)&&(n=n.shape(!0)),nl(n)&&([e,n]=[n,e]),nl(e)){const s=Zs(n)?e.points.filter(r=>n.contains(r)):[];for(const r of e.edges)s.push(...hs(r,n));return s}return hP(e,n)}let sa=class Nh{type="polygon";points;["constructor"];constructor(...e){this.points=e}get circumference(){if(this.points.length<=1)return 0;let e=st.distance(this.points[0],g0(this.points));for(let n=1;n<this.points.length;++n)e+=st.distance(this.points[n-1],this.points[n]);return e}get signedArea(){const e=this.points,n=e.length;let s=e[n-1].x*e[0].y-e[0].x*e[n-1].y;for(let r=1;r<n;++r)s+=e[r-1].x*e[r].y-e[r].x*e[r-1].y;return s/2}get area(){return Math.abs(this.signedArea)}get centroid(){const e=this.points,n=e.length;let s=0;for(let a=0;a<n;++a)s+=e[a].x;let r=0;for(let a=0;a<n;++a)r+=e[a].y;return new st(s/n,r/n)}get edges(){const e=this.points.length,n=[];for(let s=0;s<e;++s)n.push(new Qs(this.points[s],this.points[(s+1)%e]));return n}get radius(){const e=this.centroid,n=this.points.map(s=>st.distance(s,e));return Math.max(...n)}get oriented(){if(this.signedArea>=0)return this;const e=[...this.points].reverse();return new this.constructor(...e)}static collision(e,n,s){if(e.points.some(r=>n.contains(r))||n.points.some(r=>e.contains(r)))return!0;for(const r of e.edges)for(const a of n.edges)if(hs(r,a)[0])return!0;return e.equals(n,s)}static regular(e,n=1){const s=Le/e,r=Math.PI/2-s/2,a=Wc(o=>st.fromPolar(r+s*o,n),e);return new Nh(...a)}static interpolate(e,n,s=.5){const r=e.points.map((a,o)=>st.interpolate(a,n.points[o],s));return new Nh(...r)}static convexHull(...e){if(e.length<=3)return new Nh(...e);const n=e.sort((o,h)=>o.x!==h.x?o.x-h.x:o.y-h.y),s=n.slice(0).reverse(),r=[],a=[];for(const[o,h]of[[n,r],[s,a]]){for(const c of o){for(;h.length>=2;){const l=h[h.length-1],u=h[h.length-2];if((l.x-u.x)*(c.y-u.y)>=(c.x-u.x)*(l.y-u.y))h.pop();else break}h.push(c)}h.pop()}return new Nh(...r.concat(a))}contains(e){let n=!1;for(const s of this.edges){if(s.p1.equals(e)||s.contains(e))return!1;if(s.p1.y>e.y==s.p2.y>e.y)continue;const r=(s.p2.x-s.p1.x)/(s.p2.y-s.p1.y);e.x<r*(e.y-s.p1.y)+s.p1.x&&(n=!n)}return n}at(e){e<0&&(e+=Math.floor(e));const n=e*this.circumference;let s=0;for(const r of this.edges){const a=r.length;if(s+a>n)return r.at((n-s)/a);s+=a}return this.points[0]}offset(e){const n=this.edges,s=Ev(e,this.edges)||[this.points[0],0];let r=0;for(let a=0;a<s[1];++a)r+=n[a].length;return r+=n[s[1]].offset(e)*n[s[1]].length,r/this.circumference}project(e){const n=Ev(e,this.edges);return n?n[0]:this.points[0]}centerAt(e=mn){return this.translate(e.subtract(this.centroid))}transform(e){return new this.constructor(...this.points.map(n=>n.transform(e)))}rotate(e,n=mn){if(Tt(e,0))return this;const s=this.points.map(r=>r.rotate(e,n));return new this.constructor(...s)}reflect(e){const n=this.points.map(s=>s.reflect(e));return new this.constructor(...n)}scale(e,n=e){const s=this.points.map(r=>r.scale(e,n));return new this.constructor(...s)}shift(e,n=e){const s=this.points.map(r=>r.shift(e,n));return new this.constructor(...s)}translate(e){return this.shift(e.x,e.y)}equals(e,n,s){const r=this.points.length;if(r!==e.points.length)return!1;const a=s?this:this.oriented,o=s?e:e.oriented;for(let h=0;h<r;++h)if(a.points.every((c,l)=>c.equals(o.points[(l+h)%r],n)))return!0;return!1}toString(){return`polygon(${this.points.join(",")})`}};class Ov extends sa{type="polyline";get circumference(){return this.length}get length(){let e=0;for(let n=1;n<this.points.length;++n)e+=st.distance(this.points[n-1],this.points[n]);return e}get edges(){const e=[];for(let n=0;n<this.points.length-1;++n)e.push(new Qs(this.points[n],this.points[n+1]));return e}toString(){return`polyline(${this.points.join(",")})`}}let cP=class extends sa{type="triangle";get circumcircle(){const[e,n,s]=this.points,r=2*(e.x*(n.y-s.y)+n.x*(s.y-e.y)+s.x*(e.y-n.y)),a=(e.x**2+e.y**2)*(n.y-s.y)+(n.x**2+n.y**2)*(s.y-e.y)+(s.x**2+s.y**2)*(e.y-n.y),o=(e.x**2+e.y**2)*(s.x-n.x)+(n.x**2+n.y**2)*(e.x-s.x)+(s.x**2+s.y**2)*(n.x-e.x),h=new st(a/r,o/r),c=st.distance(h,this.points[0]);if(!(isNaN(c)||c>Number.MAX_SAFE_INTEGER))return new il(h,c)}get incircle(){const e=this.edges,n=e.map(f=>f.length),s=n[0]+n[1]+n[2],[r,a,o]=this.points,h=n[1]*r.x+n[2]*a.x+n[0]*o.x,c=n[1]*r.y+n[2]*a.y+n[0]*o.y,l=new st(h/s,c/s),u=l.distanceFromLine(e[0]);return isNaN(u)?void 0:new il(l,u)}get orthocenter(){const[e,n,s]=this.points,r=new vn(e,n).perpendicular(s),a=new vn(e,s).perpendicular(n);return hs(r,a)[0]}};const lP=180/Math.PI,uP=Math.PI/180;function kv(i){return i*lP}function fP(i){return i*uP}let sl=class ai{constructor(e,n,s){this.a=e,this.b=n,this.c=s}type="angle";static fromDegrees(e){return ai.fromRadians(e*(Math.PI/180))}static fromRadians(e){const n=new st(1,0),s=n.rotate(e);return new ai(n,mn,s)}static equals(e,n,s=Math.PI/360){return Tt(e.rad,n.rad,s)}get rad(){const e=Math.atan2(this.a.y-this.b.y,this.a.x-this.b.x);let s=Math.atan2(this.c.y-this.b.y,this.c.x-this.b.x)-e;return s<0&&(s+=Le),s}get deg(){return this.rad*180/Math.PI}get isRight(){return Tt(this.rad,Math.PI/2,Math.PI/360)}get bisector(){if(this.b.equals(this.a)||this.b.equals(this.c))return;const e=Math.atan2(this.a.y-this.b.y,this.a.x-this.b.x),n=Math.atan2(this.c.y-this.b.y,this.c.x-this.b.x);let s=(e+n)/2;e>n&&(s+=Math.PI);const r=Math.cos(s)+this.b.x,a=Math.sin(s)+this.b.y;return new vn(this.b,new st(r,a))}get sup(){return this.rad<Math.PI?this:new ai(this.c,this.b,this.a)}get arc(){return new Ao(this.b,this.a,this.rad)}get radius(){return 24+20*(1-Zn(this.rad,0,Math.PI)/Math.PI)}shape(e=!0,n,s){if(this.a.equals(this.b)||this.c.equals(this.b))return new sa(mn);const r=this.isRight&&!s;n||(n=r?20:this.radius);const a=new Qs(this.b,this.a),o=a.at(n/a.length);if(r){const h=st.difference(this.c,this.b).unitVector.scale(n);return e?new sa(this.b,o,o.add(h),this.b.add(h)):new Ov(o,o.add(h),this.b.add(h))}return e?new Iv(this.b,o,this.rad):new Ao(this.b,o,this.rad)}project(e){return this.contains(e)?e:this.shape(!0).project(e)}at(){return this.c}offset(){return 0}contains(e){return this.shape(!0).contains(e)}transform(e){return new ai(this.a.transform(e),this.b.transform(e),this.c.transform(e))}rotate(e,n){return Tt(e,0)?this:new ai(this.a.rotate(e,n),this.b.rotate(e,n),this.c.rotate(e,n))}reflect(e){return new ai(this.a.reflect(e),this.b.reflect(e),this.c.reflect(e))}scale(e,n=e){return new ai(this.a.scale(e,n),this.b.scale(e,n),this.c.scale(e,n))}shift(e,n=e){return new ai(this.a.shift(e,n),this.b.shift(e,n),this.c.shift(e,n))}translate(e){return new ai(this.a.translate(e),this.b.translate(e),this.c.translate(e))}equals(e,n){return ai.equals(e,this,n)}toString(){return`angle(${this.a},${this.b},${this.c})`}},Lv=class Va{constructor(e,n=1,s=n){this.p=e,this.w=n,this.h=s}type="rectangle";static aroundPoints(e){let n=1/0,s=-1/0,r=1/0,a=-1/0;for(const o of e)n=n<o.x?n:o.x,s=s>o.x?s:o.x,r=r<o.y?r:o.y,a=a>o.y?a:o.y;return new Va(new st(n,r),s-n,a-r)}get center(){return new st(this.p.x+this.w/2,this.p.y+this.h/2)}get centroid(){return this.center}get circumference(){return 2*Math.abs(this.w)+2*Math.abs(this.h)}get area(){return Math.abs(this.signedArea)}get signedArea(){return this.w*this.h}get edges(){return this.polygon.edges}get points(){return this.polygon.points}get polygon(){const e=new st(this.p.x+this.w,this.p.y),n=new st(this.p.x+this.w,this.p.y+this.h),s=new st(this.p.x,this.p.y+this.h);return new sa(this.p,e,n,s)}get bounds(){return new ra(this.p.x,this.p.x+this.w,this.p.y,this.p.y+this.h)}collision(e){return this.p.x<e.p.x+e.w&&this.p.x+this.w>e.p.x&&this.p.y<e.p.y+e.h&&this.p.y+this.h>e.p.y||this.equals(e.polygon)}padding(e,n,s,r){return new Va(this.p.shift(-r,-e),this.w+r+n,this.h+e+s)}get unsigned(){if(this.w>0&&this.h>0)return this;const e=this.p.shift(this.w<0?this.w:0,this.h<0?this.h:0);return new Va(e,Math.abs(this.w),Math.abs(this.h))}contains(e,n){return Xn(e.x,this.p.x,this.p.x+this.w,n)&&Xn(e.y,this.p.y,this.p.y+this.h,n)}project(e){let n;for(const s of this.edges){const r=s.project(e);(!n||st.distance(e,r)<st.distance(e,n))&&(n=r)}return n}at(e){return this.polygon.at(e)}offset(e){return this.polygon.offset(e)}get oriented(){return this.polygon.oriented}transform(e){return this.polygon.transform(e)}rotate(e,n=mn){return Tt(e,0)?this:this.polygon.rotate(e,n)}reflect(e){return this.polygon.reflect(e)}scale(e,n=e){return new Va(this.p.scale(e,n),this.w*e,this.h*n)}shift(e,n=e){return new Va(this.p.shift(e,n),this.w,this.h)}translate(e){return this.shift(e.x,e.y)}equals(e){return this.polygon.equals(e)}toString(){return`rectangle(${this.p},${this.w},${this.h})`}};class ra{constructor(e,n,s,r,a){this.xMin=e,this.xMax=n,this.yMin=s,this.yMax=r,a==="swap"?(this.dx<0&&([this.xMin,this.xMax]=[n,e]),this.dy<0&&([this.yMin,this.yMax]=[r,s])):a==="center"&&(this.dx<0&&(this.xMin=this.xMax=(e+n)/2),this.dy<0&&(this.yMin=this.yMax=(s+r)/2))}contains(e){return this.containsX(e)&&this.containsY(e)}containsX(e){return Xn(e.x,this.xMin,this.xMax)}containsY(e){return Xn(e.y,this.yMin,this.yMax)}resize(e,n){return new ra(this.xMin,this.xMax+e,this.yMin,this.yMax+n)}get dx(){return this.xMax-this.xMin}get dy(){return this.yMax-this.yMin}get xRange(){return[this.xMin,this.xMax]}get yRange(){return[this.yMin,this.yMax]}extend(e,n=e,s=e,r=n){return new ra(this.xMin-r,this.xMax+n,this.yMin-e,this.yMax+s)}get rect(){return new Lv(new st(this.xMin,this.yMin),this.dx,this.dy)}get center(){return new st(this.xMin+this.dx/2,this.yMin+this.dy/2)}get flip(){return new ra(this.yMin,this.yMax,this.xMin,this.xMax)}}function Fv(i,e,n={}){if(Co(e))return Fv(i,e.shape(!!n.fill),n);if(n.fill&&(i.fillStyle=n.fill),n.opacity&&(i.globalAlpha=n.opacity),n.stroke&&(i.strokeStyle=n.stroke,i.lineWidth=n.strokeWidth||1,n.lineCap&&(i.lineCap=n.lineCap),n.lineJoin&&(i.lineJoin=n.lineJoin)),i.beginPath(),Eo(e))i.moveTo(e.p1.x,e.p1.y),i.lineTo(e.p2.x,e.p2.y);else if(Zs(e)){if(!n.box)return;let[s,r]=hs(e,n.box);if(To(e)&&(r=e.p1),!s||!r)return;i.moveTo(s.x,s.y),i.lineTo(r.x,r.y)}else if(Js(e))i.arc(e.c.x,e.c.y,e.r,0,Le);else if(nl(e)){const s=e.points;i.moveTo(s[0].x,s[0].y);for(const r of s.slice(1))i.lineTo(r.x,r.y);i.closePath()}else if(S0(e)){i.moveTo(e.points[0].x,e.points[0].y);for(const s of e.points.slice(1))i.lineTo(s.x,s.y)}else E0(e)&&i.ellipse(e.c.x,e.c.y,e.a,e.b,e.angle,0,Le);n.fill&&i.fill(),n.stroke&&i.stroke()}const dP=4*(Math.sqrt(2)-1)/3;function Nv(i,e,n){const r=e.x*(n.y-i.y)+i.x*(e.y-n.y)+n.x*(i.y-e.y)>0?1:0,a=st.distance(e,i);return[i.x,`${i.y}A${a}`,a,0,r,1,n.x,n.y].join(",")}function wn(...i){return`M${i.map(e=>`${e.x},${e.y}`).join("L")}`}function z0(i,e){const n=i.perpendicularVector.scale(6),s=i.unitVector.scale(3),r=i.midpoint;switch(e){case"bar":return wn(r.add(n),r.add(n.inverse));case"bar2":return wn(r.add(s).add(n),r.add(s).add(n.inverse))+wn(r.add(s.inverse).add(n),r.add(s.inverse).add(n.inverse));case"arrow":return wn(r.add(s.inverse).add(n),r.add(s),r.add(s.inverse).add(n.inverse));case"arrow2":return wn(r.add(s.scale(-2)).add(n),r,r.add(s.scale(-2)).add(n.inverse))+wn(r.add(n),r.add(s.scale(2)),r.add(n.inverse));default:return""}}function rl(i,e){if(!i||!e)return"";const n=e.perpendicular,s=i.add(e.scale(9)).add(n.scale(9)),r=i.add(e.scale(9)).add(n.scale(-9));return wn(s,i,r)}function pP(i,e){let n="";return wo(e,"start","both")&&(n+=rl(i.p1,i.unitVector)),wo(e,"end","both")&&(n+=rl(i.p2,i.unitVector.inverse)),n}function yP(i,e){let n="";if(wo(e,"start","both")){const s=new vn(i.c,i.start).perpendicularVector.inverse;n+=rl(i.start,s)}if(wo(e,"end","both")){const s=new vn(i.c,i.end).perpendicularVector;n+=rl(i.end,s)}return n}function C0(i,e){const n=st.distance(i[0],i[1]),s=st.distance(i[1],i[2]),r=Math.max(.1,n/2),a=Math.max(.1,s/2),o=Math.min(e,r,a),h=o/n,c=o/s,l=1-dP,u=st.interpolate(i[0],i[1],Zn(1-h,0,1)),f=st.interpolate(i[0],i[1],Zn(1-h*l,0,1)),d=st.interpolate(i[1],i[2],Zn(c*l,0,1)),p=st.interpolate(i[1],i[2],Zn(c,0,1));return[u,f,d,p]}function Bv(i,e,n=!1){e<0&&(e=0);let s="M";if(!n)s+=`${i[0].x} ${i[0].y}`;else{const r=i[i.length-1],a=i[0],o=i[1],h=C0([r,a,o],e);s+=`${h[3].x} ${h[3].y}`}for(let r=0;r<i.length;r++)if(r<i.length-2||n){const a=i[r],o=i[(r+1)%i.length],h=i[(r+2)%i.length],c=C0([a,o,h],e).map(l=>`${l.x} ${l.y}`);s+=`L${c[0]}C${c[1]} ${c[2]} ${c[3]}`}else r===i.length-2&&!n&&(s+=`L${i[r+1].x} ${i[r+1].y}`);return s}function xP(i,e,n=e,s=e,r=n){const{p:a,w:o,h}=i;return`M${a.x} ${a.y+e}a${e} ${e} 0 0 1 ${e} ${-e}h${o-e-n}a${n} ${n} 0 0 1 ${n} ${n}v${h-n-s}a${s} ${s} 0 0 1 ${-s} ${s}h${-o+r+s}a${r} ${r} 0 0 1 ${-r} ${-r}Z`}function Dv(i,e={}){if(Co(i)){const n=i.shape(!!e.fill,e.size,e.round);return Dv(n,e)}if(Eo(i)){if(i.p1.equals(i.p2))return"";let n=wn(i.p1,i.p2);return e.mark&&(n+=z0(i,e.mark)),e.arrows&&(n+=pP(i,e.arrows)),n}if(To(i)){if(!e.box)return"";const n=hs(i,e.box)[0];if(!n)return"";let s=wn(i.p1,n);return e.mark&&(s+=z0(i,e.mark)),s}if(Cv(i)){if(!e.box)return"";const n=hs(i,e.box);if(n.length<2)return"";let s=wn(n[0],n[1]);return e.mark&&(s+=z0(i,e.mark)),s}if(Js(i))return`M${i.c.x-i.r} ${i.c.y}a${i.r},${i.r} 0 1 0 ${2*i.r} 0a${i.r} ${i.r} 0 1 0 ${-2*i.r} 0Z`;if(E0(i)){const[n,s]=i.majorVertices,r=kv(i.angle);return`M${n.x} ${n.y}A${i.a} ${i.b} ${r} 0 0 ${s.x} ${s.y}A${i.a} ${i.b} ${r} 0 0 ${n.x} ${n.y}Z`}if(zo(i)){let n=`M${Nv(i.start,i.c,i.end)}`;return e.arrows&&(n+=yP(i,e.arrows)),n}return Av(i)?`M${i.c.x} ${i.c.y} L ${Nv(i.start,i.c,i.end)}Z`:S0(i)?e.cornerRadius?Bv(i.points,e.cornerRadius,!1):wn(...i.points):zv(i)||T0(i)&&e.cornerRadius?e.cornerRadius?Bv(i.points,e.cornerRadius,!0):`${wn(...i.points)}Z`:T0(i)?`${wn(...i.polygon.points)}Z`:""}const gP=Object.freeze(Object.defineProperty({__proto__:null,mathigon:{core:nA,fermat:eP,euclid:Object.freeze(Object.defineProperty({__proto__:null,Angle:sl,Arc:Ao,Bounds:ra,Circle:il,Ellipse:class Fr{constructor(e,n,s,r=0){this.c=e,n<s&&([n,s]=[s,n],r+=Math.PI/2),this.a=n,this.b=s,this.angle=r;const a=Math.sqrt(n**2-s**2);this.f1=this.c.add(new st(-a,0).rotate(r)),this.f2=this.c.add(new st(a,0).rotate(r))}type="ellipse";a;b;angle;f1;f2;get rx(){return Tt(this.angle,0)?this.a:Tt(this.angle,Math.PI/2)?this.b:void 0}get ry(){return Tt(this.angle,0)?this.b:Tt(this.angle,Math.PI/2)?this.a:void 0}normalAt(e){return new sl(this.f1,e,this.f2).bisector}intersect(e){e=e.rotate(-this.angle,this.c);const n=e.p1.x-e.p2.x,s=e.p1.y-e.p2.y,r=this.c.x-e.p1.x,a=this.c.y-e.p1.y,o=(n/this.a)**2+(s/this.b)**2,h=2*r*n/this.a**2+2*a*s/this.b**2,c=(r/this.a)**2+(a/this.b)**2-1;return nv(o,h,c).map(u=>e.at(u).rotate(this.angle,this.c))}static fromFoci(e,n,s){const r=st.distance(e,n)/2,a=s/2,o=Math.sqrt(a**2-r**2),h=new vn(e,n).angle;return new Fr(st.interpolate(e,n),a,o,h)}get majorVertices(){return[this.c.add(new st(-this.a,0).rotate(this.angle)),this.c.add(new st(this.a,0).rotate(this.angle))]}get minorVertices(){return[this.c.add(new st(0,-this.b).rotate(this.angle)),this.c.add(new st(0,this.b).rotate(this.angle))]}get extremes(){const{a:e,b:n,angle:s}=this,r=Math.cos(s),a=Math.sin(s),o=e**2+n**2,h=(e**2-n**2)*Math.cos(2*s),c=Math.sqrt((o-h)/2),l=c*o*a*r/(e**2*a**2+n**2*r**2),u=Math.sqrt((o+h)/2),f=u*o*a*r/(e**2*r**2+n**2*a**2);return[new st(l,c).add(this.c),new st(l,c).inverse.add(this.c),new st(u,f).add(this.c),new st(u,f).inverse.add(this.c)]}project(e){e=e.rotate(-this.angle,this.c);const n=e.angle(this.c);return this.at(n/Le)}at(e){const n=Le*e;return this.c.shift(this.a*Math.cos(n),this.b*Math.sin(n)).rotate(this.angle,this.c)}offset(e){return .5}contains(e){const n=Math.cos(this.angle),s=Math.sin(this.angle),r=n**2/this.a**2+s**2/this.b**2,a=2*n*s*(1/this.a**2-1/this.b**2),o=s**2/this.a**2+n**2/this.b**2;return r*e.x**2+a*e.x*e.y+o*e.y**2<=1}transform(e){return this}rotate(e,n=mn){const s=new vn(this.f1,this.f2).rotate(e,n);return Fr.fromFoci(s.p1,s.p2,this.a*2)}reflect(e){const n=new vn(this.f1,this.f2).reflect(e);return Fr.fromFoci(n.p1,n.p2,this.a*2)}scale(e,n=e){return new Fr(this.c.scale(e,n),this.a*e,this.b*n,this.angle)}shift(e,n=e){return new Fr(this.c.shift(e,n),this.a,this.b,this.angle)}translate(e){return new Fr(this.c.translate(e),this.a,this.b,this.angle)}equals(e,n){return Tt(this.a,e.a,n)&&Tt(this.b,e.b,n)&&Tt(this.angle,e.angle,n)&&this.c.equals(e.c,n)}toString(){return`ellipse(${this.c},${this.a},${this.b},${this.angle})`}},Line:vn,ORIGIN:mn,Point:st,Polygon:sa,Polyline:Ov,Ray:Pv,Rectangle:Lv,Sector:Iv,Segment:Qs,TWO_PI:Le,Triangle:cP,drawCanvas:Fv,drawRoundedRect:xP,drawSVG:Dv,getBezierPoints:C0,intersections:hs,isAngle:Co,isArc:zo,isCircle:Js,isEllipse:E0,isLine:Cv,isLineLike:Zs,isPoint:nP,isPolygon:zv,isPolygonLike:nl,isPolyline:S0,isRay:To,isRectangle:T0,isSector:Av,isSegment:Eo,rad:ia,toDeg:kv,toRad:fP},Symbol.toStringTag,{value:"Module"}))}},Symbol.toStringTag,{value:"Module"}));var mP=20,vP=1,Ks=1e6,qv=1e6,wP=-7,MP=21,bP=!1,Po="[big.js] ",tr=Po+"Invalid ",al=tr+"decimal places",_P=tr+"rounding mode",$v=Po+"Division by zero",Wt={},gi=void 0,SP=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Vv(){function i(e){var n=this;if(!(n instanceof i))return e===gi&&arguments.length===0?Vv():new i(e);if(e instanceof i)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(i.strict===!0&&typeof e!="bigint")throw TypeError(tr+"value");e=e===0&&1/e<0?"-0":String(e)}TP(n,e)}n.constructor=i}return i.prototype=Wt,i.DP=mP,i.RM=vP,i.NE=wP,i.PE=MP,i.strict=bP,i.roundDown=0,i.roundHalfUp=1,i.roundHalfEven=2,i.roundUp=3,i}function TP(i,e){var n,s,r;if(!SP.test(e))throw Error(tr+"number");for(i.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(n<0&&(n=s),n+=+e.slice(s+1),e=e.substring(0,s)):n<0&&(n=e.length),r=e.length,s=0;s<r&&e.charAt(s)=="0";)++s;if(s==r)i.c=[i.e=0];else{for(;r>0&&e.charAt(--r)=="0";);for(i.e=n-s-1,i.c=[],n=0;s<=r;)i.c[n++]=+e.charAt(s++)}return i}function er(i,e,n,s){var r=i.c;if(n===gi&&(n=i.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(_P);if(e<1)s=n===3&&(s||!!r[0])||e===0&&(n===1&&r[0]>=5||n===2&&(r[0]>5||r[0]===5&&(s||r[1]!==gi))),r.length=1,s?(i.e=i.e-e+1,r[0]=1):r[0]=i.e=0;else if(e<r.length){if(s=n===1&&r[e]>=5||n===2&&(r[e]>5||r[e]===5&&(s||r[e+1]!==gi||r[e-1]&1))||n===3&&(s||!!r[0]),r.length=e,s){for(;++r[--e]>9;)if(r[e]=0,e===0){++i.e,r.unshift(1);break}}for(e=r.length;!r[--e];)r.pop()}return i}function nr(i,e,n){var s=i.e,r=i.c.join(""),a=r.length;if(e)r=r.charAt(0)+(a>1?"."+r.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)r="0"+r;r="0."+r}else if(s>0)if(++s>a)for(s-=a;s--;)r+="0";else s<a&&(r=r.slice(0,s)+"."+r.slice(s));else a>1&&(r=r.charAt(0)+"."+r.slice(1));return i.s<0&&n?"-"+r:r}Wt.abs=function(){var i=new this.constructor(this);return i.s=1,i},Wt.cmp=function(i){var e,n=this,s=n.c,r=(i=new n.constructor(i)).c,a=n.s,o=i.s,h=n.e,c=i.e;if(!s[0]||!r[0])return s[0]?a:r[0]?-o:0;if(a!=o)return a;if(e=a<0,h!=c)return h>c^e?1:-1;for(o=(h=s.length)<(c=r.length)?h:c,a=-1;++a<o;)if(s[a]!=r[a])return s[a]>r[a]^e?1:-1;return h==c?0:h>c^e?1:-1},Wt.div=function(i){var e=this,n=e.constructor,s=e.c,r=(i=new n(i)).c,a=e.s==i.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Ks)throw Error(al);if(!r[0])throw Error($v);if(!s[0])return i.s=a,i.c=[i.e=0],i;var h,c,l,u,f,d=r.slice(),p=h=r.length,y=s.length,x=s.slice(0,h),g=x.length,m=i,v=m.c=[],w=0,b=o+(m.e=e.e-i.e)+1;for(m.s=a,a=b<0?0:b,d.unshift(0);g++<h;)x.push(0);do{for(l=0;l<10;l++){if(h!=(g=x.length))u=h>g?1:-1;else for(f=-1,u=0;++f<h;)if(r[f]!=x[f]){u=r[f]>x[f]?1:-1;break}if(u<0){for(c=g==h?r:d;g;){if(x[--g]<c[g]){for(f=g;f&&!x[--f];)x[f]=9;--x[f],x[g]+=10}x[g]-=c[g]}for(;!x[0];)x.shift()}else break}v[w++]=u?l:++l,x[0]&&u?x[g]=s[p]||0:x=[s[p]]}while((p++<y||x[0]!==gi)&&a--);return!v[0]&&w!=1&&(v.shift(),m.e--,b--),w>b&&er(m,b,n.RM,x[0]!==gi),m},Wt.eq=function(i){return this.cmp(i)===0},Wt.gt=function(i){return this.cmp(i)>0},Wt.gte=function(i){return this.cmp(i)>-1},Wt.lt=function(i){return this.cmp(i)<0},Wt.lte=function(i){return this.cmp(i)<1},Wt.minus=Wt.sub=function(i){var e,n,s,r,a=this,o=a.constructor,h=a.s,c=(i=new o(i)).s;if(h!=c)return i.s=-c,a.plus(i);var l=a.c.slice(),u=a.e,f=i.c,d=i.e;if(!l[0]||!f[0])return f[0]?i.s=-c:l[0]?i=new o(a):i.s=1,i;if(h=u-d){for((r=h<0)?(h=-h,s=l):(d=u,s=f),s.reverse(),c=h;c--;)s.push(0);s.reverse()}else for(n=((r=l.length<f.length)?l:f).length,h=c=0;c<n;c++)if(l[c]!=f[c]){r=l[c]<f[c];break}if(r&&(s=l,l=f,f=s,i.s=-i.s),(c=(n=f.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>h;){if(l[--n]<f[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=f[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--d;return l[0]||(i.s=1,l=[d=0]),i.c=l,i.e=d,i},Wt.mod=function(i){var e,n=this,s=n.constructor,r=n.s,a=(i=new s(i)).s;if(!i.c[0])throw Error($v);return n.s=i.s=1,e=i.cmp(n)==1,n.s=r,i.s=a,e?new s(n):(r=s.DP,a=s.RM,s.DP=s.RM=0,n=n.div(i),s.DP=r,s.RM=a,this.minus(n.times(i)))},Wt.neg=function(){var i=new this.constructor(this);return i.s=-i.s,i},Wt.plus=Wt.add=function(i){var e,n,s,r=this,a=r.constructor;if(i=new a(i),r.s!=i.s)return i.s=-i.s,r.minus(i);var o=r.e,h=r.c,c=i.e,l=i.c;if(!h[0]||!l[0])return l[0]||(h[0]?i=new a(r):i.s=r.s),i;if(h=h.slice(),e=o-c){for(e>0?(c=o,s=l):(e=-e,s=h),s.reverse();e--;)s.push(0);s.reverse()}for(h.length-l.length<0&&(s=l,l=h,h=s),e=l.length,n=0;e;h[e]%=10)n=(h[--e]=h[e]+l[e]+n)/10|0;for(n&&(h.unshift(n),++c),e=h.length;h[--e]===0;)h.pop();return i.c=h,i.e=c,i},Wt.pow=function(i){var e=this,n=new e.constructor("1"),s=n,r=i<0;if(i!==~~i||i<-qv||i>qv)throw Error(tr+"exponent");for(r&&(i=-i);i&1&&(s=s.times(e)),i>>=1,!!i;)e=e.times(e);return r?n.div(s):s},Wt.prec=function(i,e){if(i!==~~i||i<1||i>Ks)throw Error(tr+"precision");return er(new this.constructor(this),i,e)},Wt.round=function(i,e){if(i===gi)i=0;else if(i!==~~i||i<-Ks||i>Ks)throw Error(al);return er(new this.constructor(this),i+this.e+1,e)},Wt.sqrt=function(){var i,e,n,s=this,r=s.constructor,a=s.s,o=s.e,h=new r("0.5");if(!s.c[0])return new r(s);if(a<0)throw Error(Po+"No square root");a=Math.sqrt(+nr(s,!0,!0)),a===0||a===1/0?(e=s.c.join(""),e.length+o&1||(e+="0"),a=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),i=new r((a==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+o)):i=new r(a+""),o=i.e+(r.DP+=4);do n=i,i=h.times(n.plus(s.div(n)));while(n.c.slice(0,o).join("")!==i.c.slice(0,o).join(""));return er(i,(r.DP-=4)+i.e+1,r.RM)},Wt.times=Wt.mul=function(i){var e,n=this,s=n.constructor,r=n.c,a=(i=new s(i)).c,o=r.length,h=a.length,c=n.e,l=i.e;if(i.s=n.s==i.s?1:-1,!r[0]||!a[0])return i.c=[i.e=0],i;for(i.e=c+l,o<h&&(e=r,r=a,a=e,l=o,o=h,h=l),e=new Array(l=o+h);l--;)e[l]=0;for(c=h;c--;){for(h=0,l=o+c;l>c;)h=e[l]+a[c]*r[l-c-1]+h,e[l--]=h%10,h=h/10|0;e[l]=h}for(h?++i.e:e.shift(),c=e.length;!e[--c];)e.pop();return i.c=e,i},Wt.toExponential=function(i,e){var n=this,s=n.c[0];if(i!==gi){if(i!==~~i||i<0||i>Ks)throw Error(al);for(n=er(new n.constructor(n),++i,e);n.c.length<i;)n.c.push(0)}return nr(n,!0,!!s)},Wt.toFixed=function(i,e){var n=this,s=n.c[0];if(i!==gi){if(i!==~~i||i<0||i>Ks)throw Error(al);for(n=er(new n.constructor(n),i+n.e+1,e),i=i+n.e+1;n.c.length<i;)n.c.push(0)}return nr(n,!1,!!s)},Wt.toJSON=Wt.toString=function(){var i=this,e=i.constructor;return nr(i,i.e<=e.NE||i.e>=e.PE,!!i.c[0])},typeof Symbol<"u"&&(Wt[Symbol.for("nodejs.util.inspect.custom")]=Wt.toJSON),Wt.toNumber=function(){var i=+nr(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(i.toString()))throw Error(Po+"Imprecise conversion");return i},Wt.toPrecision=function(i,e){var n=this,s=n.constructor,r=n.c[0];if(i!==gi){if(i!==~~i||i<1||i>Ks)throw Error(tr+"precision");for(n=er(new s(n),i,e);n.c.length<i;)n.c.push(0)}return nr(n,i<=n.e||n.e<=s.NE||n.e>=s.PE,!!r)},Wt.valueOf=function(){var i=this,e=i.constructor;if(e.strict===!0)throw Error(Po+"valueOf disallowed");return nr(i,i.e<=e.NE||i.e>=e.PE,!0)};var EP=Vv(),Ae=function(i){var e=1e7,n=7,s=9007199254740992,r=d(s),a="0123456789abcdefghijklmnopqrstuvwxyz",o=typeof BigInt=="function";function h(z,O,D,q){return typeof z>"u"?h[0]:typeof O<"u"?+O==10&&!D?nt(z):Z(z,O,D,q):nt(z)}function c(z,O){this.value=z,this.sign=O,this.isSmall=!1}c.prototype=Object.create(h.prototype);function l(z){this.value=z,this.sign=z<0,this.isSmall=!0}l.prototype=Object.create(h.prototype);function u(z){this.value=z}u.prototype=Object.create(h.prototype);function f(z){return-s<z&&z<s}function d(z){return z<1e7?[z]:z<1e14?[z%1e7,Math.floor(z/1e7)]:[z%1e7,Math.floor(z/1e7)%1e7,Math.floor(z/1e14)]}function p(z){y(z);var O=z.length;if(O<4&&B(z,r)<0)switch(O){case 0:return 0;case 1:return z[0];case 2:return z[0]+z[1]*e;default:return z[0]+(z[1]+z[2]*e)*e}return z}function y(z){for(var O=z.length;z[--O]===0;);z.length=O+1}function x(z){for(var O=new Array(z),D=-1;++D<z;)O[D]=0;return O}function g(z){return z>0?Math.floor(z):Math.ceil(z)}function m(z,O){var D=z.length,q=O.length,U=new Array(D),G=0,W=e,Y,Q;for(Q=0;Q<q;Q++)Y=z[Q]+O[Q]+G,G=Y>=W?1:0,U[Q]=Y-G*W;for(;Q<D;)Y=z[Q]+G,G=Y===W?1:0,U[Q++]=Y-G*W;return G>0&&U.push(G),U}function v(z,O){return z.length>=O.length?m(z,O):m(O,z)}function w(z,O){var D=z.length,q=new Array(D),U=e,G,W;for(W=0;W<D;W++)G=z[W]-U+O,O=Math.floor(G/U),q[W]=G-O*U,O+=1;for(;O>0;)q[W++]=O%U,O=Math.floor(O/U);return q}c.prototype.add=function(z){var O=nt(z);if(this.sign!==O.sign)return this.subtract(O.negate());var D=this.value,q=O.value;return O.isSmall?new c(w(D,Math.abs(q)),this.sign):new c(v(D,q),this.sign)},c.prototype.plus=c.prototype.add,l.prototype.add=function(z){var O=nt(z),D=this.value;if(D<0!==O.sign)return this.subtract(O.negate());var q=O.value;if(O.isSmall){if(f(D+q))return new l(D+q);q=d(Math.abs(q))}return new c(w(q,Math.abs(D)),D<0)},l.prototype.plus=l.prototype.add,u.prototype.add=function(z){return new u(this.value+nt(z).value)},u.prototype.plus=u.prototype.add;function b(z,O){var D=z.length,q=O.length,U=new Array(D),G=0,W=e,Y,Q;for(Y=0;Y<q;Y++)Q=z[Y]-G-O[Y],Q<0?(Q+=W,G=1):G=0,U[Y]=Q;for(Y=q;Y<D;Y++){if(Q=z[Y]-G,Q<0)Q+=W;else{U[Y++]=Q;break}U[Y]=Q}for(;Y<D;Y++)U[Y]=z[Y];return y(U),U}function S(z,O,D){var q;return B(z,O)>=0?q=b(z,O):(q=b(O,z),D=!D),q=p(q),typeof q=="number"?(D&&(q=-q),new l(q)):new c(q,D)}function E(z,O,D){var q=z.length,U=new Array(q),G=-O,W=e,Y,Q;for(Y=0;Y<q;Y++)Q=z[Y]+G,G=Math.floor(Q/W),Q%=W,U[Y]=Q<0?Q+W:Q;return U=p(U),typeof U=="number"?(D&&(U=-U),new l(U)):new c(U,D)}c.prototype.subtract=function(z){var O=nt(z);if(this.sign!==O.sign)return this.add(O.negate());var D=this.value,q=O.value;return O.isSmall?E(D,Math.abs(q),this.sign):S(D,q,this.sign)},c.prototype.minus=c.prototype.subtract,l.prototype.subtract=function(z){var O=nt(z),D=this.value;if(D<0!==O.sign)return this.add(O.negate());var q=O.value;return O.isSmall?new l(D-q):E(q,Math.abs(D),D>=0)},l.prototype.minus=l.prototype.subtract,u.prototype.subtract=function(z){return new u(this.value-nt(z).value)},u.prototype.minus=u.prototype.subtract,c.prototype.negate=function(){return new c(this.value,!this.sign)},l.prototype.negate=function(){var z=this.sign,O=new l(-this.value);return O.sign=!z,O},u.prototype.negate=function(){return new u(-this.value)},c.prototype.abs=function(){return new c(this.value,!1)},l.prototype.abs=function(){return new l(Math.abs(this.value))},u.prototype.abs=function(){return new u(this.value>=0?this.value:-this.value)};function A(z,O){var D=z.length,q=O.length,U=D+q,G=x(U),W=e,Y,Q,Mt,Nt,Pt;for(Mt=0;Mt<D;++Mt){Nt=z[Mt];for(var Ht=0;Ht<q;++Ht)Pt=O[Ht],Y=Nt*Pt+G[Mt+Ht],Q=Math.floor(Y/W),G[Mt+Ht]=Y-Q*W,G[Mt+Ht+1]+=Q}return y(G),G}function M(z,O){var D=z.length,q=new Array(D),U=e,G=0,W,Y;for(Y=0;Y<D;Y++)W=z[Y]*O+G,G=Math.floor(W/U),q[Y]=W-G*U;for(;G>0;)q[Y++]=G%U,G=Math.floor(G/U);return q}function _(z,O){for(var D=[];O-- >0;)D.push(0);return D.concat(z)}function T(z,O){var D=Math.max(z.length,O.length);if(D<=30)return A(z,O);D=Math.ceil(D/2);var q=z.slice(D),U=z.slice(0,D),G=O.slice(D),W=O.slice(0,D),Y=T(U,W),Q=T(q,G),Mt=T(v(U,q),v(W,G)),Nt=v(v(Y,_(b(b(Mt,Y),Q),D)),_(Q,2*D));return y(Nt),Nt}function C(z,O){return-.012*z-.012*O+15e-6*z*O>0}c.prototype.multiply=function(z){var O=nt(z),D=this.value,q=O.value,U=this.sign!==O.sign,G;if(O.isSmall){if(q===0)return h[0];if(q===1)return this;if(q===-1)return this.negate();if(G=Math.abs(q),G<e)return new c(M(D,G),U);q=d(G)}return C(D.length,q.length)?new c(T(D,q),U):new c(A(D,q),U)},c.prototype.times=c.prototype.multiply;function P(z,O,D){return z<e?new c(M(O,z),D):new c(A(O,d(z)),D)}l.prototype._multiplyBySmall=function(z){return f(z.value*this.value)?new l(z.value*this.value):P(Math.abs(z.value),d(Math.abs(this.value)),this.sign!==z.sign)},c.prototype._multiplyBySmall=function(z){return z.value===0?h[0]:z.value===1?this:z.value===-1?this.negate():P(Math.abs(z.value),this.value,this.sign!==z.sign)},l.prototype.multiply=function(z){return nt(z)._multiplyBySmall(this)},l.prototype.times=l.prototype.multiply,u.prototype.multiply=function(z){return new u(this.value*nt(z).value)},u.prototype.times=u.prototype.multiply;function R(z){var O=z.length,D=x(O+O),q=e,U,G,W,Y,Q;for(W=0;W<O;W++){Y=z[W],G=0-Y*Y;for(var Mt=W;Mt<O;Mt++)Q=z[Mt],U=2*(Y*Q)+D[W+Mt]+G,G=Math.floor(U/q),D[W+Mt]=U-G*q;D[W+O]=G}return y(D),D}c.prototype.square=function(){return new c(R(this.value),!1)},l.prototype.square=function(){var z=this.value*this.value;return f(z)?new l(z):new c(R(d(Math.abs(this.value))),!1)},u.prototype.square=function(z){return new u(this.value*this.value)};function k(z,O){var D=z.length,q=O.length,U=e,G=x(O.length),W=O[q-1],Y=Math.ceil(U/(2*W)),Q=M(z,Y),Mt=M(O,Y),Nt,Pt,Ht,Sn,pn,ip,sp;for(Q.length<=D&&Q.push(0),Mt.push(0),W=Mt[q-1],Pt=D-q;Pt>=0;Pt--){for(Nt=U-1,Q[Pt+q]!==W&&(Nt=Math.floor((Q[Pt+q]*U+Q[Pt+q-1])/W)),Ht=0,Sn=0,ip=Mt.length,pn=0;pn<ip;pn++)Ht+=Nt*Mt[pn],sp=Math.floor(Ht/U),Sn+=Q[Pt+pn]-(Ht-sp*U),Ht=sp,Sn<0?(Q[Pt+pn]=Sn+U,Sn=-1):(Q[Pt+pn]=Sn,Sn=0);for(;Sn!==0;){for(Nt-=1,Ht=0,pn=0;pn<ip;pn++)Ht+=Q[Pt+pn]-U+Mt[pn],Ht<0?(Q[Pt+pn]=Ht+U,Ht=0):(Q[Pt+pn]=Ht,Ht=1);Sn+=Ht}G[Pt]=Nt}return Q=L(Q,Y)[0],[p(G),p(Q)]}function I(z,O){for(var D=z.length,q=O.length,U=[],G=[],W=e,Y,Q,Mt,Nt,Pt;D;){if(G.unshift(z[--D]),y(G),B(G,O)<0){U.push(0);continue}Q=G.length,Mt=G[Q-1]*W+G[Q-2],Nt=O[q-1]*W+O[q-2],Q>q&&(Mt=(Mt+1)*W),Y=Math.ceil(Mt/Nt);do{if(Pt=M(O,Y),B(Pt,G)<=0)break;Y--}while(Y);U.push(Y),G=b(G,Pt)}return U.reverse(),[p(U),p(G)]}function L(z,O){var D=z.length,q=x(D),U=e,G,W,Y,Q;for(Y=0,G=D-1;G>=0;--G)Q=Y*U+z[G],W=g(Q/O),Y=Q-W*O,q[G]=W|0;return[q,Y|0]}function F(z,O){var D,q=nt(O);if(o)return[new u(z.value/q.value),new u(z.value%q.value)];var U=z.value,G=q.value,W;if(G===0)throw new Error("Cannot divide by zero");if(z.isSmall)return q.isSmall?[new l(g(U/G)),new l(U%G)]:[h[0],z];if(q.isSmall){if(G===1)return[z,h[0]];if(G==-1)return[z.negate(),h[0]];var Y=Math.abs(G);if(Y<e){D=L(U,Y),W=p(D[0]);var Q=D[1];return z.sign&&(Q=-Q),typeof W=="number"?(z.sign!==q.sign&&(W=-W),[new l(W),new l(Q)]):[new c(W,z.sign!==q.sign),new l(Q)]}G=d(Y)}var Mt=B(U,G);if(Mt===-1)return[h[0],z];if(Mt===0)return[h[z.sign===q.sign?1:-1],h[0]];U.length+G.length<=200?D=k(U,G):D=I(U,G),W=D[0];var Nt=z.sign!==q.sign,Pt=D[1],Ht=z.sign;return typeof W=="number"?(Nt&&(W=-W),W=new l(W)):W=new c(W,Nt),typeof Pt=="number"?(Ht&&(Pt=-Pt),Pt=new l(Pt)):Pt=new c(Pt,Ht),[W,Pt]}c.prototype.divmod=function(z){var O=F(this,z);return{quotient:O[0],remainder:O[1]}},u.prototype.divmod=l.prototype.divmod=c.prototype.divmod,c.prototype.divide=function(z){return F(this,z)[0]},u.prototype.over=u.prototype.divide=function(z){return new u(this.value/nt(z).value)},l.prototype.over=l.prototype.divide=c.prototype.over=c.prototype.divide,c.prototype.mod=function(z){return F(this,z)[1]},u.prototype.mod=u.prototype.remainder=function(z){return new u(this.value%nt(z).value)},l.prototype.remainder=l.prototype.mod=c.prototype.remainder=c.prototype.mod,c.prototype.pow=function(z){var O=nt(z),D=this.value,q=O.value,U,G,W;if(q===0)return h[1];if(D===0)return h[0];if(D===1)return h[1];if(D===-1)return O.isEven()?h[1]:h[-1];if(O.sign)return h[0];if(!O.isSmall)throw new Error("The exponent "+O.toString()+" is too large.");if(this.isSmall&&f(U=Math.pow(D,q)))return new l(g(U));for(G=this,W=h[1];q&!0&&(W=W.times(G),--q),q!==0;)q/=2,G=G.square();return W},l.prototype.pow=c.prototype.pow,u.prototype.pow=function(z){var O=nt(z),D=this.value,q=O.value,U=BigInt(0),G=BigInt(1),W=BigInt(2);if(q===U)return h[1];if(D===U)return h[0];if(D===G)return h[1];if(D===BigInt(-1))return O.isEven()?h[1]:h[-1];if(O.isNegative())return new u(U);for(var Y=this,Q=h[1];(q&G)===G&&(Q=Q.times(Y),--q),q!==U;)q/=W,Y=Y.square();return Q},c.prototype.modPow=function(z,O){if(z=nt(z),O=nt(O),O.isZero())throw new Error("Cannot take modPow with modulus 0");var D=h[1],q=this.mod(O);for(z.isNegative()&&(z=z.multiply(h[-1]),q=q.modInv(O));z.isPositive();){if(q.isZero())return h[0];z.isOdd()&&(D=D.multiply(q).mod(O)),z=z.divide(2),q=q.square().mod(O)}return D},u.prototype.modPow=l.prototype.modPow=c.prototype.modPow;function B(z,O){if(z.length!==O.length)return z.length>O.length?1:-1;for(var D=z.length-1;D>=0;D--)if(z[D]!==O[D])return z[D]>O[D]?1:-1;return 0}c.prototype.compareAbs=function(z){var O=nt(z),D=this.value,q=O.value;return O.isSmall?1:B(D,q)},l.prototype.compareAbs=function(z){var O=nt(z),D=Math.abs(this.value),q=O.value;return O.isSmall?(q=Math.abs(q),D===q?0:D>q?1:-1):-1},u.prototype.compareAbs=function(z){var O=this.value,D=nt(z).value;return O=O>=0?O:-O,D=D>=0?D:-D,O===D?0:O>D?1:-1},c.prototype.compare=function(z){if(z===1/0)return-1;if(z===-1/0)return 1;var O=nt(z),D=this.value,q=O.value;return this.sign!==O.sign?O.sign?1:-1:O.isSmall?this.sign?-1:1:B(D,q)*(this.sign?-1:1)},c.prototype.compareTo=c.prototype.compare,l.prototype.compare=function(z){if(z===1/0)return-1;if(z===-1/0)return 1;var O=nt(z),D=this.value,q=O.value;return O.isSmall?D==q?0:D>q?1:-1:D<0!==O.sign?D<0?-1:1:D<0?1:-1},l.prototype.compareTo=l.prototype.compare,u.prototype.compare=function(z){if(z===1/0)return-1;if(z===-1/0)return 1;var O=this.value,D=nt(z).value;return O===D?0:O>D?1:-1},u.prototype.compareTo=u.prototype.compare,c.prototype.equals=function(z){return this.compare(z)===0},u.prototype.eq=u.prototype.equals=l.prototype.eq=l.prototype.equals=c.prototype.eq=c.prototype.equals,c.prototype.notEquals=function(z){return this.compare(z)!==0},u.prototype.neq=u.prototype.notEquals=l.prototype.neq=l.prototype.notEquals=c.prototype.neq=c.prototype.notEquals,c.prototype.greater=function(z){return this.compare(z)>0},u.prototype.gt=u.prototype.greater=l.prototype.gt=l.prototype.greater=c.prototype.gt=c.prototype.greater,c.prototype.lesser=function(z){return this.compare(z)<0},u.prototype.lt=u.prototype.lesser=l.prototype.lt=l.prototype.lesser=c.prototype.lt=c.prototype.lesser,c.prototype.greaterOrEquals=function(z){return this.compare(z)>=0},u.prototype.geq=u.prototype.greaterOrEquals=l.prototype.geq=l.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals,c.prototype.lesserOrEquals=function(z){return this.compare(z)<=0},u.prototype.leq=u.prototype.lesserOrEquals=l.prototype.leq=l.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals,c.prototype.isEven=function(){return(this.value[0]&1)===0},l.prototype.isEven=function(){return(this.value&1)===0},u.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},c.prototype.isOdd=function(){return(this.value[0]&1)===1},l.prototype.isOdd=function(){return(this.value&1)===1},u.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},c.prototype.isPositive=function(){return!this.sign},l.prototype.isPositive=function(){return this.value>0},u.prototype.isPositive=l.prototype.isPositive,c.prototype.isNegative=function(){return this.sign},l.prototype.isNegative=function(){return this.value<0},u.prototype.isNegative=l.prototype.isNegative,c.prototype.isUnit=function(){return!1},l.prototype.isUnit=function(){return Math.abs(this.value)===1},u.prototype.isUnit=function(){return this.abs().value===BigInt(1)},c.prototype.isZero=function(){return!1},l.prototype.isZero=function(){return this.value===0},u.prototype.isZero=function(){return this.value===BigInt(0)},c.prototype.isDivisibleBy=function(z){var O=nt(z);return O.isZero()?!1:O.isUnit()?!0:O.compareAbs(2)===0?this.isEven():this.mod(O).isZero()},u.prototype.isDivisibleBy=l.prototype.isDivisibleBy=c.prototype.isDivisibleBy;function V(z){var O=z.abs();if(O.isUnit())return!1;if(O.equals(2)||O.equals(3)||O.equals(5))return!0;if(O.isEven()||O.isDivisibleBy(3)||O.isDivisibleBy(5))return!1;if(O.lesser(49))return!0}function J(z,O){for(var D=z.prev(),q=D,U=0,G,W,Y;q.isEven();)q=q.divide(2),U++;t:for(W=0;W<O.length;W++)if(!z.lesser(O[W])&&(Y=Ae(O[W]).modPow(q,z),!(Y.isUnit()||Y.equals(D)))){for(G=U-1;G!=0;G--){if(Y=Y.square().mod(z),Y.isUnit())return!1;if(Y.equals(D))continue t}return!1}return!0}c.prototype.isPrime=function(z){var O=V(this);if(O!==i)return O;var D=this.abs(),q=D.bitLength();if(q<=64)return J(D,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var U=Math.log(2)*q.toJSNumber(),G=Math.ceil(z===!0?2*Math.pow(U,2):U),W=[],Y=0;Y<G;Y++)W.push(Ae(Y+2));return J(D,W)},u.prototype.isPrime=l.prototype.isPrime=c.prototype.isPrime,c.prototype.isProbablePrime=function(z,O){var D=V(this);if(D!==i)return D;for(var q=this.abs(),U=z===i?5:z,G=[],W=0;W<U;W++)G.push(Ae.randBetween(2,q.minus(2),O));return J(q,G)},u.prototype.isProbablePrime=l.prototype.isProbablePrime=c.prototype.isProbablePrime,c.prototype.modInv=function(z){for(var O=Ae.zero,D=Ae.one,q=nt(z),U=this.abs(),G,W,Y;!U.isZero();)G=q.divide(U),W=O,Y=q,O=D,q=U,D=W.subtract(G.multiply(D)),U=Y.subtract(G.multiply(U));if(!q.isUnit())throw new Error(this.toString()+" and "+z.toString()+" are not co-prime");return O.compare(0)===-1&&(O=O.add(z)),this.isNegative()?O.negate():O},u.prototype.modInv=l.prototype.modInv=c.prototype.modInv,c.prototype.next=function(){var z=this.value;return this.sign?E(z,1,this.sign):new c(w(z,1),this.sign)},l.prototype.next=function(){var z=this.value;return z+1<s?new l(z+1):new c(r,!1)},u.prototype.next=function(){return new u(this.value+BigInt(1))},c.prototype.prev=function(){var z=this.value;return this.sign?new c(w(z,1),!0):E(z,1,this.sign)},l.prototype.prev=function(){var z=this.value;return z-1>-s?new l(z-1):new c(r,!0)},u.prototype.prev=function(){return new u(this.value-BigInt(1))};for(var j=[1];2*j[j.length-1]<=e;)j.push(2*j[j.length-1]);var ht=j.length,rt=j[ht-1];function ft(z){return Math.abs(z)<=e}c.prototype.shiftLeft=function(z){var O=nt(z).toJSNumber();if(!ft(O))throw new Error(String(O)+" is too large for shifting.");if(O<0)return this.shiftRight(-O);var D=this;if(D.isZero())return D;for(;O>=ht;)D=D.multiply(rt),O-=ht-1;return D.multiply(j[O])},u.prototype.shiftLeft=l.prototype.shiftLeft=c.prototype.shiftLeft,c.prototype.shiftRight=function(z){var O,D=nt(z).toJSNumber();if(!ft(D))throw new Error(String(D)+" is too large for shifting.");if(D<0)return this.shiftLeft(-D);for(var q=this;D>=ht;){if(q.isZero()||q.isNegative()&&q.isUnit())return q;O=F(q,rt),q=O[1].isNegative()?O[0].prev():O[0],D-=ht-1}return O=F(q,j[D]),O[1].isNegative()?O[0].prev():O[0]},u.prototype.shiftRight=l.prototype.shiftRight=c.prototype.shiftRight;function lt(z,O,D){O=nt(O);for(var q=z.isNegative(),U=O.isNegative(),G=q?z.not():z,W=U?O.not():O,Y=0,Q=0,Mt=null,Nt=null,Pt=[];!G.isZero()||!W.isZero();)Mt=F(G,rt),Y=Mt[1].toJSNumber(),q&&(Y=rt-1-Y),Nt=F(W,rt),Q=Nt[1].toJSNumber(),U&&(Q=rt-1-Q),G=Mt[0],W=Nt[0],Pt.push(D(Y,Q));for(var Ht=D(q?1:0,U?1:0)!==0?Ae(-1):Ae(0),Sn=Pt.length-1;Sn>=0;Sn-=1)Ht=Ht.multiply(rt).add(Ae(Pt[Sn]));return Ht}c.prototype.not=function(){return this.negate().prev()},u.prototype.not=l.prototype.not=c.prototype.not,c.prototype.and=function(z){return lt(this,z,function(O,D){return O&D})},u.prototype.and=l.prototype.and=c.prototype.and,c.prototype.or=function(z){return lt(this,z,function(O,D){return O|D})},u.prototype.or=l.prototype.or=c.prototype.or,c.prototype.xor=function(z){return lt(this,z,function(O,D){return O^D})},u.prototype.xor=l.prototype.xor=c.prototype.xor;var wt=1<<30,Yt=(e&-e)*(e&-e)|wt;function ye(z){var O=z.value,D=typeof O=="number"?O|wt:typeof O=="bigint"?O|BigInt(wt):O[0]+O[1]*e|Yt;return D&-D}function ie(z,O){if(O.compareTo(z)<=0){var D=ie(z,O.square(O)),q=D.p,U=D.e,G=q.multiply(O);return G.compareTo(z)<=0?{p:G,e:U*2+1}:{p:q,e:U*2}}return{p:Ae(1),e:0}}c.prototype.bitLength=function(){var z=this;return z.compareTo(Ae(0))<0&&(z=z.negate().subtract(Ae(1))),z.compareTo(Ae(0))===0?Ae(0):Ae(ie(z,Ae(2)).e).add(Ae(1))},u.prototype.bitLength=l.prototype.bitLength=c.prototype.bitLength;function Se(z,O){return z=nt(z),O=nt(O),z.greater(O)?z:O}function xe(z,O){return z=nt(z),O=nt(O),z.lesser(O)?z:O}function te(z,O){if(z=nt(z).abs(),O=nt(O).abs(),z.equals(O))return z;if(z.isZero())return O;if(O.isZero())return z;for(var D=h[1],q,U;z.isEven()&&O.isEven();)q=xe(ye(z),ye(O)),z=z.divide(q),O=O.divide(q),D=D.multiply(q);for(;z.isEven();)z=z.divide(ye(z));do{for(;O.isEven();)O=O.divide(ye(O));z.greater(O)&&(U=O,O=z,z=U),O=O.subtract(z)}while(!O.isZero());return D.isUnit()?z:z.multiply(D)}function Zt(z,O){return z=nt(z).abs(),O=nt(O).abs(),z.divide(te(z,O)).multiply(O)}function H(z,O,D){z=nt(z),O=nt(O);var q=D||Math.random,U=xe(z,O),G=Se(z,O),W=G.subtract(U).add(1);if(W.isSmall)return U.add(Math.floor(q()*W));for(var Y=ot(W,e).value,Q=[],Mt=!0,Nt=0;Nt<Y.length;Nt++){var Pt=Mt?Y[Nt]+(Nt+1<Y.length?Y[Nt+1]/e:0):e,Ht=g(q()*Pt);Q.push(Ht),Ht<Y[Nt]&&(Mt=!1)}return U.add(h.fromArray(Q,e,!1))}var Z=function(z,O,D,q){D=D||a,z=String(z),q||(z=z.toLowerCase(),D=D.toLowerCase());var U=z.length,G,W=Math.abs(O),Y={};for(G=0;G<D.length;G++)Y[D[G]]=G;for(G=0;G<U;G++){var Q=z[G];if(Q!=="-"&&Q in Y&&Y[Q]>=W){if(Q==="1"&&W===1)continue;throw new Error(Q+" is not a valid digit in base "+O+".")}}O=nt(O);var Mt=[],Nt=z[0]==="-";for(G=Nt?1:0;G<z.length;G++){var Q=z[G];if(Q in Y)Mt.push(nt(Y[Q]));else if(Q==="<"){var Pt=G;do G++;while(z[G]!==">"&&G<z.length);Mt.push(nt(z.slice(Pt+1,G)))}else throw new Error(Q+" is not a valid character")}return et(Mt,O,Nt)};function et(z,O,D){var q=h[0],U=h[1],G;for(G=z.length-1;G>=0;G--)q=q.add(z[G].times(U)),U=U.times(O);return D?q.negate():q}function ut(z,O){return O=O||a,z<O.length?O[z]:"<"+z+">"}function ot(z,O){if(O=Ae(O),O.isZero()){if(z.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(O.equals(-1)){if(z.isZero())return{value:[0],isNegative:!1};if(z.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-z.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var D=Array.apply(null,Array(z.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return D.unshift([1]),{value:[].concat.apply([],D),isNegative:!1}}var q=!1;if(z.isNegative()&&O.isPositive()&&(q=!0,z=z.abs()),O.isUnit())return z.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(z.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:q};for(var U=[],G=z,W;G.isNegative()||G.compareAbs(O)>=0;){W=G.divmod(O),G=W.quotient;var Y=W.remainder;Y.isNegative()&&(Y=O.minus(Y).abs(),G=G.next()),U.push(Y.toJSNumber())}return U.push(G.toJSNumber()),{value:U.reverse(),isNegative:q}}function kt(z,O,D){var q=ot(z,O);return(q.isNegative?"-":"")+q.value.map(function(U){return ut(U,D)}).join("")}c.prototype.toArray=function(z){return ot(this,z)},l.prototype.toArray=function(z){return ot(this,z)},u.prototype.toArray=function(z){return ot(this,z)},c.prototype.toString=function(z,O){if(z===i&&(z=10),z!==10||O)return kt(this,z,O);for(var D=this.value,q=D.length,U=String(D[--q]),G="0000000",W;--q>=0;)W=String(D[q]),U+=G.slice(W.length)+W;var Y=this.sign?"-":"";return Y+U},l.prototype.toString=function(z,O){return z===i&&(z=10),z!=10||O?kt(this,z,O):String(this.value)},u.prototype.toString=l.prototype.toString,u.prototype.toJSON=c.prototype.toJSON=l.prototype.toJSON=function(){return this.toString()},c.prototype.valueOf=function(){return parseInt(this.toString(),10)},c.prototype.toJSNumber=c.prototype.valueOf,l.prototype.valueOf=function(){return this.value},l.prototype.toJSNumber=l.prototype.valueOf,u.prototype.valueOf=u.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function bt(z){if(f(+z)){var O=+z;if(O===g(O))return o?new u(BigInt(O)):new l(O);throw new Error("Invalid integer: "+z)}var D=z[0]==="-";D&&(z=z.slice(1));var q=z.split(/e/i);if(q.length>2)throw new Error("Invalid integer: "+q.join("e"));if(q.length===2){var U=q[1];if(U[0]==="+"&&(U=U.slice(1)),U=+U,U!==g(U)||!f(U))throw new Error("Invalid integer: "+U+" is not a valid exponent.");var G=q[0],W=G.indexOf(".");if(W>=0&&(U-=G.length-W-1,G=G.slice(0,W)+G.slice(W+1)),U<0)throw new Error("Cannot include negative exponent part for integers");G+=new Array(U+1).join("0"),z=G}var Y=/^([0-9][0-9]*)$/.test(z);if(!Y)throw new Error("Invalid integer: "+z);if(o)return new u(BigInt(D?"-"+z:z));for(var Q=[],Mt=z.length,Nt=n,Pt=Mt-Nt;Mt>0;)Q.push(+z.slice(Pt,Mt)),Pt-=Nt,Pt<0&&(Pt=0),Mt-=Nt;return y(Q),new c(Q,D)}function jt(z){if(o)return new u(BigInt(z));if(f(z)){if(z!==g(z))throw new Error(z+" is not an integer.");return new l(z)}return bt(z.toString())}function nt(z){return typeof z=="number"?jt(z):typeof z=="string"?bt(z):typeof z=="bigint"?new u(z):z}for(var ee=0;ee<1e3;ee++)h[ee]=nt(ee),ee>0&&(h[-ee]=nt(-ee));return h.one=h[1],h.zero=h[0],h.minusOne=h[-1],h.max=Se,h.min=xe,h.gcd=te,h.lcm=Zt,h.isInstance=function(z){return z instanceof c||z instanceof l||z instanceof u},h.randBetween=H,h.fromArray=function(z,O,D){return et(z.map(nt),nt(O||10),D)},h}();function zP(i,e,n=2){const s=e&&e.length,r=s?e[0]*n:i.length;let a=Gv(i,0,r,n,!0);const o=[];if(!a||a.next===a.prev)return o;let h,c,l;if(s&&(a=RP(i,e,a,n)),i.length>80*n){h=1/0,c=1/0;let u=-1/0,f=-1/0;for(let d=n;d<r;d+=n){const p=i[d],y=i[d+1];p<h&&(h=p),y<c&&(c=y),p>u&&(u=p),y>f&&(f=y)}l=Math.max(u-h,f-c),l=l!==0?32767/l:0}return Io(a,o,n,h,c,l,0),o}function Gv(i,e,n,s,r){let a;if(r===I0(i,e,n,s)>0)for(let o=e;o<n;o+=s)a=jv(o/s|0,i[o],i[o+1],a);else for(let o=n-s;o>=e;o-=s)a=jv(o/s|0,i[o],i[o+1],a);return a&&aa(a,a.next)&&(ko(a),a=a.next),a}function ir(i,e){if(!i)return i;e||(e=i);let n=i,s;do if(s=!1,!n.steiner&&(aa(n,n.next)||oe(n.prev,n,n.next)===0)){if(ko(n),n=e=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==e);return e}function Io(i,e,n,s,r,a,o){if(!i)return;!o&&a&&NP(i,s,r,a);let h=i;for(;i.prev!==i.next;){const c=i.prev,l=i.next;if(a?AP(i,s,r,a):CP(i)){e.push(c.i,i.i,l.i),ko(i),i=l.next,h=l.next;continue}if(i=l,i===h){o?o===1?(i=PP(ir(i),e),Io(i,e,n,s,r,a,2)):o===2&&IP(i,e,n,s,r,a):Io(ir(i),e,n,s,r,a,1);break}}}function CP(i){const e=i.prev,n=i,s=i.next;if(oe(e,n,s)>=0)return!1;const r=e.x,a=n.x,o=s.x,h=e.y,c=n.y,l=s.y,u=Math.min(r,a,o),f=Math.min(h,c,l),d=Math.max(r,a,o),p=Math.max(h,c,l);let y=s.next;for(;y!==e;){if(y.x>=u&&y.x<=d&&y.y>=f&&y.y<=p&&Ro(r,h,a,c,o,l,y.x,y.y)&&oe(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function AP(i,e,n,s){const r=i.prev,a=i,o=i.next;if(oe(r,a,o)>=0)return!1;const h=r.x,c=a.x,l=o.x,u=r.y,f=a.y,d=o.y,p=Math.min(h,c,l),y=Math.min(u,f,d),x=Math.max(h,c,l),g=Math.max(u,f,d),m=A0(p,y,e,n,s),v=A0(x,g,e,n,s);let w=i.prevZ,b=i.nextZ;for(;w&&w.z>=m&&b&&b.z<=v;){if(w.x>=p&&w.x<=x&&w.y>=y&&w.y<=g&&w!==r&&w!==o&&Ro(h,u,c,f,l,d,w.x,w.y)&&oe(w.prev,w,w.next)>=0||(w=w.prevZ,b.x>=p&&b.x<=x&&b.y>=y&&b.y<=g&&b!==r&&b!==o&&Ro(h,u,c,f,l,d,b.x,b.y)&&oe(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;w&&w.z>=m;){if(w.x>=p&&w.x<=x&&w.y>=y&&w.y<=g&&w!==r&&w!==o&&Ro(h,u,c,f,l,d,w.x,w.y)&&oe(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=x&&b.y>=y&&b.y<=g&&b!==r&&b!==o&&Ro(h,u,c,f,l,d,b.x,b.y)&&oe(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function PP(i,e){let n=i;do{const s=n.prev,r=n.next.next;!aa(s,r)&&Wv(s,n,n.next,r)&&Oo(s,r)&&Oo(r,s)&&(e.push(s.i,n.i,r.i),ko(n),ko(n.next),n=i=r),n=n.next}while(n!==i);return ir(n)}function IP(i,e,n,s,r,a){let o=i;do{let h=o.next.next;for(;h!==o.prev;){if(o.i!==h.i&&qP(o,h)){let c=Yv(o,h);o=ir(o,o.next),c=ir(c,c.next),Io(o,e,n,s,r,a,0),Io(c,e,n,s,r,a,0);return}h=h.next}o=o.next}while(o!==i)}function RP(i,e,n,s){const r=[];for(let a=0,o=e.length;a<o;a++){const h=e[a]*s,c=a<o-1?e[a+1]*s:i.length,l=Gv(i,h,c,s,!1);l===l.next&&(l.steiner=!0),r.push(DP(l))}r.sort(OP);for(let a=0;a<r.length;a++)n=kP(r[a],n);return n}function OP(i,e){let n=i.x-e.x;if(n===0&&(n=i.y-e.y,n===0)){const s=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=s-r}return n}function kP(i,e){const n=LP(i,e);if(!n)return e;const s=Yv(n,i);return ir(s,s.next),ir(n,n.next)}function LP(i,e){let n=e;const s=i.x,r=i.y;let a=-1/0,o;if(aa(i,n))return n;do{if(aa(i,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const f=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=s&&f>a&&(a=f,o=n.x<n.next.x?n:n.next,f===s))return o}n=n.next}while(n!==e);if(!o)return null;const h=o,c=o.x,l=o.y;let u=1/0;n=o;do{if(s>=n.x&&n.x>=c&&s!==n.x&&Uv(r<l?s:a,r,c,l,r<l?a:s,r,n.x,n.y)){const f=Math.abs(r-n.y)/(s-n.x);Oo(n,i)&&(f<u||f===u&&(n.x>o.x||n.x===o.x&&FP(o,n)))&&(o=n,u=f)}n=n.next}while(n!==h);return o}function FP(i,e){return oe(i.prev,i,e.prev)<0&&oe(e.next,i,i.next)<0}function NP(i,e,n,s){let r=i;do r.z===0&&(r.z=A0(r.x,r.y,e,n,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,BP(r)}function BP(i){let e,n=1;do{let s=i,r;i=null;let a=null;for(e=0;s;){e++;let o=s,h=0;for(let l=0;l<n&&(h++,o=o.nextZ,!!o);l++);let c=n;for(;h>0||c>0&&o;)h!==0&&(c===0||!o||s.z<=o.z)?(r=s,s=s.nextZ,h--):(r=o,o=o.nextZ,c--),a?a.nextZ=r:i=r,r.prevZ=a,a=r;s=o}a.nextZ=null,n*=2}while(e>1);return i}function A0(i,e,n,s,r){return i=(i-n)*r|0,e=(e-s)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function DP(i){let e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function Uv(i,e,n,s,r,a,o,h){return(r-o)*(e-h)>=(i-o)*(a-h)&&(i-o)*(s-h)>=(n-o)*(e-h)&&(n-o)*(a-h)>=(r-o)*(s-h)}function Ro(i,e,n,s,r,a,o,h){return!(i===o&&e===h)&&Uv(i,e,n,s,r,a,o,h)}function qP(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!$P(i,e)&&(Oo(i,e)&&Oo(e,i)&&VP(i,e)&&(oe(i.prev,i,e.prev)||oe(i,e.prev,e))||aa(i,e)&&oe(i.prev,i,i.next)>0&&oe(e.prev,e,e.next)>0)}function oe(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function aa(i,e){return i.x===e.x&&i.y===e.y}function Wv(i,e,n,s){const r=hl(oe(i,e,n)),a=hl(oe(i,e,s)),o=hl(oe(n,s,i)),h=hl(oe(n,s,e));return!!(r!==a&&o!==h||r===0&&ol(i,n,e)||a===0&&ol(i,s,e)||o===0&&ol(n,i,s)||h===0&&ol(n,e,s))}function ol(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function hl(i){return i>0?1:i<0?-1:0}function $P(i,e){let n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==e.i&&n.next.i!==e.i&&Wv(n,n.next,i,e))return!0;n=n.next}while(n!==i);return!1}function Oo(i,e){return oe(i.prev,i,i.next)<0?oe(i,e,i.next)>=0&&oe(i,i.prev,e)>=0:oe(i,e,i.prev)<0||oe(i,i.next,e)<0}function VP(i,e){let n=i,s=!1;const r=(i.x+e.x)/2,a=(i.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==i);return s}function Yv(i,e){const n=P0(i.i,i.x,i.y),s=P0(e.i,e.x,e.y),r=i.next,a=e.prev;return i.next=e,e.prev=i,n.next=r,r.prev=n,s.next=n,n.prev=s,a.next=s,s.prev=a,s}function jv(i,e,n,s){const r=P0(i,e,n);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function ko(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function P0(i,e,n){return{i,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function GP(i,e,n,s){const r=e&&e.length,a=r?e[0]*n:i.length;let o=Math.abs(I0(i,0,a,n));if(r)for(let c=0,l=e.length;c<l;c++){const u=e[c]*n,f=c<l-1?e[c+1]*n:i.length;o-=Math.abs(I0(i,u,f,n))}let h=0;for(let c=0;c<s.length;c+=3){const l=s[c]*n,u=s[c+1]*n,f=s[c+2]*n;h+=Math.abs((i[l]-i[f])*(i[u+1]-i[l+1])-(i[l]-i[u])*(i[f+1]-i[l+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)}function I0(i,e,n,s){let r=0;for(let a=e,o=n-s;a<n;a+=s)r+=(i[o]-i[a])*(i[a+1]+i[o+1]),o=a;return r}function UP(i){const e=[],n=[],s=i[0][0].length;let r=0,a=0;for(const o of i){for(const h of o)for(let c=0;c<s;c++)e.push(h[c]);a&&(r+=a,n.push(r)),a=o.length}return{vertices:e,holes:n,dimensions:s}}const Bi=11102230246251565e-32,$e=134217729,WP=(3+8*Bi)*Bi;function R0(i,e,n,s,r){let a,o,h,c,l=e[0],u=s[0],f=0,d=0;u>l==u>-l?(a=l,l=e[++f]):(a=u,u=s[++d]);let p=0;if(f<i&&d<n)for(u>l==u>-l?(o=l+a,h=a-(o-l),l=e[++f]):(o=u+a,h=a-(o-u),u=s[++d]),a=o,h!==0&&(r[p++]=h);f<i&&d<n;)u>l==u>-l?(o=a+l,c=o-a,h=a-(o-c)+(l-c),l=e[++f]):(o=a+u,c=o-a,h=a-(o-c)+(u-c),u=s[++d]),a=o,h!==0&&(r[p++]=h);for(;f<i;)o=a+l,c=o-a,h=a-(o-c)+(l-c),l=e[++f],a=o,h!==0&&(r[p++]=h);for(;d<n;)o=a+u,c=o-a,h=a-(o-c)+(u-c),u=s[++d],a=o,h!==0&&(r[p++]=h);return(a!==0||p===0)&&(r[p++]=a),p}function YP(i,e){let n=e[0];for(let s=1;s<i;s++)n+=e[s];return n}function Lo(i){return new Float64Array(i)}const jP=(3+16*Bi)*Bi,HP=(2+12*Bi)*Bi,XP=(9+64*Bi)*Bi*Bi,oa=Lo(4),Hv=Lo(8),Xv=Lo(12),Zv=Lo(16),Je=Lo(4);function ZP(i,e,n,s,r,a,o){let h,c,l,u,f,d,p,y,x,g,m,v,w,b,S,E,A,M;const _=i-r,T=n-r,C=e-a,P=s-a;b=_*P,d=$e*_,p=d-(d-_),y=_-p,d=$e*P,x=d-(d-P),g=P-x,S=y*g-(b-p*x-y*x-p*g),E=C*T,d=$e*C,p=d-(d-C),y=C-p,d=$e*T,x=d-(d-T),g=T-x,A=y*g-(E-p*x-y*x-p*g),m=S-A,f=S-m,oa[0]=S-(m+f)+(f-A),v=b+m,f=v-b,w=b-(v-f)+(m-f),m=w-E,f=w-m,oa[1]=w-(m+f)+(f-E),M=v+m,f=M-v,oa[2]=v-(M-f)+(m-f),oa[3]=M;let R=YP(4,oa),k=HP*o;if(R>=k||-R>=k||(f=i-_,h=i-(_+f)+(f-r),f=n-T,l=n-(T+f)+(f-r),f=e-C,c=e-(C+f)+(f-a),f=s-P,u=s-(P+f)+(f-a),h===0&&c===0&&l===0&&u===0)||(k=XP*o+WP*Math.abs(R),R+=_*u+P*h-(C*l+T*c),R>=k||-R>=k))return R;b=h*P,d=$e*h,p=d-(d-h),y=h-p,d=$e*P,x=d-(d-P),g=P-x,S=y*g-(b-p*x-y*x-p*g),E=c*T,d=$e*c,p=d-(d-c),y=c-p,d=$e*T,x=d-(d-T),g=T-x,A=y*g-(E-p*x-y*x-p*g),m=S-A,f=S-m,Je[0]=S-(m+f)+(f-A),v=b+m,f=v-b,w=b-(v-f)+(m-f),m=w-E,f=w-m,Je[1]=w-(m+f)+(f-E),M=v+m,f=M-v,Je[2]=v-(M-f)+(m-f),Je[3]=M;const I=R0(4,oa,4,Je,Hv);b=_*u,d=$e*_,p=d-(d-_),y=_-p,d=$e*u,x=d-(d-u),g=u-x,S=y*g-(b-p*x-y*x-p*g),E=C*l,d=$e*C,p=d-(d-C),y=C-p,d=$e*l,x=d-(d-l),g=l-x,A=y*g-(E-p*x-y*x-p*g),m=S-A,f=S-m,Je[0]=S-(m+f)+(f-A),v=b+m,f=v-b,w=b-(v-f)+(m-f),m=w-E,f=w-m,Je[1]=w-(m+f)+(f-E),M=v+m,f=M-v,Je[2]=v-(M-f)+(m-f),Je[3]=M;const L=R0(I,Hv,4,Je,Xv);b=h*u,d=$e*h,p=d-(d-h),y=h-p,d=$e*u,x=d-(d-u),g=u-x,S=y*g-(b-p*x-y*x-p*g),E=c*l,d=$e*c,p=d-(d-c),y=c-p,d=$e*l,x=d-(d-l),g=l-x,A=y*g-(E-p*x-y*x-p*g),m=S-A,f=S-m,Je[0]=S-(m+f)+(f-A),v=b+m,f=v-b,w=b-(v-f)+(m-f),m=w-E,f=w-m,Je[1]=w-(m+f)+(f-E),M=v+m,f=M-v,Je[2]=v-(M-f)+(m-f),Je[3]=M;const F=R0(L,Xv,4,Je,Zv);return Zv[F-1]}function cl(i,e,n,s,r,a){const o=(e-a)*(n-r),h=(i-r)*(s-a),c=o-h,l=Math.abs(o+h);return Math.abs(c)>=jP*l?c:-ZP(i,e,n,s,r,a,l)}const Jv=Math.pow(2,-52),ll=new Uint32Array(512);class O0{static from(e,n=e4,s=n4){const r=e.length,a=new Float64Array(r*2);for(let o=0;o<r;o++){const h=e[o];a[2*o]=n(h),a[2*o+1]=s(h)}return new O0(a)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const s=Math.max(2*n-5,0);this._triangles=new Uint32Array(s*3),this._halfedges=new Int32Array(s*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:s,_hullTri:r,_hullHash:a}=this,o=e.length>>1;let h=1/0,c=1/0,l=-1/0,u=-1/0;for(let _=0;_<o;_++){const T=e[2*_],C=e[2*_+1];T<h&&(h=T),C<c&&(c=C),T>l&&(l=T),C>u&&(u=C),this._ids[_]=_}const f=(h+l)/2,d=(c+u)/2;let p,y,x;for(let _=0,T=1/0;_<o;_++){const C=k0(f,d,e[2*_],e[2*_+1]);C<T&&(p=_,T=C)}const g=e[2*p],m=e[2*p+1];for(let _=0,T=1/0;_<o;_++){if(_===p)continue;const C=k0(g,m,e[2*_],e[2*_+1]);C<T&&C>0&&(y=_,T=C)}let v=e[2*y],w=e[2*y+1],b=1/0;for(let _=0;_<o;_++){if(_===p||_===y)continue;const T=KP(g,m,v,w,e[2*_],e[2*_+1]);T<b&&(x=_,b=T)}let S=e[2*x],E=e[2*x+1];if(b===1/0){for(let C=0;C<o;C++)this._dists[C]=e[2*C]-e[0]||e[2*C+1]-e[1];ha(this._ids,this._dists,0,o-1);const _=new Uint32Array(o);let T=0;for(let C=0,P=-1/0;C<o;C++){const R=this._ids[C],k=this._dists[R];k>P&&(_[T++]=R,P=k)}this.hull=_.subarray(0,T),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(cl(g,m,v,w,S,E)<0){const _=y,T=v,C=w;y=x,v=S,w=E,x=_,S=T,E=C}const A=t4(g,m,v,w,S,E);this._cx=A.x,this._cy=A.y;for(let _=0;_<o;_++)this._dists[_]=k0(e[2*_],e[2*_+1],A.x,A.y);ha(this._ids,this._dists,0,o-1),this._hullStart=p;let M=3;s[p]=n[x]=y,s[y]=n[p]=x,s[x]=n[y]=p,r[p]=0,r[y]=1,r[x]=2,a.fill(-1),a[this._hashKey(g,m)]=p,a[this._hashKey(v,w)]=y,a[this._hashKey(S,E)]=x,this.trianglesLen=0,this._addTriangle(p,y,x,-1,-1,-1);for(let _=0,T,C;_<this._ids.length;_++){const P=this._ids[_],R=e[2*P],k=e[2*P+1];if(_>0&&Math.abs(R-T)<=Jv&&Math.abs(k-C)<=Jv||(T=R,C=k,P===p||P===y||P===x))continue;let I=0;for(let J=0,j=this._hashKey(R,k);J<this._hashSize&&(I=a[(j+J)%this._hashSize],!(I!==-1&&I!==s[I]));J++);I=n[I];let L=I,F;for(;F=s[L],cl(R,k,e[2*L],e[2*L+1],e[2*F],e[2*F+1])>=0;)if(L=F,L===I){L=-1;break}if(L===-1)continue;let B=this._addTriangle(L,P,s[L],-1,-1,r[L]);r[P]=this._legalize(B+2),r[L]=B,M++;let V=s[L];for(;F=s[V],cl(R,k,e[2*V],e[2*V+1],e[2*F],e[2*F+1])<0;)B=this._addTriangle(V,P,F,r[P],-1,r[V]),r[P]=this._legalize(B+2),s[V]=V,M--,V=F;if(L===I)for(;F=n[L],cl(R,k,e[2*F],e[2*F+1],e[2*L],e[2*L+1])<0;)B=this._addTriangle(F,P,L,-1,r[L],r[F]),this._legalize(B+2),r[F]=B,s[L]=L,M--,L=F;this._hullStart=n[P]=L,s[L]=n[V]=P,s[P]=V,a[this._hashKey(R,k)]=P,a[this._hashKey(e[2*L],e[2*L+1])]=L}this.hull=new Uint32Array(M);for(let _=0,T=this._hullStart;_<M;_++)this.hull[_]=T,T=s[T];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(JP(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:s,coords:r}=this;let a=0,o=0;for(;;){const h=s[e],c=e-e%3;if(o=c+(e+2)%3,h===-1){if(a===0)break;e=ll[--a];continue}const l=h-h%3,u=c+(e+1)%3,f=l+(h+2)%3,d=n[o],p=n[e],y=n[u],x=n[f];if(QP(r[2*d],r[2*d+1],r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*x],r[2*x+1])){n[e]=x,n[h]=d;const m=s[f];if(m===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=e;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(e,m),this._link(h,s[o]),this._link(o,f);const v=l+(h+1)%3;a<ll.length&&(ll[a++]=v)}else{if(a===0)break;e=ll[--a]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,s,r,a,o){const h=this.trianglesLen;return this._triangles[h]=e,this._triangles[h+1]=n,this._triangles[h+2]=s,this._link(h,r),this._link(h+1,a),this._link(h+2,o),this.trianglesLen+=3,h}}function JP(i,e){const n=i/(Math.abs(i)+Math.abs(e));return(e>0?3-n:1+n)/4}function k0(i,e,n,s){const r=i-n,a=e-s;return r*r+a*a}function QP(i,e,n,s,r,a,o,h){const c=i-o,l=e-h,u=n-o,f=s-h,d=r-o,p=a-h,y=c*c+l*l,x=u*u+f*f,g=d*d+p*p;return c*(f*g-x*p)-l*(u*g-x*d)+y*(u*p-f*d)<0}function KP(i,e,n,s,r,a){const o=n-i,h=s-e,c=r-i,l=a-e,u=o*o+h*h,f=c*c+l*l,d=.5/(o*l-h*c),p=(l*u-h*f)*d,y=(o*f-c*u)*d;return p*p+y*y}function t4(i,e,n,s,r,a){const o=n-i,h=s-e,c=r-i,l=a-e,u=o*o+h*h,f=c*c+l*l,d=.5/(o*l-h*c),p=i+(l*u-h*f)*d,y=e+(o*f-c*u)*d;return{x:p,y}}function ha(i,e,n,s){if(s-n<=20)for(let r=n+1;r<=s;r++){const a=i[r],o=e[a];let h=r-1;for(;h>=n&&e[i[h]]>o;)i[h+1]=i[h--];i[h+1]=a}else{const r=n+s>>1;let a=n+1,o=s;Fo(i,r,a),e[i[n]]>e[i[s]]&&Fo(i,n,s),e[i[a]]>e[i[s]]&&Fo(i,a,s),e[i[n]]>e[i[a]]&&Fo(i,n,a);const h=i[a],c=e[h];for(;;){do a++;while(e[i[a]]<c);do o--;while(e[i[o]]>c);if(o<a)break;Fo(i,a,o)}i[n+1]=i[o],i[o]=h,s-a+1>=o-n?(ha(i,e,a,s),ha(i,e,n,o-1)):(ha(i,e,n,o-1),ha(i,e,a,s))}}function Fo(i,e,n){const s=i[e];i[e]=i[n],i[n]=s}function e4(i){return i[0]}function n4(i){return i[1]}const No=1e20;class i4{constructor({fontSize:e=24,buffer:n=3,radius:s=8,cutoff:r=.25,fontFamily:a="sans-serif",fontWeight:o="normal",fontStyle:h="normal"}={}){this.buffer=n,this.cutoff=r,this.radius=s;const c=this.size=e+n*4,l=this._createCanvas(c),u=this.ctx=l.getContext("2d",{willReadFrequently:!0});u.font=`${h} ${o} ${e}px ${a}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(c*c),this.gridInner=new Float64Array(c*c),this.f=new Float64Array(c),this.z=new Float64Array(c+1),this.v=new Uint16Array(c)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:r,actualBoundingBoxLeft:a,actualBoundingBoxRight:o}=this.ctx.measureText(e),h=Math.ceil(s),c=0,l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-a))),u=Math.min(this.size-this.buffer,h+Math.ceil(r)),f=l+2*this.buffer,d=u+2*this.buffer,p=Math.max(f*d,0),y=new Uint8ClampedArray(p),x={data:y,width:f,height:d,glyphWidth:l,glyphHeight:u,glyphTop:h,glyphLeft:c,glyphAdvance:n};if(l===0||u===0)return x;const{ctx:g,buffer:m,gridInner:v,gridOuter:w}=this;g.clearRect(m,m,l,u),g.fillText(e,m,m+h);const b=g.getImageData(m,m,l,u);w.fill(No,0,p),v.fill(0,0,p);for(let S=0;S<u;S++)for(let E=0;E<l;E++){const A=b.data[4*(S*l+E)+3]/255;if(A===0)continue;const M=(S+m)*f+E+m;if(A===1)w[M]=0,v[M]=No;else{const _=.5-A;w[M]=_>0?_*_:0,v[M]=_<0?_*_:0}}Qv(w,0,0,f,d,f,this.f,this.v,this.z),Qv(v,m,m,l,u,f,this.f,this.v,this.z);for(let S=0;S<p;S++){const E=Math.sqrt(w[S])-Math.sqrt(v[S]);y[S]=Math.round(255-255*(E/this.radius+this.cutoff))}return x}}function Qv(i,e,n,s,r,a,o,h,c){for(let l=e;l<e+s;l++)Kv(i,n*a+l,a,r,o,h,c);for(let l=n;l<n+r;l++)Kv(i,l*a+e,1,s,o,h,c)}function Kv(i,e,n,s,r,a,o){a[0]=0,o[0]=-No,o[1]=No,r[0]=i[e];for(let h=1,c=0,l=0;h<s;h++){r[h]=i[e+h*n];const u=h*h;do{const f=a[c];l=(r[h]-r[f]+u-f*f)/(h-f)/2}while(l<=o[c]&&--c>-1);c++,a[c]=h,o[c]=l,o[c+1]=No}for(let h=0,c=0;h<s;h++){for(;o[c+1]<h;)c++;const l=a[c],u=h-l;i[e+h*n]=r[l]+u*u}}class t2{constructor(e=[],n=(s,r)=>s<r?-1:s>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:s}=this,r=n[e];for(;e>0;){const a=e-1>>1,o=n[a];if(s(r,o)>=0)break;n[e]=o,e=a}n[e]=r}_down(e){const{data:n,compare:s}=this,r=this.length>>1,a=n[e];for(;e<r;){let o=(e<<1)+1;const h=o+1;if(h<this.length&&s(n[h],n[o])<0&&(o=h),s(n[o],a)>=0)break;n[e]=n[o],e=o}n[e]=a}}function s4(i,e=1,n=!1){let s=1/0,r=1/0,a=-1/0,o=-1/0;for(const[m,v]of i[0])m<s&&(s=m),v<r&&(r=v),m>a&&(a=m),v>o&&(o=v);const h=a-s,c=o-r,l=Math.max(e,Math.min(h,c));if(l===e){const m=[s,r];return m.distance=0,m}const u=new t2([],(m,v)=>v.max-m.max);let f=a4(i);const d=new ul(s+h/2,r+c/2,0,i);d.d>f.d&&(f=d);let p=2;function y(m,v,w){const b=new ul(m,v,w,i);p++,b.max>f.d+e&&u.push(b),b.d>f.d&&(f=b,n&&console.log(`found best ${Math.round(1e4*b.d)/1e4} after ${p} probes`))}let x=l/2;for(let m=s;m<a;m+=l)for(let v=r;v<o;v+=l)y(m+x,v+x,x);for(;u.length;){const{max:m,x:v,y:w,h:b}=u.pop();if(m-f.d<=e)break;x=b/2,y(v-x,w-x,x),y(v+x,w-x,x),y(v-x,w+x,x),y(v+x,w+x,x)}n&&console.log(`num probes: ${p}
best distance: ${f.d}`);const g=[f.x,f.y];return g.distance=f.d,g}function ul(i,e,n,s){this.x=i,this.y=e,this.h=n,this.d=r4(i,e,s),this.max=this.d+this.h*Math.SQRT2}function r4(i,e,n){let s=!1,r=1/0;for(const a of n)for(let o=0,h=a.length,c=h-1;o<h;c=o++){const l=a[o],u=a[c];l[1]>e!=u[1]>e&&i<(u[0]-l[0])*(e-l[1])/(u[1]-l[1])+l[0]&&(s=!s),r=Math.min(r,o4(i,e,l,u))}return r===0?0:(s?1:-1)*Math.sqrt(r)}function a4(i){let e=0,n=0,s=0;const r=i[0];for(let o=0,h=r.length,c=h-1;o<h;c=o++){const l=r[o],u=r[c],f=l[0]*u[1]-u[0]*l[1];n+=(l[0]+u[0])*f,s+=(l[1]+u[1])*f,e+=f*3}const a=new ul(n/e,s/e,0,i);return e===0||a.d<0?new ul(r[0][0],r[0][1],0,i):a}function o4(i,e,n,s){let r=n[0],a=n[1],o=s[0]-r,h=s[1]-a;if(o!==0||h!==0){const c=((i-r)*o+(e-a)*h)/(o*o+h*h);c>1?(r=s[0],a=s[1]):c>0&&(r+=o*c,a+=h*c)}return o=i-r,h=e-a,o*o+h*h}const h4=Object.freeze(Object.defineProperty({__proto__:null,Delaunator:O0,TinySDF:i4,deviation:GP,earcut:zP,flatten:UP,polylabel:s4},Symbol.toStringTag,{value:"Module"})),e2=Math.PI*2,c4=180/Math.PI,l4=Math.PI/180;var sr=(i=>(i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC",i))(sr||{});let cs=class S_{x=0;y=0;constructor(e=0,n=0){this.x=e,this.y=n}clone(){return new S_(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}};process.env.DEBUG&&(cs.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`});const fl=[new cs,new cs,new cs,new cs];let dl=class ap{x;y;width;height;type;constructor(e=0,n=0,s=0,r=0){this.x=Number(e),this.y=Number(n),this.width=Number(s),this.height=Number(r),this.type=sr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ap(0,0,0,0)}clone(){return new ap(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const M=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=M)return!1;const T=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>T}const s=this.left,r=this.right,a=this.top,o=this.bottom;if(r<=s||o<=a)return!1;const h=fl[0].set(e.left,e.top),c=fl[1].set(e.left,e.bottom),l=fl[2].set(e.right,e.top),u=fl[3].set(e.right,e.bottom);if(l.x<=h.x||c.y<=h.y)return!1;const f=Math.sign(n.a*n.d-n.b*n.c);if(f===0||(n.apply(h,h),n.apply(c,c),n.apply(l,l),n.apply(u,u),Math.max(h.x,c.x,l.x,u.x)<=s||Math.min(h.x,c.x,l.x,u.x)>=r||Math.max(h.y,c.y,l.y,u.y)<=a||Math.min(h.y,c.y,l.y,u.y)>=o))return!1;const d=f*(c.y-h.y),p=f*(h.x-c.x),y=d*s+p*a,x=d*r+p*a,g=d*s+p*o,m=d*r+p*o;if(Math.max(y,x,g,m)<=d*h.x+p*h.y||Math.min(y,x,g,m)>=d*u.x+p*u.y)return!1;const v=f*(h.y-l.y),w=f*(l.x-h.x),b=v*s+w*a,S=v*r+w*a,E=v*s+w*o,A=v*r+w*o;return!(Math.max(b,S,E,A)<=v*h.x+w*h.y||Math.min(b,S,E,A)>=v*u.x+w*u.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(s-n,0),this.y=r,this.height=Math.max(a-r,0),this}ceil(e=1,n=.001){const s=Math.ceil((this.x+this.width-n)*e)/e,r=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=s-this.x,this.height=r-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=s-n,this.y=r,this.height=a-r,this}};process.env.DEBUG&&(dl.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`});let n2=class T_{x;y;radius;type;constructor(e=0,n=0,s=0){this.x=e,this.y=n,this.radius=s,this.type=sr.CIRC}clone(){return new T_(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const s=this.radius*this.radius;let r=this.x-e,a=this.y-n;return r*=r,a*=a,r+a<=s}getBounds(){return new dl(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};process.env.DEBUG&&(n2.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`});let i2=class E_{x;y;width;height;type;constructor(e=0,n=0,s=0,r=0){this.x=e,this.y=n,this.width=s,this.height=r,this.type=sr.ELIP}clone(){return new E_(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let s=(e-this.x)/this.width,r=(n-this.y)/this.height;return s*=s,r*=r,s+r<=1}getBounds(){return new dl(this.x-this.width,this.y-this.height,this.width,this.height)}};process.env.DEBUG&&(i2.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`});let s2=class z_{points;closeStroke;type;constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const s=[];for(let r=0,a=n.length;r<a;r++)s.push(n[r].x,n[r].y);n=s}this.points=n,this.type=sr.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new z_(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let s=!1;const r=this.points.length/2;for(let a=0,o=r-1;a<r;o=a++){const h=this.points[a*2],c=this.points[a*2+1],l=this.points[o*2],u=this.points[o*2+1];c>n!=u>n&&e<(l-h)*((n-c)/(u-c))+h&&(s=!s)}return s}};process.env.DEBUG&&(s2.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`});class pl{x;y;width;height;radius;type;constructor(e=0,n=0,s=0,r=0,a=20){this.x=e,this.y=n,this.width=s,this.height=r,this.radius=a,this.type=sr.RREC}clone(){return new pl(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+s&&n<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let r=e-(this.x+s),a=n-(this.y+s);const o=s*s;if(r*r+a*a<=o||(r=e-(this.x+this.width-s),r*r+a*a<=o)||(a=n-(this.y+this.height-s),r*r+a*a<=o)||(r=e-(this.x+s),r*r+a*a<=o))return!0}return!1}}process.env.DEBUG&&(pl.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`});let Bo=class _u{a;b;c;d;tx;ty;array=null;constructor(e=1,n=0,s=0,r=1,a=0,o=0){this.a=e,this.b=n,this.c=s,this.d=r,this.tx=a,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,s,r,a,o){return this.a=e,this.b=n,this.c=s,this.d=r,this.tx=a,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const s=n||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,n){n=n||new cs;const s=e.x,r=e.y;return n.x=this.a*s+this.c*r+this.tx,n.y=this.b*s+this.d*r+this.ty,n}applyInverse(e,n){n=n||new cs;const s=1/(this.a*this.d+this.c*-this.b),r=e.x,a=e.y;return n.x=this.d*s*r+-this.c*s*a+(this.ty*this.c-this.tx*this.d)*s,n.y=this.a*s*a+-this.b*s*r+(-this.ty*this.a+this.tx*this.b)*s,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),s=Math.sin(e),r=this.a,a=this.c,o=this.tx;return this.a=r*n-this.b*s,this.b=r*s+this.b*n,this.c=a*n-this.d*s,this.d=a*s+this.d*n,this.tx=o*n-this.ty*s,this.ty=o*s+this.ty*n,this}append(e){const n=this.a,s=this.b,r=this.c,a=this.d;return this.a=e.a*n+e.b*r,this.b=e.a*s+e.b*a,this.c=e.c*n+e.d*r,this.d=e.c*s+e.d*a,this.tx=e.tx*n+e.ty*r+this.tx,this.ty=e.tx*s+e.ty*a+this.ty,this}setTransform(e,n,s,r,a,o,h,c,l){return this.a=Math.cos(h+l)*a,this.b=Math.sin(h+l)*a,this.c=-Math.sin(h-c)*o,this.d=Math.cos(h-c)*o,this.tx=e-(s*this.a+r*this.c),this.ty=n-(s*this.b+r*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,r=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,s=this.b,r=this.c,a=this.d,o=e.pivot,h=-Math.atan2(-r,a),c=Math.atan2(s,n),l=Math.abs(h+c);return l<1e-5||Math.abs(e2-l)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=c),e.scale.x=Math.sqrt(n*n+s*s),e.scale.y=Math.sqrt(r*r+a*a),e.position.x=this.tx+(o.x*n+o.y*r),e.position.y=this.ty+(o.x*s+o.y*a),e}invert(){const e=this.a,n=this.b,s=this.c,r=this.d,a=this.tx,o=e*r-n*s;return this.a=r/o,this.b=-n/o,this.c=-s/o,this.d=e/o,this.tx=(s*this.ty-r*a)/o,this.ty=-(e*this.ty-n*a)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new _u;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new _u}static get TEMP_MATRIX(){return new _u}};process.env.DEBUG&&(Bo.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`});const rr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ar=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],or=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],hr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],L0=[],r2=[],yl=Math.sign;function u4(){for(let i=0;i<16;i++){const e=[];L0.push(e);for(let n=0;n<16;n++){const s=yl(rr[i]*rr[n]+or[i]*ar[n]),r=yl(ar[i]*rr[n]+hr[i]*ar[n]),a=yl(rr[i]*or[n]+or[i]*hr[n]),o=yl(ar[i]*or[n]+hr[i]*hr[n]);for(let h=0;h<16;h++)if(rr[h]===s&&ar[h]===r&&or[h]===a&&hr[h]===o){e.push(h);break}}}for(let i=0;i<16;i++){const e=new Bo;e.set(rr[i],ar[i],or[i],hr[i],0,0),r2.push(e)}}u4();const Jn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>rr[i],uY:i=>ar[i],vX:i=>or[i],vY:i=>hr[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>L0[i][e],sub:(i,e)=>L0[i][Jn.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?Jn.S:Jn.N:Math.abs(e)*2<=Math.abs(i)?i>0?Jn.E:Jn.W:e>0?i>0?Jn.SE:Jn.SW:i>0?Jn.NE:Jn.NW,matrixAppendRotationInv:(i,e,n=0,s=0)=>{const r=r2[Jn.inv(e)];r.tx=n,r.ty=s,i.append(r)}};class cr{cb;scope;_x;_y;constructor(e,n,s=0,r=0){this._x=s,this._y=r,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new cr(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}class F0{static IDENTITY=new F0;worldTransform;localTransform;position;scale;pivot;skew;_parentID;_worldID;_rotation;_cx;_sx;_cy;_sy;_localID;_currentLocalID;constructor(){this.worldTransform=new Bo,this.localTransform=new Bo,this.position=new cr(this.onChange,this,0,0),this.scale=new cr(this.onChange,this,1,1),this.pivot=new cr(this.onChange,this,0,0),this.skew=new cr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const n=this.localTransform;if(this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const s=e.worldTransform,r=this.worldTransform;r.a=n.a*s.a+n.b*s.c,r.b=n.a*s.b+n.b*s.d,r.c=n.c*s.a+n.d*s.c,r.d=n.c*s.b+n.d*s.d,r.tx=n.tx*s.a+n.ty*s.c+s.tx,r.ty=n.tx*s.b+n.ty*s.d+s.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}}const f4=Object.freeze(Object.defineProperty({__proto__:null,Circle:n2,DEG_TO_RAD:l4,Ellipse:i2,Matrix:Bo,ObservablePoint:cr,PI_2:e2,Point:cs,Polygon:s2,RAD_TO_DEG:c4,Rectangle:dl,RoundedRectangle:pl,SHAPES:sr,Transform:F0,groupD8:Jn},Symbol.toStringTag,{value:"Module"}));function a2(i,e,n=0,s=i.length-1,r=d4){for(;s>n;){if(s-n>600){const c=s-n+1,l=e-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(e-l*f/c+d)),y=Math.min(s,Math.floor(e+(c-l)*f/c+d));a2(i,e,p,y,r)}const a=i[e];let o=n,h=s;for(Do(i,n,e),r(i[s],a)>0&&Do(i,n,s);o<h;){for(Do(i,o,h),o++,h--;r(i[o],a)<0;)o++;for(;r(i[h],a)>0;)h--}r(i[n],a)===0?Do(i,n,h):(h++,Do(i,h,s)),h<=e&&(n=h+1),e<=h&&(s=h-1)}}function Do(i,e,n){const s=i[e];i[e]=i[n],i[n]=s}function d4(i,e){return i<e?-1:i>e?1:0}class p4{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const s=[];if(!gl(e,n))return s;const r=this.toBBox,a=[];for(;n;){for(let o=0;o<n.children.length;o++){const h=n.children[o],c=n.leaf?r(h):h;gl(e,c)&&(n.leaf?s.push(h):B0(e,c)?this._all(h,s):a.push(h))}n=a.pop()}return s}collides(e){let n=this.data;if(!gl(e,n))return!1;const s=[];for(;n;){for(let r=0;r<n.children.length;r++){const a=n.children[r],o=n.leaf?this.toBBox(a):a;if(gl(e,o)){if(n.leaf||B0(e,o))return!0;s.push(a)}}n=s.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let s=0;s<e.length;s++)this.insert(e[s]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const s=this.data;this.data=n,n=s}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=la([]),this}remove(e,n){if(!e)return this;let s=this.data;const r=this.toBBox(e),a=[],o=[];let h,c,l;for(;s||a.length;){if(s||(s=a.pop(),c=a[a.length-1],h=o.pop(),l=!0),s.leaf){const u=y4(e,s.children,n);if(u!==-1)return s.children.splice(u,1),a.push(s),this._condense(a),this}!l&&!s.leaf&&B0(s,r)?(a.push(s),o.push(h),h=0,c=s,s=s.children[0]):c?(h++,s=c.children[h],l=!1):s=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const s=[];for(;e;)e.leaf?n.push(...e.children):s.push(...e.children),e=s.pop();return n}_build(e,n,s,r){const a=s-n+1;let o=this._maxEntries,h;if(a<=o)return h=la(e.slice(n,s+1)),ca(h,this.toBBox),h;r||(r=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,r-1))),h=la([]),h.leaf=!1,h.height=r;const c=Math.ceil(a/o),l=c*Math.ceil(Math.sqrt(o));o2(e,n,s,l,this.compareMinX);for(let u=n;u<=s;u+=l){const f=Math.min(u+l-1,s);o2(e,u,f,c,this.compareMinY);for(let d=u;d<=f;d+=c){const p=Math.min(d+c-1,f);h.children.push(this._build(e,d,p,r-1))}}return ca(h,this.toBBox),h}_chooseSubtree(e,n,s,r){for(;r.push(n),!(n.leaf||r.length-1===s);){let a=1/0,o=1/0,h;for(let c=0;c<n.children.length;c++){const l=n.children[c],u=N0(l),f=m4(e,l)-u;f<o?(o=f,a=u<a?u:a,h=l):f===o&&u<a&&(a=u,h=l)}n=h||n.children[0]}return n}_insert(e,n,s){const r=s?e:this.toBBox(e),a=[],o=this._chooseSubtree(r,this.data,n,a);for(o.children.push(e),$o(o,r);n>=0&&a[n].children.length>this._maxEntries;)this._split(a,n),n--;this._adjustParentBBoxes(r,a,n)}_split(e,n){const s=e[n],r=s.children.length,a=this._minEntries;this._chooseSplitAxis(s,a,r);const o=this._chooseSplitIndex(s,a,r),h=la(s.children.splice(o,s.children.length-o));h.height=s.height,h.leaf=s.leaf,ca(s,this.toBBox),ca(h,this.toBBox),n?e[n-1].children.push(h):this._splitRoot(s,h)}_splitRoot(e,n){this.data=la([e,n]),this.data.height=e.height+1,this.data.leaf=!1,ca(this.data,this.toBBox)}_chooseSplitIndex(e,n,s){let r,a=1/0,o=1/0;for(let h=n;h<=s-n;h++){const c=qo(e,0,h,this.toBBox),l=qo(e,h,s,this.toBBox),u=v4(c,l),f=N0(c)+N0(l);u<a?(a=u,r=h,o=f<o?f:o):u===a&&f<o&&(o=f,r=h)}return r||s-n}_chooseSplitAxis(e,n,s){const r=e.leaf?this.compareMinX:x4,a=e.leaf?this.compareMinY:g4,o=this._allDistMargin(e,n,s,r),h=this._allDistMargin(e,n,s,a);o<h&&e.children.sort(r)}_allDistMargin(e,n,s,r){e.children.sort(r);const a=this.toBBox,o=qo(e,0,n,a),h=qo(e,s-n,s,a);let c=xl(o)+xl(h);for(let l=n;l<s-n;l++){const u=e.children[l];$o(o,e.leaf?a(u):u),c+=xl(o)}for(let l=s-n-1;l>=n;l--){const u=e.children[l];$o(h,e.leaf?a(u):u),c+=xl(h)}return c}_adjustParentBBoxes(e,n,s){for(let r=s;r>=0;r--)$o(n[r],e)}_condense(e){for(let n=e.length-1,s;n>=0;n--)e[n].children.length===0?n>0?(s=e[n-1].children,s.splice(s.indexOf(e[n]),1)):this.clear():ca(e[n],this.toBBox)}}function y4(i,e,n){if(!n)return e.indexOf(i);for(let s=0;s<e.length;s++)if(n(i,e[s]))return s;return-1}function ca(i,e){qo(i,0,i.children.length,e,i)}function qo(i,e,n,s,r){r||(r=la(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let a=e;a<n;a++){const o=i.children[a];$o(r,i.leaf?s(o):o)}return r}function $o(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function x4(i,e){return i.minX-e.minX}function g4(i,e){return i.minY-e.minY}function N0(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function xl(i){return i.maxX-i.minX+(i.maxY-i.minY)}function m4(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function v4(i,e){const n=Math.max(i.minX,e.minX),s=Math.max(i.minY,e.minY),r=Math.min(i.maxX,e.maxX),a=Math.min(i.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,a-s)}function B0(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function gl(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function la(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function o2(i,e,n,s,r){const a=[e,n];for(;a.length;){if(n=a.pop(),e=a.pop(),n-e<=s)continue;const o=e+Math.ceil((n-e)/s/2)*s;a2(i,o,e,n,r),a.push(e,o,o,n)}}/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ls={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w4(i){return!!i.get&&typeof i.get=="function"||!!i.set&&typeof i.set=="function"}function M4(i,e,n){var s=n?i[e]:Object.getOwnPropertyDescriptor(i,e);return!n&&s.value&&typeof s.value=="object"&&(s=s.value),s&&w4(s)?(typeof s.enumerable>"u"&&(s.enumerable=!0),typeof s.configurable>"u"&&(s.configurable=!0),s):!1}function b4(i,e){var n=Object.getOwnPropertyDescriptor(i,e);return n?(n.value&&typeof n.value=="object"&&(n=n.value),n.configurable===!1):!1}function D0(i,e,n,s){for(var r in e)if(e.hasOwnProperty(r)){var a=M4(e,r,n);if(a!==!1){var o=s||i;if(b4(o.prototype,r)){if(Gt.ignoreFinals)continue;throw new Error("cannot override final property '"+r+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(i.prototype,r,a)}else i.prototype[r]=e[r]}}function h2(i,e){if(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)D0(i,e[n].prototype||e[n])}}function Gt(i){i||(i={});var e,n;if(i.initialize){if(typeof i.initialize!="function")throw new Error("initialize must be a function");e=i.initialize,delete i.initialize}else if(i.Extends){var s=i.Extends;e=function(){s.apply(this,arguments)}}else e=function(){};i.Extends?(e.prototype=Object.create(i.Extends.prototype),e.prototype.constructor=e,n=i.Extends,delete i.Extends):e.prototype.constructor=e;var r=null;return i.Mixins&&(r=i.Mixins,delete i.Mixins),h2(e,r),D0(e,i,!0,n),e}Gt.extend=D0,Gt.mixin=h2,Gt.ignoreFinals=!1;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var mi=function(i,e,n){if(i.radius>0&&e>=i.left&&e<=i.right&&n>=i.top&&n<=i.bottom){var s=(i.x-e)*(i.x-e),r=(i.y-n)*(i.y-n);return s+r<=i.radius*i.radius}else return!1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var at=new Gt({initialize:function(e,n){e===void 0&&(e=0),n===void 0&&(n=e),this.type=ls.POINT,this.x=e,this.y=n},setTo:function(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.x=i,this.y=e,this}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var q0=function(i,e,n){return n===void 0&&(n=new at),n.x=i.x+i.radius*Math.cos(e),n.y=i.y+i.radius*Math.sin(e),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Qn=function(i,e,n){return Math.max(e,Math.min(n,i))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Vo=function(i,e,n){return i=Qn(i,0,1),(n-e)*i+e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var he={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c2=function(i,e,n){n===void 0&&(n=new at);var s=Vo(e,0,he.PI2);return q0(i,s,n)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var l2=function(i){return 2*(Math.PI*i.radius)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u2=function(i,e,n,s){s===void 0&&(s=[]),!e&&n>0&&(e=l2(i)/n);for(var r=0;r<e;r++){var a=Vo(r/e,0,he.PI2);s.push(q0(i,a))}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var f2=function(i,e){e===void 0&&(e=new at);var n=2*Math.PI*Math.random(),s=Math.random()+Math.random(),r=s>1?2-s:s,a=r*Math.cos(n),o=r*Math.sin(n);return e.x=i.x+a*i.radius,e.y=i.y+o*i.radius,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Pe=new Gt({initialize:function(e,n,s){e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),this.type=ls.CIRCLE,this.x=e,this.y=n,this._radius=s,this._diameter=s*2},contains:function(i,e){return mi(this,i,e)},getPoint:function(i,e){return c2(this,i,e)},getPoints:function(i,e,n){return u2(this,i,e,n)},getRandomPoint:function(i){return f2(this,i)},setTo:function(i,e,n){return this.x=i,this.y=e,this._radius=n,this._diameter=n*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(i,e){return e===void 0&&(e=i),this.x=i,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(i){this._radius=i,this._diameter=i*2}},diameter:{get:function(){return this._diameter},set:function(i){this._diameter=i,this._radius=i*.5}},left:{get:function(){return this.x-this._radius},set:function(i){this.x=i+this._radius}},right:{get:function(){return this.x+this._radius},set:function(i){this.x=i-this._radius}},top:{get:function(){return this.y-this._radius},set:function(i){this.y=i+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(i){this.y=i-this._radius}}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _4=function(i){return i.radius>0?Math.PI*i.radius*i.radius:0};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S4=function(i){return new Pe(i.x,i.y,i.radius)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T4=function(i,e){return mi(i,e.x,e.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E4=function(i,e){return mi(i,e.x,e.y)&&mi(i,e.right,e.y)&&mi(i,e.x,e.bottom)&&mi(i,e.right,e.bottom)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var z4=function(i,e){return e.setTo(i.x,i.y,i.radius)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var C4=function(i,e){return i.x===e.x&&i.y===e.y&&i.radius===e.radius};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Di=function(i,e,n){return i.width<=0||i.height<=0?!1:i.x<=e&&i.x+i.width>=e&&i.y<=n&&i.y+i.height>=n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Go=function(i){return 2*(i.width+i.height)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $0=function(i,e,n){if(n===void 0&&(n=new at),e<=0||e>=1)return n.x=i.x,n.y=i.y,n;var s=Go(i)*e;return e>.5?(s-=i.width+i.height,s<=i.width?(n.x=i.right-s,n.y=i.bottom):(n.x=i.x,n.y=i.bottom-(s-i.width))):s<=i.width?(n.x=i.x+s,n.y=i.y):(n.x=i.right,n.y=i.y+(s-i.width)),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d2=function(i,e,n,s){s===void 0&&(s=[]),!e&&n>0&&(e=Go(i)/n);for(var r=0;r<e;r++){var a=r/e;s.push($0(i,a))}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var p2=function(i,e,n){return n===void 0&&(n=new at),n.x=i.x1+(i.x2-i.x1)*e,n.y=i.y1+(i.y2-i.y1)*e,n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var cn=function(i){return Math.sqrt((i.x2-i.x1)*(i.x2-i.x1)+(i.y2-i.y1)*(i.y2-i.y1))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y2=function(i,e,n,s){s===void 0&&(s=[]),!e&&n>0&&(e=cn(i)/n);for(var r=i.x1,a=i.y1,o=i.x2,h=i.y2,c=0;c<e;c++){var l=c/e,u=r+(o-r)*l,f=a+(h-a)*l;s.push(new at(u,f))}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var x2=function(i,e){e===void 0&&(e=new at);var n=Math.random();return e.x=i.x1+n*(i.x2-i.x1),e.y=i.y1+n*(i.y2-i.y1),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var V0=function(i,e,n){return n===void 0&&(n=1e-4),Math.abs(i-e)<n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ge=new Gt({initialize:function(e,n){this.x=0,this.y=0,typeof e=="object"?(this.x=e.x||0,this.y=e.y||0):(n===void 0&&(n=e),this.x=e||0,this.y=n||0)},clone:function(){return new ge(this.x,this.y)},copy:function(i){return this.x=i.x||0,this.y=i.y||0,this},setFromObject:function(i){return this.x=i.x||0,this.y=i.y||0,this},set:function(i,e){return e===void 0&&(e=i),this.x=i,this.y=e,this},setTo:function(i,e){return this.set(i,e)},setToPolar:function(i,e){return e==null&&(e=1),this.x=Math.cos(i)*e,this.y=Math.sin(i)*e,this},equals:function(i){return this.x===i.x&&this.y===i.y},fuzzyEquals:function(i,e){return V0(this.x,i.x,e)&&V0(this.y,i.y,e)},angle:function(){var i=Math.atan2(this.y,this.x);return i<0&&(i+=2*Math.PI),i},setAngle:function(i){return this.setToPolar(i,this.length())},add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.x-=i.x,this.y-=i.y,this},multiply:function(i){return this.x*=i.x,this.y*=i.y,this},scale:function(i){return isFinite(i)?(this.x*=i,this.y*=i):(this.x=0,this.y=0),this},divide:function(i){return this.x/=i.x,this.y/=i.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(i){var e=i.x-this.x,n=i.y-this.y;return Math.sqrt(e*e+n*n)},distanceSq:function(i){var e=i.x-this.x,n=i.y-this.y;return e*e+n*n},length:function(){var i=this.x,e=this.y;return Math.sqrt(i*i+e*e)},setLength:function(i){return this.normalize().scale(i)},lengthSq:function(){var i=this.x,e=this.y;return i*i+e*e},normalize:function(){var i=this.x,e=this.y,n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n),this.x=i*n,this.y=e*n),this},normalizeRightHand:function(){var i=this.x;return this.x=this.y*-1,this.y=i,this},normalizeLeftHand:function(){var i=this.x;return this.x=this.y,this.y=i*-1,this},dot:function(i){return this.x*i.x+this.y*i.y},cross:function(i){return this.x*i.y-this.y*i.x},lerp:function(i,e){e===void 0&&(e=0);var n=this.x,s=this.y;return this.x=n+e*(i.x-n),this.y=s+e*(i.y-s),this},transformMat3:function(i){var e=this.x,n=this.y,s=i.val;return this.x=s[0]*e+s[3]*n+s[6],this.y=s[1]*e+s[4]*n+s[7],this},transformMat4:function(i){var e=this.x,n=this.y,s=i.val;return this.x=s[0]*e+s[4]*n+s[12],this.y=s[1]*e+s[5]*n+s[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(i){var e=this.length();return e&&e>i&&this.scale(i/e),this},reflect:function(i){return i=i.clone().normalize(),this.subtract(i.scale(2*this.dot(i)))},mirror:function(i){return this.reflect(i).negate()},rotate:function(i){var e=Math.cos(i),n=Math.sin(i);return this.set(e*this.x-n*this.y,n*this.x+e*this.y)},project:function(i){var e=this.dot(i)/i.dot(i);return this.copy(i).scale(e)}});ge.ZERO=new ge,ge.RIGHT=new ge(1,0),ge.LEFT=new ge(-1,0),ge.UP=new ge(0,-1),ge.DOWN=new ge(0,1),ge.ONE=new ge(1,1);/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ct=new Gt({initialize:function(e,n,s,r){e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),r===void 0&&(r=0),this.type=ls.LINE,this.x1=e,this.y1=n,this.x2=s,this.y2=r},getPoint:function(i,e){return p2(this,i,e)},getPoints:function(i,e,n){return y2(this,i,e,n)},getRandomPoint:function(i){return x2(this,i)},setTo:function(i,e,n,s){return i===void 0&&(i=0),e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),this.x1=i,this.y1=e,this.x2=n,this.y2=s,this},setFromObjects:function(i,e){return this.x1=i.x,this.y1=i.y,this.x2=e.x,this.y2=e.y,this},getPointA:function(i){return i===void 0&&(i=new ge),i.set(this.x1,this.y1),i},getPointB:function(i){return i===void 0&&(i=new ge),i.set(this.x2,this.y2),i},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(i){this.x1<=this.x2?this.x1=i:this.x2=i}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(i){this.x1>this.x2?this.x1=i:this.x2=i}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(i){this.y1<=this.y2?this.y1=i:this.y2=i}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(i){this.y1>this.y2?this.y1=i:this.y2=i}}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g2=function(i,e){return e===void 0&&(e=new at),e.x=i.x+Math.random()*i.width,e.y=i.y+Math.random()*i.height,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var mt=new Gt({initialize:function(e,n,s,r){e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),r===void 0&&(r=0),this.type=ls.RECTANGLE,this.x=e,this.y=n,this.width=s,this.height=r},contains:function(i,e){return Di(this,i,e)},getPoint:function(i,e){return $0(this,i,e)},getPoints:function(i,e,n){return d2(this,i,e,n)},getRandomPoint:function(i){return g2(this,i)},setTo:function(i,e,n,s){return this.x=i,this.y=e,this.width=n,this.height=s,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(i,e){return e===void 0&&(e=i),this.x=i,this.y=e,this},setSize:function(i,e){return e===void 0&&(e=i),this.width=i,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(i){return i===void 0&&(i=new Ct),i.setTo(this.x,this.y,this.right,this.y),i},getLineB:function(i){return i===void 0&&(i=new Ct),i.setTo(this.right,this.y,this.right,this.bottom),i},getLineC:function(i){return i===void 0&&(i=new Ct),i.setTo(this.right,this.bottom,this.x,this.bottom),i},getLineD:function(i){return i===void 0&&(i=new Ct),i.setTo(this.x,this.bottom,this.x,this.y),i},left:{get:function(){return this.x},set:function(i){i>=this.right?this.width=0:this.width=this.right-i,this.x=i}},right:{get:function(){return this.x+this.width},set:function(i){i<=this.x?this.width=0:this.width=i-this.x}},top:{get:function(){return this.y},set:function(i){i>=this.bottom?this.height=0:this.height=this.bottom-i,this.y=i}},bottom:{get:function(){return this.y+this.height},set:function(i){i<=this.y?this.height=0:this.height=i-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(i){this.x=i-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(i){this.y=i-this.height/2}}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var A4=function(i,e){return e===void 0&&(e=new mt),e.x=i.left,e.y=i.top,e.width=i.diameter,e.height=i.diameter,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var P4=function(i,e,n){return i.x+=e,i.y+=n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var I4=function(i,e){return i.x+=e.x,i.y+=e.y,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */Pe.Area=_4,Pe.Circumference=l2,Pe.CircumferencePoint=q0,Pe.Clone=S4,Pe.Contains=mi,Pe.ContainsPoint=T4,Pe.ContainsRect=E4,Pe.CopyFrom=z4,Pe.Equals=C4,Pe.GetBounds=A4,Pe.GetPoint=c2,Pe.GetPoints=u2,Pe.Offset=P4,Pe.OffsetPoint=I4,Pe.Random=f2;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var lr=function(i,e,n){if(i.width<=0||i.height<=0)return!1;var s=(e-i.x)/i.width,r=(n-i.y)/i.height;return s*=s,r*=r,s+r<.25};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var G0=function(i,e,n){n===void 0&&(n=new at);var s=i.width/2,r=i.height/2;return n.x=i.x+s*Math.cos(e),n.y=i.y+r*Math.sin(e),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var m2=function(i,e,n){n===void 0&&(n=new at);var s=Vo(e,0,he.PI2);return G0(i,s,n)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var v2=function(i){var e=i.width/2,n=i.height/2,s=Math.pow(e-n,2)/Math.pow(e+n,2);return Math.PI*(e+n)*(1+3*s/(10+Math.sqrt(4-3*s)))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w2=function(i,e,n,s){s===void 0&&(s=[]),!e&&n>0&&(e=v2(i)/n);for(var r=0;r<e;r++){var a=Vo(r/e,0,he.PI2);s.push(G0(i,a))}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var M2=function(i,e){e===void 0&&(e=new at);var n=Math.random()*Math.PI*2,s=Math.sqrt(Math.random());return e.x=i.x+s*Math.cos(n)*i.width/2,e.y=i.y+s*Math.sin(n)*i.height/2,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Fe=new Gt({initialize:function(e,n,s,r){e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),r===void 0&&(r=0),this.type=ls.ELLIPSE,this.x=e,this.y=n,this.width=s,this.height=r},contains:function(i,e){return lr(this,i,e)},getPoint:function(i,e){return m2(this,i,e)},getPoints:function(i,e,n){return w2(this,i,e,n)},getRandomPoint:function(i){return M2(this,i)},setTo:function(i,e,n,s){return this.x=i,this.y=e,this.width=n,this.height=s,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(i,e){return e===void 0&&(e=i),this.x=i,this.y=e,this},setSize:function(i,e){return e===void 0&&(e=i),this.width=i,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(i){this.x=i+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(i){this.x=i-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(i){this.y=i+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(i){this.y=i-this.height/2}}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R4=function(i){return i.isEmpty()?0:i.getMajorRadius()*i.getMinorRadius()*Math.PI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var O4=function(i){return new Fe(i.x,i.y,i.width,i.height)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var k4=function(i,e){return lr(i,e.x,e.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var L4=function(i,e){return lr(i,e.x,e.y)&&lr(i,e.right,e.y)&&lr(i,e.x,e.bottom)&&lr(i,e.right,e.bottom)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var F4=function(i,e){return e.setTo(i.x,i.y,i.width,i.height)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var N4=function(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var B4=function(i,e){return e===void 0&&(e=new mt),e.x=i.left,e.y=i.top,e.width=i.width,e.height=i.height,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var D4=function(i,e,n){return i.x+=e,i.y+=n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var q4=function(i,e){return i.x+=e.x,i.y+=e.y,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */Fe.Area=R4,Fe.Circumference=v2,Fe.CircumferencePoint=G0,Fe.Clone=O4,Fe.Contains=lr,Fe.ContainsPoint=k4,Fe.ContainsRect=L4,Fe.CopyFrom=F4,Fe.Equals=N4,Fe.GetBounds=B4,Fe.GetPoint=m2,Fe.GetPoints=w2,Fe.Offset=D4,Fe.OffsetPoint=q4,Fe.Random=M2;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var b2=function(i,e,n,s){var r=i-n,a=e-s;return Math.sqrt(r*r+a*a)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _2=function(i,e){return b2(i.x,i.y,e.x,e.y)<=i.radius+e.radius};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S2=function(i,e){var n=e.width/2,s=e.height/2,r=Math.abs(i.x-e.x-n),a=Math.abs(i.y-e.y-s),o=n+i.radius,h=s+i.radius;if(r>o||a>h)return!1;if(r<=n||a<=s)return!0;var c=r-n,l=a-s,u=c*c,f=l*l,d=i.radius*i.radius;return u+f<=d};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $4=function(i,e,n){if(n===void 0&&(n=[]),_2(i,e)){var s=i.x,r=i.y,a=i.radius,o=e.x,h=e.y,c=e.radius,l,u,f,d,p;if(r===h)p=(c*c-a*a-o*o+s*s)/(2*(s-o)),l=1,u=-2*h,f=o*o+p*p-2*o*p+h*h-c*c,d=u*u-4*l*f,d===0?n.push(new at(p,-u/(2*l))):d>0&&(n.push(new at(p,(-u+Math.sqrt(d))/(2*l))),n.push(new at(p,(-u-Math.sqrt(d))/(2*l))));else{var y=(s-o)/(r-h),x=(c*c-a*a-o*o+s*s-h*h+r*r)/(2*(r-h));l=y*y+1,u=2*r*y-2*x*y-2*s,f=s*s+r*r+x*x-a*a-2*r*x,d=u*u-4*l*f,d===0?(p=-u/(2*l),n.push(new at(p,x-p*y))):d>0&&(p=(-u+Math.sqrt(d))/(2*l),n.push(new at(p,x-p*y)),p=(-u-Math.sqrt(d))/(2*l),n.push(new at(p,x-p*y)))}}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var V4=new at,Uo=function(i,e,n){if(n===void 0&&(n=V4),mi(e,i.x1,i.y1))return n.x=i.x1,n.y=i.y1,!0;if(mi(e,i.x2,i.y2))return n.x=i.x2,n.y=i.y2,!0;var s=i.x2-i.x1,r=i.y2-i.y1,a=e.x-i.x1,o=e.y-i.y1,h=s*s+r*r,c=s,l=r;if(h>0){var u=(a*s+o*r)/h;c*=u,l*=u}n.x=i.x1+c,n.y=i.y1+l;var f=c*c+l*l;return f<=h&&c*s+l*r>=0&&mi(e,n.x,n.y)};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var us=function(i,e,n){if(n===void 0&&(n=[]),Uo(i,e)){var s=i.x1,r=i.y1,a=i.x2,o=i.y2,h=e.x,c=e.y,l=e.radius,u=a-s,f=o-r,d=s-h,p=r-c,y=u*u+f*f,x=2*(u*d+f*p),g=d*d+p*p-l*l,m=x*x-4*y*g,v,w;if(m===0){var b=-x/(2*y);v=s+b*u,w=r+b*f,b>=0&&b<=1&&n.push(new at(v,w))}else if(m>0){var S=(-x-Math.sqrt(m))/(2*y);v=s+S*u,w=r+S*f,S>=0&&S<=1&&n.push(new at(v,w));var E=(-x+Math.sqrt(m))/(2*y);v=s+E*u,w=r+E*f,E>=0&&E<=1&&n.push(new at(v,w))}}return n};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var G4=function(i,e,n){if(n===void 0&&(n=[]),S2(i,e)){var s=e.getLineA(),r=e.getLineB(),a=e.getLineC(),o=e.getLineD();us(s,i,n),us(r,i,n),us(a,i,n),us(o,i,n)}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ft=new Gt({initialize:function(e,n,s){this.x=0,this.y=0,this.z=0,typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):(this.x=e||0,this.y=n||0,this.z=s||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this},max:function(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this},clone:function(){return new Ft(this.x,this.y,this.z)},addVectors:function(i,e){return this.x=i.x+e.x,this.y=i.y+e.y,this.z=i.z+e.z,this},subVectors:function(i,e){return this.x=i.x-e.x,this.y=i.y-e.y,this.z=i.z-e.z,this},crossVectors:function(i,e){var n=i.x,s=i.y,r=i.z,a=e.x,o=e.y,h=e.z;return this.x=s*h-r*o,this.y=r*a-n*h,this.z=n*o-s*a,this},equals:function(i){return this.x===i.x&&this.y===i.y&&this.z===i.z},copy:function(i){return this.x=i.x,this.y=i.y,this.z=i.z||0,this},set:function(i,e,n){return typeof i=="object"?(this.x=i.x||0,this.y=i.y||0,this.z=i.z||0):(this.x=i||0,this.y=e||0,this.z=n||0),this},setFromMatrixPosition:function(i){return this.fromArray(i.val,12)},setFromMatrixColumn:function(i,e){return this.fromArray(i.val,e*4)},fromArray:function(i,e){return e===void 0&&(e=0),this.x=i[e],this.y=i[e+1],this.z=i[e+2],this},add:function(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z||0,this},addScalar:function(i){return this.x+=i,this.y+=i,this.z+=i,this},addScale:function(i,e){return this.x+=i.x*e,this.y+=i.y*e,this.z+=i.z*e||0,this},subtract:function(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z||0,this},multiply:function(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z||1,this},scale:function(i){return isFinite(i)?(this.x*=i,this.y*=i,this.z*=i):(this.x=0,this.y=0,this.z=0),this},divide:function(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(i){var e=i.x-this.x,n=i.y-this.y,s=i.z-this.z||0;return Math.sqrt(e*e+n*n+s*s)},distanceSq:function(i){var e=i.x-this.x,n=i.y-this.y,s=i.z-this.z||0;return e*e+n*n+s*s},length:function(){var i=this.x,e=this.y,n=this.z;return Math.sqrt(i*i+e*e+n*n)},lengthSq:function(){var i=this.x,e=this.y,n=this.z;return i*i+e*e+n*n},normalize:function(){var i=this.x,e=this.y,n=this.z,s=i*i+e*e+n*n;return s>0&&(s=1/Math.sqrt(s),this.x=i*s,this.y=e*s,this.z=n*s),this},dot:function(i){return this.x*i.x+this.y*i.y+this.z*i.z},cross:function(i){var e=this.x,n=this.y,s=this.z,r=i.x,a=i.y,o=i.z;return this.x=n*o-s*a,this.y=s*r-e*o,this.z=e*a-n*r,this},lerp:function(i,e){e===void 0&&(e=0);var n=this.x,s=this.y,r=this.z;return this.x=n+e*(i.x-n),this.y=s+e*(i.y-s),this.z=r+e*(i.z-r),this},applyMatrix3:function(i){var e=this.x,n=this.y,s=this.z,r=i.val;return this.x=r[0]*e+r[3]*n+r[6]*s,this.y=r[1]*e+r[4]*n+r[7]*s,this.z=r[2]*e+r[5]*n+r[8]*s,this},applyMatrix4:function(i){var e=this.x,n=this.y,s=this.z,r=i.val,a=1/(r[3]*e+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*s+r[14])*a,this},transformMat3:function(i){var e=this.x,n=this.y,s=this.z,r=i.val;return this.x=e*r[0]+n*r[3]+s*r[6],this.y=e*r[1]+n*r[4]+s*r[7],this.z=e*r[2]+n*r[5]+s*r[8],this},transformMat4:function(i){var e=this.x,n=this.y,s=this.z,r=i.val;return this.x=r[0]*e+r[4]*n+r[8]*s+r[12],this.y=r[1]*e+r[5]*n+r[9]*s+r[13],this.z=r[2]*e+r[6]*n+r[10]*s+r[14],this},transformCoordinates:function(i){var e=this.x,n=this.y,s=this.z,r=i.val,a=e*r[0]+n*r[4]+s*r[8]+r[12],o=e*r[1]+n*r[5]+s*r[9]+r[13],h=e*r[2]+n*r[6]+s*r[10]+r[14],c=e*r[3]+n*r[7]+s*r[11]+r[15];return this.x=a/c,this.y=o/c,this.z=h/c,this},transformQuat:function(i){var e=this.x,n=this.y,s=this.z,r=i.x,a=i.y,o=i.z,h=i.w,c=h*e+a*s-o*n,l=h*n+o*e-r*s,u=h*s+r*n-a*e,f=-r*e-a*n-o*s;return this.x=c*h+f*-r+l*-o-u*-a,this.y=l*h+f*-a+u*-r-c*-o,this.z=u*h+f*-o+c*-a-l*-r,this},project:function(i){var e=this.x,n=this.y,s=this.z,r=i.val,a=r[0],o=r[1],h=r[2],c=r[3],l=r[4],u=r[5],f=r[6],d=r[7],p=r[8],y=r[9],x=r[10],g=r[11],m=r[12],v=r[13],w=r[14],b=r[15],S=1/(e*c+n*d+s*g+b);return this.x=(e*a+n*l+s*p+m)*S,this.y=(e*o+n*u+s*y+v)*S,this.z=(e*h+n*f+s*x+w)*S,this},projectViewMatrix:function(i,e){return this.applyMatrix4(i).applyMatrix4(e)},unprojectViewMatrix:function(i,e){return this.applyMatrix4(i).applyMatrix4(e)},unproject:function(i,e){var n=i.x,s=i.y,r=i.z,a=i.w,o=this.x-n,h=a-this.y-1-s,c=this.z;return this.x=2*o/r-1,this.y=2*h/a-1,this.z=2*c-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});Ft.ZERO=new Ft,Ft.RIGHT=new Ft(1,0,0),Ft.LEFT=new Ft(-1,0,0),Ft.UP=new Ft(0,-1,0),Ft.DOWN=new Ft(0,1,0),Ft.FORWARD=new Ft(0,0,1),Ft.BACK=new Ft(0,0,-1),Ft.ONE=new Ft(1,1,1);/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T2=function(i,e,n,s){n===void 0&&(n=!1);var r=i.x1,a=i.y1,o=i.x2,h=i.y2,c=e.x1,l=e.y1,u=e.x2,f=e.y2,d=o-r,p=h-a,y=u-c,x=f-l,g=d*x-p*y;if(g===0)return null;var m,v,w;if(n){if(m=(d*(l-a)+p*(r-c))/(y*p-x*d),d!==0)v=(c+y*m-r)/d;else if(p!==0)v=(l+x*m-a)/p;else return null;if(v<0||m<0||m>1)return null;w=v}else{if(m=((c-r)*x-(l-a)*y)/g,v=((a-l)*d-(r-c)*p)/g,m<0||m>1||v<0||v>1)return null;w=m}return s===void 0&&(s=new Ft),s.set(r+d*w,a+p*w,w)};/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E2=new Ct,ml=new Ft,z2=function(i,e,n,s){n===void 0&&(n=!1),s===void 0&&(s=new Ft);var r=!1;s.set(),ml.set();for(var a=e[e.length-1],o=0;o<e.length;o++){var h=e[o];E2.setTo(a.x,a.y,h.x,h.y),a=h,T2(i,E2,n,ml)&&(!r||ml.z<s.z)&&(s.copy(ml),r=!0)}return r?s:null};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ie=new Gt({initialize:function(e,n,s,r){this.x=0,this.y=0,this.z=0,this.w=0,typeof e=="object"?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||0):(this.x=e||0,this.y=n||0,this.z=s||0,this.w=r||0)},clone:function(){return new Ie(this.x,this.y,this.z,this.w)},copy:function(i){return this.x=i.x,this.y=i.y,this.z=i.z||0,this.w=i.w||0,this},equals:function(i){return this.x===i.x&&this.y===i.y&&this.z===i.z&&this.w===i.w},set:function(i,e,n,s){return typeof i=="object"?(this.x=i.x||0,this.y=i.y||0,this.z=i.z||0,this.w=i.w||0):(this.x=i||0,this.y=e||0,this.z=n||0,this.w=s||0),this},add:function(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z||0,this.w+=i.w||0,this},subtract:function(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z||0,this.w-=i.w||0,this},scale:function(i){return this.x*=i,this.y*=i,this.z*=i,this.w*=i,this},length:function(){var i=this.x,e=this.y,n=this.z,s=this.w;return Math.sqrt(i*i+e*e+n*n+s*s)},lengthSq:function(){var i=this.x,e=this.y,n=this.z,s=this.w;return i*i+e*e+n*n+s*s},normalize:function(){var i=this.x,e=this.y,n=this.z,s=this.w,r=i*i+e*e+n*n+s*s;return r>0&&(r=1/Math.sqrt(r),this.x=i*r,this.y=e*r,this.z=n*r,this.w=s*r),this},dot:function(i){return this.x*i.x+this.y*i.y+this.z*i.z+this.w*i.w},lerp:function(i,e){e===void 0&&(e=0);var n=this.x,s=this.y,r=this.z,a=this.w;return this.x=n+e*(i.x-n),this.y=s+e*(i.y-s),this.z=r+e*(i.z-r),this.w=a+e*(i.w-a),this},multiply:function(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z||1,this.w*=i.w||1,this},divide:function(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z||1,this.w/=i.w||1,this},distance:function(i){var e=i.x-this.x,n=i.y-this.y,s=i.z-this.z||0,r=i.w-this.w||0;return Math.sqrt(e*e+n*n+s*s+r*r)},distanceSq:function(i){var e=i.x-this.x,n=i.y-this.y,s=i.z-this.z||0,r=i.w-this.w||0;return e*e+n*n+s*s+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(i){var e=this.x,n=this.y,s=this.z,r=this.w,a=i.val;return this.x=a[0]*e+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*s+a[15]*r,this},transformQuat:function(i){var e=this.x,n=this.y,s=this.z,r=i.x,a=i.y,o=i.z,h=i.w,c=h*e+a*s-o*n,l=h*n+o*e-r*s,u=h*s+r*n-a*e,f=-r*e-a*n-o*s;return this.x=c*h+f*-r+l*-o-u*-a,this.y=l*h+f*-a+u*-r-c*-o,this.z=u*h+f*-o+c*-a-l*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});Ie.prototype.sub=Ie.prototype.subtract,Ie.prototype.mul=Ie.prototype.multiply,Ie.prototype.div=Ie.prototype.divide,Ie.prototype.dist=Ie.prototype.distance,Ie.prototype.distSq=Ie.prototype.distanceSq,Ie.prototype.len=Ie.prototype.length,Ie.prototype.lenSq=Ie.prototype.lengthSq;/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ua=new Ft,C2=function(i,e,n,s){s===void 0&&(s=new Ie),Array.isArray(e)||(e=[e]);var r=!1;s.set(),ua.set();for(var a=0;a<e.length;a++)z2(i,e[a].points,n,ua)&&(!r||ua.z<s.z)&&(s.set(ua.x,ua.y,ua.z,a),r=!0);return r?s:null};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $t=function(i,e,n){var s=i.x1,r=i.y1,a=i.x2,o=i.y2,h=e.x1,c=e.y1,l=e.x2,u=e.y2;if(s===a&&r===o||h===l&&c===u)return!1;var f=(u-c)*(a-s)-(l-h)*(o-r);if(f===0)return!1;var d=((l-h)*(r-c)-(u-c)*(s-h))/f,p=((a-s)*(r-c)-(o-r)*(s-h))/f;return d<0||d>1||p<0||p>1?!1:(n&&(n.x=s+d*(a-s),n.y=r+d*(o-r)),!0)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var A2=function(i,e){var n=i.x1,s=i.y1,r=i.x2,a=i.y2,o=e.x,h=e.y,c=e.right,l=e.bottom,u=0;if(n>=o&&n<=c&&s>=h&&s<=l||r>=o&&r<=c&&a>=h&&a<=l)return!0;if(n<o&&r>=o){if(u=s+(a-s)*(o-n)/(r-n),u>h&&u<=l)return!0}else if(n>c&&r<=c&&(u=s+(a-s)*(c-n)/(r-n),u>=h&&u<=l))return!0;if(s<h&&a>=h){if(u=n+(r-n)*(h-s)/(a-s),u>=o&&u<=c)return!0}else if(s>l&&a<=l&&(u=n+(r-n)*(l-s)/(a-s),u>=o&&u<=c))return!0;return!1};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fs=function(i,e,n){if(n===void 0&&(n=[]),A2(i,e))for(var s=e.getLineA(),r=e.getLineB(),a=e.getLineC(),o=e.getLineD(),h=[new at,new at,new at,new at],c=[$t(s,i,h[0]),$t(r,i,h[1]),$t(a,i,h[2]),$t(o,i,h[3])],l=0;l<4;l++)c[l]&&n.push(h[l]);return n};/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var P2=new Ct;function U0(i,e,n,s,r){var a=Math.cos(i),o=Math.sin(i);P2.setTo(e,n,e+a,n+o);var h=C2(P2,s,!0);h&&r.push(new Ie(h.x,h.y,i,h.w))}function U4(i,e){return i.z-e.z}var W4=function(i,e,n){Array.isArray(n)||(n=[n]);for(var s=[],r=[],a=0;a<n.length;a++)for(var o=n[a].points,h=0;h<o.length;h++){var c=Math.atan2(o[h].y-e,o[h].x-i);r.indexOf(c)===-1&&(U0(c,i,e,n,s),U0(c-1e-5,i,e,n,s),U0(c+1e-5,i,e,n,s),r.push(c))}return s.sort(U4)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vl=function(i,e){return i.width<=0||i.height<=0||e.width<=0||e.height<=0?!1:!(i.right<e.x||i.bottom<e.y||i.x>e.right||i.y>e.bottom)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Y4=function(i,e,n){return n===void 0&&(n=new mt),vl(i,e)&&(n.x=Math.max(i.x,e.x),n.y=Math.max(i.y,e.y),n.width=Math.min(i.right,e.right)-n.x,n.height=Math.min(i.bottom,e.bottom)-n.y),n};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var j4=function(i,e,n){if(n===void 0&&(n=[]),vl(i,e)){var s=i.getLineA(),r=i.getLineB(),a=i.getLineC(),o=i.getLineD();fs(s,e,n),fs(r,e,n),fs(a,e,n),fs(o,e,n)}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var wl=function(i,e,n,s){n===void 0&&(n=!1),s===void 0&&(s=[]);for(var r=i.x3-i.x1,a=i.y3-i.y1,o=i.x2-i.x1,h=i.y2-i.y1,c=r*r+a*a,l=r*o+a*h,u=o*o+h*h,f=c*u-l*l,d=f===0?0:1/f,p,y,x,g,m,v,w=i.x1,b=i.y1,S=0;S<e.length&&(x=e[S].x-w,g=e[S].y-b,m=r*x+a*g,v=o*x+h*g,p=(u*m-l*v)*d,y=(c*v-l*m)*d,!(p>=0&&y>=0&&p+y<1&&(s.push({x:e[S].x,y:e[S].y}),n)));S++);return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var I2=function(i,e){return e===void 0&&(e=[]),e.push({x:i.x,y:i.y}),e.push({x:i.right,y:i.y}),e.push({x:i.right,y:i.bottom}),e.push({x:i.x,y:i.bottom}),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var R2=function(i,e){if(e.left>i.right||e.right<i.left||e.top>i.bottom||e.bottom<i.top)return!1;var n=e.getLineA(),s=e.getLineB(),r=e.getLineC();if(Di(i,n.x1,n.y1)||Di(i,n.x2,n.y2)||Di(i,s.x1,s.y1)||Di(i,s.x2,s.y2)||Di(i,r.x1,r.y1)||Di(i,r.x2,r.y2))return!0;var a=i.getLineA(),o=i.getLineB(),h=i.getLineC(),c=i.getLineD();if($t(n,a)||$t(n,o)||$t(n,h)||$t(n,c)||$t(s,a)||$t(s,o)||$t(s,h)||$t(s,c)||$t(r,a)||$t(r,o)||$t(r,h)||$t(r,c))return!0;var l=I2(i),u=wl(e,l,!0);return u.length>0};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var H4=function(i,e,n){if(n===void 0&&(n=[]),R2(i,e)){var s=e.getLineA(),r=e.getLineB(),a=e.getLineC();fs(s,i,n),fs(r,i,n),fs(a,i,n)}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ml=function(i,e,n){var s=i.x3-i.x1,r=i.y3-i.y1,a=i.x2-i.x1,o=i.y2-i.y1,h=e-i.x1,c=n-i.y1,l=s*s+r*r,u=s*a+r*o,f=s*h+r*c,d=a*a+o*o,p=a*h+o*c,y=l*d-u*u,x=y===0?0:1/y,g=(d*f-u*p)*x,m=(l*p-u*f)*x;return g>=0&&m>=0&&g+m<1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var O2=function(i,e){return i.left>e.right||i.right<e.left||i.top>e.bottom||i.bottom<e.top?!1:!!(Ml(i,e.x,e.y)||Uo(i.getLineA(),e)||Uo(i.getLineB(),e)||Uo(i.getLineC(),e))};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var X4=function(i,e,n){if(n===void 0&&(n=[]),O2(i,e)){var s=i.getLineA(),r=i.getLineB(),a=i.getLineC();us(s,e,n),us(r,e,n),us(a,e,n)}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var k2=function(i,e){return!!(i.contains(e.x1,e.y1)||i.contains(e.x2,e.y2)||$t(i.getLineA(),e)||$t(i.getLineB(),e)||$t(i.getLineC(),e))};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var bl=function(i,e,n){if(n===void 0&&(n=[]),k2(i,e))for(var s=i.getLineA(),r=i.getLineB(),a=i.getLineC(),o=[new at,new at,new at],h=[$t(s,e,o[0]),$t(r,e,o[1]),$t(a,e,o[2])],c=0;c<3;c++)h[c]&&n.push(o[c]);return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var W0=function(i,e){return e===void 0&&(e=[]),e.push({x:i.x1,y:i.y1}),e.push({x:i.x2,y:i.y2}),e.push({x:i.x3,y:i.y3}),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var L2=function(i,e){if(i.left>e.right||i.right<e.left||i.top>e.bottom||i.bottom<e.top)return!1;var n=i.getLineA(),s=i.getLineB(),r=i.getLineC(),a=e.getLineA(),o=e.getLineB(),h=e.getLineC();if($t(n,a)||$t(n,o)||$t(n,h)||$t(s,a)||$t(s,o)||$t(s,h)||$t(r,a)||$t(r,o)||$t(r,h))return!0;var c=W0(i),l=wl(e,c,!0);return l.length>0||(c=W0(e),l=wl(i,c,!0),l.length>0)};/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Z4=function(i,e,n){if(n===void 0&&(n=[]),L2(i,e)){var s=e.getLineA(),r=e.getLineB(),a=e.getLineC();bl(i,s,n),bl(i,r,n),bl(i,a,n)}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var F2=function(i,e,n){n===void 0&&(n=1);var s=e.x1,r=e.y1,a=e.x2,o=e.y2,h=i.x,c=i.y,l=(a-s)*(a-s)+(o-r)*(o-r);if(l===0)return!1;var u=((h-s)*(a-s)+(c-r)*(o-r))/l;if(u<0)return Math.sqrt((s-h)*(s-h)+(r-c)*(r-c))<=n;if(u>=0&&u<=1){var f=((r-c)*(a-s)-(s-h)*(o-r))/l;return Math.abs(f)*Math.sqrt(l)<=n}else return Math.sqrt((a-h)*(a-h)+(o-c)*(o-c))<=n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var J4=function(i,e){if(!F2(i,e))return!1;var n=Math.min(e.x1,e.x2),s=Math.max(e.x1,e.x2),r=Math.min(e.y1,e.y2),a=Math.max(e.y1,e.y2);return i.x>=n&&i.x<=s&&i.y>=r&&i.y<=a};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Q4=function(i,e,n,s,r,a){return a===void 0&&(a=0),!(e>i.right+a||n<i.left-a||s>i.bottom+a||r<i.top-a)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const K4={CircleToCircle:_2,CircleToRectangle:S2,GetCircleToCircle:$4,GetCircleToRectangle:G4,GetLineToCircle:us,GetLineToLine:T2,GetLineToPoints:z2,GetLineToPolygon:C2,GetLineToRectangle:fs,GetRaysFromPointToPolygon:W4,GetRectangleIntersection:Y4,GetRectangleToRectangle:j4,GetRectangleToTriangle:H4,GetTriangleToCircle:X4,GetTriangleToLine:bl,GetTriangleToTriangle:Z4,LineToCircle:Uo,LineToLine:$t,LineToRectangle:A2,PointToLine:F2,PointToLineSegment:J4,RectangleToRectangle:vl,RectangleToTriangle:R2,RectangleToValues:Q4,TriangleToCircle:O2,TriangleToLine:k2,TriangleToTriangle:L2};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fa=function(i){return Math.atan2(i.y2-i.y1,i.x2-i.x1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var tI=function(i,e,n){e===void 0&&(e=1),n===void 0&&(n=[]);var s=Math.round(i.x1),r=Math.round(i.y1),a=Math.round(i.x2),o=Math.round(i.y2),h=Math.abs(a-s),c=Math.abs(o-r),l=s<a?1:-1,u=r<o?1:-1,f=h-c;n.push({x:s,y:r});for(var d=1;!(s===a&&r===o);){var p=f<<1;p>-c&&(f-=c,s+=l),p<h&&(f+=h,r+=u),d%e===0&&n.push({x:s,y:r}),d++}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var eI=function(i,e,n){var s=e-(i.x1+i.x2)/2,r=n-(i.y1+i.y2)/2;return i.x1+=s,i.y1+=r,i.x2+=s,i.y2+=r,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var nI=function(i){return new Ct(i.x1,i.y1,i.x2,i.y2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var iI=function(i,e){return e.setTo(i.x1,i.y1,i.x2,i.y2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var sI=function(i,e){return i.x1===e.x1&&i.y1===e.y1&&i.x2===e.x2&&i.y2===e.y2};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var rI=function(i,e,n){n===void 0&&(n=e);var s=cn(i),r=i.x2-i.x1,a=i.y2-i.y1;return e&&(i.x1=i.x1-r/s*e,i.y1=i.y1-a/s*e),n&&(i.x2=i.x2+r/s*n,i.y2=i.y2+a/s*n),i};/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Y0=function(i,e){var n=i.x-e.x,s=i.y-e.y;return Math.sqrt(n*n+s*s)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var aI=function(i,e){return e===void 0&&(e=1.70158),i*i*((e+1)*i-e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var oI=function(i,e){return e===void 0&&(e=1.70158),--i*i*((e+1)*i+e)+1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var hI=function(i,e){e===void 0&&(e=1.70158);var n=e*1.525;return(i*=2)<1?.5*(i*i*((n+1)*i-n)):.5*((i-=2)*i*((n+1)*i+n)+2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Wo={In:aI,Out:oI,InOut:hI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var cI=function(i){return i=1-i,i<1/2.75?1-7.5625*i*i:i<2/2.75?1-(7.5625*(i-=1.5/2.75)*i+.75):i<2.5/2.75?1-(7.5625*(i-=2.25/2.75)*i+.9375):1-(7.5625*(i-=2.625/2.75)*i+.984375)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var lI=function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var uI=function(i){var e=!1;return i<.5?(i=1-i*2,e=!0):i=i*2-1,i<1/2.75?i=7.5625*i*i:i<2/2.75?i=7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?i=7.5625*(i-=2.25/2.75)*i+.9375:i=7.5625*(i-=2.625/2.75)*i+.984375,e?(1-i)*.5:i*.5+.5};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Yo={In:cI,Out:lI,InOut:uI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fI=function(i){return 1-Math.sqrt(1-i*i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dI=function(i){return Math.sqrt(1- --i*i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var pI=function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const jo={In:fI,Out:dI,InOut:pI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var yI=function(i){return i*i*i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var xI=function(i){return--i*i*i+1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gI=function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const da={In:yI,Out:xI,InOut:gI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var mI=function(i,e,n){if(e===void 0&&(e=.1),n===void 0&&(n=.1),i===0)return 0;if(i===1)return 1;var s=n/4;return e<1?e=1:s=n*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(i-=1))*Math.sin((i-s)*(2*Math.PI)/n))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vI=function(i,e,n){if(e===void 0&&(e=.1),n===void 0&&(n=.1),i===0)return 0;if(i===1)return 1;var s=n/4;return e<1?e=1:s=n*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*i)*Math.sin((i-s)*(2*Math.PI)/n)+1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var wI=function(i,e,n){if(e===void 0&&(e=.1),n===void 0&&(n=.1),i===0)return 0;if(i===1)return 1;var s=n/4;return e<1?e=1:s=n*Math.asin(1/e)/(2*Math.PI),(i*=2)<1?-.5*(e*Math.pow(2,10*(i-=1))*Math.sin((i-s)*(2*Math.PI)/n)):e*Math.pow(2,-10*(i-=1))*Math.sin((i-s)*(2*Math.PI)/n)*.5+1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Ho={In:mI,Out:vI,InOut:wI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var MI=function(i){return Math.pow(2,10*(i-1))-.001};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var bI=function(i){return 1-Math.pow(2,-10*i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _I=function(i){return(i*=2)<1?.5*Math.pow(2,10*(i-1)):.5*(2-Math.pow(2,-10*(i-1)))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Xo={In:MI,Out:bI,InOut:_I};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var j0=function(i){return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 *//**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var SI=function(i){return i*i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var TI=function(i){return i*(2-i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var EI=function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const pa={In:SI,Out:TI,InOut:EI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var zI=function(i){return i*i*i*i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var CI=function(i){return 1- --i*i*i*i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var AI=function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const ya={In:zI,Out:CI,InOut:AI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var PI=function(i){return i*i*i*i*i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var II=function(i){return--i*i*i*i*i+1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var RI=function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const xa={In:PI,Out:II,InOut:RI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var OI=function(i){return i===0?0:i===1?1:1-Math.cos(i*Math.PI/2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var kI=function(i){return i===0?0:i===1?1:Math.sin(i*Math.PI/2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var LI=function(i){return i===0?0:i===1?1:.5*(1-Math.cos(Math.PI*i))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Zo={In:OI,Out:kI,InOut:LI};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var N2=function(i,e){return e===void 0&&(e=1),i<=0?0:i>=1?1:((e*i|0)+1)*(1/e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 *//**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Jo={Power0:j0,Power1:pa.Out,Power2:da.Out,Power3:ya.Out,Power4:xa.Out,Linear:j0,Quad:pa.Out,Cubic:da.Out,Quart:ya.Out,Quint:xa.Out,Sine:Zo.Out,Expo:Xo.Out,Circ:jo.Out,Elastic:Ho.Out,Back:Wo.Out,Bounce:Yo.Out,Stepped:N2,"Quad.easeIn":pa.In,"Cubic.easeIn":da.In,"Quart.easeIn":ya.In,"Quint.easeIn":xa.In,"Sine.easeIn":Zo.In,"Expo.easeIn":Xo.In,"Circ.easeIn":jo.In,"Elastic.easeIn":Ho.In,"Back.easeIn":Wo.In,"Bounce.easeIn":Yo.In,"Quad.easeOut":pa.Out,"Cubic.easeOut":da.Out,"Quart.easeOut":ya.Out,"Quint.easeOut":xa.Out,"Sine.easeOut":Zo.Out,"Expo.easeOut":Xo.Out,"Circ.easeOut":jo.Out,"Elastic.easeOut":Ho.Out,"Back.easeOut":Wo.Out,"Bounce.easeOut":Yo.Out,"Quad.easeInOut":pa.InOut,"Cubic.easeInOut":da.InOut,"Quart.easeInOut":ya.InOut,"Quint.easeInOut":xa.InOut,"Sine.easeInOut":Zo.InOut,"Expo.easeInOut":Xo.InOut,"Circ.easeInOut":jo.InOut,"Elastic.easeInOut":Ho.InOut,"Back.easeInOut":Wo.InOut,"Bounce.easeInOut":Yo.InOut};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var B2=function(i){return i&&i[0].toUpperCase()+i.slice(1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Qo=function(i,e){var n=Jo.Power0;if(typeof i=="string")if(Jo.hasOwnProperty(i))n=Jo[i];else{var s="";if(i.indexOf(".")){s=i.substring(i.indexOf(".")+1);var r=s.toLowerCase();r==="in"?s="easeIn":r==="out"?s="easeOut":r==="inout"&&(s="easeInOut")}i=B2(i.substring(0,i.indexOf(".")+1)+s),Jo.hasOwnProperty(i)&&(n=Jo[i])}else typeof i=="function"&&(n=i);if(!e)return n;var a=e.slice(0);return a.unshift(0),function(o){return a[0]=o,n.apply(this,a)}};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var FI=function(i,e,n,s,r){s===void 0&&(s=0),r===void 0&&(r=[]);var a=[],o=i.x1,h=i.y1,c=i.x2-o,l=i.y2-h,u=Qo(e,r),f,d,p=n-1;for(f=0;f<p;f++)d=u(f/p),a.push(new at(o+c*d,h+l*d));if(d=u(1),a.push(new at(o+c*d,h+l*d)),s>0){var y=a[0],x=[y];for(f=1;f<a.length-1;f++){var g=a[f];Y0(y,g)>=s&&(x.push(g),y=g)}var m=a[a.length-1];return Y0(y,m)<s&&x.pop(),x.push(m),x}else return a};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var NI=function(i,e){return e===void 0&&(e=new at),e.x=(i.x1+i.x2)/2,e.y=(i.y1+i.y2)/2,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var BI=function(i,e,n){n===void 0&&(n=new at);var s=i.x1,r=i.y1,a=i.x2,o=i.y2,h=(a-s)*(a-s)+(o-r)*(o-r);if(h===0)return n;var c=((e.x-s)*(a-s)+(e.y-r)*(o-r))/h;return n.x=s+c*(a-s),n.y=r+c*(o-r),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var DI=function(i,e){e===void 0&&(e=new at);var n=fa(i)-he.TAU;return e.x=Math.cos(n),e.y=Math.sin(n),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var qI=function(i,e){var n=i.x1,s=i.y1,r=i.x2,a=i.y2,o=(r-n)*(r-n)+(a-s)*(a-s);if(o===0)return!1;var h=((s-e.y)*(r-n)-(n-e.x)*(a-s))/o;return Math.abs(h)*Math.sqrt(o)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $I=function(i){return Math.abs(i.y1-i.y2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _l=function(i,e,n){var s=n-e;return e+((i-e)%s+s)%s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var D2=function(i){var e=fa(i)-he.TAU;return _l(e,-Math.PI,Math.PI)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var VI=function(i){return Math.cos(fa(i)-he.TAU)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var GI=function(i){return Math.sin(fa(i)-he.TAU)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var UI=function(i,e,n){return i.x1+=e,i.y1+=n,i.x2+=e,i.y2+=n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var WI=function(i){return-((i.x2-i.x1)/(i.y2-i.y1))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var YI=function(i,e){return 2*D2(e)-Math.PI-fa(i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var H0=function(i,e,n,s){var r=Math.cos(s),a=Math.sin(s),o=i.x1-e,h=i.y1-n;return i.x1=o*r-h*a+e,i.y1=o*a+h*r+n,o=i.x2-e,h=i.y2-n,i.x2=o*r-h*a+e,i.y2=o*a+h*r+n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var jI=function(i,e){var n=(i.x1+i.x2)/2,s=(i.y1+i.y2)/2;return H0(i,n,s,e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var HI=function(i,e,n){return H0(i,e.x,e.y,n)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var XI=function(i,e,n,s,r){return i.x1=e,i.y1=n,i.x2=e+Math.cos(s)*r,i.y2=n+Math.sin(s)*r,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ZI=function(i){return(i.y2-i.y1)/(i.x2-i.x1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var JI=function(i){return Math.abs(i.x1-i.x2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */Ct.Angle=fa,Ct.BresenhamPoints=tI,Ct.CenterOn=eI,Ct.Clone=nI,Ct.CopyFrom=iI,Ct.Equals=sI,Ct.Extend=rI,Ct.GetEasedPoints=FI,Ct.GetMidPoint=NI,Ct.GetNearestPoint=BI,Ct.GetNormal=DI,Ct.GetPoint=p2,Ct.GetPoints=y2,Ct.GetShortestDistance=qI,Ct.Height=$I,Ct.Length=cn,Ct.NormalAngle=D2,Ct.NormalX=VI,Ct.NormalY=GI,Ct.Offset=UI,Ct.PerpSlope=WI,Ct.Random=x2,Ct.ReflectAngle=YI,Ct.Rotate=jI,Ct.RotateAroundPoint=HI,Ct.RotateAroundXY=H0,Ct.SetToAngle=XI,Ct.Slope=ZI,Ct.Width=JI;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function X0(i,e,n,s){var r=i-n,a=e-s,o=r*r+a*a;return Math.sqrt(o)}var Ko=new Gt({initialize:function(e,n,s){this.vertex1=e,this.vertex2=n,this.vertex3=s,this.bounds=new mt,this._inCenter=new ge},getInCenter:function(i){i===void 0&&(i=!0);var e=this.vertex1,n=this.vertex2,s=this.vertex3,r,a,o,h,c,l;i?(r=e.x,a=e.y,o=n.x,h=n.y,c=s.x,l=s.y):(r=e.vx,a=e.vy,o=n.vx,h=n.vy,c=s.vx,l=s.vy);var u=X0(c,l,o,h),f=X0(r,a,c,l),d=X0(o,h,r,a),p=u+f+d;return this._inCenter.set((r*u+o*f+c*d)/p,(a*u+h*f+l*d)/p)},contains:function(i,e,n){var s=this.vertex1,r=this.vertex2,a=this.vertex3,o=s.vx,h=s.vy,c=r.vx,l=r.vy,u=a.vx,f=a.vy;if(n){var d=n.a,p=n.b,y=n.c,x=n.d,g=n.e,m=n.f;o=s.vx*d+s.vy*y+g,h=s.vx*p+s.vy*x+m,c=r.vx*d+r.vy*y+g,l=r.vx*p+r.vy*x+m,u=a.vx*d+a.vy*y+g,f=a.vx*p+a.vy*x+m}var v=u-o,w=f-h,b=c-o,S=l-h,E=i-o,A=e-h,M=v*v+w*w,_=v*b+w*S,T=v*E+w*A,C=b*b+S*S,P=b*E+S*A,R=M*C-_*_,k=R===0?0:1/R,I=(C*T-_*P)*k,L=(M*P-_*T)*k;return I>=0&&L>=0&&I+L<1},isCounterClockwise:function(i){var e=this.vertex1,n=this.vertex2,s=this.vertex3,r=(n.vx-e.vx)*(s.vy-e.vy)-(n.vy-e.vy)*(s.vx-e.vx);return i<=0?r>=0:r<0},load:function(i,e,n,s,r){return n=this.vertex1.load(i,e,n,s,r),n=this.vertex2.load(i,e,n,s,r),n=this.vertex3.load(i,e,n,s,r),n},transformCoordinatesLocal:function(i,e,n,s){return this.vertex1.transformCoordinatesLocal(i,e,n,s),this.vertex2.transformCoordinatesLocal(i,e,n,s),this.vertex3.transformCoordinatesLocal(i,e,n,s),this},updateBounds:function(){var i=this.vertex1,e=this.vertex2,n=this.vertex3,s=this.bounds;return s.x=Math.min(i.vx,e.vx,n.vx),s.y=Math.min(i.vy,e.vy,n.vy),s.width=Math.max(i.vx,e.vx,n.vx)-s.x,s.height=Math.max(i.vy,e.vy,n.vy)-s.y,this},isInView:function(i,e,n,s,r,a,o,h,c,l,u){this.update(s,r,a,o,h,c,l,u);var f=this.vertex1,d=this.vertex2,p=this.vertex3;if(f.ta<=0&&d.ta<=0&&p.ta<=0||e&&!this.isCounterClockwise(n))return!1;var y=this.bounds;y.x=Math.min(f.tx,d.tx,p.tx),y.y=Math.min(f.ty,d.ty,p.ty),y.width=Math.max(f.tx,d.tx,p.tx)-y.x,y.height=Math.max(f.ty,d.ty,p.ty)-y.y;var x=i.x+i.width,g=i.y+i.height;return y.width<=0||y.height<=0||i.width<=0||i.height<=0?!1:!(y.right<i.x||y.bottom<i.y||y.x>x||y.y>g)},scrollUV:function(i,e){return this.vertex1.scrollUV(i,e),this.vertex2.scrollUV(i,e),this.vertex3.scrollUV(i,e),this},scaleUV:function(i,e){return this.vertex1.scaleUV(i,e),this.vertex2.scaleUV(i,e),this.vertex3.scaleUV(i,e),this},setColor:function(i){return this.vertex1.color=i,this.vertex2.color=i,this.vertex3.color=i,this},update:function(i,e,n,s,r,a,o,h){return this.vertex1.update(e,n,s,r,a,o,h,i),this.vertex2.update(e,n,s,r,a,o,h,i),this.vertex3.update(e,n,s,r,a,o,h,i),this},translate:function(i,e){e===void 0&&(e=0);var n=this.vertex1,s=this.vertex2,r=this.vertex3;return n.x+=i,n.y+=e,s.x+=i,s.y+=e,r.x+=i,r.y+=e,this},x:{get:function(){return this.getInCenter().x},set:function(i){var e=this.getInCenter();this.translate(i-e.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(i){var e=this.getInCenter();this.translate(0,i-e.y)}},alpha:{get:function(){var i=this.vertex1,e=this.vertex2,n=this.vertex3;return(i.alpha+e.alpha+n.alpha)/3},set:function(i){this.vertex1.alpha=i,this.vertex2.alpha=i,this.vertex3.alpha=i}},depth:{get:function(){var i=this.vertex1,e=this.vertex2,n=this.vertex3;return(i.vz+e.vz+n.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var xt=function(i,e,n){var s=typeof i;return!i||s==="number"||s==="string"?n:i.hasOwnProperty(e)&&i[e]!==void 0?i[e]:n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Sl=1e-6,ds=new Gt({initialize:function(e){this.val=new Float32Array(16),e?this.copy(e):this.identity()},clone:function(){return new ds(this)},set:function(i){return this.copy(i)},setValues:function(i,e,n,s,r,a,o,h,c,l,u,f,d,p,y,x){var g=this.val;return g[0]=i,g[1]=e,g[2]=n,g[3]=s,g[4]=r,g[5]=a,g[6]=o,g[7]=h,g[8]=c,g[9]=l,g[10]=u,g[11]=f,g[12]=d,g[13]=p,g[14]=y,g[15]=x,this},copy:function(i){var e=i.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(i){return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(i,e,n){var s=ga.fromQuat(n),r=s.val,a=e.x,o=e.y,h=e.z;return this.setValues(r[0]*a,r[1]*a,r[2]*a,0,r[4]*o,r[5]*o,r[6]*o,0,r[8]*h,r[9]*h,r[10]*h,0,i.x,i.y,i.z,1)},xyz:function(i,e,n){this.identity();var s=this.val;return s[12]=i,s[13]=e,s[14]=n,this},scaling:function(i,e,n){this.zero();var s=this.val;return s[0]=i,s[5]=e,s[10]=n,s[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var i=this.val,e=i[1],n=i[2],s=i[3],r=i[6],a=i[7],o=i[11];return i[1]=i[4],i[2]=i[8],i[3]=i[12],i[4]=e,i[6]=i[9],i[7]=i[13],i[8]=n,i[9]=r,i[11]=i[14],i[12]=s,i[13]=a,i[14]=o,this},getInverse:function(i){return this.copy(i),this.invert()},invert:function(){var i=this.val,e=i[0],n=i[1],s=i[2],r=i[3],a=i[4],o=i[5],h=i[6],c=i[7],l=i[8],u=i[9],f=i[10],d=i[11],p=i[12],y=i[13],x=i[14],g=i[15],m=e*o-n*a,v=e*h-s*a,w=e*c-r*a,b=n*h-s*o,S=n*c-r*o,E=s*c-r*h,A=l*y-u*p,M=l*x-f*p,_=l*g-d*p,T=u*x-f*y,C=u*g-d*y,P=f*g-d*x,R=m*P-v*C+w*T+b*_-S*M+E*A;return R?(R=1/R,this.setValues((o*P-h*C+c*T)*R,(s*C-n*P-r*T)*R,(y*E-x*S+g*b)*R,(f*S-u*E-d*b)*R,(h*_-a*P-c*M)*R,(e*P-s*_+r*M)*R,(x*w-p*E-g*v)*R,(l*E-f*w+d*v)*R,(a*C-o*_+c*A)*R,(n*_-e*C-r*A)*R,(p*S-y*w+g*m)*R,(u*w-l*S-d*m)*R,(o*M-a*T-h*A)*R,(e*T-n*M+s*A)*R,(y*v-p*b-x*m)*R,(l*b-u*v+f*m)*R)):this},adjoint:function(){var i=this.val,e=i[0],n=i[1],s=i[2],r=i[3],a=i[4],o=i[5],h=i[6],c=i[7],l=i[8],u=i[9],f=i[10],d=i[11],p=i[12],y=i[13],x=i[14],g=i[15];return this.setValues(o*(f*g-d*x)-u*(h*g-c*x)+y*(h*d-c*f),-(n*(f*g-d*x)-u*(s*g-r*x)+y*(s*d-r*f)),n*(h*g-c*x)-o*(s*g-r*x)+y*(s*c-r*h),-(n*(h*d-c*f)-o*(s*d-r*f)+u*(s*c-r*h)),-(a*(f*g-d*x)-l*(h*g-c*x)+p*(h*d-c*f)),e*(f*g-d*x)-l*(s*g-r*x)+p*(s*d-r*f),-(e*(h*g-c*x)-a*(s*g-r*x)+p*(s*c-r*h)),e*(h*d-c*f)-a*(s*d-r*f)+l*(s*c-r*h),a*(u*g-d*y)-l*(o*g-c*y)+p*(o*d-c*u),-(e*(u*g-d*y)-l*(n*g-r*y)+p*(n*d-r*u)),e*(o*g-c*y)-a*(n*g-r*y)+p*(n*c-r*o),-(e*(o*d-c*u)-a*(n*d-r*u)+l*(n*c-r*o)),-(a*(u*x-f*y)-l*(o*x-h*y)+p*(o*f-h*u)),e*(u*x-f*y)-l*(n*x-s*y)+p*(n*f-s*u),-(e*(o*x-h*y)-a*(n*x-s*y)+p*(n*h-s*o)),e*(o*f-h*u)-a*(n*f-s*u)+l*(n*h-s*o))},determinant:function(){var i=this.val,e=i[0],n=i[1],s=i[2],r=i[3],a=i[4],o=i[5],h=i[6],c=i[7],l=i[8],u=i[9],f=i[10],d=i[11],p=i[12],y=i[13],x=i[14],g=i[15],m=e*o-n*a,v=e*h-s*a,w=e*c-r*a,b=n*h-s*o,S=n*c-r*o,E=s*c-r*h,A=l*y-u*p,M=l*x-f*p,_=l*g-d*p,T=u*x-f*y,C=u*g-d*y,P=f*g-d*x;return m*P-v*C+w*T+b*_-S*M+E*A},multiply:function(i){var e=this.val,n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],p=e[11],y=e[12],x=e[13],g=e[14],m=e[15],v=i.val,w=v[0],b=v[1],S=v[2],E=v[3];return e[0]=w*n+b*o+S*u+E*y,e[1]=w*s+b*h+S*f+E*x,e[2]=w*r+b*c+S*d+E*g,e[3]=w*a+b*l+S*p+E*m,w=v[4],b=v[5],S=v[6],E=v[7],e[4]=w*n+b*o+S*u+E*y,e[5]=w*s+b*h+S*f+E*x,e[6]=w*r+b*c+S*d+E*g,e[7]=w*a+b*l+S*p+E*m,w=v[8],b=v[9],S=v[10],E=v[11],e[8]=w*n+b*o+S*u+E*y,e[9]=w*s+b*h+S*f+E*x,e[10]=w*r+b*c+S*d+E*g,e[11]=w*a+b*l+S*p+E*m,w=v[12],b=v[13],S=v[14],E=v[15],e[12]=w*n+b*o+S*u+E*y,e[13]=w*s+b*h+S*f+E*x,e[14]=w*r+b*c+S*d+E*g,e[15]=w*a+b*l+S*p+E*m,this},multiplyLocal:function(i){var e=this.val,n=i.val;return this.setValues(e[0]*n[0]+e[1]*n[4]+e[2]*n[8]+e[3]*n[12],e[0]*n[1]+e[1]*n[5]+e[2]*n[9]+e[3]*n[13],e[0]*n[2]+e[1]*n[6]+e[2]*n[10]+e[3]*n[14],e[0]*n[3]+e[1]*n[7]+e[2]*n[11]+e[3]*n[15],e[4]*n[0]+e[5]*n[4]+e[6]*n[8]+e[7]*n[12],e[4]*n[1]+e[5]*n[5]+e[6]*n[9]+e[7]*n[13],e[4]*n[2]+e[5]*n[6]+e[6]*n[10]+e[7]*n[14],e[4]*n[3]+e[5]*n[7]+e[6]*n[11]+e[7]*n[15],e[8]*n[0]+e[9]*n[4]+e[10]*n[8]+e[11]*n[12],e[8]*n[1]+e[9]*n[5]+e[10]*n[9]+e[11]*n[13],e[8]*n[2]+e[9]*n[6]+e[10]*n[10]+e[11]*n[14],e[8]*n[3]+e[9]*n[7]+e[10]*n[11]+e[11]*n[15],e[12]*n[0]+e[13]*n[4]+e[14]*n[8]+e[15]*n[12],e[12]*n[1]+e[13]*n[5]+e[14]*n[9]+e[15]*n[13],e[12]*n[2]+e[13]*n[6]+e[14]*n[10]+e[15]*n[14],e[12]*n[3]+e[13]*n[7]+e[14]*n[11]+e[15]*n[15])},premultiply:function(i){return this.multiplyMatrices(i,this)},multiplyMatrices:function(i,e){var n=i.val,s=e.val,r=n[0],a=n[4],o=n[8],h=n[12],c=n[1],l=n[5],u=n[9],f=n[13],d=n[2],p=n[6],y=n[10],x=n[14],g=n[3],m=n[7],v=n[11],w=n[15],b=s[0],S=s[4],E=s[8],A=s[12],M=s[1],_=s[5],T=s[9],C=s[13],P=s[2],R=s[6],k=s[10],I=s[14],L=s[3],F=s[7],B=s[11],V=s[15];return this.setValues(r*b+a*M+o*P+h*L,c*b+l*M+u*P+f*L,d*b+p*M+y*P+x*L,g*b+m*M+v*P+w*L,r*S+a*_+o*R+h*F,c*S+l*_+u*R+f*F,d*S+p*_+y*R+x*F,g*S+m*_+v*R+w*F,r*E+a*T+o*k+h*B,c*E+l*T+u*k+f*B,d*E+p*T+y*k+x*B,g*E+m*T+v*k+w*B,r*A+a*C+o*I+h*V,c*A+l*C+u*I+f*V,d*A+p*C+y*I+x*V,g*A+m*C+v*I+w*V)},translate:function(i){return this.translateXYZ(i.x,i.y,i.z)},translateXYZ:function(i,e,n){var s=this.val;return s[12]=s[0]*i+s[4]*e+s[8]*n+s[12],s[13]=s[1]*i+s[5]*e+s[9]*n+s[13],s[14]=s[2]*i+s[6]*e+s[10]*n+s[14],s[15]=s[3]*i+s[7]*e+s[11]*n+s[15],this},scale:function(i){return this.scaleXYZ(i.x,i.y,i.z)},scaleXYZ:function(i,e,n){var s=this.val;return s[0]=s[0]*i,s[1]=s[1]*i,s[2]=s[2]*i,s[3]=s[3]*i,s[4]=s[4]*e,s[5]=s[5]*e,s[6]=s[6]*e,s[7]=s[7]*e,s[8]=s[8]*n,s[9]=s[9]*n,s[10]=s[10]*n,s[11]=s[11]*n,this},makeRotationAxis:function(i,e){var n=Math.cos(e),s=Math.sin(e),r=1-n,a=i.x,o=i.y,h=i.z,c=r*a,l=r*o;return this.setValues(c*a+n,c*o-s*h,c*h+s*o,0,c*o+s*h,l*o+n,l*h-s*a,0,c*h-s*o,l*h+s*a,r*h*h+n,0,0,0,0,1)},rotate:function(i,e){var n=this.val,s=e.x,r=e.y,a=e.z,o=Math.sqrt(s*s+r*r+a*a);if(Math.abs(o)<Sl)return this;o=1/o,s*=o,r*=o,a*=o;var h=Math.sin(i),c=Math.cos(i),l=1-c,u=n[0],f=n[1],d=n[2],p=n[3],y=n[4],x=n[5],g=n[6],m=n[7],v=n[8],w=n[9],b=n[10],S=n[11],E=n[12],A=n[13],M=n[14],_=n[15],T=s*s*l+c,C=r*s*l+a*h,P=a*s*l-r*h,R=s*r*l-a*h,k=r*r*l+c,I=a*r*l+s*h,L=s*a*l+r*h,F=r*a*l-s*h,B=a*a*l+c;return this.setValues(u*T+y*C+v*P,f*T+x*C+w*P,d*T+g*C+b*P,p*T+m*C+S*P,u*R+y*k+v*I,f*R+x*k+w*I,d*R+g*k+b*I,p*R+m*k+S*I,u*L+y*F+v*B,f*L+x*F+w*B,d*L+g*F+b*B,p*L+m*F+S*B,E,A,M,_)},rotateX:function(i){var e=this.val,n=Math.sin(i),s=Math.cos(i),r=e[4],a=e[5],o=e[6],h=e[7],c=e[8],l=e[9],u=e[10],f=e[11];return e[4]=r*s+c*n,e[5]=a*s+l*n,e[6]=o*s+u*n,e[7]=h*s+f*n,e[8]=c*s-r*n,e[9]=l*s-a*n,e[10]=u*s-o*n,e[11]=f*s-h*n,this},rotateY:function(i){var e=this.val,n=Math.sin(i),s=Math.cos(i),r=e[0],a=e[1],o=e[2],h=e[3],c=e[8],l=e[9],u=e[10],f=e[11];return e[0]=r*s-c*n,e[1]=a*s-l*n,e[2]=o*s-u*n,e[3]=h*s-f*n,e[8]=r*n+c*s,e[9]=a*n+l*s,e[10]=o*n+u*s,e[11]=h*n+f*s,this},rotateZ:function(i){var e=this.val,n=Math.sin(i),s=Math.cos(i),r=e[0],a=e[1],o=e[2],h=e[3],c=e[4],l=e[5],u=e[6],f=e[7];return e[0]=r*s+c*n,e[1]=a*s+l*n,e[2]=o*s+u*n,e[3]=h*s+f*n,e[4]=c*s-r*n,e[5]=l*s-a*n,e[6]=u*s-o*n,e[7]=f*s-h*n,this},fromRotationTranslation:function(i,e){var n=i.x,s=i.y,r=i.z,a=i.w,o=n+n,h=s+s,c=r+r,l=n*o,u=n*h,f=n*c,d=s*h,p=s*c,y=r*c,x=a*o,g=a*h,m=a*c;return this.setValues(1-(d+y),u+m,f-g,0,u-m,1-(l+y),p+x,0,f+g,p-x,1-(l+d),0,e.x,e.y,e.z,1)},fromQuat:function(i){var e=i.x,n=i.y,s=i.z,r=i.w,a=e+e,o=n+n,h=s+s,c=e*a,l=e*o,u=e*h,f=n*o,d=n*h,p=s*h,y=r*a,x=r*o,g=r*h;return this.setValues(1-(f+p),l+g,u-x,0,l-g,1-(c+p),d+y,0,u+x,d-y,1-(c+f),0,0,0,0,1)},frustum:function(i,e,n,s,r,a){var o=1/(e-i),h=1/(s-n),c=1/(r-a);return this.setValues(r*2*o,0,0,0,0,r*2*h,0,0,(e+i)*o,(s+n)*h,(a+r)*c,-1,0,0,a*r*2*c,0)},perspective:function(i,e,n,s){var r=1/Math.tan(i/2),a=1/(n-s);return this.setValues(r/e,0,0,0,0,r,0,0,0,0,(s+n)*a,-1,0,0,2*s*n*a,0)},perspectiveLH:function(i,e,n,s){return this.setValues(2*n/i,0,0,0,0,2*n/e,0,0,0,0,-s/(n-s),1,0,0,n*s/(n-s),0)},ortho:function(i,e,n,s,r,a){var o=i-e,h=n-s,c=r-a;return o=o===0?o:1/o,h=h===0?h:1/h,c=c===0?c:1/c,this.setValues(-2*o,0,0,0,0,-2*h,0,0,0,0,2*c,0,(i+e)*o,(s+n)*h,(a+r)*c,1)},lookAtRH:function(i,e,n){var s=this.val;return Mn.subVectors(i,e),Mn.lengthSq()===0&&(Mn.z=1),Mn.normalize(),ps.crossVectors(n,Mn),ps.lengthSq()===0&&(Math.abs(n.z)===1?Mn.x+=1e-4:Mn.z+=1e-4,Mn.normalize(),ps.crossVectors(n,Mn)),ps.normalize(),Tl.crossVectors(Mn,ps),s[0]=ps.x,s[1]=ps.y,s[2]=ps.z,s[4]=Tl.x,s[5]=Tl.y,s[6]=Tl.z,s[8]=Mn.x,s[9]=Mn.y,s[10]=Mn.z,this},lookAt:function(i,e,n){var s=i.x,r=i.y,a=i.z,o=n.x,h=n.y,c=n.z,l=e.x,u=e.y,f=e.z;if(Math.abs(s-l)<Sl&&Math.abs(r-u)<Sl&&Math.abs(a-f)<Sl)return this.identity();var d=s-l,p=r-u,y=a-f,x=1/Math.sqrt(d*d+p*p+y*y);d*=x,p*=x,y*=x;var g=h*y-c*p,m=c*d-o*y,v=o*p-h*d;x=Math.sqrt(g*g+m*m+v*v),x?(x=1/x,g*=x,m*=x,v*=x):(g=0,m=0,v=0);var w=p*v-y*m,b=y*g-d*v,S=d*m-p*g;return x=Math.sqrt(w*w+b*b+S*S),x?(x=1/x,w*=x,b*=x,S*=x):(w=0,b=0,S=0),this.setValues(g,w,d,0,m,b,p,0,v,S,y,0,-(g*s+m*r+v*a),-(w*s+b*r+S*a),-(d*s+p*r+y*a),1)},yawPitchRoll:function(i,e,n){this.zero(),ga.zero(),th.zero();var s=this.val,r=ga.val,a=th.val,o=Math.sin(n),h=Math.cos(n);return s[10]=1,s[15]=1,s[0]=h,s[1]=o,s[4]=-o,s[5]=h,o=Math.sin(e),h=Math.cos(e),r[0]=1,r[15]=1,r[5]=h,r[10]=h,r[9]=-o,r[6]=o,o=Math.sin(i),h=Math.cos(i),a[5]=1,a[15]=1,a[0]=h,a[2]=-o,a[8]=o,a[10]=h,this.multiplyLocal(ga),this.multiplyLocal(th),this},setWorldMatrix:function(i,e,n,s,r){return this.yawPitchRoll(i.y,i.x,i.z),ga.scaling(n.x,n.y,n.z),th.xyz(e.x,e.y,e.z),this.multiplyLocal(ga),this.multiplyLocal(th),s&&this.multiplyLocal(s),r&&this.multiplyLocal(r),this},multiplyToMat4:function(i,e){var n=this.val,s=i.val,r=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],u=n[6],f=n[7],d=n[8],p=n[9],y=n[10],x=n[11],g=n[12],m=n[13],v=n[14],w=n[15],b=s[0],S=s[1],E=s[2],A=s[3],M=s[4],_=s[5],T=s[6],C=s[7],P=s[8],R=s[9],k=s[10],I=s[11],L=s[12],F=s[13],B=s[14],V=s[15];return e.setValues(b*r+S*c+E*d+A*g,S*a+S*l+E*p+A*m,E*o+S*u+E*y+A*v,A*h+S*f+E*x+A*w,M*r+_*c+T*d+C*g,M*a+_*l+T*p+C*m,M*o+_*u+T*y+C*v,M*h+_*f+T*x+C*w,P*r+R*c+k*d+I*g,P*a+R*l+k*p+I*m,P*o+R*u+k*y+I*v,P*h+R*f+k*x+I*w,L*r+F*c+B*d+V*g,L*a+F*l+B*p+V*m,L*o+F*u+B*y+V*v,L*h+F*f+B*x+V*w)},fromRotationXYTranslation:function(i,e,n){var s=e.x,r=e.y,a=e.z,o=Math.sin(i.x),h=Math.cos(i.x),c=Math.sin(i.y),l=Math.cos(i.y),u=s,f=r,d=a,p=-o,y=0-p*c,x=0-h*c,g=p*l,m=h*l;return n||(u=l*s+c*a,f=y*s+h*r+g*a,d=x*s+o*r+m*a),this.setValues(l,y,x,0,0,h,o,0,c,g,m,0,u,f,d,1)},getMaxScaleOnAxis:function(){var i=this.val,e=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],n=i[4]*i[4]+i[5]*i[5]+i[6]*i[6],s=i[8]*i[8]+i[9]*i[9]+i[10]*i[10];return Math.sqrt(Math.max(e,n,s))}}),ga=new ds,th=new ds,ps=new Ft,Tl=new Ft,Mn=new Ft;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function QI(i,e){var n=(e*255|0)&255;return(n<<24|i)>>>0}var Ln=new Gt({Extends:Ft,initialize:function(e,n,s,r,a,o,h,c,l,u){o===void 0&&(o=16777215),h===void 0&&(h=1),c===void 0&&(c=0),l===void 0&&(l=0),u===void 0&&(u=0),Ft.call(this,e,n,s),this.vx=0,this.vy=0,this.vz=0,this.nx=c,this.ny=l,this.nz=u,this.u=r,this.v=a,this.color=o,this.alpha=h,this.tx=0,this.ty=0,this.ta=0,this.tu=r,this.tv=a},setUVs:function(i,e){return this.u=i,this.v=e,this.tu=i,this.tv=e,this},scrollUV:function(i,e){return this.tu+=i,this.tv+=e,this},scaleUV:function(i,e){return this.tu=this.u*i,this.tv=this.v*e,this},transformCoordinatesLocal:function(i,e,n,s){var r=this.x,a=this.y,o=this.z,h=i.val,c=r*h[0]+a*h[4]+o*h[8]+h[12],l=r*h[1]+a*h[5]+o*h[9]+h[13],u=r*h[2]+a*h[6]+o*h[10]+h[14],f=r*h[3]+a*h[7]+o*h[11]+h[15];this.vx=c/f*e,this.vy=-(l/f)*n,s<=0?this.vz=u/f:this.vz=-(u/f)},resize:function(i,e,n,s,r,a){return this.x=i,this.y=e,this.vx=this.x*n,this.vy=-this.y*s,this.vz=0,r<.5?this.vx+=n*(.5-r):r>.5&&(this.vx-=n*(r-.5)),a<.5?this.vy+=s*(.5-a):a>.5&&(this.vy-=s*(a-.5)),this},update:function(i,e,n,s,r,a,o,h){var c=this.vx*i+this.vy*n+r,l=this.vx*e+this.vy*s+a;return o&&(c=Math.round(c),l=Math.round(l)),this.tx=c,this.ty=l,this.ta=this.alpha*h,this},load:function(i,e,n,s,r){return i[++n]=this.tx,i[++n]=this.ty,i[++n]=this.tu,i[++n]=this.tv,i[++n]=s,i[++n]=r,e[++n]=QI(this.color,this.ta),n}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var q2=new Ft,$2=new Ft,ur=new ds,KI=function(i){var e=xt(i,"mesh"),n=xt(i,"texture",null),s=xt(i,"frame"),r=xt(i,"width",1),a=xt(i,"height",r),o=xt(i,"widthSegments",1),h=xt(i,"heightSegments",o),c=xt(i,"x",0),l=xt(i,"y",0),u=xt(i,"z",0),f=xt(i,"rotateX",0),d=xt(i,"rotateY",0),p=xt(i,"rotateZ",0),y=xt(i,"zIsUp",!0),x=xt(i,"isOrtho",e?e.dirtyCache[11]:!1),g=xt(i,"colors",[16777215]),m=xt(i,"alphas",[1]),v=xt(i,"tile",!1),w=xt(i,"flipY",!1),b=xt(i,"width",null),S={faces:[],verts:[]};q2.set(c,l,u),$2.set(f,d,p),ur.fromRotationXYTranslation($2,q2,y);var E;if(!n&&e)n=e.texture,s||(E=e.frame);else if(e&&typeof n=="string")n=e.scene.sys.textures.get(n);else if(!n)return S;E||(E=n.get(s)),!b&&x&&n&&e&&(r=E.width/e.height,a=E.height/e.height);var A=r/2,M=a/2,_=Math.floor(o),T=Math.floor(h),C=_+1,P=T+1,R=r/_,k=a/T,I=[],L=[],F,B,V=0,J=1,j=0,ht=1;E&&(V=E.u0,J=E.u1,w?(j=E.v1,ht=E.v0):(j=E.v0,ht=E.v1));var rt=J-V,ft=ht-j;for(B=0;B<P;B++){var lt=B*k-M;for(F=0;F<C;F++){var wt=F*R-A;L.push(wt,-lt);var Yt=V+rt*(F/_),ye=j+ft*(B/T);I.push(Yt,ye)}}Array.isArray(g)||(g=[g]),Array.isArray(m)||(m=[m]);var ie=0,Se=0;for(B=0;B<T;B++)for(F=0;F<_;F++){var xe=(F+C*B)*2,te=(F+C*(B+1))*2,Zt=(F+1+C*(B+1))*2,H=(F+1+C*B)*2,Z=g[Se],et=m[ie],ut=new Ln(L[xe],L[xe+1],0,I[xe],I[xe+1],Z,et).transformMat4(ur),ot=new Ln(L[te],L[te+1],0,I[te],I[te+1],Z,et).transformMat4(ur),kt=new Ln(L[H],L[H+1],0,I[H],I[H+1],Z,et).transformMat4(ur),bt=new Ln(L[te],L[te+1],0,I[te],I[te+1],Z,et).transformMat4(ur),jt=new Ln(L[Zt],L[Zt+1],0,I[Zt],I[Zt+1],Z,et).transformMat4(ur),nt=new Ln(L[H],L[H+1],0,I[H],I[H+1],Z,et).transformMat4(ur);v&&(ut.setUVs(V,ht),ot.setUVs(V,j),kt.setUVs(J,ht),bt.setUVs(V,j),jt.setUVs(J,j),nt.setUVs(J,ht)),Se++,Se===g.length&&(Se=0),ie++,ie===m.length&&(ie=0),S.verts.push(ut,ot,kt,bt,jt,nt),S.faces.push(new Ko(ut,ot,kt),new Ko(bt,jt,nt))}return e&&(e.faces=e.faces.concat(S.faces),e.vertices=e.vertices.concat(S.verts)),S};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var V2=new Ft,G2=new Ft,El=new ds,tR=function(i,e,n,s,r,a,o,h,c,l){n===void 0&&(n=1),s===void 0&&(s=0),r===void 0&&(r=0),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=!0);var u={faces:[],verts:[]},f=i.materials;V2.set(s,r,a),G2.set(o,h,c),El.fromRotationXYTranslation(G2,V2,l);for(var d=0;d<i.models.length;d++)for(var p=i.models[d],y=p.vertices,x=p.textureCoords,g=p.faces,m=0;m<g.length;m++){var v=g[m],w=v.vertices[0],b=v.vertices[1],S=v.vertices[2],E=y[w.vertexIndex],A=y[b.vertexIndex],M=y[S.vertexIndex],_=w.textureCoordsIndex,T=b.textureCoordsIndex,C=S.textureCoordsIndex,P=_===-1?{u:0,v:1}:x[_],R=T===-1?{u:0,v:0}:x[T],k=C===-1?{u:1,v:1}:x[C],I=16777215;v.material!==""&&f[v.material]&&(I=f[v.material]);var L=new Ln(E.x*n,E.y*n,E.z*n,P.u,P.v,I).transformMat4(El),F=new Ln(A.x*n,A.y*n,A.z*n,R.u,R.v,I).transformMat4(El),B=new Ln(M.x*n,M.y*n,M.z*n,k.u,k.v,I).transformMat4(El);u.verts.push(L,F,B),u.faces.push(new Ko(L,F,B))}return e&&(e.faces=e.faces.concat(u.faces),e.vertices=e.vertices.concat(u.verts)),u};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var eR=function(i,e,n,s,r,a,o,h){if(s===void 0&&(s=!1),a===void 0&&(a=16777215),o===void 0&&(o=1),h===void 0&&(h=!1),i.length!==e.length&&!s){console.warn("GenerateVerts: vertices and uvs count not equal");return}var c={faces:[],vertices:[]},l,u,f,d,p,y,x,g,m,v,w,b=s?3:2,S=Array.isArray(a),E=Array.isArray(o);if(Array.isArray(n)&&n.length>0)for(l=0;l<n.length;l++){var A=n[l],M=n[l]*2,_=n[l]*b;u=i[_],f=i[_+1],d=s?i[_+2]:0,p=e[M],y=e[M+1],h&&(y=1-y),x=S?a[A]:a,g=E?o[A]:o,m=0,v=0,w=0,r&&(m=r[_],v=r[_+1],w=s?r[_+2]:0),c.vertices.push(new Ln(u,f,d,p,y,x,g,m,v,w))}else{var T=0,C=0;for(l=0;l<i.length;l+=b)u=i[l],f=i[l+1],d=s?i[l+2]:0,p=e[T],y=e[T+1],x=S?a[C]:a,g=E?o[C]:o,m=0,v=0,w=0,r&&(m=r[l],v=r[l+1],w=s?r[l+2]:0),c.vertices.push(new Ln(u,f,d,p,y,x,g,m,v,w)),T+=2,C++}for(l=0;l<c.vertices.length;l+=3){var P=c.vertices[l],R=c.vertices[l+1],k=c.vertices[l+2];c.faces.push(new Ko(P,R,k))}return c};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var U2=!0,W2="untitled",eh="",Z0="";function nR(i){var e=i.indexOf("#");return e>-1?i.substring(0,e):i}function nh(i){return i.models.length===0&&i.models.push({faces:[],name:W2,textureCoords:[],vertexNormals:[],vertices:[]}),eh="",i.models[i.models.length-1]}function iR(i,e){var n=i.length>=2?i[1]:W2;e.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),eh=""}function sR(i){i.length===2&&(eh=i[1])}function rR(i,e){var n=i.length,s=n>=2?parseFloat(i[1]):0,r=n>=3?parseFloat(i[2]):0,a=n>=4?parseFloat(i[3]):0;nh(e).vertices.push({x:s,y:r,z:a})}function aR(i,e){var n=i.length,s=n>=2?parseFloat(i[1]):0,r=n>=3?parseFloat(i[2]):0,a=n>=4?parseFloat(i[3]):0;isNaN(s)&&(s=0),isNaN(r)&&(r=0),isNaN(a)&&(a=0),U2&&(r=1-r),nh(e).textureCoords.push({u:s,v:r,w:a})}function oR(i,e){var n=i.length,s=n>=2?parseFloat(i[1]):0,r=n>=3?parseFloat(i[2]):0,a=n>=4?parseFloat(i[3]):0;nh(e).vertexNormals.push({x:s,y:r,z:a})}function hR(i,e){var n=i.length-1;if(!(n<3)){for(var s={group:eh,material:Z0,vertices:[]},r=0;r<n;r++){var a=i[r+1],o=a.split("/"),h=o.length;if(!(h<1||h>3)){var c=0,l=0,u=0;c=parseInt(o[0],10),h>1&&o[1]!==""&&(l=parseInt(o[1],10)),h>2&&(u=parseInt(o[2],10)),c!==0&&(c<0&&(c=nh(e).vertices.length+1+c),l-=1,c-=1,u-=1,s.vertices.push({textureCoordsIndex:l,vertexIndex:c,vertexNormalIndex:u}))}}nh(e).faces.push(s)}}function cR(i,e){i.length>=2&&e.materialLibraries.push(i[1])}function lR(i){i.length>=2&&(Z0=i[1])}var uR=function(i,e){e===void 0&&(e=!0),U2=e;var n={materials:{},materialLibraries:[],models:[]};eh="",Z0="";for(var s=i.split(`
`),r=0;r<s.length;r++){var a=nR(s[r]),o=a.replace(/\s\s+/g," ").trim().split(" ");switch(o[0].toLowerCase()){case"o":iR(o,n);break;case"g":sR(o);break;case"v":rR(o,n);break;case"vt":aR(o,n);break;case"vn":oR(o,n);break;case"f":hR(o,n);break;case"mtllib":cR(o,n);break;case"usemtl":lR(o);break}}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vi=function(i,e,n){return i<<16|e<<8|n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fR=function(i){for(var e={},n=i.split(`
`),s="",r=0;r<n.length;r++){var a=n[r].trim();if(!(a.indexOf("#")===0||a==="")){var o=a.replace(/\s\s+/g," ").trim().split(" ");switch(o[0].toLowerCase()){case"newmtl":{s=o[1];break}case"kd":{var h=Math.floor(o[1]*255),c=o.length>=2?Math.floor(o[2]*255):h,l=o.length>=3?Math.floor(o[3]*255):h;e[s]=vi(h,c,l);break}}}}return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dR=function(i,e,n,s){var r,a;if(n===void 0&&s===void 0){var o=i.getInCenter();r=o.x,a=o.y}var h=Math.cos(e),c=Math.sin(e),l=i.vertex1,u=i.vertex2,f=i.vertex3,d=l.x-r,p=l.y-a;l.set(d*h-p*c+r,d*c+p*h+a),d=u.x-r,p=u.y-a,u.set(d*h-p*c+r,d*c+p*h+a),d=f.x-r,p=f.y-a,f.set(d*h-p*c+r,d*c+p*h+a)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var pR={Face:Ko,GenerateGridVerts:KI,GenerateObjVerts:tR,GenerateVerts:eR,ParseObj:uR,ParseObjMaterial:fR,RotateFace:dR,Vertex:Ln};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var yR=function(i){return i.setTo(Math.ceil(i.x),Math.ceil(i.y))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var xR=function(i){return new at(i.x,i.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gR=function(i,e){return e.setTo(i.x,i.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var mR=function(i,e){return i.x===e.x&&i.y===e.y};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vR=function(i){return i.setTo(Math.floor(i.x),Math.floor(i.y))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var wR=function(i,e){if(e===void 0&&(e=new at),!Array.isArray(i))throw new Error("GetCentroid points argument must be an array");var n=i.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(n===1)e.x=i[0].x,e.y=i[0].y;else{for(var s=0;s<n;s++)e.x+=i[s].x,e.y+=i[s].y;e.x/=n,e.y/=n}return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Y2=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var j2=function(i){return i.x*i.x+i.y*i.y};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var MR=function(i,e){e===void 0&&(e=new mt);for(var n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=0;o<i.length;o++){var h=i[o];h.x>n&&(n=h.x),h.x<s&&(s=h.x),h.y>r&&(r=h.y),h.y<a&&(a=h.y)}return e.x=s,e.y=a,e.width=n-s,e.height=r-a,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var bR=function(i,e,n,s){return n===void 0&&(n=0),s===void 0&&(s=new at),s.x=i.x+(e.x-i.x)*n,s.y=i.y+(e.y-i.y)*n,s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _R=function(i){return i.setTo(i.y,i.x)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var SR=function(i,e){return e===void 0&&(e=new at),e.setTo(-i.x,-i.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var TR=function(i,e,n){n===void 0&&(n=new at);var s=i.x*e.x+i.y*e.y,r=s/j2(e);return r!==0&&(n.x=r*e.x,n.y=r*e.y),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ER=function(i,e,n){n===void 0&&(n=new at);var s=i.x*e.x+i.y*e.y;return s!==0&&(n.x=s*e.x,n.y=s*e.y),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var zR=function(i,e){if(i.x!==0||i.y!==0){var n=Y2(i);i.x/=n,i.y/=n}return i.x*=e,i.y*=e,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */at.Ceil=yR,at.Clone=xR,at.CopyFrom=gR,at.Equals=mR,at.Floor=vR,at.GetCentroid=wR,at.GetMagnitude=Y2,at.GetMagnitudeSq=j2,at.GetRectangleFromPoints=MR,at.Interpolate=bR,at.Invert=_R,at.Negative=SR,at.Project=TR,at.ProjectUnit=ER,at.SetMagnitude=zR;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var J0=function(i,e,n){for(var s=!1,r=-1,a=i.points.length-1;++r<i.points.length;a=r){var o=i.points[r].x,h=i.points[r].y,c=i.points[a].x,l=i.points[a].y;(h<=n&&n<l||l<=n&&n<h)&&e<(c-o)*(n-h)/(l-h)+o&&(s=!s)}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var H2=function(i){for(var e=i.points,n=0,s=0;s<e.length;s++){var r=e[s],a=e[(s+1)%e.length],o=new Ct(r.x,r.y,a.x,a.y);n+=cn(o)}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var X2=function(i,e,n,s){s===void 0&&(s=[]);var r=i.points,a=H2(i);!e&&n>0&&(e=a/n);for(var o=0;o<e;o++)for(var h=a*(o/e),c=0,l=0;l<r.length;l++){var u=r[l],f=r[(l+1)%r.length],d=new Ct(u.x,u.y,f.x,f.y),p=cn(d);if(h<c||h>c+p){c+=p;continue}var y=d.getPoint((h-c)/p);s.push(y);break}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ln=new Gt({initialize:function(e){this.type=ls.POLYGON,this.area=0,this.points=[],e&&this.setTo(e)},contains:function(i,e){return J0(this,i,e)},setTo:function(i){if(this.area=0,this.points=[],typeof i=="string"&&(i=i.split(" ")),!Array.isArray(i))return this;for(var e,n=0;n<i.length;n++)e={x:0,y:0},typeof i[n]=="number"||typeof i[n]=="string"?(e.x=parseFloat(i[n]),e.y=parseFloat(i[n+1]),n++):Array.isArray(i[n])?(e.x=i[n][0],e.y=i[n][1]):(e.x=i[n].x,e.y=i[n].y),this.points.push(e);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var i=0,e,n,s=0;s<this.points.length-1;s++)e=this.points[s],n=this.points[s+1],i+=(n.x-e.x)*(e.y+n.y);return e=this.points[0],n=this.points[this.points.length-1],i+=(e.x-n.x)*(n.y+e.y),this.area=-i*.5,this.area},getPoints:function(i,e,n){return X2(this,i,e,n)}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var CR=function(i){return new ln(i.points)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var AR=function(i,e){return J0(i,e.x,e.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function zl(i,e,n){n=n||2;var s=e&&e.length,r=s?e[0]*n:i.length,a=Z2(i,0,r,n,!0),o=[];if(!a||a.next===a.prev)return o;var h,c,l,u,f,d,p;if(s&&(a=kR(i,e,a,n)),i.length>80*n){h=l=i[0],c=u=i[1];for(var y=n;y<r;y+=n)f=i[y],d=i[y+1],f<h&&(h=f),d<c&&(c=d),f>l&&(l=f),d>u&&(u=d);p=Math.max(l-h,u-c),p=p!==0?32767/p:0}return ih(a,o,n,h,c,p,0),o}function Z2(i,e,n,s,r){var a,o;if(r===td(i,e,n,s)>0)for(a=e;a<n;a+=s)o=K2(a,i[a],i[a+1],o);else for(a=n-s;a>=e;a-=s)o=K2(a,i[a],i[a+1],o);return o&&Cl(o,o.next)&&(rh(o),o=o.next),o}function fr(i,e){if(!i)return i;e||(e=i);var n=i,s;do if(s=!1,!n.steiner&&(Cl(n,n.next)||ce(n.prev,n,n.next)===0)){if(rh(n),n=e=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==e);return e}function ih(i,e,n,s,r,a,o){if(i){!o&&a&&DR(i,s,r,a);for(var h=i,c,l;i.prev!==i.next;){if(c=i.prev,l=i.next,a?IR(i,s,r,a):PR(i)){e.push(c.i/n|0),e.push(i.i/n|0),e.push(l.i/n|0),rh(i),i=l.next,h=l.next;continue}if(i=l,i===h){o?o===1?(i=RR(fr(i),e,n),ih(i,e,n,s,r,a,2)):o===2&&OR(i,e,n,s,r,a):ih(fr(i),e,n,s,r,a,1);break}}}}function PR(i){var e=i.prev,n=i,s=i.next;if(ce(e,n,s)>=0)return!1;for(var r=e.x,a=n.x,o=s.x,h=e.y,c=n.y,l=s.y,u=r<a?r<o?r:o:a<o?a:o,f=h<c?h<l?h:l:c<l?c:l,d=r>a?r>o?r:o:a>o?a:o,p=h>c?h>l?h:l:c>l?c:l,y=s.next;y!==e;){if(y.x>=u&&y.x<=d&&y.y>=f&&y.y<=p&&ma(r,h,a,c,o,l,y.x,y.y)&&ce(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function IR(i,e,n,s){var r=i.prev,a=i,o=i.next;if(ce(r,a,o)>=0)return!1;for(var h=r.x,c=a.x,l=o.x,u=r.y,f=a.y,d=o.y,p=h<c?h<l?h:l:c<l?c:l,y=u<f?u<d?u:d:f<d?f:d,x=h>c?h>l?h:l:c>l?c:l,g=u>f?u>d?u:d:f>d?f:d,m=Q0(p,y,e,n,s),v=Q0(x,g,e,n,s),w=i.prevZ,b=i.nextZ;w&&w.z>=m&&b&&b.z<=v;){if(w.x>=p&&w.x<=x&&w.y>=y&&w.y<=g&&w!==r&&w!==o&&ma(h,u,c,f,l,d,w.x,w.y)&&ce(w.prev,w,w.next)>=0||(w=w.prevZ,b.x>=p&&b.x<=x&&b.y>=y&&b.y<=g&&b!==r&&b!==o&&ma(h,u,c,f,l,d,b.x,b.y)&&ce(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;w&&w.z>=m;){if(w.x>=p&&w.x<=x&&w.y>=y&&w.y<=g&&w!==r&&w!==o&&ma(h,u,c,f,l,d,w.x,w.y)&&ce(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=x&&b.y>=y&&b.y<=g&&b!==r&&b!==o&&ma(h,u,c,f,l,d,b.x,b.y)&&ce(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function RR(i,e,n){var s=i;do{var r=s.prev,a=s.next.next;!Cl(r,a)&&J2(r,s,s.next,a)&&sh(r,a)&&sh(a,r)&&(e.push(r.i/n|0),e.push(s.i/n|0),e.push(a.i/n|0),rh(s),rh(s.next),s=i=a),s=s.next}while(s!==i);return fr(s)}function OR(i,e,n,s,r,a){var o=i;do{for(var h=o.next.next;h!==o.prev;){if(o.i!==h.i&&VR(o,h)){var c=Q2(o,h);o=fr(o,o.next),c=fr(c,c.next),ih(o,e,n,s,r,a,0),ih(c,e,n,s,r,a,0);return}h=h.next}o=o.next}while(o!==i)}function kR(i,e,n,s){var r=[],a,o,h,c,l;for(a=0,o=e.length;a<o;a++)h=e[a]*s,c=a<o-1?e[a+1]*s:i.length,l=Z2(i,h,c,s,!1),l===l.next&&(l.steiner=!0),r.push($R(l));for(r.sort(LR),a=0;a<r.length;a++)n=FR(r[a],n);return n}function LR(i,e){return i.x-e.x}function FR(i,e){var n=NR(i,e);if(!n)return e;var s=Q2(n,i);return fr(s,s.next),fr(n,n.next)}function NR(i,e){var n=e,s=i.x,r=i.y,a=-1/0,o;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var h=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>a&&(a=h,o=n.x<n.next.x?n:n.next,h===s))return o}n=n.next}while(n!==e);if(!o)return null;var c=o,l=o.x,u=o.y,f=1/0,d;n=o;do s>=n.x&&n.x>=l&&s!==n.x&&ma(r<u?s:a,r,l,u,r<u?a:s,r,n.x,n.y)&&(d=Math.abs(r-n.y)/(s-n.x),sh(n,i)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&BR(o,n)))&&(o=n,f=d)),n=n.next;while(n!==c);return o}function BR(i,e){return ce(i.prev,i,e.prev)<0&&ce(e.next,i,i.next)<0}function DR(i,e,n,s){var r=i;do r.z===0&&(r.z=Q0(r.x,r.y,e,n,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,qR(r)}function qR(i){var e,n,s,r,a,o,h,c,l=1;do{for(n=i,i=null,a=null,o=0;n;){for(o++,s=n,h=0,e=0;e<l&&(h++,s=s.nextZ,!!s);e++);for(c=l;h>0||c>0&&s;)h!==0&&(c===0||!s||n.z<=s.z)?(r=n,n=n.nextZ,h--):(r=s,s=s.nextZ,c--),a?a.nextZ=r:i=r,r.prevZ=a,a=r;n=s}a.nextZ=null,l*=2}while(o>1);return i}function Q0(i,e,n,s,r){return i=(i-n)*r|0,e=(e-s)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function $R(i){var e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function ma(i,e,n,s,r,a,o,h){return(r-o)*(e-h)>=(i-o)*(a-h)&&(i-o)*(s-h)>=(n-o)*(e-h)&&(n-o)*(a-h)>=(r-o)*(s-h)}function VR(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!GR(i,e)&&(sh(i,e)&&sh(e,i)&&UR(i,e)&&(ce(i.prev,i,e.prev)||ce(i,e.prev,e))||Cl(i,e)&&ce(i.prev,i,i.next)>0&&ce(e.prev,e,e.next)>0)}function ce(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function Cl(i,e){return i.x===e.x&&i.y===e.y}function J2(i,e,n,s){var r=Pl(ce(i,e,n)),a=Pl(ce(i,e,s)),o=Pl(ce(n,s,i)),h=Pl(ce(n,s,e));return!!(r!==a&&o!==h||r===0&&Al(i,n,e)||a===0&&Al(i,s,e)||o===0&&Al(n,i,s)||h===0&&Al(n,e,s))}function Al(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function Pl(i){return i>0?1:i<0?-1:0}function GR(i,e){var n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==e.i&&n.next.i!==e.i&&J2(n,n.next,i,e))return!0;n=n.next}while(n!==i);return!1}function sh(i,e){return ce(i.prev,i,i.next)<0?ce(i,e,i.next)>=0&&ce(i,i.prev,e)>=0:ce(i,e,i.prev)<0||ce(i,i.next,e)<0}function UR(i,e){var n=i,s=!1,r=(i.x+e.x)/2,a=(i.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==i);return s}function Q2(i,e){var n=new K0(i.i,i.x,i.y),s=new K0(e.i,e.x,e.y),r=i.next,a=e.prev;return i.next=e,e.prev=i,n.next=r,r.prev=n,s.next=n,n.prev=s,a.next=s,s.prev=a,s}function K2(i,e,n,s){var r=new K0(i,e,n);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function rh(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function K0(i,e,n){this.i=i,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}zl.deviation=function(i,e,n,s){var r=e&&e.length,a=r?e[0]*n:i.length,o=Math.abs(td(i,0,a,n));if(r)for(var h=0,c=e.length;h<c;h++){var l=e[h]*n,u=h<c-1?e[h+1]*n:i.length;o-=Math.abs(td(i,l,u,n))}var f=0;for(h=0;h<s.length;h+=3){var d=s[h]*n,p=s[h+1]*n,y=s[h+2]*n;f+=Math.abs((i[d]-i[y])*(i[p+1]-i[d+1])-(i[d]-i[p])*(i[y+1]-i[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function td(i,e,n,s){for(var r=0,a=e,o=n-s;a<n;a+=s)r+=(i[o]-i[a])*(i[a+1]+i[o+1]),o=a;return r}zl.flatten=function(i){for(var e=i[0][0].length,n={vertices:[],holes:[],dimensions:e},s=0,r=0;r<i.length;r++){for(var a=0;a<i[r].length;a++)for(var o=0;o<e;o++)n.vertices.push(i[r][a][o]);r>0&&(s+=i[r-1].length,n.holes.push(s))}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var WR=function(i,e){e===void 0&&(e=new mt);for(var n=1/0,s=1/0,r=-n,a=-s,o,h=0;h<i.points.length;h++)o=i.points[h],n=Math.min(n,o.x),s=Math.min(s,o.y),r=Math.max(r,o.x),a=Math.max(a,o.y);return e.x=n,e.y=s,e.width=r-n,e.height=a-s,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var YR=function(i,e){e===void 0&&(e=[]);for(var n=0;n<i.points.length;n++)e.push(i.points[n].x),e.push(i.points[n].y);return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var jR=function(i){return i.points.reverse(),i};function HR(i,e){var n=i.x-e.x,s=i.y-e.y;return n*n+s*s}function XR(i,e,n){var s=e.x,r=e.y,a=n.x-s,o=n.y-r;if(a!==0||o!==0){var h=((i.x-s)*a+(i.y-r)*o)/(a*a+o*o);h>1?(s=n.x,r=n.y):h>0&&(s+=a*h,r+=o*h)}return a=i.x-s,o=i.y-r,a*a+o*o}function ZR(i,e){for(var n=i[0],s=[n],r,a=1,o=i.length;a<o;a++)r=i[a],HR(r,n)>e&&(s.push(r),n=r);return n!==r&&s.push(r),s}function ed(i,e,n,s,r){for(var a=s,o,h=e+1;h<n;h++){var c=XR(i[h],i[e],i[n]);c>a&&(o=h,a=c)}a>s&&(o-e>1&&ed(i,e,o,s,r),r.push(i[o]),n-o>1&&ed(i,o,n,s,r))}function JR(i,e){var n=i.length-1,s=[i[0]];return ed(i,0,n,e,s),s.push(i[n]),s}var QR=function(i,e,n){e===void 0&&(e=1),n===void 0&&(n=!1);var s=i.points;if(s.length>2){var r=e*e;n||(s=ZR(s,r)),i.setTo(JR(s,r))}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var tw=function(i,e){return i[0]=e[0],i[1]=e[1],i},KR=function(i){var e,n=[],s=i.points;for(e=0;e<s.length;e++)n.push([s[e].x,s[e].y]);var r=[];for(n.length>0&&r.push(tw([0,0],n[0])),e=0;e<n.length-1;e++){var a=n[e],o=n[e+1],h=a[0],c=a[1],l=o[0],u=o[1];r.push([.85*h+.15*l,.85*c+.15*u]),r.push([.15*h+.85*l,.15*c+.85*u])}return n.length>1&&r.push(tw([0,0],n[n.length-1])),i.setTo(r)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var tO=function(i,e,n){for(var s=i.points,r=0;r<s.length;r++)s[r].x+=e,s[r].y+=n;return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */ln.Clone=CR,ln.Contains=J0,ln.ContainsPoint=AR,ln.Earcut=zl,ln.GetAABB=WR,ln.GetNumberArray=YR,ln.GetPoints=X2,ln.Perimeter=H2,ln.Reverse=jR,ln.Simplify=QR,ln.Smooth=KR,ln.Translate=tO;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var eO=function(i){return i.width*i.height};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var nO=function(i){return i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var iO=function(i){return i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ew=function(i,e,n){return i.x=e-i.width/2,i.y=n-i.height/2,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var sO=function(i){return new mt(i.x,i.y,i.width,i.height)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var rO=function(i,e){return Di(i,e.x,e.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var nw=function(i,e){return e.width*e.height>i.width*i.height?!1:e.x>i.x&&e.x<i.right&&e.right>i.x&&e.right<i.right&&e.y>i.y&&e.y<i.bottom&&e.bottom>i.y&&e.bottom<i.bottom};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var aO=function(i,e){return e.setTo(i.x,i.y,i.width,i.height)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var oO=function(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ah=function(i){return i.height===0?NaN:i.width/i.height};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var hO=function(i,e){var n=ah(i);return n<ah(e)?i.setSize(e.height*n,e.height):i.setSize(e.width,e.width/n),i.setPosition(e.centerX-i.width/2,e.centerY-i.height/2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var cO=function(i,e){var n=ah(i);return n>ah(e)?i.setSize(e.height*n,e.height):i.setSize(e.width,e.width/n),i.setPosition(e.centerX-i.width/2,e.centerY-i.height/2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var lO=function(i){return i.x=Math.floor(i.x),i.y=Math.floor(i.y),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var uO=function(i){return i.x=Math.floor(i.x),i.y=Math.floor(i.y),i.width=Math.floor(i.width),i.height=Math.floor(i.height),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fO=function(i,e){if(e===void 0&&(e=new mt),i.length===0)return e;for(var n=Number.MAX_VALUE,s=Number.MAX_VALUE,r=he.MIN_SAFE_INTEGER,a=he.MIN_SAFE_INTEGER,o,h,c,l=0;l<i.length;l++)o=i[l],Array.isArray(o)?(h=o[0],c=o[1]):(h=o.x,c=o.y),n=Math.min(n,h),s=Math.min(s,c),r=Math.max(r,h),a=Math.max(a,c);return e.x=n,e.y=s,e.width=r-n,e.height=a-s,e};/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dO=function(i,e,n,s,r){return r===void 0&&(r=new mt),r.setTo(Math.min(i,n),Math.min(e,s),Math.abs(i-n),Math.abs(e-s))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var pO=function(i,e){return e===void 0&&(e=new at),e.x=i.centerX,e.y=i.centerY,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var yO=function(i,e){return e===void 0&&(e=new at),e.x=i.width,e.y=i.height,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var xO=function(i,e,n){var s=i.centerX,r=i.centerY;return i.setSize(i.width+e*2,i.height+n*2),ew(i,s,r)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gO=function(i,e,n){return n===void 0&&(n=new mt),vl(i,e)?(n.x=Math.max(i.x,e.x),n.y=Math.max(i.y,e.y),n.width=Math.min(i.right,e.right)-n.x,n.height=Math.min(i.bottom,e.bottom)-n.y):n.setEmpty(),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var mO=function(i,e,n,s){if(s===void 0&&(s=[]),!e&&!n)return s;e?n=Math.round(Go(i)/e):e=Go(i)/n;for(var r=i.x,a=i.y,o=0,h=0;h<n;h++)switch(s.push(new at(r,a)),o){case 0:r+=e,r>=i.right&&(o=1,a+=r-i.right,r=i.right);break;case 1:a+=e,a>=i.bottom&&(o=2,r-=a-i.bottom,a=i.bottom);break;case 2:r-=e,r<=i.left&&(o=3,a-=i.left-r,r=i.left);break;case 3:a-=e,a<=i.top&&(o=0,a=i.top);break}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vO=function(i,e){for(var n=i.x,s=i.right,r=i.y,a=i.bottom,o=0;o<e.length;o++)n=Math.min(n,e[o].x),s=Math.max(s,e[o].x),r=Math.min(r,e[o].y),a=Math.max(a,e[o].y);return i.x=n,i.y=r,i.width=s-n,i.height=a-r,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var wO=function(i,e){var n=Math.min(i.x,e.x),s=Math.max(i.right,e.right);i.x=n,i.width=s-n;var r=Math.min(i.y,e.y),a=Math.max(i.bottom,e.bottom);return i.y=r,i.height=a-r,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var MO=function(i,e,n){var s=Math.min(i.x,e),r=Math.max(i.right,e);i.x=s,i.width=r-s;var a=Math.min(i.y,n),o=Math.max(i.bottom,n);return i.y=a,i.height=o-a,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var bO=function(i,e,n){return i.x+=e,i.y+=n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _O=function(i,e){return i.x+=e.x,i.y+=e.y,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var SO=function(i,e){return i.x<e.right&&i.right>e.x&&i.y<e.bottom&&i.bottom>e.y};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var iw=function(i){return i*he.DEG_TO_RAD};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var TO=function(i,e,n){n===void 0&&(n=new at),e=iw(e);var s=Math.sin(e),r=Math.cos(e),a=r>0?i.width/2:i.width/-2,o=s>0?i.height/2:i.height/-2;return Math.abs(a*s)<Math.abs(o*r)?o=a*s/r:a=o*r/s,n.x=a+i.centerX,n.y=o+i.centerY,n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var va=function(i,e){return Math.floor(Math.random()*(e-i+1)+i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var EO=function(i,e,n){if(n===void 0&&(n=new at),nw(i,e))switch(va(0,3)){case 0:n.x=i.x+Math.random()*(e.right-i.x),n.y=i.y+Math.random()*(e.top-i.y);break;case 1:n.x=e.x+Math.random()*(i.right-e.x),n.y=e.bottom+Math.random()*(i.bottom-e.bottom);break;case 2:n.x=i.x+Math.random()*(e.x-i.x),n.y=e.y+Math.random()*(i.bottom-e.y);break;case 3:n.x=e.right+Math.random()*(i.right-e.right),n.y=i.y+Math.random()*(e.bottom-i.y);break}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var zO=function(i,e){return i.width===e.width&&i.height===e.height};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var CO=function(i,e,n){return n===void 0&&(n=e),i.width*=e,i.height*=n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var AO=function(i,e,n){n===void 0&&(n=new mt);var s=Math.min(i.x,e.x),r=Math.min(i.y,e.y),a=Math.max(i.right,e.right)-s,o=Math.max(i.bottom,e.bottom)-r;return n.setTo(s,r,a,o)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */mt.Area=eO,mt.Ceil=nO,mt.CeilAll=iO,mt.CenterOn=ew,mt.Clone=sO,mt.Contains=Di,mt.ContainsPoint=rO,mt.ContainsRect=nw,mt.CopyFrom=aO,mt.Decompose=I2,mt.Equals=oO,mt.FitInside=hO,mt.FitOutside=cO,mt.Floor=lO,mt.FloorAll=uO,mt.FromPoints=fO,mt.FromXY=dO,mt.GetAspectRatio=ah,mt.GetCenter=pO,mt.GetPoint=$0,mt.GetPoints=d2,mt.GetSize=yO,mt.Inflate=xO,mt.Intersection=gO,mt.MarchingAnts=mO,mt.MergePoints=vO,mt.MergeRect=wO,mt.MergeXY=MO,mt.Offset=bO,mt.OffsetPoint=_O,mt.Overlaps=SO,mt.Perimeter=Go,mt.PerimeterPoint=TO,mt.Random=g2,mt.RandomOutside=EO,mt.SameDimensions=zO,mt.Scale=CO,mt.Union=AO;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var sw=function(i,e,n){n===void 0&&(n=new at);var s=i.getLineA(),r=i.getLineB(),a=i.getLineC();if(e<=0||e>=1)return n.x=s.x1,n.y=s.y1,n;var o=cn(s),h=cn(r),c=cn(a),l=o+h+c,u=l*e,f=0;return u<o?(f=u/o,n.x=s.x1+(s.x2-s.x1)*f,n.y=s.y1+(s.y2-s.y1)*f):u>o+h?(u-=o+h,f=u/c,n.x=a.x1+(a.x2-a.x1)*f,n.y=a.y1+(a.y2-a.y1)*f):(u-=o,f=u/h,n.x=r.x1+(r.x2-r.x1)*f,n.y=r.y1+(r.y2-r.y1)*f),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var rw=function(i,e,n,s){s===void 0&&(s=[]);var r=i.getLineA(),a=i.getLineB(),o=i.getLineC(),h=cn(r),c=cn(a),l=cn(o),u=h+c+l;!e&&n>0&&(e=u/n);for(var f=0;f<e;f++){var d=u*(f/e),p=0,y=new at;d<h?(p=d/h,y.x=r.x1+(r.x2-r.x1)*p,y.y=r.y1+(r.y2-r.y1)*p):d>h+c?(d-=h+c,p=d/l,y.x=o.x1+(o.x2-o.x1)*p,y.y=o.y1+(o.y2-o.y1)*p):(d-=h,p=d/c,y.x=a.x1+(a.x2-a.x1)*p,y.y=a.y1+(a.y2-a.y1)*p),s.push(y)}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var aw=function(i,e){e===void 0&&(e=new at);var n=i.x2-i.x1,s=i.y2-i.y1,r=i.x3-i.x1,a=i.y3-i.y1,o=Math.random(),h=Math.random();return o+h>=1&&(o=1-o,h=1-h),e.x=i.x1+(n*o+r*h),e.y=i.y1+(s*o+a*h),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Xt=new Gt({initialize:function(e,n,s,r,a,o){e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),r===void 0&&(r=0),a===void 0&&(a=0),o===void 0&&(o=0),this.type=ls.TRIANGLE,this.x1=e,this.y1=n,this.x2=s,this.y2=r,this.x3=a,this.y3=o},contains:function(i,e){return Ml(this,i,e)},getPoint:function(i,e){return sw(this,i,e)},getPoints:function(i,e,n){return rw(this,i,e,n)},getRandomPoint:function(i){return aw(this,i)},setTo:function(i,e,n,s,r,a){return i===void 0&&(i=0),e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),r===void 0&&(r=0),a===void 0&&(a=0),this.x1=i,this.y1=e,this.x2=n,this.y2=s,this.x3=r,this.y3=a,this},getLineA:function(i){return i===void 0&&(i=new Ct),i.setTo(this.x1,this.y1,this.x2,this.y2),i},getLineB:function(i){return i===void 0&&(i=new Ct),i.setTo(this.x2,this.y2,this.x3,this.y3),i},getLineC:function(i){return i===void 0&&(i=new Ct),i.setTo(this.x3,this.y3,this.x1,this.y1),i},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(i){var e=0;this.x1<=this.x2&&this.x1<=this.x3?e=this.x1-i:this.x2<=this.x1&&this.x2<=this.x3?e=this.x2-i:e=this.x3-i,this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(i){var e=0;this.x1>=this.x2&&this.x1>=this.x3?e=this.x1-i:this.x2>=this.x1&&this.x2>=this.x3?e=this.x2-i:e=this.x3-i,this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(i){var e=0;this.y1<=this.y2&&this.y1<=this.y3?e=this.y1-i:this.y2<=this.y1&&this.y2<=this.y3?e=this.y2-i:e=this.y3-i,this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(i){var e=0;this.y1>=this.y2&&this.y1>=this.y3?e=this.y1-i:this.y2>=this.y1&&this.y2>=this.y3?e=this.y2-i:e=this.y3-i,this.y1-=e,this.y2-=e,this.y3-=e}}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var PO=function(i){var e=i.x1,n=i.y1,s=i.x2,r=i.y2,a=i.x3,o=i.y3;return Math.abs(((a-e)*(r-n)-(s-e)*(o-n))/2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var IO=function(i,e,n){var s=n*(Math.sqrt(3)/2),r=i,a=e,o=i+n/2,h=e+s,c=i-n/2,l=e+s;return new Xt(r,a,o,h,c,l)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var RO=function(i,e,n,s,r){e===void 0&&(e=null),n===void 0&&(n=1),s===void 0&&(s=1),r===void 0&&(r=[]);for(var a=zl(i,e),o,h,c,l,u,f,d,p,y,x=0;x<a.length;x+=3)o=a[x],h=a[x+1],c=a[x+2],l=i[o*2]*n,u=i[o*2+1]*s,f=i[h*2]*n,d=i[h*2+1]*s,p=i[c*2]*n,y=i[c*2+1]*s,r.push(new Xt(l,u,f,d,p,y));return r};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var OO=function(i,e,n,s){s===void 0&&(s=n);var r=i,a=e,o=i,h=e-s,c=i+n,l=e;return new Xt(r,a,o,h,c,l)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ow=function(i,e){return e===void 0&&(e=new at),e.x=(i.x1+i.x2+i.x3)/3,e.y=(i.y1+i.y2+i.y3)/3,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var hw=function(i,e,n){return i.x1+=e,i.y1+=n,i.x2+=e,i.y2+=n,i.x3+=e,i.y3+=n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var kO=function(i,e,n,s){s===void 0&&(s=ow);var r=s(i),a=e-r.x,o=n-r.y;return hw(i,a,o)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function nd(i,e,n,s){return i*s-e*n}var LO=function(i,e){e===void 0&&(e=new ge);var n=i.x3,s=i.y3,r=i.x1-n,a=i.y1-s,o=i.x2-n,h=i.y2-s,c=2*nd(r,a,o,h),l=nd(a,r*r+a*a,h,o*o+h*h),u=nd(r,r*r+a*a,o,o*o+h*h);return e.x=n-l/c,e.y=s+u/c,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var FO=function(i,e){e===void 0&&(e=new Pe);var n=i.x1,s=i.y1,r=i.x2,a=i.y2,o=i.x3,h=i.y3,c=r-n,l=a-s,u=o-n,f=h-s,d=c*(n+r)+l*(s+a),p=u*(n+o)+f*(s+h),y=2*(c*(h-a)-l*(o-r)),x,g;if(Math.abs(y)<1e-6){var m=Math.min(n,r,o),v=Math.min(s,a,h);x=(Math.max(n,r,o)-m)*.5,g=(Math.max(s,a,h)-v)*.5,e.x=m+x,e.y=v+g,e.radius=Math.sqrt(x*x+g*g)}else e.x=(f*d-l*p)/y,e.y=(c*p-u*d)/y,x=e.x-n,g=e.y-s,e.radius=Math.sqrt(x*x+g*g);return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var NO=function(i){return new Xt(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var BO=function(i,e){return Ml(i,e.x,e.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var DO=function(i,e){return e.setTo(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var qO=function(i,e){return i.x1===e.x1&&i.y1===e.y1&&i.x2===e.x2&&i.y2===e.y2&&i.x3===e.x3&&i.y3===e.y3};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function id(i,e,n,s){var r=i-n,a=e-s,o=r*r+a*a;return Math.sqrt(o)}var cw=function(i,e){e===void 0&&(e=new at);var n=i.x1,s=i.y1,r=i.x2,a=i.y2,o=i.x3,h=i.y3,c=id(o,h,r,a),l=id(n,s,o,h),u=id(r,a,n,s),f=c+l+u;return e.x=(n*c+r*l+o*u)/f,e.y=(s*c+a*l+h*u)/f,e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $O=function(i){var e=i.getLineA(),n=i.getLineB(),s=i.getLineC();return cn(e)+cn(n)+cn(s)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var sd=function(i,e,n,s){var r=Math.cos(s),a=Math.sin(s),o=i.x1-e,h=i.y1-n;return i.x1=o*r-h*a+e,i.y1=o*a+h*r+n,o=i.x2-e,h=i.y2-n,i.x2=o*r-h*a+e,i.y2=o*a+h*r+n,o=i.x3-e,h=i.y3-n,i.x3=o*r-h*a+e,i.y3=o*a+h*r+n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var VO=function(i,e){var n=cw(i);return sd(i,n.x,n.y,e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var GO=function(i,e,n){return sd(i,e.x,e.y,n)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */Xt.Area=PO,Xt.BuildEquilateral=IO,Xt.BuildFromPolygon=RO,Xt.BuildRight=OO,Xt.CenterOn=kO,Xt.Centroid=ow,Xt.CircumCenter=LO,Xt.CircumCircle=FO,Xt.Clone=NO,Xt.Contains=Ml,Xt.ContainsArray=wl,Xt.ContainsPoint=BO,Xt.CopyFrom=DO,Xt.Decompose=W0,Xt.Equals=qO,Xt.GetPoint=sw,Xt.GetPoints=rw,Xt.InCenter=cw,Xt.Perimeter=$O,Xt.Offset=hw,Xt.Random=aw,Xt.Rotate=VO,Xt.RotateAroundPoint=GO,Xt.RotateAroundXY=sd;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var UO={Circle:Pe,Ellipse:Fe,Intersects:K4,Line:Ct,Mesh:pR,Point:at,Polygon:ln,Rectangle:mt,Triangle:Xt,...ls};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var rd=function(i){if(!Array.isArray(i)||!Array.isArray(i[0]))return!1;for(var e=i[0].length,n=1;n<i.length;n++)if(i[n].length!==e)return!1;return!0};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var lw=function(i,e,n,s){e===void 0&&(e=0),n===void 0&&(n=" "),s===void 0&&(s=3),i=i.toString();var r=0;if(e+1>=i.length)switch(s){case 1:i=new Array(e+1-i.length).join(n)+i;break;case 3:var a=Math.ceil((r=e-i.length)/2),o=r-a;i=new Array(o+1).join(n)+i+new Array(a+1).join(n);break;default:i=i+new Array(e+1-i.length).join(n);break}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var WO=function(i){var e="";if(!rd(i))return e;for(var n=0;n<i.length;n++){for(var s=0;s<i[n].length;s++){var r=i[n][s].toString();r!=="undefined"?e+=lw(r,2):e+="?",s<i[n].length-1&&(e+=" |")}if(n<i.length-1){e+=`
`;for(var a=0;a<i[n].length;a++)e+="---",a<i[n].length-1&&(e+="+");e+=`
`}}return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var YO=function(i){return i.reverse()};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var jO=function(i){for(var e=0;e<i.length;e++)i[e].reverse();return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ad=function(i){for(var e=i.length,n=i[0].length,s=new Array(n),r=0;r<n;r++){s[r]=new Array(e);for(var a=e-1;a>-1;a--)s[r][a]=i[a][r]}return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Il=function(i,e){if(e===void 0&&(e=90),!rd(i))return null;if(typeof e!="string"&&(e=(e%360+360)%360),e===90||e===-270||e==="rotateLeft")i=ad(i),i.reverse();else if(e===-90||e===270||e==="rotateRight")i.reverse(),i=ad(i);else if(Math.abs(e)===180||e==="rotate180"){for(var n=0;n<i.length;n++)i[n].reverse();i.reverse()}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var HO=function(i){return Il(i,180)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var XO=function(i,e){e===void 0&&(e=1);for(var n=0;n<e;n++)i=Il(i,90);return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ZO=function(i,e){e===void 0&&(e=1);for(var n=0;n<e;n++)i=Il(i,-90);return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var od=function(i,e){e===void 0&&(e=1);for(var n=null,s=0;s<e;s++)n=i.shift(),i.push(n);return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var hd=function(i,e){e===void 0&&(e=1);for(var n=null,s=0;s<e;s++)n=i.pop(),i.unshift(n);return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var JO=function(i,e,n){if(e===void 0&&(e=0),n===void 0&&(n=0),n!==0&&(n<0?od(i,Math.abs(n)):hd(i,n)),e!==0)for(var s=0;s<i.length;s++){var r=i[s];e<0?od(r,Math.abs(e)):hd(r,e)}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const QO={CheckMatrix:rd,MatrixToString:WO,ReverseColumns:YO,ReverseRows:jO,Rotate180:HO,RotateLeft:XO,RotateMatrix:Il,RotateRight:ZO,Translate:JO,TransposeMatrix:ad};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var KO=function(i,e,n,s,r){if(r===void 0&&(r=i),n>0){var a=n-i.length;if(a<=0)return null}if(!Array.isArray(e))return i.indexOf(e)===-1?(i.push(e),s&&s.call(r,e),e):null;for(var o=e.length-1;o>=0;)i.indexOf(e[o])!==-1&&e.splice(o,1),o--;if(o=e.length,o===0)return null;n>0&&o>a&&(e.splice(a),o=a);for(var h=0;h<o;h++){var c=e[h];i.push(c),s&&s.call(r,c)}return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var tk=function(i,e,n,s,r,a){if(n===void 0&&(n=0),a===void 0&&(a=i),s>0){var o=s-i.length;if(o<=0)return null}if(!Array.isArray(e))return i.indexOf(e)===-1?(i.splice(n,0,e),r&&r.call(a,e),e):null;for(var h=e.length-1;h>=0;)i.indexOf(e[h])!==-1&&e.pop(),h--;if(h=e.length,h===0)return null;s>0&&h>o&&(e.splice(o),h=o);for(var c=h-1;c>=0;c--){var l=e[c];i.splice(n,0,l),r&&r.call(a,l)}return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ek=function(i,e){var n=i.indexOf(e);return n!==-1&&n<i.length&&(i.splice(n,1),i.push(e)),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ys=function(i,e,n,s){var r=i.length;if(e<0||e>=r||e>=n||n>r){if(s)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var nk=function(i,e,n,s,r){s===void 0&&(s=0),r===void 0&&(r=i.length);var a=0;if(ys(i,s,r))for(var o=s;o<r;o++){var h=i[o];h[e]===n&&a++}return a};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ik=function(i,e,n){var s,r=[null];for(s=3;s<arguments.length;s++)r.push(arguments[s]);for(s=0;s<i.length;s++)r[0]=i[s],e.apply(n,r);return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var sk=function(i,e,n,s,r){if(s===void 0&&(s=0),r===void 0&&(r=i.length),ys(i,s,r)){var a,o=[null];for(a=5;a<arguments.length;a++)o.push(arguments[a]);for(a=s;a<r;a++)o[0]=i[a],e.apply(n,o)}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var rk=function(i,e,n){if(e.length){if(e.length===1)return e[0]}else return NaN;var s=1,r,a;if(n){if(i<e[0][n])return e[0];for(;e[s][n]<i;)s++}else for(;e[s]<i;)s++;return s>e.length&&(s=e.length),n?(r=e[s-1][n],a=e[s][n],a-i<=i-r?e[s]:e[s-1]):(r=e[s-1],a=e[s],a-i<=i-r?a:r)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var cd=function(i,e){e===void 0&&(e=[]);for(var n=0;n<i.length;n++)Array.isArray(i[n])?cd(i[n],e):e.push(i[n]);return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ak=function(i,e,n,s,r){s===void 0&&(s=0),r===void 0&&(r=i.length);var a=[];if(ys(i,s,r))for(var o=s;o<r;o++){var h=i[o];(!e||e&&n===void 0&&h.hasOwnProperty(e)||e&&n!==void 0&&h[e]===n)&&a.push(h)}return a};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ok=function(i,e,n,s,r){if(s===void 0&&(s=0),r===void 0&&(r=i.length),s!==-1){if(ys(i,s,r))for(var a=s;a<r;a++){var o=i[a];if(!e||e&&n===void 0&&o.hasOwnProperty(e)||e&&n!==void 0&&o[e]===n)return o}}else if(ys(i,0,r))for(var a=r;a>=0;a--){var o=i[a];if(!e||e&&n===void 0&&o.hasOwnProperty(e)||e&&n!==void 0&&o[e]===n)return o}return null};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var hk=function(i,e,n){e===void 0&&(e=0),n===void 0&&(n=i.length);var s=e+Math.floor(Math.random()*n);return i[s]===void 0?null:i[s]};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ck=function(i,e){var n=i.indexOf(e);if(n>0){var s=i[n-1],r=i.indexOf(s);i[n]=s,i[r]=e}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var lk=function(i,e,n){var s=i.indexOf(e);if(s===-1||n<0||n>=i.length)throw new Error("Supplied index out of bounds");return s!==n&&(i.splice(s,1),i.splice(n,0,e)),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var uk=function(i,e){var n=i.indexOf(e);if(n!==-1&&n<i.length-1){var s=i[n+1],r=i.indexOf(s);i[n]=s,i[r]=e}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fk=function(i,e,n){if(e===n)return i;var s=i.indexOf(e),r=i.indexOf(n);if(s<0||r<0)throw new Error("Supplied items must be elements of the same array");return s>r||(i.splice(s,1),r=i.indexOf(n),i.splice(r+1,0,e)),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dk=function(i,e,n){if(e===n)return i;var s=i.indexOf(e),r=i.indexOf(n);if(s<0||r<0)throw new Error("Supplied items must be elements of the same array");return s<r||(i.splice(s,1),r===0?i.unshift(e):i.splice(r,0,e)),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var pk=function(i,e,n,s){var r=[],a,o=!1;if((n||s)&&(o=!0,n||(n=""),s||(s="")),e<i)for(a=i;a>=e;a--)o?r.push(n+a.toString()+s):r.push(a);else for(a=i;a<=e;a++)o?r.push(n+a.toString()+s):r.push(a);return r};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var uw=function(i){return i>0?Math.ceil(i):Math.floor(i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var yk=function(i,e,n){i===void 0&&(i=0),e===void 0&&(e=null),n===void 0&&(n=1),e===null&&(e=i,i=0);for(var s=[],r=Math.max(uw((e-i)/(n||1)),0),a=0;a<r;a++)s.push(i),i+=n;return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function oh(i,e,n){var s=i[e];i[e]=i[n],i[n]=s}function xk(i,e){return i<e?-1:i>e?1:0}var fw=function(i,e,n,s,r){for(n===void 0&&(n=0),s===void 0&&(s=i.length-1),r===void 0&&(r=xk);s>n;){if(s-n>600){var a=s-n+1,o=e-n+1,h=Math.log(a),c=.5*Math.exp(2*h/3),l=.5*Math.sqrt(h*c*(a-c)/a)*(o-a/2<0?-1:1),u=Math.max(n,Math.floor(e-o*c/a+l)),f=Math.min(s,Math.floor(e+(a-o)*c/a+l));fw(i,e,u,f,r)}var d=i[e],p=n,y=s;for(oh(i,n,e),r(i[s],d)>0&&oh(i,n,s);p<y;){for(oh(i,p,y),p++,y--;r(i[p],d)<0;)p++;for(;r(i[y],d)>0;)y--}r(i[n],d)===0?oh(i,n,y):(y++,oh(i,y,s)),y<=e&&(n=y+1),e<=y&&(s=y-1)}};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ne=function(i,e,n,s){if(!i&&!s||typeof i=="number")return n;if(i&&i.hasOwnProperty(e))return i[e];if(s&&s.hasOwnProperty(e))return s[e];if(e.indexOf(".")!==-1){for(var r=e.split("."),a=i,o=s,h=n,c=n,l=!0,u=!0,f=0;f<r.length;f++)a&&a.hasOwnProperty(r[f])?(h=a[r[f]],a=a[r[f]]):l=!1,o&&o.hasOwnProperty(r[f])?(c=o[r[f]],o=o[r[f]]):u=!1;return l?h:u?c:n}else return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ld=function(i){for(var e=i.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),s=i[e];i[e]=i[n],i[n]=s}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gk=function(i,e,n){for(var s=[],r=0;r<i.length;r++)for(var a=0;a<e.length;a++)for(var o=0;o<n;o++)s.push({a:i[r],b:e[a]});return s},mk=function(i,e,n){var s=ne(n,"max",0),r=ne(n,"qty",1),a=ne(n,"random",!1),o=ne(n,"randomB",!1),h=ne(n,"repeat",0),c=ne(n,"yoyo",!1),l=[];if(o&&ld(e),h===-1)if(s===0)h=0;else{var u=i.length*e.length*r;c&&(u*=2),h=Math.ceil(s/u)}for(var f=0;f<=h;f++){var d=gk(i,e,r);a&&ld(d),l=l.concat(d),c&&(d.reverse(),l=l.concat(d))}return s&&l.splice(s),l};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var hh=function(i,e){if(!(e>=i.length)){for(var n=i.length-1,s=i[e],r=e;r<n;r++)i[r]=i[r+1];return i.length=n,s}};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ud=function(i,e,n,s){s===void 0&&(s=i);var r;if(!Array.isArray(e))return r=i.indexOf(e),r!==-1?(hh(i,r),n&&n.call(s,e),e):null;for(var a=e.length-1,o=[];a>=0;){var h=e[a];r=i.indexOf(h),r!==-1&&(hh(i,r),o.push(h),n&&n.call(s,h)),a--}return o};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vk=function(i,e,n,s){if(s===void 0&&(s=i),e<0||e>i.length-1)throw new Error("Index out of bounds");var r=hh(i,e);return n&&n.call(s,r),r};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var wk=function(i,e,n,s,r){if(e===void 0&&(e=0),n===void 0&&(n=i.length),r===void 0&&(r=i),ys(i,e,n)){var a=n-e,o=i.splice(e,a);if(s)for(var h=0;h<o.length;h++){var c=o[h];s.call(r,c)}return o}else return[]};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Mk=function(i,e,n){e===void 0&&(e=0),n===void 0&&(n=i.length);var s=e+Math.floor(Math.random()*n);return hh(i,s)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var bk=function(i,e,n){var s=i.indexOf(e),r=i.indexOf(n);return s!==-1&&r===-1?(i[s]=n,!0):!1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _k=function(i,e){var n=i.indexOf(e);return n!==-1&&n>0&&(i.splice(n,1),i.unshift(e)),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Sk=function(i,e,n,s,r){if(s===void 0&&(s=0),r===void 0&&(r=i.length),ys(i,s,r))for(var a=s;a<r;a++){var o=i[a];o.hasOwnProperty(e)&&(o[e]=n)}return i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Tk=function(i){var e=/\D/g;return i.sort(function(n,s){return parseInt(n.replace(e,""),10)-parseInt(s.replace(e,""),10)}),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function Ek(i,e){return String(i).localeCompare(e)}function zk(i,e){var n=i.length;if(n<=1)return i;for(var s=new Array(n),r=1;r<n;r*=2){dw(i,e,r,s);var a=i;i=s,s=a}return i}function dw(i,e,n,s){var r=i.length,a=0,o=n*2,h,c,l,u,f;for(h=0;h<r;h+=o)for(c=h+n,l=c+n,c>r&&(c=r),l>r&&(l=r),u=h,f=c;;)if(u<c&&f<l)e(i[u],i[f])<=0?s[a++]=i[u++]:s[a++]=i[f++];else if(u<c)s[a++]=i[u++];else if(f<l)s[a++]=i[f++];else break}var Ck=function(i,e,n=!0){if(e===void 0&&(e=Ek),!i||i.length<2)return i;if(n)return i.sort(e);var s=zk(i,e);return s!==i&&dw(s,null,i.length,i),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ak=function(i,e,n){if(e===n)return i;var s=i.indexOf(e),r=i.indexOf(n);if(s<0||r<0)throw new Error("Supplied items must be elements of the same array");return i[s]=n,i[r]=e,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Pk={Matrix:QO,Add:KO,AddAt:tk,BringToTop:ek,CountAllMatching:nk,Each:ik,EachInRange:sk,FindClosestInSorted:rk,Flatten:cd,GetAll:ak,GetFirst:ok,GetRandom:hk,MoveDown:ck,MoveTo:lk,MoveUp:uk,MoveAbove:fk,MoveBelow:dk,NumberArray:pk,NumberArrayStep:yk,QuickSelect:fw,Range:mk,Remove:ud,RemoveAt:vk,RemoveBetween:wk,RemoveRandomElement:Mk,Replace:bk,RotateLeft:od,RotateRight:hd,SafeRange:ys,SendToBack:_k,SetAll:Sk,Shuffle:ld,SortByDigits:Tk,SpliceOne:hh,StableSort:Ck,Swap:Ak};/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ik=function(i,e){for(var n=new Uint8Array(i),s=n.length,r=e?"data:"+e+";base64,":"",a=0;a<s;a+=3)r+=Rl[n[a]>>2],r+=Rl[(n[a]&3)<<4|n[a+1]>>4],r+=Rl[(n[a+1]&15)<<2|n[a+2]>>6],r+=Rl[n[a+2]&63];return s%3===2?r=r.substring(0,r.length-1)+"=":s%3===1&&(r=r.substring(0,r.length-2)+"=="),r};/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var pw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ch=new Uint8Array(256),Ol=0;Ol<pw.length;Ol++)ch[pw.charCodeAt(Ol)]=Ol;var Rk=function(i){i=i.substr(i.indexOf(",")+1);var e=i.length,n=e*.75,s=0,r,a,o,h;i[e-1]==="="&&(n--,i[e-2]==="="&&n--);for(var c=new ArrayBuffer(n),l=new Uint8Array(c),u=0;u<e;u+=4)r=ch[i.charCodeAt(u)],a=ch[i.charCodeAt(u+1)],o=ch[i.charCodeAt(u+2)],h=ch[i.charCodeAt(u+3)],l[s++]=r<<2|a>>4,l[s++]=(a&15)<<4|o>>2,l[s++]=(o&3)<<6|h&63;return c};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Ok={ArrayBufferToBase64:Ik,Base64ToArrayBuffer:Rk};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fd=function(i){var e={};for(var n in i)Array.isArray(i[n])?e[n]=i[n].slice(0):e[n]=i[n];return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var yw=function(i){var e,n,s;if(typeof i!="object"||i===null)return i;e=Array.isArray(i)?[]:{};for(s in i)n=i[s],e[s]=yw(n);return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dd=function(i){if(!i||typeof i!="object"||i.nodeType||i===i.window)return!1;try{if(i.constructor&&!{}.hasOwnProperty.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var pd=function(){var i,e,n,s,r,a,o=arguments[0]||{},h=1,c=arguments.length,l=!1;for(typeof o=="boolean"&&(l=o,o=arguments[1]||{},h=2),c===h&&(o=this,--h);h<c;h++)if((i=arguments[h])!=null)for(e in i)n=o[e],s=i[e],o!==s&&(l&&s&&(dd(s)||(r=Array.isArray(s)))?(r?(r=!1,a=n&&Array.isArray(n)?n:[]):a=n&&dd(n)?n:{},o[e]=pd(l,a,s)):s!==void 0&&(o[e]=s));return o};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var kk=function(i,e,n,s){return Math.atan2(s-e,n-i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Lk=function(i,e){return Math.atan2(e.y-i.y,e.x-i.x)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Fk=function(i,e){return Math.atan2(e.x-i.x,e.y-i.y)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Nk=function(i,e,n,s){return Math.atan2(n-i,s-e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Bk=function(i){return i>Math.PI&&(i-=he.PI2),Math.abs(((i+he.TAU)%he.PI2-he.PI2)%he.PI2)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var kl=function(i){return i=i%(2*Math.PI),i>=0?i:i+2*Math.PI};/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Dk=function(i,e){return kl(e-i)};/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var qk=2*Math.PI,$k=function(i,e){var n=kl(e-i);return n>0&&(n-=qk),n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var xw=function(i){return _l(i,-Math.PI,Math.PI)};/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Vk=function(i,e){return xw(e-i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ll=function(i,e){return Math.random()*(e-i)+i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Gk=function(){return Ll(-Math.PI,Math.PI)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Uk=function(){return Ll(-180,180)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Wk=function(i){return kl(i+Math.PI)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Yk=function(i,e,n){return n===void 0&&(n=.05),i===e||(Math.abs(e-i)<=n||Math.abs(e-i)>=he.PI2-n?i=e:(Math.abs(e-i)>Math.PI&&(e<i?e+=he.PI2:e-=he.PI2),e>i?i+=n:e<i&&(i-=n))),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var jk=function(i,e){var n=e-i;if(n===0)return 0;var s=Math.floor((n- -180)/360);return n-s*360};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Hk=function(i){return _l(i,-180,180)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const Xk={Between:kk,BetweenPoints:Lk,BetweenPointsY:Fk,BetweenY:Nk,CounterClockwise:Bk,GetClockwiseDistance:Dk,GetCounterClockwiseDistance:$k,GetShortestDistance:Vk,Normalize:kl,Random:Gk,RandomDegrees:Uk,Reverse:Wk,RotateTo:Yk,ShortestBetween:jk,Wrap:xw,WrapDegrees:Hk};/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Zk=function(i,e){var n=i.x-e.x,s=i.y-e.y;return n*n+s*s};/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Jk=function(i,e,n,s){return Math.max(Math.abs(i-n),Math.abs(e-s))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Qk=function(i,e,n,s,r){return r===void 0&&(r=2),Math.sqrt(Math.pow(n-i,r)+Math.pow(s-e,r))};/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Kk=function(i,e,n,s){return Math.abs(i-n)+Math.abs(e-s)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var tL=function(i,e,n,s){var r=i-n,a=e-s;return r*r+a*a};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const eL={Between:b2,BetweenPoints:Y0,BetweenPointsSquared:Zk,Chebyshev:Jk,Power:Qk,Snake:Kk,Squared:tL};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const nL={Back:Wo,Bounce:Yo,Circular:jo,Cubic:da,Elastic:Ho,Expo:Xo,Linear:j0,Quadratic:pa,Quartic:ya,Quintic:xa,Sine:Zo,Stepped:N2};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var iL=function(i,e){return e===void 0&&(e=1e-4),Math.ceil(i-e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var sL=function(i,e){return e===void 0&&(e=1e-4),Math.floor(i+e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var rL=function(i,e,n){return n===void 0&&(n=1e-4),i>e-n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var aL=function(i,e,n){return n===void 0&&(n=1e-4),i<e+n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const oL={Ceil:iL,Equal:V0,Floor:sL,GreaterThan:rL,LessThan:aL};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Fl=function(i){if(i===0)return 1;for(var e=i;--i;)e*=i;return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gw=function(i,e){return Fl(i)/Fl(e)/Fl(i-e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var mw=function(i,e){for(var n=0,s=i.length-1,r=0;r<=s;r++)n+=Math.pow(1-e,s-r)*Math.pow(e,r)*i[r]*gw(s,r);return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var lh=function(i,e,n,s,r){var a=(s-e)*.5,o=(r-n)*.5,h=i*i,c=i*h;return(2*n-2*s+a+o)*c+(-3*n+3*s-2*a-o)*h+a*i+n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var yd=function(i,e){var n=i.length-1,s=n*e,r=Math.floor(s);return i[0]===i[n]?(e<0&&(r=Math.floor(s=n*(1+e))),lh(s-r,i[(r-1+n)%n],i[r],i[(r+1)%n],i[(r+2)%n])):e<0?i[0]-(lh(-s,i[0],i[0],i[1],i[1])-i[0]):e>1?i[n]-(lh(s-n,i[n],i[n],i[n-1],i[n-1])-i[n]):lh(s-r,i[r?r-1:0],i[r],i[n<r+1?n:r+1],i[n<r+2?n:r+2])};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function hL(i,e){var n=1-i;return n*n*n*e}function cL(i,e){var n=1-i;return 3*n*n*i*e}function lL(i,e){return 3*(1-i)*i*i*e}function uL(i,e){return i*i*i*e}var fL=function(i,e,n,s,r){return hL(i,e)+cL(i,n)+lL(i,s)+uL(i,r)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dr=function(i,e,n){return(e-i)*n+i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vw=function(i,e){var n=i.length-1,s=n*e,r=Math.floor(s);return e<0?dr(i[0],i[1],s):e>1?dr(i[n],i[n-1],n-s):dr(i[r],i[r+1>n?n:r+1],s-r)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function dL(i,e){var n=1-i;return n*n*e}function pL(i,e){return 2*(1-i)*i*e}function yL(i,e){return i*i*e}var xL=function(i,e,n,s){return dL(i,e)+pL(i,n)+yL(i,s)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ww=function(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*(3-2*i))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gL=function(i,e,n){return e+(n-e)*ww(i,0,1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Mw=function(i,e,n){return i=Math.max(0,Math.min(1,(i-e)/(n-e))),i*i*i*(i*(i*6-15)+10)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var mL=function(i,e,n){return e+(n-e)*Mw(i,0,1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const vL={Bezier:mw,CatmullRom:yd,CubicBezier:fL,Linear:vw,QuadraticBezier:xL,SmoothStep:gL,SmootherStep:mL};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var wL=function(i){var e=Math.log(i)/.6931471805599453;return 1<<Math.ceil(e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ML=function(i,e){return i>0&&(i&i-1)===0&&e>0&&(e&e-1)===0};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var bL=function(i){return i>0&&(i&i-1)===0};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const _L={GetNext:wL,IsSize:ML,IsValue:bL};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var SL=function(i,e,n,s){return n===void 0&&(n=0),e===0?i:(i-=n,i=e*Math.ceil(i/e),s?(n+i)/e:n+i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var TL=function(i,e,n,s){return n===void 0&&(n=0),e===0?i:(i-=n,i=e*Math.floor(i/e),s?(n+i)/e:n+i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var EL=function(i,e,n,s){return n===void 0&&(n=0),e===0?i:(i-=n,i=e*Math.round(i/e),s?(n+i)/e:n+i)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const zL={Ceil:SL,Floor:TL,To:EL};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var CL=new Gt({initialize:function(e){e===void 0&&(e=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],e&&this.init(e)},rnd:function(){var i=2091639*this.s0+this.c*23283064365386963e-26;return this.c=i|0,this.s0=this.s1,this.s1=this.s2,this.s2=i-this.c,this.s2},hash:function(i){var e,n=this.n;i=i.toString();for(var s=0;s<i.length;s++)n+=i.charCodeAt(s),e=.02519603282416938*n,n=e>>>0,e-=n,e*=n,n=e>>>0,e-=n,n+=e*4294967296;return this.n=n,(n>>>0)*23283064365386963e-26},init:function(i){typeof i=="string"?this.state(i):this.sow(i)},sow:function(i){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!i)for(var e=0;e<i.length&&i[e]!=null;e++){var n=i[e];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(i,e){return Math.floor(this.realInRange(0,e-i+1)+i)},between:function(i,e){return Math.floor(this.realInRange(0,e-i+1)+i)},realInRange:function(i,e){return this.frac()*(e-i)+i},normal:function(){return 1-2*this.frac()},uuid:function(){var i="",e="";for(e=i="";i++<36;e+=~i%5|i*3&4?(i^15?8^this.frac()*(i^20?16:4):4).toString(16):"-");return e},pick:function(i){return i[this.integerInRange(0,i.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(i){return i[~~(Math.pow(this.frac(),2)*(i.length-.5)+.5)]},timestamp:function(i,e){return this.realInRange(i||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(i){return typeof i=="string"&&i.match(/^!rnd/)&&(i=i.split(","),this.c=parseFloat(i[1]),this.s0=parseFloat(i[2]),this.s1=parseFloat(i[3]),this.s2=parseFloat(i[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(i){for(var e=i.length-1,n=e;n>0;n--){var s=Math.floor(this.frac()*(n+1)),r=i[s];i[s]=i[n],i[n]=r}return i}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var AL=function(i){for(var e=0,n=0;n<i.length;n++)e+=+i[n];return e/i.length};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var PL=function(i,e,n){e===void 0&&(e=0),n===void 0&&(n=10);var s=Math.pow(n,-e);return Math.ceil(i*s)/s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var IL=function(i,e){return Math.abs(i-e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Nl=function(){};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var bw=new ds,xd=new Gt({initialize:function i(e,n,s,r){e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),r===void 0&&(r=i.DefaultOrder),this._x=e,this._y=n,this._z=s,this._order=r,this.onChangeCallback=Nl},x:{get:function(){return this._x},set:function(i){this._x=i,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(i){this._y=i,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(i){this._z=i,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(i){this._order=i,this.onChangeCallback(this)}},set:function(i,e,n,s){return s===void 0&&(s=this._order),this._x=i,this._y=e,this._z=n,this._order=s,this.onChangeCallback(this),this},copy:function(i){return this.set(i.x,i.y,i.z,i.order)},setFromQuaternion:function(i,e,n){return e===void 0&&(e=this._order),n===void 0&&(n=!1),bw.fromQuat(i),this.setFromRotationMatrix(bw,e,n)},setFromRotationMatrix:function(i,e,n){e===void 0&&(e=this._order),n===void 0&&(n=!1);var s=i.val,r=s[0],a=s[4],o=s[8],h=s[1],c=s[5],l=s[9],u=s[2],f=s[6],d=s[10],p=0,y=0,x=0,g=.99999;switch(e){case"XYZ":{y=Math.asin(Qn(o,-1,1)),Math.abs(o)<g?(p=Math.atan2(-l,d),x=Math.atan2(-a,r)):p=Math.atan2(f,c);break}case"YXZ":{p=Math.asin(-Qn(l,-1,1)),Math.abs(l)<g?(y=Math.atan2(o,d),x=Math.atan2(h,c)):y=Math.atan2(-u,r);break}case"ZXY":{p=Math.asin(Qn(f,-1,1)),Math.abs(f)<g?(y=Math.atan2(-u,d),x=Math.atan2(-a,c)):x=Math.atan2(h,r);break}case"ZYX":{y=Math.asin(-Qn(u,-1,1)),Math.abs(u)<g?(p=Math.atan2(f,d),x=Math.atan2(h,r)):x=Math.atan2(-a,c);break}case"YZX":{x=Math.asin(Qn(h,-1,1)),Math.abs(h)<g?(p=Math.atan2(-l,c),y=Math.atan2(-u,r)):y=Math.atan2(o,d);break}case"XZY":{x=Math.asin(-Qn(a,-1,1)),Math.abs(a)<g?(p=Math.atan2(f,c),y=Math.atan2(o,r)):p=Math.atan2(-l,d);break}}return this._x=p,this._y=y,this._z=x,this._order=e,n&&this.onChangeCallback(this),this}});xd.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],xd.DefaultOrder="XYZ";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var RL=function(i,e,n){e===void 0&&(e=0),n===void 0&&(n=10);var s=Math.pow(n,-e);return Math.floor(i*s)/s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var OL=function(i,e){return i/e/1e3};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var kL=function(i){return i==parseFloat(i)?!(i%2):void 0};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var LL=function(i){return i===parseFloat(i)?!(i%2):void 0};/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var FL=function(i,e,n){return n===void 0&&(n=0),i.clone().lerp(e,n)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var NL=function(i,e,n){return Math.min(i+e,n)};/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var BL=function(i){var e=i.length;if(e===0)return 0;i.sort(function(s,r){return s-r});var n=Math.floor(e/2);return e%2===0?(i[n]+i[n-1])/2:i[n]};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var DL=function(i,e,n){return Math.max(i-e,n)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var qL=function(i,e,n,s){n===void 0&&(n=e+1);var r=(i-e)/(n-e);return r>1?s!==void 0?(r=(s-i)/(s-n),r<0&&(r=0)):r=1:r<0&&(r=0),r};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $L=function(i){return i*he.RAD_TO_DEG};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var VL=function(i,e){e===void 0&&(e=1);var n=Math.random()*2*Math.PI;return i.x=Math.cos(n)*e,i.y=Math.sin(n)*e,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var GL=function(i,e){e===void 0&&(e=1);var n=Math.random()*2*Math.PI,s=Math.random()*2-1,r=Math.sqrt(1-s*s)*e;return i.x=Math.cos(n)*r,i.y=Math.sin(n)*r,i.z=s*e,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var UL=function(i,e){return e===void 0&&(e=1),i.x=(Math.random()*2-1)*e,i.y=(Math.random()*2-1)*e,i.z=(Math.random()*2-1)*e,i.w=(Math.random()*2-1)*e,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var WL=function(i,e){var n=i.x,s=i.y;return i.x=n*Math.cos(e)-s*Math.sin(e),i.y=n*Math.sin(e)+s*Math.cos(e),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var YL=function(i,e,n,s){var r=Math.cos(s),a=Math.sin(s),o=i.x-e,h=i.y-n;return i.x=o*r-h*a+e,i.y=o*a+h*r+n,i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var jL=function(i,e,n,s,r){var a=s+Math.atan2(i.y-n,i.x-e);return i.x=e+r*Math.cos(a),i.y=n+r*Math.sin(a),i};/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var HL=function(i,e,n,s,r){return i.x=e+r*Math.cos(s),i.y=n+r*Math.sin(s),i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var XL=function(i,e,n){e===void 0&&(e=0),n===void 0&&(n=10);var s=Math.pow(n,-e);return Math.round(i*s)/s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ZL=function(i,e,n,s){e===void 0&&(e=1),n===void 0&&(n=1),s===void 0&&(s=1),s*=Math.PI/i;for(var r=[],a=[],o=0;o<i;o++)n-=e*s,e+=n*s,r[o]=n,a[o]=e;return{sin:a,cos:r,length:i}};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var JL=function(i,e,n,s){s===void 0&&(s=new ge);var r=0,a=0,o=e*n;return i>0&&i<=o&&(i>e-1?(a=Math.floor(i/e),r=i-a*e):r=i),s.set(r,a)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var QL=function(i,e,n,s,r,a,o,h){h===void 0&&(h=new ge);var c=Math.sin(r),l=Math.cos(r),u=l*a,f=c*a,d=-c*o,p=l*o,y=1/(u*p+d*-f);return h.x=p*y*i+-d*y*e+(s*d-n*p)*y,h.y=u*y*e+-f*y*i+(-s*u+n*f)*y,h};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var KL=function(i,e,n){return Math.abs(i-e)<=n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gd=new Gt({initialize:function(e){this.val=new Float32Array(9),e?this.copy(e):this.identity()},clone:function(){return new gd(this)},set:function(i){return this.copy(i)},copy:function(i){var e=this.val,n=i.val;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},fromMat4:function(i){var e=i.val,n=this.val;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],this},fromArray:function(i){var e=this.val;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},identity:function(){var i=this.val;return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=1,i[5]=0,i[6]=0,i[7]=0,i[8]=1,this},transpose:function(){var i=this.val,e=i[1],n=i[2],s=i[5];return i[1]=i[3],i[2]=i[6],i[3]=e,i[5]=i[7],i[6]=n,i[7]=s,this},invert:function(){var i=this.val,e=i[0],n=i[1],s=i[2],r=i[3],a=i[4],o=i[5],h=i[6],c=i[7],l=i[8],u=l*a-o*c,f=-l*r+o*h,d=c*r-a*h,p=e*u+n*f+s*d;return p?(p=1/p,i[0]=u*p,i[1]=(-l*n+s*c)*p,i[2]=(o*n-s*a)*p,i[3]=f*p,i[4]=(l*e-s*h)*p,i[5]=(-o*e+s*r)*p,i[6]=d*p,i[7]=(-c*e+n*h)*p,i[8]=(a*e-n*r)*p,this):null},adjoint:function(){var i=this.val,e=i[0],n=i[1],s=i[2],r=i[3],a=i[4],o=i[5],h=i[6],c=i[7],l=i[8];return i[0]=a*l-o*c,i[1]=s*c-n*l,i[2]=n*o-s*a,i[3]=o*h-r*l,i[4]=e*l-s*h,i[5]=s*r-e*o,i[6]=r*c-a*h,i[7]=n*h-e*c,i[8]=e*a-n*r,this},determinant:function(){var i=this.val,e=i[0],n=i[1],s=i[2],r=i[3],a=i[4],o=i[5],h=i[6],c=i[7],l=i[8];return e*(l*a-o*c)+n*(-l*r+o*h)+s*(c*r-a*h)},multiply:function(i){var e=this.val,n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8],f=i.val,d=f[0],p=f[1],y=f[2],x=f[3],g=f[4],m=f[5],v=f[6],w=f[7],b=f[8];return e[0]=d*n+p*a+y*c,e[1]=d*s+p*o+y*l,e[2]=d*r+p*h+y*u,e[3]=x*n+g*a+m*c,e[4]=x*s+g*o+m*l,e[5]=x*r+g*h+m*u,e[6]=v*n+w*a+b*c,e[7]=v*s+w*o+b*l,e[8]=v*r+w*h+b*u,this},translate:function(i){var e=this.val,n=i.x,s=i.y;return e[6]=n*e[0]+s*e[3]+e[6],e[7]=n*e[1]+s*e[4]+e[7],e[8]=n*e[2]+s*e[5]+e[8],this},rotate:function(i){var e=this.val,n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=Math.sin(i),l=Math.cos(i);return e[0]=l*n+c*a,e[1]=l*s+c*o,e[2]=l*r+c*h,e[3]=l*a-c*n,e[4]=l*o-c*s,e[5]=l*h-c*r,this},scale:function(i){var e=this.val,n=i.x,s=i.y;return e[0]=n*e[0],e[1]=n*e[1],e[2]=n*e[2],e[3]=s*e[3],e[4]=s*e[4],e[5]=s*e[5],this},fromQuat:function(i){var e=i.x,n=i.y,s=i.z,r=i.w,a=e+e,o=n+n,h=s+s,c=e*a,l=e*o,u=e*h,f=n*o,d=n*h,p=s*h,y=r*a,x=r*o,g=r*h,m=this.val;return m[0]=1-(f+p),m[3]=l+g,m[6]=u-x,m[1]=l-g,m[4]=1-(c+p),m[7]=d+y,m[2]=u+x,m[5]=d-y,m[8]=1-(c+f),this},normalFromMat4:function(i){var e=i.val,n=this.val,s=e[0],r=e[1],a=e[2],o=e[3],h=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=e[9],p=e[10],y=e[11],x=e[12],g=e[13],m=e[14],v=e[15],w=s*c-r*h,b=s*l-a*h,S=s*u-o*h,E=r*l-a*c,A=r*u-o*c,M=a*u-o*l,_=f*g-d*x,T=f*m-p*x,C=f*v-y*x,P=d*m-p*g,R=d*v-y*g,k=p*v-y*m,I=w*k-b*R+S*P+E*C-A*T+M*_;return I?(I=1/I,n[0]=(c*k-l*R+u*P)*I,n[1]=(l*C-h*k-u*T)*I,n[2]=(h*R-c*C+u*_)*I,n[3]=(a*R-r*k-o*P)*I,n[4]=(s*k-a*C+o*T)*I,n[5]=(r*C-s*R-o*_)*I,n[6]=(g*M-m*A+v*E)*I,n[7]=(m*S-x*M-v*b)*I,n[8]=(x*A-g*S+v*w)*I,this):null}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _w=1e-6,Sw=new Int8Array([1,2,0]),wa=new Float32Array([0,0,0]),tF=new Ft(1,0,0),eF=new Ft(0,1,0),xs=new Ft,Tw=new gd,Ew=new Gt({initialize:function(e,n,s,r){this.onChangeCallback=Nl,this.set(e,n,s,r)},x:{get:function(){return this._x},set:function(i){this._x=i,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(i){this._y=i,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(i){this._z=i,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(i){this._w=i,this.onChangeCallback(this)}},copy:function(i){return this.set(i)},set:function(i,e,n,s,r){return r===void 0&&(r=!0),typeof i=="object"?(this._x=i.x||0,this._y=i.y||0,this._z=i.z||0,this._w=i.w||0):(this._x=i||0,this._y=e||0,this._z=n||0,this._w=s||0),r&&this.onChangeCallback(this),this},add:function(i){return this._x+=i.x,this._y+=i.y,this._z+=i.z,this._w+=i.w,this.onChangeCallback(this),this},subtract:function(i){return this._x-=i.x,this._y-=i.y,this._z-=i.z,this._w-=i.w,this.onChangeCallback(this),this},scale:function(i){return this._x*=i,this._y*=i,this._z*=i,this._w*=i,this.onChangeCallback(this),this},length:function(){var i=this.x,e=this.y,n=this.z,s=this.w;return Math.sqrt(i*i+e*e+n*n+s*s)},lengthSq:function(){var i=this.x,e=this.y,n=this.z,s=this.w;return i*i+e*e+n*n+s*s},normalize:function(){var i=this.x,e=this.y,n=this.z,s=this.w,r=i*i+e*e+n*n+s*s;return r>0&&(r=1/Math.sqrt(r),this._x=i*r,this._y=e*r,this._z=n*r,this._w=s*r),this.onChangeCallback(this),this},dot:function(i){return this.x*i.x+this.y*i.y+this.z*i.z+this.w*i.w},lerp:function(i,e){e===void 0&&(e=0);var n=this.x,s=this.y,r=this.z,a=this.w;return this.set(n+e*(i.x-n),s+e*(i.y-s),r+e*(i.z-r),a+e*(i.w-a))},rotationTo:function(i,e){var n=i.x*e.x+i.y*e.y+i.z*e.z;return n<-.999999?(xs.copy(tF).cross(i).length()<_w&&xs.copy(eF).cross(i),xs.normalize(),this.setAxisAngle(xs,Math.PI)):n>.999999?this.set(0,0,0,1):(xs.copy(i).cross(e),this._x=xs.x,this._y=xs.y,this._z=xs.z,this._w=1+n,this.normalize())},setAxes:function(i,e,n){var s=Tw.val;return s[0]=e.x,s[3]=e.y,s[6]=e.z,s[1]=n.x,s[4]=n.y,s[7]=n.z,s[2]=-i.x,s[5]=-i.y,s[8]=-i.z,this.fromMat3(Tw).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(i,e){e=e*.5;var n=Math.sin(e);return this.set(n*i.x,n*i.y,n*i.z,Math.cos(e))},multiply:function(i){var e=this.x,n=this.y,s=this.z,r=this.w,a=i.x,o=i.y,h=i.z,c=i.w;return this.set(e*c+r*a+n*h-s*o,n*c+r*o+s*a-e*h,s*c+r*h+e*o-n*a,r*c-e*a-n*o-s*h)},slerp:function(i,e){var n=this.x,s=this.y,r=this.z,a=this.w,o=i.x,h=i.y,c=i.z,l=i.w,u=n*o+s*h+r*c+a*l;u<0&&(u=-u,o=-o,h=-h,c=-c,l=-l);var f=1-e,d=e;if(1-u>_w){var p=Math.acos(u),y=Math.sin(p);f=Math.sin((1-e)*p)/y,d=Math.sin(e*p)/y}return this.set(f*n+d*o,f*s+d*h,f*r+d*c,f*a+d*l)},invert:function(){var i=this.x,e=this.y,n=this.z,s=this.w,r=i*i+e*e+n*n+s*s,a=r?1/r:0;return this.set(-i*a,-e*a,-n*a,s*a)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(i){i*=.5;var e=this.x,n=this.y,s=this.z,r=this.w,a=Math.sin(i),o=Math.cos(i);return this.set(e*o+r*a,n*o+s*a,s*o-n*a,r*o-e*a)},rotateY:function(i){i*=.5;var e=this.x,n=this.y,s=this.z,r=this.w,a=Math.sin(i),o=Math.cos(i);return this.set(e*o-s*a,n*o+r*a,s*o+e*a,r*o-n*a)},rotateZ:function(i){i*=.5;var e=this.x,n=this.y,s=this.z,r=this.w,a=Math.sin(i),o=Math.cos(i);return this.set(e*o+n*a,n*o-e*a,s*o+r*a,r*o-s*a)},calculateW:function(){var i=this.x,e=this.y,n=this.z;return this.w=-Math.sqrt(1-i*i-e*e-n*n),this},setFromEuler:function(i,e){var n=i.x/2,s=i.y/2,r=i.z/2,a=Math.cos(n),o=Math.cos(s),h=Math.cos(r),c=Math.sin(n),l=Math.sin(s),u=Math.sin(r);switch(i.order){case"XYZ":{this.set(c*o*h+a*l*u,a*l*h-c*o*u,a*o*u+c*l*h,a*o*h-c*l*u,e);break}case"YXZ":{this.set(c*o*h+a*l*u,a*l*h-c*o*u,a*o*u-c*l*h,a*o*h+c*l*u,e);break}case"ZXY":{this.set(c*o*h-a*l*u,a*l*h+c*o*u,a*o*u+c*l*h,a*o*h-c*l*u,e);break}case"ZYX":{this.set(c*o*h-a*l*u,a*l*h+c*o*u,a*o*u-c*l*h,a*o*h+c*l*u,e);break}case"YZX":{this.set(c*o*h+a*l*u,a*l*h+c*o*u,a*o*u-c*l*h,a*o*h-c*l*u,e);break}case"XZY":{this.set(c*o*h-a*l*u,a*l*h-c*o*u,a*o*u+c*l*h,a*o*h+c*l*u,e);break}}return this},setFromRotationMatrix:function(i){var e=i.val,n=e[0],s=e[4],r=e[8],a=e[1],o=e[5],h=e[9],c=e[2],l=e[6],u=e[10],f=n+o+u,d;return f>0?(d=.5/Math.sqrt(f+1),this.set((l-h)*d,(r-c)*d,(a-s)*d,.25/d)):n>o&&n>u?(d=2*Math.sqrt(1+n-o-u),this.set(.25*d,(s+a)/d,(r+c)/d,(l-h)/d)):o>u?(d=2*Math.sqrt(1+o-n-u),this.set((s+a)/d,.25*d,(h+l)/d,(r-c)/d)):(d=2*Math.sqrt(1+u-n-o),this.set((r+c)/d,(h+l)/d,.25*d,(a-s)/d)),this},fromMat3:function(i){var e=i.val,n=e[0]+e[4]+e[8],s;if(n>0)s=Math.sqrt(n+1),this.w=.5*s,s=.5/s,this._x=(e[7]-e[5])*s,this._y=(e[2]-e[6])*s,this._z=(e[3]-e[1])*s;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var a=Sw[r],o=Sw[a];s=Math.sqrt(e[r*3+r]-e[a*3+a]-e[o*3+o]+1),wa[r]=.5*s,s=.5/s,wa[a]=(e[a*3+r]+e[r*3+a])*s,wa[o]=(e[o*3+r]+e[r*3+o])*s,this._x=wa[0],this._y=wa[1],this._z=wa[2],this._w=(e[o*3+a]-e[a*3+o])*s}return this.onChangeCallback(this),this}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var zw=new ds,Cw=new Ew,nF=new Ft,iF=function(i,e,n){return Cw.setAxisAngle(e,n),zw.fromRotationTranslation(Cw,nF.set(0,0,0)),i.transformMat4(zw)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var md={Angle:Xk,Distance:eL,Easing:nL,Fuzzy:oL,Interpolation:vL,Pow2:_L,Snap:zL,RandomDataGenerator:CL,Average:AL,Bernstein:gw,Between:va,CatmullRom:lh,CeilTo:PL,Clamp:Qn,DegToRad:iw,Difference:IL,Euler:xd,Factorial:Fl,FloatBetween:Ll,FloorTo:RL,FromPercent:Vo,GetSpeed:OL,IsEven:kL,IsEvenStrict:LL,Linear:dr,LinearXY:FL,MaxAdd:NL,Median:BL,MinSub:DL,Percent:qL,RadToDeg:$L,RandomXY:VL,RandomXYZ:GL,RandomXYZW:UL,Rotate:WL,RotateAround:YL,RotateAroundDistance:jL,RotateTo:HL,RoundAwayFromZero:uw,RoundTo:XL,SinCosTableGenerator:ZL,SmootherStep:Mw,SmoothStep:ww,ToXY:JL,TransformXY:QL,Within:KL,Wrap:_l,Vector2:ge,Vector3:Ft,Vector4:Ie,Matrix3:gd,Matrix4:ds,Quaternion:Ew,RotateVec3:iF};md=pd(!1,md,he);const Bl=md;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var wi=function(i,e,n){var s=ne(i,e,null);if(s===null)return n;if(Array.isArray(s))return Bl.RND.pick(s);if(typeof s=="object"){if(s.hasOwnProperty("randInt"))return Bl.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return Bl.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if(typeof s=="function")return s(e);return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var sF=function(i,e,n,s,r){r===void 0&&(r=n);var a=ne(i,e,r);return Qn(a,n,s)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var rF=function(i,e){for(var n=0;n<e.length;n++)if(!i.hasOwnProperty(e[n]))return!1;return!0};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var aF=function(i,e){for(var n=0;n<e.length;n++)if(i.hasOwnProperty(e[n]))return!0;return!1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Aw=function(i,e){return i.hasOwnProperty(e)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var oF=function(i,e){var n=fd(i);for(var s in e)n.hasOwnProperty(s)||(n[s]=e[s]);return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vd=function(i,e){var n=fd(i);for(var s in e)n.hasOwnProperty(s)&&(n[s]=e[s]);return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var hF=function(i,e){for(var n={},s=0;s<e.length;s++){var r=e[s];Aw(i,r)&&(n[r]=i[r])}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var cF=function(i,e,n){if(!i||typeof i=="number")return!1;if(i.hasOwnProperty(e))return i[e]=n,!0;if(e.indexOf(".")!==-1){for(var s=e.split("."),r=i,a=i,o=0;o<s.length;o++)if(r.hasOwnProperty(s[o]))a=r,r=r[s[o]];else return!1;return a[s[s.length-1]]=n,!0}return!1};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const lF={Clone:fd,DeepCopy:yw,Extend:pd,GetAdvancedValue:wi,GetFastValue:xt,GetMinMaxValue:sF,GetValue:ne,HasAll:rF,HasAny:aF,HasValue:Aw,IsPlainObject:dd,Merge:oF,MergeRight:vd,Pick:hF,SetValue:cF};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var uF=function(i,e){return i.replace(/%([0-9]+)/g,function(n,s){return e[Number(s)-1]})};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fF=function(i,e){return e===0?i.slice(1):i.slice(0,e)+i.slice(e+1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dF=function(i){return i.split("").reverse().join("")};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var pF=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var e=Math.random()*16|0,n=i==="x"?e:e&3|8;return n.toString(16)})};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const yF={Format:uF,Pad:lw,RemoveAt:fF,Reverse:dF,UppercaseFirst:B2,UUID:pF};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var xF=function(){return null};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const gF={Array:Pk,Base64:Ok,Objects:lF,String:yF,NOOP:Nl,NULL:xF};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _t={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ve=function(i,e,n){return i&&i.hasOwnProperty(e)?i[e]:n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var wd={bezier:mw,catmull:yd,catmullrom:yd,linear:vw},Pw=function(i){if(i===null)return null;var e=wd.linear;return typeof i=="string"?wd.hasOwnProperty(i)&&(e=wd[i]):typeof i=="function"&&(e=i),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Dl=function(i,e,n){var s;if(i.hasOwnProperty(e)){var r=typeof i[e];r==="function"?s=function(a,o,h,c,l,u){return i[e](a,o,h,c,l,u)}:s=function(){return i[e]}}else typeof n=="function"?s=n:s=function(){return n};return s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const mF=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"];/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Iw=function(i){var e,n=[];if(i.hasOwnProperty("props"))for(e in i.props)e.substring(0,1)!=="_"&&n.push({key:e,value:i.props[e]});else for(e in i)mF.indexOf(e)===-1&&e.substring(0,1)!=="_"&&n.push({key:e,value:i[e]});return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Md=function(i){var e=ne(i,"targets",null);return e===null||(typeof e=="function"&&(e=e.call()),Array.isArray(e)||(e=[e])),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function Rw(i){return!!i.getActive&&typeof i.getActive=="function"}function Ow(i){return!!i.getStart&&typeof i.getStart=="function"}function kw(i){return!!i.getEnd&&typeof i.getEnd=="function"}function vF(i){return Ow(i)||kw(i)||Rw(i)}var pr=function(i,e){var n,s=function(S,E,A){return A},r=function(S,E,A){return A},a=null,o=typeof e;if(o==="number")s=function(){return e};else if(Array.isArray(e))r=function(){return e[0]},s=function(){return e[e.length-1]};else if(o==="string"){var h=e.toLowerCase(),c=h.substring(0,6)==="random",l=h.substring(0,3)==="int";if(c||l){var u=h.indexOf("("),f=h.indexOf(")"),d=h.indexOf(",");if(u&&f&&d){var p=parseFloat(h.substring(u+1,d)),y=parseFloat(h.substring(d+1,f));c?s=function(){return Ll(p,y)}:s=function(){return va(p,y)}}else throw new Error("invalid random() format")}else{h=h[0];var x=parseFloat(e.substr(2));switch(h){case"+":s=function(S,E,A){return A+x};break;case"-":s=function(S,E,A){return A-x};break;case"*":s=function(S,E,A){return A*x};break;case"/":s=function(S,E,A){return A/x};break;default:s=function(){return parseFloat(e)}}}}else if(o==="function")s=e;else if(o==="object")if(vF(e))Rw(e)&&(a=e.getActive),kw(e)&&(s=e.getEnd),Ow(e)&&(r=e.getStart);else if(e.hasOwnProperty("value"))n=pr(i,e.value);else{var g=e.hasOwnProperty("to"),m=e.hasOwnProperty("from"),v=e.hasOwnProperty("start");if(g&&(m||v)){if(n=pr(i,e.to),v){var w=pr(i,e.start);n.getActive=w.getEnd}if(m){var b=pr(i,e.from);n.getStart=b.getEnd}}}return n||(n={getActive:a,getEnd:s,getStart:r}),n},wF=Object.prototype.hasOwnProperty,Qe="~";function uh(){}Object.create&&(uh.prototype=Object.create(null),new uh().__proto__||(Qe=!1));function MF(i,e,n){this.fn=i,this.context=e,this.once=n||!1}function Lw(i,e,n,s,r){if(typeof n!="function")throw new TypeError("The listener must be a function");var a=new MF(n,s||i,r),o=Qe?Qe+e:e;return i._events[o]?i._events[o].fn?i._events[o]=[i._events[o],a]:i._events[o].push(a):(i._events[o]=a,i._eventsCount++),i}function ql(i,e){--i._eventsCount===0?i._events=new uh:delete i._events[e]}function Re(){this._events=new uh,this._eventsCount=0}Re.prototype.eventNames=function(){var e=[],n,s;if(this._eventsCount===0)return e;for(s in n=this._events)wF.call(n,s)&&e.push(Qe?s.slice(1):s);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e},Re.prototype.listeners=function(e){var n=Qe?Qe+e:e,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,a=s.length,o=new Array(a);r<a;r++)o[r]=s[r].fn;return o},Re.prototype.listenerCount=function(e){var n=Qe?Qe+e:e,s=this._events[n];return s?s.fn?1:s.length:0},Re.prototype.emit=function(e,n,s,r,a,o){var h=Qe?Qe+e:e;if(!this._events[h])return!1;var c=this._events[h],l=arguments.length,u,f;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,s),!0;case 4:return c.fn.call(c.context,n,s,r),!0;case 5:return c.fn.call(c.context,n,s,r,a),!0;case 6:return c.fn.call(c.context,n,s,r,a,o),!0}for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];c.fn.apply(c.context,u)}else{var d=c.length,p;for(f=0;f<d;f++)switch(c[f].once&&this.removeListener(e,c[f].fn,void 0,!0),l){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,n);break;case 3:c[f].fn.call(c[f].context,n,s);break;case 4:c[f].fn.call(c[f].context,n,s,r);break;default:if(!u)for(p=1,u=new Array(l-1);p<l;p++)u[p-1]=arguments[p];c[f].fn.apply(c[f].context,u)}}return!0},Re.prototype.on=function(e,n,s){return Lw(this,e,n,s,!1)},Re.prototype.once=function(e,n,s){return Lw(this,e,n,s,!0)},Re.prototype.removeListener=function(e,n,s,r){var a=Qe?Qe+e:e;if(!this._events[a])return this;if(!n)return ql(this,a),this;var o=this._events[a];if(o.fn)o.fn===n&&(!r||o.once)&&(!s||o.context===s)&&ql(this,a);else{for(var h=0,c=[],l=o.length;h<l;h++)(o[h].fn!==n||r&&!o[h].once||s&&o[h].context!==s)&&c.push(o[h]);c.length?this._events[a]=c.length===1?c[0]:c:ql(this,a)}return this},Re.prototype.removeAllListeners=function(e){var n;return e?(n=Qe?Qe+e:e,this._events[n]&&ql(this,n)):(this._events=new uh,this._eventsCount=0),this},Re.prototype.off=Re.prototype.removeListener,Re.prototype.addListener=Re.prototype.on,Re.prefixed=Qe,Re.EventEmitter=Re;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const bF="active";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const _F="complete";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const SF="loop";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const TF="pause";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const EF="resume";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const zF="repeat";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const CF="start";/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const AF="stop";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const PF="update";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const IF="yoyo";/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const me={TWEEN_ACTIVE:bF,TWEEN_COMPLETE:_F,TWEEN_LOOP:SF,TWEEN_PAUSE:TF,TWEEN_RESUME:EF,TWEEN_REPEAT:zF,TWEEN_START:CF,TWEEN_STOP:AF,TWEEN_UPDATE:PF,TWEEN_YOYO:IF};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Fn=new Gt({Extends:Re,initialize:function(e){Re.call(this),this.parent=e,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=_t.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(i){return this.timeScale=i,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(me.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(me.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(me.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(me.TWEEN_COMPLETE,"onComplete")},complete:function(i){return i===void 0&&(i=0),i?(this.setCompleteDelayState(),this.countdown=i):this.onCompleteHandler(),this},completeAfterLoop:function(i){return i===void 0&&(i=0),this.loopCounter>i&&(this.loopCounter=i),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(me.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(i){this.countdown-=i,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(me.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(i){return this.countdown-=i,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(me.TWEEN_START,"onStart"),i=0),i},updateCompleteDelay:function(i){this.countdown-=i,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(i,e,n){return n===void 0&&(n=[]),this.callbacks.hasOwnProperty(i)&&(this.callbacks[i]={func:e,params:n}),this},setPendingState:function(){this.state=_t.PENDING},setActiveState:function(){this.state=_t.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=_t.LOOP_DELAY},setCompleteDelayState:function(){this.state=_t.COMPLETE_DELAY},setStartDelayState:function(){this.state=_t.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=_t.PENDING_REMOVE},setRemovedState:function(){this.state=_t.REMOVED},setFinishedState:function(){this.state=_t.FINISHED},setDestroyedState:function(){this.state=_t.DESTROYED},isPending:function(){return this.state===_t.PENDING},isActive:function(){return this.state===_t.ACTIVE},isLoopDelayed:function(){return this.state===_t.LOOP_DELAY},isCompleteDelayed:function(){return this.state===_t.COMPLETE_DELAY},isStartDelayed:function(){return this.state===_t.START_DELAY},isPendingRemove:function(){return this.state===_t.PENDING_REMOVE},isRemoved:function(){return this.state===_t.REMOVED},isFinished:function(){return this.state===_t.FINISHED},isDestroyed:function(){return this.state===_t.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(i){i.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});Fn.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"];/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $l={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gs=new Gt({initialize:function(e,n,s,r,a,o,h,c,l,u){this.tween=e,this.targetIndex=n,this.duration=r<=0?.01:r,this.totalDuration=0,this.delay=0,this.getDelay=s,this.yoyo=a,this.hold=o,this.repeat=h,this.repeatDelay=c,this.repeatCounter=0,this.flipX=l,this.flipY=u,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(i){i===void 0&&(i=this.current),this.tween.targets[this.targetIndex][this.key]=i},setCreatedState:function(){this.state=_t.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=_t.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=_t.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=_t.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=_t.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=_t.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=_t.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=_t.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===_t.CREATED},isDelayed:function(){return this.state===_t.DELAY},isPendingRender:function(){return this.state===_t.PENDING_RENDER},isPlayingForward:function(){return this.state===_t.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===_t.PLAYING_BACKWARD},isHolding:function(){return this.state===_t.HOLD_DELAY},isRepeating:function(){return this.state===_t.REPEAT_DELAY},isComplete:function(){return this.state===_t.COMPLETE},setStateFromEnd:function(i){this.yoyo?this.onRepeat(i,!0,!0):this.repeatCounter>0?this.onRepeat(i,!0,!1):this.setCompleteState()},setStateFromStart:function(i){this.repeatCounter>0?this.onRepeat(i,!1):this.setCompleteState()},reset:function(){var i=this.tween,e=i.totalTargets,n=this.targetIndex,s=i.targets[n],r=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(s,r,0,n,e,i),this.repeatCounter=this.repeat===-1?_t.MAX:this.repeat,this.setPendingRenderState();var a=this.duration+this.hold;this.yoyo&&(a+=this.duration);var o=a+this.repeatDelay;this.totalDuration=this.delay+a,this.repeat===-1?(this.totalDuration+=o*_t.MAX,i.isInfinite=!0):this.repeat>0&&(this.totalDuration+=o*this.repeat),this.totalDuration>i.duration&&(i.duration=this.totalDuration),this.delay<i.startDelay&&(i.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(i,e,n){var s=this.tween,r=s.totalTargets,a=this.targetIndex,o=s.targets[a],h=this.key,c=h!=="texture";if(this.elapsed=i,this.progress=i/this.duration,this.flipX&&o.toggleFlipX(),this.flipY&&o.toggleFlipY(),c&&(e||n)&&(this.start=this.getStartValue(o,h,this.start,a,r,s)),n){this.setPlayingBackwardState(),this.dispatchEvent(me.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,c&&(this.end=this.getEndValue(o,h,this.start,a,r,s)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-i,c&&(this.current=this.start,o[h]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(me.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Fw=new Gt({Extends:gs,initialize:function(e,n,s,r,a,o,h,c,l,u,f,d,p,y,x,g,m){gs.call(this,e,n,c,l,u,f,d,p,y,x),this.key=s,this.getActiveValue=o,this.getEndValue=r,this.getStartValue=a,this.ease=h,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=g,this.interpolationData=m},reset:function(i){gs.prototype.reset.call(this);var e=this.tween.targets[this.targetIndex],n=this.key;i&&(e[n]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(e[n]=this.getActiveValue(e,n,0))},update:function(i){var e=this.tween,n=e.totalTargets,s=this.targetIndex,r=e.targets[s],a=this.key;if(!r)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=i,this.elapsed<=0&&(this.elapsed=0,i=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(me.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(r,a,r[a],s,n,e),this.end=this.getEndValue(r,a,this.start,s,n,e),this.current=this.start,r[a]=this.start,this.setPlayingForwardState(),!0;var o=this.isPlayingForward(),h=this.isPlayingBackward();if(o||h){var c=this.elapsed,l=this.duration,u=0,f=!1;c+=i,c>=l?(u=c-l,c=l,f=!0):c<0&&(c=0);var d=Qn(c/l,0,1);this.elapsed=c,this.progress=d,this.previous=this.current,o||(d=1-d);var p=this.ease(d);this.interpolation?this.current=this.interpolation(this.interpolationData,p):this.current=this.start+(this.end-this.start)*p,r[a]=this.current,f&&(o?(e.isNumberTween&&(this.current=this.end,r[a]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(u)):(e.isNumberTween&&(this.current=this.start,r[a]=this.current),this.setStateFromStart(u))),this.dispatchEvent(me.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(i,e){var n=this.tween;if(!n.isSeeking){var s=n.targets[this.targetIndex],r=this.key,a=this.current,o=this.previous;n.emit(i,n,r,s,a,o);var h=n.callbacks[e];h&&h.func.apply(n.callbackScope,[n,s,r,a,o].concat(h.params))}},destroy:function(){gs.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Nw=new Gt({Extends:gs,initialize:function(e,n,s,r,a,o,h,c,l,u,f){gs.call(this,e,n,a,o,!1,h,c,l,u,f),this.key="texture",this.startTexture=null,this.endTexture=s,this.startFrame=null,this.endFrame=r,this.yoyo=c!==0},reset:function(i){gs.prototype.reset.call(this);var e=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=e.texture.key,this.startFrame=e.frame.name),i&&e.setTexture(this.startTexture,this.startFrame)},update:function(i){var e=this.tween,n=this.targetIndex,s=e.targets[n];if(!s)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=i,this.elapsed<=0&&(this.elapsed=0,i=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(me.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&s.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var r=this.isPlayingForward(),a=this.isPlayingBackward();if(r||a){var o=this.elapsed,h=this.duration,c=0,l=!1;o+=i,o>=h?(c=o-h,o=h,l=!0):o<0&&(o=0);var u=Qn(o/h,0,1);this.elapsed=o,this.progress=u,l&&(r?(s.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(c)):(s.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(c))),this.dispatchEvent(me.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(i,e){var n=this.tween;if(!n.isSeeking){var s=n.targets[this.targetIndex],r=this.key;n.emit(i,n,r,s);var a=n.callbacks[e];a&&a.func.apply(n.callbackScope,[n,s,r].concat(a.params))}},destroy:function(){gs.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var ms=new Gt({Extends:Fn,initialize:function(e,n){Fn.call(this,e),this.targets=n,this.totalTargets=n.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(i,e,n,s,r,a,o,h,c,l,u,f,d,p,y,x){var g=new Fw(this,i,e,n,s,r,a,o,h,c,l,u,f,d,p,y,x);return this.totalData=this.data.push(g),g},addFrame:function(i,e,n,s,r,a,o,h,c,l){var u=new Nw(this,i,e,n,s,r,a,o,h,c,l);return this.totalData=this.data.push(u),u},getValue:function(i){i===void 0&&(i=0);var e=null;return this.data&&(e=this.data[i].current),e},hasTarget:function(i){return this.targets&&this.targets.indexOf(i)!==-1},updateTo:function(i,e,n){if(n===void 0&&(n=!1),i!=="texture")for(var s=0;s<this.totalData;s++){var r=this.data[s];r.key===i&&(r.isPlayingForward()||r.isPlayingBackward())&&(r.end=e,n&&(r.start=r.current))}return this},restart:function(){switch(this.state){case _t.REMOVED:case _t.FINISHED:this.seek(),this.parent.makeActive(this);break;case _t.PENDING:case _t.PENDING_REMOVE:this.parent.reset(this);break;case _t.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(me.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,Fn.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(i,e,n){if(i===void 0&&(i=0),e===void 0&&(e=16.6),n===void 0&&(n=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;n||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(me.TWEEN_ACTIVE,"onActive");var s=this.paused;if(this.paused=!1,i>0){for(var r=Math.floor(i/e),a=i-r*e,o=0;o<r;o++)this.update(e);a>0&&this.update(a)}return this.paused=s,this.isSeeking=!1,this},initTweenData:function(i){i===void 0&&(i=!1),this.duration=0,this.startDelay=he.MAX_SAFE_INTEGER;for(var e=this.data,n=0;n<this.totalData;n++)e[n].reset(i);this.duration=Math.max(this.duration,.01);var s=this.duration,r=this.completeDelay,a=this.loopCounter,o=this.loopDelay;a>0?this.totalDuration=s+r+(s+o)*a:this.totalDuration=s+r},reset:function(i){return i===void 0&&(i=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=_t.MAX),i||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(me.TWEEN_ACTIVE,"onActive")),this},update:function(i){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(i*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(i),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(i),!1;this.hasStarted||(this.startDelay-=i,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(me.TWEEN_START,"onStart"),i=0));var e=!1;if(this.isActive())for(var n=this.data,s=0;s<this.totalData;s++)n[s].update(i)&&(e=!0);this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),e||this.nextState();var r=this.isPendingRemove();return r&&this.persist&&(this.setFinishedState(),r=!1),r},forward:function(i){return this.update(i),this},rewind:function(i){return this.update(-i),this},dispatchEvent:function(i,e){if(!this.isSeeking){if(this.emit(i,this,this.targets),!this.callbacks)return;var n=this.callbacks[e];n&&n.func.apply(this.callbackScope,[this,this.targets].concat(n.params))}},destroy:function(){Fn.prototype.destroy.call(this),this.targets=null}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Bw=function(i,e,n){if(e instanceof ms)return e.parent=i,e;n===void 0?n=$l:n=vd($l,n);var s=xt(e,"from",0),r=xt(e,"to",1),a=[{value:s}],o=xt(e,"delay",n.delay),h=xt(e,"easeParams",n.easeParams),c=xt(e,"ease",n.ease),l=pr("value",r),u=new ms(i,a),f=u.add(0,"value",l.getEnd,l.getStart,l.getActive,Qo(xt(e,"ease",c),xt(e,"easeParams",h)),Dl(e,"delay",o),xt(e,"duration",n.duration),Ve(e,"yoyo",n.yoyo),xt(e,"hold",n.hold),xt(e,"repeat",n.repeat),xt(e,"repeatDelay",n.repeatDelay),!1,!1);f.start=s,f.current=s,u.completeDelay=wi(e,"completeDelay",0),u.loop=Math.round(wi(e,"loop",0)),u.loopDelay=Math.round(wi(e,"loopDelay",0)),u.paused=Ve(e,"paused",!1),u.persist=Ve(e,"persist",!1),u.isNumberTween=!0,u.callbackScope=ne(e,"callbackScope",u);for(var d=Fn.TYPES,p=0;p<d.length;p++){var y=d[p],x=ne(e,y,!1);if(x){var g=ne(e,y+"Params",[]);u.setCallback(y,x,g)}}return u};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Dw=function(i,e){e===void 0&&(e={});var n,s=ne(e,"start",0),r=ne(e,"ease",null),a=ne(e,"grid",null),o=ne(e,"from",0),h=o==="first",c=o==="center",l=o==="last",u=typeof o=="number",f=Array.isArray(i),d=parseFloat(f?i[0]:i),p=f?parseFloat(i[1]):0,y=Math.max(d,p);if(f&&(s+=d),a){var x=a[0],g=a[1],m=0,v=0,w=0,b=0,S=[];l?(m=x-1,v=g-1):u?(m=o%x,v=Math.floor(o/x)):c&&(m=(x-1)/2,v=(g-1)/2);for(var E=he.MIN_SAFE_INTEGER,A=0;A<g;A++){S[A]=[];for(var M=0;M<x;M++){w=m-M,b=v-A;var _=Math.sqrt(w*w+b*b);_>E&&(E=_),S[A][M]=_}}}var T=r?Qo(r):null;return a?n=function(C,P,R,k){var I=0,L=k%x,F=Math.floor(k/x);L>=0&&L<x&&F>=0&&F<g&&(I=S[F][L]);var B;if(f){var V=p-d;T?B=I/E*V*T(I/E):B=I/E*V}else T?B=I*d*T(I/E):B=I*d;return B+s}:n=function(C,P,R,k,I){I--;var L;h?L=k:c?L=Math.abs(I/2-k):l?L=I-k:u&&(L=Math.abs(o-k));var F;if(f){var B;c?B=(p-d)/I*(L*2):B=(p-d)/I*L,T?F=B*T(L/I):F=B}else T?F=I*y*T(L/I):F=L*d;return F+s},n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fh=function(i,e,n){if(e instanceof ms)return e.parent=i,e;n===void 0?n=$l:n=vd($l,n);var s=Md(e);!s&&n.targets&&(s=n.targets);for(var r=Iw(e),a=xt(e,"delay",n.delay),o=xt(e,"duration",n.duration),h=xt(e,"easeParams",n.easeParams),c=xt(e,"ease",n.ease),l=xt(e,"hold",n.hold),u=xt(e,"repeat",n.repeat),f=xt(e,"repeatDelay",n.repeatDelay),d=Ve(e,"yoyo",n.yoyo),p=Ve(e,"flipX",n.flipX),y=Ve(e,"flipY",n.flipY),x=xt(e,"interpolation",n.interpolation),g=function(C,P,R,k){if(R==="texture"){var I=k,L=void 0;Array.isArray(k)?(I=k[0],L=k[1]):k.hasOwnProperty("value")?(I=k.value,Array.isArray(k.value)?(I=k.value[0],L=k.value[1]):typeof k.value=="string"&&(I=k.value)):typeof k=="string"&&(I=k),C.addFrame(P,I,L,Dl(k,"delay",a),xt(k,"duration",o),xt(k,"hold",l),xt(k,"repeat",u),xt(k,"repeatDelay",f),Ve(k,"flipX",p),Ve(k,"flipY",y))}else{var F=pr(R,k),B=Pw(xt(k,"interpolation",x));C.add(P,R,F.getEnd,F.getStart,F.getActive,Qo(xt(k,"ease",c),xt(k,"easeParams",h)),Dl(k,"delay",a),xt(k,"duration",o),Ve(k,"yoyo",d),xt(k,"hold",l),xt(k,"repeat",u),xt(k,"repeatDelay",f),Ve(k,"flipX",p),Ve(k,"flipY",y),B,B?k:null)}},m=new ms(i,s),v=0;v<r.length;v++)for(var w=r[v].key,b=r[v].value,S=0;S<s.length;S++)w==="scale"&&!s[S].hasOwnProperty("scale")?(g(m,S,"scaleX",b),g(m,S,"scaleY",b)):g(m,S,w,b);m.completeDelay=wi(e,"completeDelay",0),m.loop=Math.round(wi(e,"loop",0)),m.loopDelay=Math.round(wi(e,"loopDelay",0)),m.paused=Ve(e,"paused",!1),m.persist=Ve(e,"persist",!1),m.callbackScope=xt(e,"callbackScope",m);for(var E=Fn.TYPES,A=0;A<E.length;A++){var M=E[A],_=ne(e,M,!1);if(_){var T=ne(e,M+"Params",[]);m.setCallback(M,_,T)}}return m};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const RF={GetBoolean:Ve,GetEaseFunction:Qo,GetInterpolationFunction:Pw,GetNewValue:Dl,GetProps:Iw,GetTargets:Md,GetValueOp:pr,NumberTweenBuilder:Bw,StaggerBuilder:Dw,TweenBuilder:fh};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ma=new Gt({Extends:Fn,initialize:function(e){Fn.call(this,e),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?_t.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(i){var e=this.parent.create(i);Array.isArray(e)||(e=[e]);for(var n=this.data,s=0;s<e.length;s++){var r=e[s];r.parent=this,n.push(r.reset())}return this.totalData=n.length,this},remove:function(i){return ud(this.data,i),i.setRemovedState(),i===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(i){for(var e=this.data,n=0;n<this.totalData;n++)if(e[n].hasTarget(i))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(i){return i.seek(),i.setActiveState(),this},makeActive:function(i){return i.reset(),i.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(me.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var i=this.data,e=this.totalData,n=0;n<e;n++)i[n].reset(!1);this.setCurrentTween(0)},update:function(i){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(i*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(i),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(i),!1;this.hasStarted||(this.startDelay-=i,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(me.TWEEN_START,"onStart"),i=0));var e=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(i)&&this.nextTween()&&this.nextState(),e=this.isPendingRemove(),e&&this.persist&&(this.setFinishedState(),e=!1)),e},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(i){this.currentIndex=i,this.currentTween=this.data[i],this.currentTween.setActiveState()},dispatchEvent:function(i,e){this.emit(i,this);var n=this.callbacks[e];n&&n.func.apply(this.callbackScope,[this].concat(n.params))},destroy:function(){Fn.prototype.destroy.call(this),this.currentTween=null}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Vl=function(i,e){if(e instanceof Ma)return e.parent=i,e;var n=new Ma(i);n.startDelay=ne(e,"delay",0),n.completeDelay=wi(e,"completeDelay",0),n.loop=Math.round(wi(e,"loop",ne(e,"repeat",0))),n.loopDelay=Math.round(wi(e,"loopDelay",ne(e,"repeatDelay",0))),n.paused=Ve(e,"paused",!1),n.persist=Ve(e,"persist",!1),n.callbackScope=ne(e,"callbackScope",n);var s,r=Fn.TYPES;for(s=0;s<r.length;s++){var a=r[s],o=ne(e,a,!1);if(o){var h=ne(e,a+"Params",[]);n.setCallback(a,o,h)}}var c=ne(e,"tweens",null);if(Array.isArray(c)){var l=[],u=Md(e),f=void 0;for(u&&(f={targets:u}),s=0;s<c.length;s++)l.push(fh(n,c[s],f));n.add(l)}return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const qi={BOOT:"boot",START:"start",DESTROY:"destroy",PAUSE:"pause",RESUME:"resume",UPDATE:"update",SHUTDOWN:"shutdown"};var qw=new Gt({initialize:function(e){this.scene=e,this.events=e.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(qi.BOOT,this.boot,this),this.events.on(qi.START,this.start,this)},boot:function(){this.events.once(qi.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(qi.UPDATE,this.update,this),this.events.once(qi.SHUTDOWN,this.shutdown,this)},create:function(i){Array.isArray(i)||(i=[i]);for(var e=[],n=0;n<i.length;n++){var s=i[n];s instanceof ms||s instanceof Ma?e.push(s):Array.isArray(s.tweens)?e.push(Vl(this,s)):e.push(fh(this,s))}return e.length===1?e[0]:e},add:function(i){var e=i,n=this.tweens;return e instanceof ms||e instanceof Ma||(Array.isArray(e.tweens)?e=Vl(this,e):e=fh(this,e)),n.push(e.reset()),e},addMultiple:function(i){for(var e,n=[],s=this.tweens,r=0;r<i.length;r++)e=i[r],e instanceof ms||e instanceof Ma||(Array.isArray(e.tweens)?e=Vl(this,e):e=fh(this,e)),s.push(e.reset()),n.push(e);return n},chain:function(i){var e=Vl(this,i);return this.tweens.push(e.init()),e},getChainedTweens:function(i){return i.getChainedTweens()},has:function(i){return this.tweens.indexOf(i)>-1},existing:function(i){return this.has(i)||this.tweens.push(i.reset()),this},addCounter:function(i){var e=Bw(this,i);return this.tweens.push(e.reset()),e},stagger:function(i,e){return Dw(i,e)},setLagSmooth:function(i,e){return i===void 0&&(i=1/1e-8),e===void 0&&(e=0),this.maxLag=i,this.lagSkip=Math.min(e,this.maxLag),this},setFps:function(i){return i===void 0&&(i=240),this.gap=1e3/i,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(i){var e=Date.now()-this.prevTime;e>this.maxLag&&(this.startTime+=e-this.lagSkip),this.prevTime+=e;var n=this.prevTime-this.startTime,s=n-this.nextTime,r=n-this.time*1e3;return s>0||i?(n/=1e3,this.time=n,this.nextTime+=s+(s>=this.gap?4:this.gap-s)):r=0,r},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(i){i===void 0&&(i=!1);var e=this.getDelta(i);if(!(e<=0)){this.processing=!0;var n,s,r=[],a=this.tweens;for(n=0;n<a.length;n++)s=a[n],s.update(e)&&r.push(s);var o=r.length;if(o&&a.length>0){for(n=0;n<o;n++){s=r[n];var h=a.indexOf(s);h>-1&&(s.isPendingRemove()||s.isDestroyed())&&(a.splice(h,1),s.destroy())}r.length=0}this.processing=!1}},remove:function(i){return this.processing?i.setPendingRemoveState():(ud(this.tweens,i),i.setRemovedState()),this},reset:function(i){return this.existing(i),i.seek(),i.setActiveState(),this},makeActive:function(i){return this.existing(i),i.setActiveState(),this},each:function(i,e){var n,s=[null];for(n=1;n<arguments.length;n++)s.push(arguments[n]);return this.tweens.forEach(function(r){s[0]=r,i.apply(e,s)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(i){var e=[],n=this.tweens;Array.isArray(i)?i=cd(i):i=[i];for(var s=i.length,r=0;r<n.length;r++)for(var a=n[r],o=0;o<s;o++)!a.isDestroyed()&&a.hasTarget(i[o])&&e.push(a);return e},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(i){return this.timeScale=i,this},isTweening:function(i){for(var e=this.tweens,n,s=0;s<e.length;s++)if(n=e[s],n.isPlaying()&&n.hasTarget(i))return!0;return!1},killAll:function(){for(var i=this.processing?this.getTweens():this.tweens,e=0;e<i.length;e++)i[e].destroy();return this.processing||(i.length=0),this},killTweensOf:function(i){for(var e=this.getTweensOf(i),n=0;n<e.length;n++)e[n].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(qi.UPDATE,this.update,this),this.events.off(qi.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(qi.START,this.start,this),this.scene=null,this.events=null}});qw.SceneEvents=qi;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var OF={States:_t,Builders:RF,Events:me,TweenManager:qw,Tween:ms,TweenData:Fw,TweenFrameData:Nw,BaseTween:Fn,TweenChain:Ma};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $w=function(i,e,n,s){return s<<24|i<<16|e<<8|n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function bd(i,e,n,s){var r=(i+e*6)%6,a=Math.min(r,4-r,1);return Math.round(255*(s-s*n*Math.max(0,a)))}var ba=function(i,e,n,s){e===void 0&&(e=1),n===void 0&&(n=1);var r=bd(5,i,e,n),a=bd(3,i,e,n),o=bd(1,i,e,n);return s?s.setTo?s.setTo(r,a,o,s.alpha,!0):(s.r=r,s.g=a,s.b=o,s.color=vi(r,a,o),s):{r,g:a,b:o,color:vi(r,a,o)}};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var _d=function(i,e,n,s){s===void 0&&(s={h:0,s:0,v:0}),i/=255,e/=255,n/=255;var r=Math.min(i,e,n),a=Math.max(i,e,n),o=a-r,h=0,c=a===0?0:o/a,l=a;return a!==r&&(a===i?h=(e-n)/o+(e<n?6:0):a===e?h=(n-i)/o+2:a===n&&(h=(i-e)/o+4),h/=6),s.hasOwnProperty("_h")?(s._h=h,s._s=c,s._v=l):(s.h=h,s.s=c,s.v=l),s};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Kt=new Gt({initialize:function(e,n,s,r){e===void 0&&(e=0),n===void 0&&(n=0),s===void 0&&(s=0),r===void 0&&(r=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(e,n,s,r)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(i,e,n,s,r){return s===void 0&&(s=255),r===void 0&&(r=!0),this._locked=!0,this.red=i,this.green=e,this.blue=n,this.alpha=s,this._locked=!1,this.update(r)},setGLTo:function(i,e,n,s){return s===void 0&&(s=1),this._locked=!0,this.redGL=i,this.greenGL=e,this.blueGL=n,this.alphaGL=s,this._locked=!1,this.update(!0)},setFromRGB:function(i){return this._locked=!0,this.red=i.r,this.green=i.g,this.blue=i.b,i.hasOwnProperty("a")&&(this.alpha=i.a),this._locked=!1,this.update(!0)},setFromHSV:function(i,e,n){return ba(i,e,n,this)},update:function(i){if(i===void 0&&(i=!1),this._locked)return this;var e=this.r,n=this.g,s=this.b,r=this.a;return this._color=vi(e,n,s),this._color32=$w(e,n,s,r),this._rgba="rgba("+e+","+n+","+s+","+r/255+")",i&&_d(e,n,s,this),this},updateHSV:function(){var i=this.r,e=this.g,n=this.b;return _d(i,e,n,this),this},clone:function(){return new Kt(this.r,this.g,this.b,this.a)},gray:function(i){return this.setTo(i,i,i)},random:function(i,e){i===void 0&&(i=0),e===void 0&&(e=255);var n=Math.floor(i+Math.random()*(e-i)),s=Math.floor(i+Math.random()*(e-i)),r=Math.floor(i+Math.random()*(e-i));return this.setTo(n,s,r)},randomGray:function(i,e){i===void 0&&(i=0),e===void 0&&(e=255);var n=Math.floor(i+Math.random()*(e-i));return this.setTo(n,n,n)},saturate:function(i){return this.s+=i/100,this},desaturate:function(i){return this.s-=i/100,this},lighten:function(i){return this.v+=i/100,this},darken:function(i){return this.v-=i/100,this},brighten:function(i){var e=this.r,n=this.g,s=this.b;return e=Math.max(0,Math.min(255,e-Math.round(255*-(i/100)))),n=Math.max(0,Math.min(255,n-Math.round(255*-(i/100)))),s=Math.max(0,Math.min(255,s-Math.round(255*-(i/100)))),this.setTo(e,n,s)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(i){this.gl[0]=Math.min(Math.abs(i),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(i){this.gl[1]=Math.min(Math.abs(i),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(i){this.gl[2]=Math.min(Math.abs(i),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(i){this.gl[3]=Math.min(Math.abs(i),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(i){i=Math.floor(Math.abs(i)),this.r=Math.min(i,255),this.gl[0]=i/255,this.update(!0)}},green:{get:function(){return this.g},set:function(i){i=Math.floor(Math.abs(i)),this.g=Math.min(i,255),this.gl[1]=i/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(i){i=Math.floor(Math.abs(i)),this.b=Math.min(i,255),this.gl[2]=i/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(i){i=Math.floor(Math.abs(i)),this.a=Math.min(i,255),this.gl[3]=i/255,this.update()}},h:{get:function(){return this._h},set:function(i){this._h=i,ba(i,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(i){this._s=i,ba(this._h,i,this._v,this)}},v:{get:function(){return this._v},set:function(i){this._v=i,ba(this._h,this._s,i,this)}}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var kF=function(i){i===void 0&&(i=1024);var e=[],n=255,s,r=255,a=0,o=0;for(s=0;s<=n;s++)e.push({r,g:s,b:o,color:vi(r,s,o)});for(a=255,s=n;s>=0;s--)e.push({r:s,g:a,b:o,color:vi(s,a,o)});for(r=0,s=0;s<=n;s++,a--)e.push({r,g:a,b:s,color:vi(r,a,s)});for(a=0,o=255,s=0;s<=n;s++,o--,r++)e.push({r,g:a,b:o,color:vi(r,a,o)});if(i===1024)return e;var h=[],c=0,l=1024/i;for(s=0;s<i;s++)h.push(e[Math.floor(c)]),c+=l;return h};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var LF=function(i){var e={r:i>>16&255,g:i>>8&255,b:i&255,a:255};return i>16777215&&(e.a=i>>>24),e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dh=function(i){var e=i.toString(16);return e.length===1?"0"+e:e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Vw=function(i){var e=new Kt;i=i.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(o,h,c,l){return h+h+c+c+l+l});var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);if(n){var s=parseInt(n[1],16),r=parseInt(n[2],16),a=parseInt(n[3],16);e.setTo(s,r,a)}return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Gl=function(i,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(e-i)*6*n:n<1/2?e:n<2/3?i+(e-i)*(2/3-n)*6:i};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var FF=function(i,e,n){var s=n,r=n,a=n;if(e!==0){var o=n<.5?n*(1+e):n+e-n*e,h=2*n-o;s=Gl(h,o,i+1/3),r=Gl(h,o,i),a=Gl(h,o,i-1/3)}var c=new Kt;return c.setGLTo(s,r,a,1)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var NF=function(i,e){i===void 0&&(i=1),e===void 0&&(e=1);for(var n=[],s=0;s<=359;s++)n.push(ba(s/359,i,e));return n};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Gw=function(i){return i>16777215?{a:i>>>24,r:i>>16&255,g:i>>8&255,b:i&255}:{a:255,r:i>>16&255,g:i>>8&255,b:i&255}};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Uw=function(i){var e=Gw(i);return new Kt(e.r,e.g,e.b,e.a)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Sd=function(i,e,n,s,r,a,o,h){o===void 0&&(o=100),h===void 0&&(h=0);var c=h/o,l=dr(i,s,c),u=dr(e,r,c),f=dr(n,a,c);return{r:l,g:u,b:f,a:255,color:vi(l,u,f)}},BF=function(i,e,n,s){return n===void 0&&(n=100),s===void 0&&(s=0),Sd(i.r,i.g,i.b,e.r,e.g,e.b,n,s)},DF=function(i,e,n,s,r,a){return r===void 0&&(r=100),a===void 0&&(a=0),Sd(i.r,i.g,i.b,e,n,s,r,a)};const qF={RGBWithRGB:Sd,ColorWithRGB:DF,ColorWithColor:BF};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ww=function(i){return new Kt(i.r,i.g,i.b,i.a)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var $F=function(i,e){return i===void 0&&(i=0),e===void 0&&(e=255),new Kt(va(i,e),va(i,e),va(i,e))};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Yw=function(i){var e=new Kt,n=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(i.toLowerCase());if(n){var s=parseInt(n[1],10),r=parseInt(n[2],10),a=parseInt(n[3],10),o=n[4]!==void 0?parseFloat(n[4]):1;e.setTo(s,r,a,o*255)}return e};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var VF=function(i,e,n,s,r){return s===void 0&&(s=255),r===void 0&&(r="#"),r==="#"?"#"+((1<<24)+(i<<16)+(e<<8)+n).toString(16).slice(1,7):"0x"+dh(s)+dh(i)+dh(e)+dh(n)};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var GF=function(i){var e=typeof i;switch(e){case"string":return i.substr(0,3).toLowerCase()==="rgb"?Yw(i):Vw(i);case"number":return Uw(i);case"object":return Ww(i)}};/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */Kt.ColorSpectrum=kF,Kt.ColorToRGBA=LF,Kt.ComponentToHex=dh,Kt.GetColor=vi,Kt.GetColor32=$w,Kt.HexStringToColor=Vw,Kt.HSLToColor=FF,Kt.HSVColorWheel=NF,Kt.HSVToRGB=ba,Kt.HueToComponent=Gl,Kt.IntegerToColor=Uw,Kt.IntegerToRGB=Gw,Kt.Interpolate=qF,Kt.ObjectToColor=Ww,Kt.RandomRGB=$F,Kt.RGBStringToColor=Yw,Kt.RGBToHSV=_d,Kt.RGBToString=VF,Kt.ValueToColor=GF;/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var UF=new Float32Array(20),le=new Gt({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(i){return this._matrix.set(i),this._dirty=!0,this},reset:function(){var i=this._matrix;return i.fill(0),i[0]=1,i[6]=1,i[12]=1,i[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var i=this._data;return this._dirty&&(i.set(this._matrix),i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,this._dirty=!1),i},brightness:function(i,e){i===void 0&&(i=0),e===void 0&&(e=!1);var n=i;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],e)},saturate:function(i,e){i===void 0&&(i=0),e===void 0&&(e=!1);var n=i*2/3+1,s=(n-1)*-.5;return this.multiply([n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0],e)},desaturate:function(i){return i===void 0&&(i=!1),this.saturate(-1,i)},hue:function(i,e){i===void 0&&(i=0),e===void 0&&(e=!1),i=i/180*Math.PI;var n=Math.cos(i),s=Math.sin(i),r=.213,a=.715,o=.072;return this.multiply([r+n*(1-r)+s*-r,a+n*-a+s*-a,o+n*-o+s*(1-o),0,0,r+n*-r+s*.143,a+n*(1-a)+s*.14,o+n*-o+s*-.283,0,0,r+n*-r+s*-.787,a+n*-a+s*a,o+n*(1-o)+s*o,0,0,0,0,0,1,0],e)},grayscale:function(i,e){return i===void 0&&(i=1),e===void 0&&(e=!1),this.saturate(-i,e)},blackWhite:function(i){return i===void 0&&(i=!1),this.multiply(le.BLACK_WHITE,i)},contrast:function(i,e){i===void 0&&(i=0),e===void 0&&(e=!1);var n=i+1,s=-.5*(n-1);return this.multiply([n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0],e)},negative:function(i){return i===void 0&&(i=!1),this.multiply(le.NEGATIVE,i)},desaturateLuminance:function(i){return i===void 0&&(i=!1),this.multiply(le.DESATURATE_LUMINANCE,i)},sepia:function(i){return i===void 0&&(i=!1),this.multiply(le.SEPIA,i)},night:function(i,e){return i===void 0&&(i=.1),e===void 0&&(e=!1),this.multiply([i*-2,-i,0,0,0,-i,0,i,0,0,0,i,i*2,0,0,0,0,0,1,0],e)},lsd:function(i){return i===void 0&&(i=!1),this.multiply(le.LSD,i)},brown:function(i){return i===void 0&&(i=!1),this.multiply(le.BROWN,i)},vintagePinhole:function(i){return i===void 0&&(i=!1),this.multiply(le.VINTAGE,i)},kodachrome:function(i){return i===void 0&&(i=!1),this.multiply(le.KODACHROME,i)},technicolor:function(i){return i===void 0&&(i=!1),this.multiply(le.TECHNICOLOR,i)},polaroid:function(i){return i===void 0&&(i=!1),this.multiply(le.POLAROID,i)},shiftToBGR:function(i){return i===void 0&&(i=!1),this.multiply(le.SHIFT_BGR,i)},multiply:function(i,e){e===void 0&&(e=!1),e||this.reset();var n=this._matrix,s=UF;return s.set(n),n.set([s[0]*i[0]+s[1]*i[5]+s[2]*i[10]+s[3]*i[15],s[0]*i[1]+s[1]*i[6]+s[2]*i[11]+s[3]*i[16],s[0]*i[2]+s[1]*i[7]+s[2]*i[12]+s[3]*i[17],s[0]*i[3]+s[1]*i[8]+s[2]*i[13]+s[3]*i[18],s[0]*i[4]+s[1]*i[9]+s[2]*i[14]+s[3]*i[19]+s[4],s[5]*i[0]+s[6]*i[5]+s[7]*i[10]+s[8]*i[15],s[5]*i[1]+s[6]*i[6]+s[7]*i[11]+s[8]*i[16],s[5]*i[2]+s[6]*i[7]+s[7]*i[12]+s[8]*i[17],s[5]*i[3]+s[6]*i[8]+s[7]*i[13]+s[8]*i[18],s[5]*i[4]+s[6]*i[9]+s[7]*i[14]+s[8]*i[19]+s[9],s[10]*i[0]+s[11]*i[5]+s[12]*i[10]+s[13]*i[15],s[10]*i[1]+s[11]*i[6]+s[12]*i[11]+s[13]*i[16],s[10]*i[2]+s[11]*i[7]+s[12]*i[12]+s[13]*i[17],s[10]*i[3]+s[11]*i[8]+s[12]*i[13]+s[13]*i[18],s[10]*i[4]+s[11]*i[9]+s[12]*i[14]+s[13]*i[19]+s[14],s[15]*i[0]+s[16]*i[5]+s[17]*i[10]+s[18]*i[15],s[15]*i[1]+s[16]*i[6]+s[17]*i[11]+s[18]*i[16],s[15]*i[2]+s[16]*i[7]+s[17]*i[12]+s[18]*i[17],s[15]*i[3]+s[16]*i[8]+s[17]*i[13]+s[18]*i[18],s[15]*i[4]+s[16]*i[9]+s[17]*i[14]+s[18]*i[19]+s[19]]),this._dirty=!0,this}});le.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],le.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],le.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],le.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],le.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],le.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],le.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],le.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],le.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],le.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],le.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var WF=new Gt({initialize:function(e,n,s){this._rgb=[0,0,0],this.onChangeCallback=Nl,this.dirty=!1,this.set(e,n,s)},set:function(i,e,n){return i===void 0&&(i=0),e===void 0&&(e=0),n===void 0&&(n=0),this._rgb=[i,e,n],this.onChange(),this},equals:function(i,e,n){var s=this._rgb;return s[0]===i&&s[1]===e&&s[2]===n},onChange:function(){this.dirty=!0;var i=this._rgb;this.onChangeCallback.call(this,i[0],i[1],i[2])},r:{get:function(){return this._rgb[0]},set:function(i){this._rgb[0]=i,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(i){this._rgb[1]=i,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(i){this._rgb[2]=i,this.onChange()}},destroy:function(){this.onChangeCallback=null}});/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */const YF=Object.freeze(Object.defineProperty({__proto__:null,AxisAlignedBounds:ja,Bezier:se,Big:EP,BigNumber:Yn,BoundingRect:As,CubicBezier:Bu,Matrix:Gh,Matrix2D:Te,Matrix3:o3,ObservablePoint:Br,OrientedBounds:M3,Point:Be,QuadBezier:qr,RBush:p4,Spline:$S,TinyQueue:t2,Transformable:h3,Vector2:N,animation:aT,bernstein:$r,bezierCurvatureAt:lS,bezierDerivative:yS,bezierFirstDerivative:Ay,bezierSecondDerivative:Py,bigInt:Ae,center_to_endpoint:ly,chopBezierAt:Ha,chopBezierBetween:gS,chopCubicBezierAt:$u,chopQuadBezierAt:jh,chopQuadBezierAtMaxCurature:mS,clipper:s5,computeCubicExtremas:Hu,computeQuadExtremas:ju,conicBezierAt:oS,conicBezierPointAt:hS,contains:iz,core:az,cubicBezierAt:Tn,cubicBezierPointAt:qu,cubicBezierWithMatrixAt:fS,cubicLength:CS,cubicProjectPoint:ky,curve:qS,ellipseArcToCubicBezier:Yh,endpoint_to_center:uy,evalCubicBezierTangentAt:bS,evalQuadBezierTangentAt:MS,findCubicExtrema:Wu,findCubicMaxCurvature:ES,findQuadExtrema:Uu,findQuadMaxCurvature:Iy,findUnitQuadRoots:Yu,flattenCubicBezier:Gu,flattenQuadBezier:Vu,getBezierDerivativeControlPoints:xS,getBezierPointWithBernstein:aS,getBezierPointWithDeCasteljau:Du,getRationalBezierPointWithBernstein:cS,intersections:qT,mapbox:h4,mathigon:gP,pathBool:yC,pathUtil:OE,phaser:Object.freeze(Object.defineProperty({__proto__:null,display:{Color:Kt,ColorMatrix:le,RGB:WF},geom:UO,math:Bl,tweens:OF,utils:gF},Symbol.toStringTag,{value:"Module"})),pixi:f4,pointOnEllipse:fy,pointOnLineDistance:Hh,pointOnSegmentDistance:vS,points:w3,polyClip:Cz,polytri:qC,quadBezierToCubic:wS,quadBezierWithMatrixAt:uS,quadraticBezierAt:Vn,quadraticBezierPointAt:Cy,quadraticLength:zS,quadraticProjectPoint:Oy,quarterArcToCubicBezier:Lu,raiseBezier:dS,shapes:m3,shapes2:HC,tess:x5,tweenjs:xT,utils:X3},Symbol.toStringTag,{value:"Module"})),jF="179dev",HF={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},XF={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ZF=0,JF=1,QF=2,KF=3,t6=0,e6=1,n6=2,i6=3,s6=0,r6=1,a6=2,o6=0,h6=1,c6=2,l6=3,u6=4,f6=5,d6=100,p6=101,y6=102,x6=103,g6=104,m6=200,v6=201,w6=202,M6=203,b6=204,_6=205,S6=206,T6=207,E6=208,z6=209,C6=210,A6=211,P6=212,I6=213,R6=214,O6=0,k6=1,L6=2,F6=3,N6=4,B6=5,D6=6,q6=7,$6=0,V6=1,G6=2,U6=0,W6=1,Y6=2,j6=3,H6=4,X6=5,Z6=6,J6=7,Q6="attached",K6="detached",Td=300,Ed=301,tN=302,eN=303,nN=304,iN=306,zd=1e3,vs=1001,Cd=1002,Kn=1003,sN=1004,rN=1004,aN=1005,oN=1005,_a=1006,hN=1007,cN=1007,jw=1008,lN=1008,Ad=1009,Hw=1010,Xw=1011,Zw=1012,Jw=1013,Pd=1014,Id=1015,Qw=1016,Kw=1017,tM=1018,uN=1020,eM=35902,nM=1021,iM=1022,Rd=1023,Od=1026,sM=1027,rM=1028,aM=1029,oM=1030,hM=1031,fN=1032,cM=1033,lM=33776,uM=33777,fM=33778,dM=33779,pM=35840,yM=35841,xM=35842,gM=35843,mM=36196,vM=37492,wM=37496,MM=37808,bM=37809,_M=37810,SM=37811,TM=37812,EM=37813,zM=37814,CM=37815,AM=37816,PM=37817,IM=37818,RM=37819,OM=37820,kM=37821,LM=36492,FM=36494,NM=36495,BM=36283,DM=36284,qM=36285,$M=36286,VM=2200,GM=2201,UM=2202,ph=2300,Ul=2301,Wl=2302,yr=2400,xr=2401,yh=2402,Yl=2500,kd=2501,dN=0,pN=1,yN=2,xN=3200,gN=3201,mN=3202,vN=3203,wN=0,MN=1,Ld="",Nn="srgb",Fd="srgb-linear",Nd="linear",jl="srgb",bN=0,_N=7680,SN=7681,TN=7682,EN=7683,zN=34055,CN=34056,AN=5386,PN=512,IN=513,RN=514,ON=515,kN=516,LN=517,FN=518,NN=519,BN=512,DN=513,qN=514,$N=515,VN=516,GN=517,UN=518,WN=519,xh=35044,YN=35048,jN=35040,HN=35045,XN=35049,ZN=35041,JN=35046,QN=35050,KN=35042,tB="100",eB="300 es",Mi=2e3,gh=2001,nB={COMPUTE:"compute",RENDER:"render"},iB={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},sB={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class WM{constructor(e,n,s=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=s,this.blendMode=r;const a=n.tracks,o=a.length,h=new Array(o),c={endingStart:yr,endingEnd:yr};for(let l=0;l!==o;++l){const u=a[l].createInterpolant(null);h[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=h,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=GM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,s=!1){if(e.fadeOut(n),this.fadeIn(n),s===!0){const r=this._clip.duration,a=e._clip.duration,o=a/r,h=r/a;e.warp(1,o,n),this.warp(h,1,n)}return this}crossFadeTo(e,n,s=!1){return e.crossFadeFrom(this,n,s)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,s){const r=this._mixer,a=r.time,o=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=r._lendControlInterpolant(),this._timeScaleInterpolant=h);const c=h.parameterPositions,l=h.sampleValues;return c[0]=a,c[1]=a+s,l[0]=e/o,l[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,s,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*s;c<0||s===0?n=0:(this._startTime=null,n=s*c)}n*=this._updateTimeScale(e);const o=this._updateTime(n),h=this._updateWeight(e);if(h>0){const c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case kd:for(let u=0,f=c.length;u!==f;++u)c[u].evaluate(o),l[u].accumulateAdditive(h);break;case Yl:default:for(let u=0,f=c.length;u!==f;++u)c[u].evaluate(o),l[u].accumulate(r,h)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const s=this._weightInterpolant;if(s!==null){const r=s.evaluate(e)[0];n*=r,e>s.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const s=this._timeScaleInterpolant;if(s!==null){const r=s.evaluate(e)[0];n*=r,e>s.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,s=this.loop;let r=this.time+e,a=this._loopCount;const o=s===UM;if(e===0)return a===-1?r:o&&(a&1)===1?n-r:r;if(s===VM){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const h=Math.floor(r/n);r-=n*h,a+=Math.abs(h);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=r;if(o&&(a&1)===1)return n-r}return r}_setEndings(e,n,s){const r=this._interpolantSettings;s?(r.endingStart=xr,r.endingEnd=xr):(e?r.endingStart=this.zeroSlopeAtStart?xr:yr:r.endingStart=yh,n?r.endingEnd=this.zeroSlopeAtEnd?xr:yr:r.endingEnd=yh)}_scheduleFading(e,n,s){const r=this._mixer,a=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const h=o.parameterPositions,c=o.sampleValues;return h[0]=a,c[0]=n,h[1]=a+e,c[1]=s,this}}const Ge=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let YM=1234567;const gr=Math.PI/180,Hl=180/Math.PI;function ti(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(Ge[i&255]+Ge[i>>8&255]+Ge[i>>16&255]+Ge[i>>24&255]+"-"+Ge[e&255]+Ge[e>>8&255]+"-"+Ge[e>>16&15|64]+Ge[e>>24&255]+"-"+Ge[n&63|128]+Ge[n>>8&255]+"-"+Ge[n>>16&255]+Ge[n>>24&255]+Ge[s&255]+Ge[s>>8&255]+Ge[s>>16&255]+Ge[s>>24&255]).toLowerCase()}function zt(i,e,n){return Math.max(e,Math.min(n,i))}function Bd(i,e){return(i%e+e)%e}function rB(i,e,n,s,r){return s+(i-e)*(r-s)/(n-e)}function aB(i,e,n){return i!==e?(n-i)/(e-i):0}function mh(i,e,n){return(1-n)*i+n*e}function oB(i,e,n,s){return mh(i,e,1-Math.exp(-n*s))}function hB(i,e=1){return e-Math.abs(Bd(i,e*2)-e)}function cB(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*(3-2*i))}function lB(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*i*(i*(i*6-15)+10))}function uB(i,e){return i+Math.floor(Math.random()*(e-i+1))}function fB(i,e){return i+Math.random()*(e-i)}function dB(i){return i*(.5-Math.random())}function pB(i){i!==void 0&&(YM=i);let e=YM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function yB(i){return i*gr}function xB(i){return i*Hl}function gB(i){return(i&i-1)===0&&i!==0}function mB(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function vB(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function wB(i,e,n,s,r){const a=Math.cos,o=Math.sin,h=a(n/2),c=o(n/2),l=a((e+s)/2),u=o((e+s)/2),f=a((e-s)/2),d=o((e-s)/2),p=a((s-e)/2),y=o((s-e)/2);switch(r){case"XYX":i.set(h*u,c*f,c*d,h*l);break;case"YZY":i.set(c*d,h*u,c*f,h*l);break;case"ZXZ":i.set(c*f,c*d,h*u,h*l);break;case"XZX":i.set(h*u,c*y,c*p,h*l);break;case"YXY":i.set(c*p,h*u,c*y,h*l);break;case"ZYZ":i.set(c*y,c*p,h*u,h*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ke(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function At(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const MB={DEG2RAD:gr,RAD2DEG:Hl,generateUUID:ti,clamp:zt,euclideanModulo:Bd,mapLinear:rB,inverseLerp:aB,lerp:mh,damp:oB,pingpong:hB,smoothstep:cB,smootherstep:lB,randInt:uB,randFloat:fB,randFloatSpread:dB,seededRandom:pB,degToRad:yB,radToDeg:xB,isPowerOfTwo:gB,ceilPowerOfTwo:mB,floorPowerOfTwo:vB,setQuaternionFromProperEuler:wB,normalize:At,denormalize:Ke};class un{constructor(e=0,n=0,s=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=s,this._w=r}static slerpFlat(e,n,s,r,a,o,h){let c=s[r+0],l=s[r+1],u=s[r+2],f=s[r+3];const d=a[o+0],p=a[o+1],y=a[o+2],x=a[o+3];if(h===0){e[n+0]=c,e[n+1]=l,e[n+2]=u,e[n+3]=f;return}if(h===1){e[n+0]=d,e[n+1]=p,e[n+2]=y,e[n+3]=x;return}if(f!==x||c!==d||l!==p||u!==y){let g=1-h;const m=c*d+l*p+u*y+f*x,v=m>=0?1:-1,w=1-m*m;if(w>Number.EPSILON){const S=Math.sqrt(w),E=Math.atan2(S,m*v);g=Math.sin(g*E)/S,h=Math.sin(h*E)/S}const b=h*v;if(c=c*g+d*b,l=l*g+p*b,u=u*g+y*b,f=f*g+x*b,g===1-h){const S=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=S,l*=S,u*=S,f*=S}}e[n]=c,e[n+1]=l,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,s,r,a,o){const h=s[r],c=s[r+1],l=s[r+2],u=s[r+3],f=a[o],d=a[o+1],p=a[o+2],y=a[o+3];return e[n]=h*y+u*f+c*p-l*d,e[n+1]=c*y+u*d+l*f-h*p,e[n+2]=l*y+u*p+h*d-c*f,e[n+3]=u*y-h*f-c*d-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,s,r){return this._x=e,this._y=n,this._z=s,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const s=e._x,r=e._y,a=e._z,o=e._order,h=Math.cos,c=Math.sin,l=h(s/2),u=h(r/2),f=h(a/2),d=c(s/2),p=c(r/2),y=c(a/2);switch(o){case"XYZ":this._x=d*u*f+l*p*y,this._y=l*p*f-d*u*y,this._z=l*u*y+d*p*f,this._w=l*u*f-d*p*y;break;case"YXZ":this._x=d*u*f+l*p*y,this._y=l*p*f-d*u*y,this._z=l*u*y-d*p*f,this._w=l*u*f+d*p*y;break;case"ZXY":this._x=d*u*f-l*p*y,this._y=l*p*f+d*u*y,this._z=l*u*y+d*p*f,this._w=l*u*f-d*p*y;break;case"ZYX":this._x=d*u*f-l*p*y,this._y=l*p*f+d*u*y,this._z=l*u*y-d*p*f,this._w=l*u*f+d*p*y;break;case"YZX":this._x=d*u*f+l*p*y,this._y=l*p*f+d*u*y,this._z=l*u*y-d*p*f,this._w=l*u*f-d*p*y;break;case"XZY":this._x=d*u*f-l*p*y,this._y=l*p*f-d*u*y,this._z=l*u*y+d*p*f,this._w=l*u*f+d*p*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const s=n/2,r=Math.sin(s);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,s=n[0],r=n[4],a=n[8],o=n[1],h=n[5],c=n[9],l=n[2],u=n[6],f=n[10],d=s+h+f;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(u-c)*p,this._y=(a-l)*p,this._z=(o-r)*p}else if(s>h&&s>f){const p=2*Math.sqrt(1+s-h-f);this._w=(u-c)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(a+l)/p}else if(h>f){const p=2*Math.sqrt(1+h-s-f);this._w=(a-l)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(c+u)/p}else{const p=2*Math.sqrt(1+f-s-h);this._w=(o-r)/p,this._x=(a+l)/p,this._y=(c+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let s=e.dot(n)+1;return s<1e-8?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zt(this.dot(e),-1,1)))}rotateTowards(e,n){const s=this.angleTo(e);if(s===0)return this;const r=Math.min(1,n/s);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const s=e._x,r=e._y,a=e._z,o=e._w,h=n._x,c=n._y,l=n._z,u=n._w;return this._x=s*u+o*h+r*l-a*c,this._y=r*u+o*c+a*h-s*l,this._z=a*u+o*l+s*c-r*h,this._w=o*u-s*h-r*c-a*l,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const s=this._x,r=this._y,a=this._z,o=this._w;let h=o*e._w+s*e._x+r*e._y+a*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=o,this._x=s,this._y=r,this._z=a,this;const c=1-h*h;if(c<=Number.EPSILON){const p=1-n;return this._w=p*o+n*this._w,this._x=p*s+n*this._x,this._y=p*r+n*this._y,this._z=p*a+n*this._z,this.normalize(),this}const l=Math.sqrt(c),u=Math.atan2(l,h),f=Math.sin((1-n)*u)/l,d=Math.sin(n*u)/l;return this._w=o*f+this._w*d,this._x=s*f+this._x*d,this._y=r*f+this._y*d,this._z=a*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,n,s){return this.copy(e).slerp(n,s)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),s=Math.random(),r=Math.sqrt(1-s),a=Math.sqrt(s);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}function mr(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function jM(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function HM(i){function e(r,a){return i[r]-i[a]}const n=i.length,s=new Array(n);for(let r=0;r!==n;++r)s[r]=r;return s.sort(e),s}function Dd(i,e,n){const s=i.length,r=new i.constructor(s);for(let a=0,o=0;o!==s;++a){const h=n[a]*e;for(let c=0;c!==e;++c)r[o++]=i[h+c]}return r}function qd(i,e,n,s){let r=1,a=i[0];for(;a!==void 0&&a[s]===void 0;)a=i[r++];if(a===void 0)return;let o=a[s];if(o!==void 0)if(Array.isArray(o))do o=a[s],o!==void 0&&(e.push(a.time),n.push(...o)),a=i[r++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[s],o!==void 0&&(e.push(a.time),o.toArray(n,n.length)),a=i[r++];while(a!==void 0);else do o=a[s],o!==void 0&&(e.push(a.time),n.push(o)),a=i[r++];while(a!==void 0)}function bB(i,e,n,s,r=30){const a=i.clone();a.name=e;const o=[];for(let c=0;c<a.tracks.length;++c){const l=a.tracks[c],u=l.getValueSize(),f=[],d=[];for(let p=0;p<l.times.length;++p){const y=l.times[p]*r;if(!(y<n||y>=s)){f.push(l.times[p]);for(let x=0;x<u;++x)d.push(l.values[p*u+x])}}f.length!==0&&(l.times=mr(f,l.times.constructor),l.values=mr(d,l.values.constructor),o.push(l))}a.tracks=o;let h=1/0;for(let c=0;c<a.tracks.length;++c)h>a.tracks[c].times[0]&&(h=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*h);return a.resetDuration(),a}function _B(i,e=0,n=i,s=30){s<=0&&(s=30);const r=n.tracks.length,a=e/s;for(let o=0;o<r;++o){const h=n.tracks[o],c=h.ValueTypeName;if(c==="bool"||c==="string")continue;const l=i.tracks.find(function(m){return m.name===h.name&&m.ValueTypeName===c});if(l===void 0)continue;let u=0;const f=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let d=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);const y=h.times.length-1;let x;if(a<=h.times[0]){const m=u,v=f-u;x=h.values.slice(m,v)}else if(a>=h.times[y]){const m=y*f+u,v=m+f-u;x=h.values.slice(m,v)}else{const m=h.createInterpolant(),v=u,w=f-u;m.evaluate(a),x=m.resultBuffer.slice(v,w)}c==="quaternion"&&new un().fromArray(x).normalize().conjugate().toArray(x);const g=l.times.length;for(let m=0;m<g;++m){const v=m*p+d;if(c==="quaternion")un.multiplyQuaternionsFlat(l.values,v,x,0,l.values,v);else{const w=p-d*2;for(let b=0;b<w;++b)l.values[v+b]-=x[b]}}}return i.blendMode=kd,i}class SB{static convertArray(e,n){return mr(e,n)}static isTypedArray(e){return jM(e)}static getKeyframeOrder(e){return HM(e)}static sortedArray(e,n,s){return Dd(e,n,s)}static flattenJSON(e,n,s,r){qd(e,n,s,r)}static subclip(e,n,s,r,a=30){return bB(e,n,s,r,a)}static makeClipAdditive(e,n=0,s=e,r=30){return _B(e,n,s,r)}}class vh{constructor(e,n,s,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(s),this.sampleValues=n,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let s=this._cachedIndex,r=n[s],a=n[s-1];t:{e:{let o;n:{i:if(!(e<r)){for(let h=s+2;;){if(r===void 0){if(e<a)break i;return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===h)break;if(a=r,r=n[++s],e<r)break e}o=n.length;break n}if(!(e>=a)){const h=n[1];e<h&&(s=2,a=h);for(let c=s-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===c)break;if(r=a,a=n[--s-1],e>=a)break e}o=s,s=0;break n}break t}for(;s<o;){const h=s+o>>>1;e<n[h]?o=h:s=h+1}if(r=n[s],a=n[s-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,a,r)}return this.interpolate_(s,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,s=this.sampleValues,r=this.valueSize,a=e*r;for(let o=0;o!==r;++o)n[o]=s[a+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class XM extends vh{constructor(e,n,s,r){super(e,n,s,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yr,endingEnd:yr}}intervalChanged_(e,n,s){const r=this.parameterPositions;let a=e-2,o=e+1,h=r[a],c=r[o];if(h===void 0)switch(this.getSettings_().endingStart){case xr:a=e,h=2*n-s;break;case yh:a=r.length-2,h=n+r[a]-r[a+1];break;default:a=e,h=s}if(c===void 0)switch(this.getSettings_().endingEnd){case xr:o=e,c=2*s-n;break;case yh:o=1,c=s+r[1]-r[0];break;default:o=e-1,c=n}const l=(s-n)*.5,u=this.valueSize;this._weightPrev=l/(n-h),this._weightNext=l/(c-s),this._offsetPrev=a*u,this._offsetNext=o*u}interpolate_(e,n,s,r){const a=this.resultBuffer,o=this.sampleValues,h=this.valueSize,c=e*h,l=c-h,u=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,p=this._weightNext,y=(s-n)/(r-n),x=y*y,g=x*y,m=-d*g+2*d*x-d*y,v=(1+d)*g+(-1.5-2*d)*x+(-.5+d)*y+1,w=(-1-p)*g+(1.5+p)*x+.5*y,b=p*g-p*x;for(let S=0;S!==h;++S)a[S]=m*o[u+S]+v*o[l+S]+w*o[c+S]+b*o[f+S];return a}}class $d extends vh{constructor(e,n,s,r){super(e,n,s,r)}interpolate_(e,n,s,r){const a=this.resultBuffer,o=this.sampleValues,h=this.valueSize,c=e*h,l=c-h,u=(s-n)/(r-n),f=1-u;for(let d=0;d!==h;++d)a[d]=o[l+d]*f+o[c+d]*u;return a}}class ZM extends vh{constructor(e,n,s,r){super(e,n,s,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Bn{constructor(e,n,s,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mr(n,this.TimeBufferType),this.values=mr(s,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let s;if(n.toJSON!==this.toJSON)s=n.toJSON(e);else{s={name:e.name,times:mr(e.times,Array),values:mr(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(s.interpolation=r)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new ZM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $d(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new XM(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case ph:n=this.InterpolantFactoryMethodDiscrete;break;case Ul:n=this.InterpolantFactoryMethodLinear;break;case Wl:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(s);return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ph;case this.InterpolantFactoryMethodLinear:return Ul;case this.InterpolantFactoryMethodSmooth:return Wl}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let s=0,r=n.length;s!==r;++s)n[s]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let s=0,r=n.length;s!==r;++s)n[s]*=e}return this}trim(e,n){const s=this.times,r=s.length;let a=0,o=r-1;for(;a!==r&&s[a]<e;)++a;for(;o!==-1&&s[o]>n;)--o;if(++o,a!==0||o!==r){a>=o&&(o=Math.max(o,1),a=o-1);const h=this.getValueSize();this.times=s.slice(a,o),this.values=this.values.slice(a*h,o*h)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,r=this.values,a=s.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let h=0;h!==a;h++){const c=s[h];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,c,o),e=!1;break}o=c}if(r!==void 0&&jM(r))for(let h=0,c=r.length;h!==c;++h){const l=r[h];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),s=this.getValueSize(),r=this.getInterpolation()===Wl,a=e.length-1;let o=1;for(let h=1;h<a;++h){let c=!1;const l=e[h],u=e[h+1];if(l!==u&&(h!==1||l!==e[0]))if(r)c=!0;else{const f=h*s,d=f-s,p=f+s;for(let y=0;y!==s;++y){const x=n[f+y];if(x!==n[d+y]||x!==n[p+y]){c=!0;break}}}if(c){if(h!==o){e[o]=e[h];const f=h*s,d=o*s;for(let p=0;p!==s;++p)n[d+p]=n[f+p]}++o}}if(a>0){e[o]=e[a];for(let h=a*s,c=o*s,l=0;l!==s;++l)n[c+l]=n[h+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*s)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),s=this.constructor,r=new s(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Bn.prototype.ValueTypeName="",Bn.prototype.TimeBufferType=Float32Array,Bn.prototype.ValueBufferType=Float32Array,Bn.prototype.DefaultInterpolation=Ul;class vr extends Bn{constructor(e,n,s){super(e,n,s)}}vr.prototype.ValueTypeName="bool",vr.prototype.ValueBufferType=Array,vr.prototype.DefaultInterpolation=ph,vr.prototype.InterpolantFactoryMethodLinear=void 0,vr.prototype.InterpolantFactoryMethodSmooth=void 0;class Vd extends Bn{constructor(e,n,s,r){super(e,n,s,r)}}Vd.prototype.ValueTypeName="color";class wh extends Bn{constructor(e,n,s,r){super(e,n,s,r)}}wh.prototype.ValueTypeName="number";class JM extends vh{constructor(e,n,s,r){super(e,n,s,r)}interpolate_(e,n,s,r){const a=this.resultBuffer,o=this.sampleValues,h=this.valueSize,c=(s-n)/(r-n);let l=e*h;for(let u=l+h;l!==u;l+=4)un.slerpFlat(a,0,o,l-h,o,l,c);return a}}class Mh extends Bn{constructor(e,n,s,r){super(e,n,s,r)}InterpolantFactoryMethodLinear(e){return new JM(this.times,this.values,this.getValueSize(),e)}}Mh.prototype.ValueTypeName="quaternion",Mh.prototype.InterpolantFactoryMethodSmooth=void 0;class wr extends Bn{constructor(e,n,s){super(e,n,s)}}wr.prototype.ValueTypeName="string",wr.prototype.ValueBufferType=Array,wr.prototype.DefaultInterpolation=ph,wr.prototype.InterpolantFactoryMethodLinear=void 0,wr.prototype.InterpolantFactoryMethodSmooth=void 0;class bh extends Bn{constructor(e,n,s,r){super(e,n,s,r)}}bh.prototype.ValueTypeName="vector";class Gd{constructor(e="",n=-1,s=[],r=Yl){this.name=e,this.tracks=s,this.duration=n,this.blendMode=r,this.uuid=ti(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],s=e.tracks,r=1/(e.fps||1);for(let o=0,h=s.length;o!==h;++o)n.push(EB(s[o]).scale(r));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],s=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=s.length;a!==o;++a)n.push(Bn.toJSON(s[a]));return r}static CreateFromMorphTargetSequence(e,n,s,r){const a=n.length,o=[];for(let h=0;h<a;h++){let c=[],l=[];c.push((h+a-1)%a,h,(h+1)%a),l.push(0,1,0);const u=HM(c);c=Dd(c,1,u),l=Dd(l,1,u),!r&&c[0]===0&&(c.push(a),l.push(l[0])),o.push(new wh(".morphTargetInfluences["+n[h].name+"]",c,l).scale(1/s))}return new this(e,-1,o)}static findByName(e,n){let s=e;if(!Array.isArray(e)){const r=e;s=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<s.length;r++)if(s[r].name===n)return s[r];return null}static CreateClipsFromMorphTargetSequences(e,n,s){const r={},a=/^([\w-]*?)([\d]+)$/;for(let h=0,c=e.length;h<c;h++){const l=e[h],u=l.name.match(a);if(u&&u.length>1){const f=u[1];let d=r[f];d||(r[f]=d=[]),d.push(l)}}const o=[];for(const h in r)o.push(this.CreateFromMorphTargetSequence(h,r[h],n,s));return o}static parseAnimation(e,n){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(f,d,p,y,x){if(p.length!==0){const g=[],m=[];qd(p,g,m,y),g.length!==0&&x.push(new f(d,g,m))}},r=[],a=e.name||"default",o=e.fps||30,h=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const d=l[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const p={};let y;for(y=0;y<d.length;y++)if(d[y].morphTargets)for(let x=0;x<d[y].morphTargets.length;x++)p[d[y].morphTargets[x]]=-1;for(const x in p){const g=[],m=[];for(let v=0;v!==d[y].morphTargets.length;++v){const w=d[y];g.push(w.time),m.push(w.morphTarget===x?1:0)}r.push(new wh(".morphTargetInfluence["+x+"]",g,m))}c=p.length*o}else{const p=".bones["+n[f].name+"]";s(bh,p+".position",d,"pos",r),s(Mh,p+".quaternion",d,"rot",r),s(bh,p+".scale",d,"scl",r)}}return r.length===0?null:new this(a,c,r,h)}resetDuration(){const e=this.tracks;let n=0;for(let s=0,r=e.length;s!==r;++s){const a=this.tracks[s];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function TB(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return wh;case"vector":case"vector2":case"vector3":case"vector4":return bh;case"color":return Vd;case"quaternion":return Mh;case"bool":case"boolean":return vr;case"string":return wr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function EB(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=TB(i.type);if(i.times===void 0){const n=[],s=[];qd(i.keys,n,s,"value"),i.times=n,i.values=s}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}class ws{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(n)===-1&&s[e].push(n)}hasEventListener(e,n){const s=this._listeners;return s===void 0?!1:s[e]!==void 0&&s[e].indexOf(n)!==-1}removeEventListener(e,n){const s=this._listeners;if(s===void 0)return;const r=s[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const s=n[e.type];if(s!==void 0){e.target=this;const r=s.slice(0);for(let a=0,o=r.length;a<o;a++)r[a].call(this,e);e.target=null}}}const Ud="\\[\\]\\.:\\/",zB=new RegExp("["+Ud+"]","g"),Wd="[^"+Ud+"]",CB="[^"+Ud.replace("\\.","")+"]",AB=/((?:WC+[\/:])*)/.source.replace("WC",Wd),PB=/(WCOD+)?/.source.replace("WCOD",CB),IB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Wd),RB=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Wd),OB=new RegExp("^"+AB+PB+IB+RB+"$"),kB=["material","materials","bones","map"];class LB{constructor(e,n,s){const r=s||Bt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const s=this._targetGroup.nCachedObjects_,r=this._bindings[s];r!==void 0&&r.getValue(e,n)}setValue(e,n){const s=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=s.length;r!==a;++r)s[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=e.length;n!==s;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=e.length;n!==s;++n)e[n].unbind()}}class Bt{constructor(e,n,s){this.path=n,this.parsedPath=s||Bt.parseTrackName(n),this.node=Bt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,s){return e&&e.isAnimationObjectGroup?new Bt.Composite(e,n,s):new Bt(e,n,s)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zB,"")}static parseTrackName(e){const n=OB.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const s={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=s.nodeName&&s.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=s.nodeName.substring(r+1);kB.indexOf(a)!==-1&&(s.nodeName=s.nodeName.substring(0,r),s.objectName=a)}if(s.propertyName===null||s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return s}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const s=e.skeleton.getBoneByName(n);if(s!==void 0)return s}if(e.children){const s=function(a){for(let o=0;o<a.length;o++){const h=a[o];if(h.name===n||h.uuid===n)return h;const c=s(h.children);if(c)return c}return null},r=s(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const s=this.resolvedProperty;for(let r=0,a=s.length;r!==a;++r)e[n++]=s[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const s=this.resolvedProperty;for(let r=0,a=s.length;r!==a;++r)s[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const s=this.resolvedProperty;for(let r=0,a=s.length;r!==a;++r)s[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const s=this.resolvedProperty;for(let r=0,a=s.length;r!==a;++r)s[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,s=n.objectName,r=n.propertyName;let a=n.propertyIndex;if(e||(e=Bt.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(s){let l=n.objectIndex;switch(s){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[s]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[s]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[r];if(o===void 0){const l=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?h=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Bt.Composite=LB,Bt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Bt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Bt.prototype.GetterByBindingType=[Bt.prototype._getValue_direct,Bt.prototype._getValue_array,Bt.prototype._getValue_arrayElement,Bt.prototype._getValue_toArray],Bt.prototype.SetterByBindingTypeAndVersioning=[[Bt.prototype._setValue_direct,Bt.prototype._setValue_direct_setNeedsUpdate,Bt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_array,Bt.prototype._setValue_array_setNeedsUpdate,Bt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_arrayElement,Bt.prototype._setValue_arrayElement_setNeedsUpdate,Bt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_fromArray,Bt.prototype._setValue_fromArray_setNeedsUpdate,Bt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class QM{constructor(e,n,s){this.binding=e,this.valueSize=s;let r,a,o;switch(n){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(s*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(s*5);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(s*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const s=this.buffer,r=this.valueSize,a=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let h=0;h!==r;++h)s[a+h]=s[h];o=n}else{o+=n;const h=n/o;this._mixBufferRegion(s,a,0,h,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,s=this.valueSize,r=s*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,s),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,s=this.buffer,r=e*n+n,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=n*this._origIndex;this._mixBufferRegion(s,r,c,1-a,n)}o>0&&this._mixBufferRegionAdditive(s,r,this._addIndex*n,1,n);for(let c=n,l=n+n;c!==l;++c)if(s[c]!==s[c+n]){h.setValue(s,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,s=this.valueSize,r=s*this._origIndex;e.getValue(n,r);for(let a=s,o=r;a!==o;++a)n[a]=n[r+a%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let s=e;s<n;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[n+s]=this.buffer[e+s]}_select(e,n,s,r,a){if(r>=.5)for(let o=0;o!==a;++o)e[n+o]=e[s+o]}_slerp(e,n,s,r){un.slerpFlat(e,n,e,n,e,s,r)}_slerpAdditive(e,n,s,r,a){const o=this._workIndex*a;un.multiplyQuaternionsFlat(e,o,e,n,e,s),un.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,s,r,a){const o=1-r;for(let h=0;h!==a;++h){const c=n+h;e[c]=e[c]*o+e[s+h]*r}}_lerpAdditive(e,n,s,r,a){for(let o=0;o!==a;++o){const h=n+o;e[h]=e[h]+e[s+o]*r}}}const FB=new Float32Array(1);class NB extends ws{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const s=e._localRoot||this._root,r=e._clip.tracks,a=r.length,o=e._propertyBindings,h=e._interpolants,c=s.uuid,l=this._bindingsByRootAndName;let u=l[c];u===void 0&&(u={},l[c]=u);for(let f=0;f!==a;++f){const d=r[f],p=d.name;let y=u[p];if(y!==void 0)++y.referenceCount,o[f]=y;else{if(y=o[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,c,p));continue}const x=n&&n._propertyBindings[f].binding.parsedPath;y=new QM(Bt.create(s,p,x),d.ValueTypeName,d.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,c,p),o[f]=y}h[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const s=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,s)}const n=e._propertyBindings;for(let s=0,r=n.length;s!==r;++s){const a=n[s];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let s=0,r=n.length;s!==r;++s){const a=n[s];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,s){const r=this._actions,a=this._actionsByClip;let o=a[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=o;else{const h=o.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[s]=e}_removeInactiveAction(e){const n=this._actions,s=n[n.length-1],r=e._cacheIndex;s._cacheIndex=r,n[r]=s,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,h=o[a],c=h.knownActions,l=c[c.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,c[u]=l,c.pop(),e._byClipCacheIndex=null;const f=h.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],c.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let s=0,r=n.length;s!==r;++s){const a=n[s];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,s=e._cacheIndex,r=this._nActiveActions++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=s,n[s]=a}_takeBackAction(e){const n=this._actions,s=e._cacheIndex,r=--this._nActiveActions,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=s,n[s]=a}_addInactiveBinding(e,n,s){const r=this._bindingsByRootAndName,a=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[s]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,s=e.binding,r=s.rootNode.uuid,a=s.path,o=this._bindingsByRootAndName,h=o[r],c=n[n.length-1],l=e._cacheIndex;c._cacheIndex=l,n[l]=c,n.pop(),delete h[a],Object.keys(h).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,s=e._cacheIndex,r=this._nActiveBindings++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=s,n[s]=a}_takeBackBinding(e){const n=this._bindings,s=e._cacheIndex,r=--this._nActiveBindings,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=s,n[s]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let s=e[n];return s===void 0&&(s=new $d(new Float32Array(2),new Float32Array(2),1,FB),s.__cacheIndex=n,e[n]=s),s}_takeBackControlInterpolant(e){const n=this._controlInterpolants,s=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=n[r];e.__cacheIndex=r,n[r]=e,a.__cacheIndex=s,n[s]=a}clipAction(e,n,s){const r=n||this._root,a=r.uuid;let o=typeof e=="string"?Gd.findByName(r,e):e;const h=o!==null?o.uuid:e,c=this._actionsByClip[h];let l=null;if(s===void 0&&(o!==null?s=o.blendMode:s=Yl),c!==void 0){const f=c.actionByRoot[a];if(f!==void 0&&f.blendMode===s)return f;l=c.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const u=new WM(this,o,n,s);return this._bindAction(u,l),this._addInactiveAction(u,h,a),u}existingAction(e,n){const s=n||this._root,r=s.uuid,a=typeof e=="string"?Gd.findByName(s,e):e,o=a?a.uuid:e,h=this._actionsByClip[o];return h!==void 0&&h.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let s=n-1;s>=0;--s)e[s].stop();return this}update(e){e*=this.timeScale;const n=this._actions,s=this._nActiveActions,r=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==s;++l)n[l]._update(r,e,a,o);const h=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)h[l].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,s=e.uuid,r=this._actionsByClip,a=r[s];if(a!==void 0){const o=a.knownActions;for(let h=0,c=o.length;h!==c;++h){const l=o[h];this._deactivateAction(l);const u=l._cacheIndex,f=n[n.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,f._cacheIndex=u,n[u]=f,n.pop(),this._removeInactiveBindingsForAction(l)}delete r[s]}}uncacheRoot(e){const n=e.uuid,s=this._actionsByClip;for(const o in s){const h=s[o].actionByRoot,c=h[n];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,a=r[n];if(a!==void 0)for(const o in a){const h=a[o];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,n){const s=this.existingAction(e,n);s!==null&&(this._deactivateAction(s),this._removeInactiveAction(s))}}class BB{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ti(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let s=0,r=arguments.length;s!==r;++s)e[arguments[s].uuid]=s;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,s=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length;let h,c=e.length,l=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const d=arguments[u],p=d.uuid;let y=n[p];if(y===void 0){y=c++,n[p]=y,e.push(d);for(let x=0,g=o;x!==g;++x)a[x].push(new Bt(d,s[x],r[x]))}else if(y<l){h=e[y];const x=--l,g=e[x];n[g.uuid]=y,e[y]=g,n[p]=x,e[x]=d;for(let m=0,v=o;m!==v;++m){const w=a[m],b=w[x];let S=w[y];w[y]=b,S===void 0&&(S=new Bt(d,s[m],r[m])),w[x]=S}}else e[y]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,n=this._indicesByUUID,s=this._bindings,r=s.length;let a=this.nCachedObjects_;for(let o=0,h=arguments.length;o!==h;++o){const c=arguments[o],l=c.uuid,u=n[l];if(u!==void 0&&u>=a){const f=a++,d=e[f];n[d.uuid]=u,e[u]=d,n[l]=f,e[f]=c;for(let p=0,y=r;p!==y;++p){const x=s[p],g=x[f],m=x[u];x[u]=g,x[f]=m}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,s=this._bindings,r=s.length;let a=this.nCachedObjects_,o=e.length;for(let h=0,c=arguments.length;h!==c;++h){const l=arguments[h],u=l.uuid,f=n[u];if(f!==void 0)if(delete n[u],f<a){const d=--a,p=e[d],y=--o,x=e[y];n[p.uuid]=f,e[f]=p,n[x.uuid]=d,e[d]=x,e.pop();for(let g=0,m=r;g!==m;++g){const v=s[g],w=v[d],b=v[y];v[f]=w,v[d]=b,v.pop()}}else{const d=--o,p=e[d];d>0&&(n[p.uuid]=f),e[f]=p,e.pop();for(let y=0,x=r;y!==x;++y){const g=s[y];g[f]=g[d],g.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const s=this._bindingsIndicesByPath;let r=s[e];const a=this._bindings;if(r!==void 0)return a[r];const o=this._paths,h=this._parsedPaths,c=this._objects,l=c.length,u=this.nCachedObjects_,f=new Array(l);r=a.length,s[e]=r,o.push(e),h.push(n),a.push(f);for(let d=u,p=c.length;d!==p;++d){const y=c[d];f[d]=new Bt(y,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,s=n[e];if(s!==void 0){const r=this._paths,a=this._parsedPaths,o=this._bindings,h=o.length-1,c=o[h],l=e[h];n[l]=s,o[s]=c,o.pop(),a[s]=a[h],a.pop(),r[s]=r[h],r.pop()}}}class ${constructor(e=0,n=0,s=0){$.prototype.isVector3=!0,this.x=e,this.y=n,this.z=s}set(e,n,s){return s===void 0&&(s=this.z),this.x=e,this.y=n,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(KM.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(KM.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,s=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[3]*s+a[6]*r,this.y=a[1]*n+a[4]*s+a[7]*r,this.z=a[2]*n+a[5]*s+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,s=this.y,r=this.z,a=e.elements,o=1/(a[3]*n+a[7]*s+a[11]*r+a[15]);return this.x=(a[0]*n+a[4]*s+a[8]*r+a[12])*o,this.y=(a[1]*n+a[5]*s+a[9]*r+a[13])*o,this.z=(a[2]*n+a[6]*s+a[10]*r+a[14])*o,this}applyQuaternion(e){const n=this.x,s=this.y,r=this.z,a=e.x,o=e.y,h=e.z,c=e.w,l=2*(o*r-h*s),u=2*(h*n-a*r),f=2*(a*s-o*n);return this.x=n+c*l+o*f-h*u,this.y=s+c*u+h*l-a*f,this.z=r+c*f+a*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,s=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[4]*s+a[8]*r,this.y=a[1]*n+a[5]*s+a[9]*r,this.z=a[2]*n+a[6]*s+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=zt(this.x,e.x,n.x),this.y=zt(this.y,e.y,n.y),this.z=zt(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=zt(this.x,e,n),this.y=zt(this.y,e,n),this.z=zt(this.z,e,n),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(zt(s,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this.z=e.z+(n.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const s=e.x,r=e.y,a=e.z,o=n.x,h=n.y,c=n.z;return this.x=r*c-a*h,this.y=a*o-s*c,this.z=s*h-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const s=e.dot(this)/n;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return Yd.copy(this).projectOnVector(e),this.sub(Yd)}reflect(e){return this.sub(Yd.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const s=this.dot(e)/n;return Math.acos(zt(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,s=this.y-e.y,r=this.z-e.z;return n*n+s*s+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,s){const r=Math.sin(n)*e;return this.x=r*Math.sin(s),this.y=Math.cos(n)*e,this.z=r*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,s){return this.x=e*Math.sin(n),this.y=s,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=s,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,s=Math.sqrt(1-n*n);return this.x=s*Math.cos(e),this.y=n,this.z=s*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yd=new $,KM=new un;class ve{constructor(e,n,s,r,a,o,h,c,l,u,f,d,p,y,x,g){ve.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,s,r,a,o,h,c,l,u,f,d,p,y,x,g)}set(e,n,s,r,a,o,h,c,l,u,f,d,p,y,x,g){const m=this.elements;return m[0]=e,m[4]=n,m[8]=s,m[12]=r,m[1]=a,m[5]=o,m[9]=h,m[13]=c,m[2]=l,m[6]=u,m[10]=f,m[14]=d,m[3]=p,m[7]=y,m[11]=x,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ve().fromArray(this.elements)}copy(e){const n=this.elements,s=e.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],this}copyPosition(e){const n=this.elements,s=e.elements;return n[12]=s[12],n[13]=s[13],n[14]=s[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,s){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,n,s){return this.set(e.x,n.x,s.x,0,e.y,n.y,s.y,0,e.z,n.z,s.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,s=e.elements,r=1/Sa.setFromMatrixColumn(e,0).length(),a=1/Sa.setFromMatrixColumn(e,1).length(),o=1/Sa.setFromMatrixColumn(e,2).length();return n[0]=s[0]*r,n[1]=s[1]*r,n[2]=s[2]*r,n[3]=0,n[4]=s[4]*a,n[5]=s[5]*a,n[6]=s[6]*a,n[7]=0,n[8]=s[8]*o,n[9]=s[9]*o,n[10]=s[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,s=e.x,r=e.y,a=e.z,o=Math.cos(s),h=Math.sin(s),c=Math.cos(r),l=Math.sin(r),u=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){const d=o*u,p=o*f,y=h*u,x=h*f;n[0]=c*u,n[4]=-c*f,n[8]=l,n[1]=p+y*l,n[5]=d-x*l,n[9]=-h*c,n[2]=x-d*l,n[6]=y+p*l,n[10]=o*c}else if(e.order==="YXZ"){const d=c*u,p=c*f,y=l*u,x=l*f;n[0]=d+x*h,n[4]=y*h-p,n[8]=o*l,n[1]=o*f,n[5]=o*u,n[9]=-h,n[2]=p*h-y,n[6]=x+d*h,n[10]=o*c}else if(e.order==="ZXY"){const d=c*u,p=c*f,y=l*u,x=l*f;n[0]=d-x*h,n[4]=-o*f,n[8]=y+p*h,n[1]=p+y*h,n[5]=o*u,n[9]=x-d*h,n[2]=-o*l,n[6]=h,n[10]=o*c}else if(e.order==="ZYX"){const d=o*u,p=o*f,y=h*u,x=h*f;n[0]=c*u,n[4]=y*l-p,n[8]=d*l+x,n[1]=c*f,n[5]=x*l+d,n[9]=p*l-y,n[2]=-l,n[6]=h*c,n[10]=o*c}else if(e.order==="YZX"){const d=o*c,p=o*l,y=h*c,x=h*l;n[0]=c*u,n[4]=x-d*f,n[8]=y*f+p,n[1]=f,n[5]=o*u,n[9]=-h*u,n[2]=-l*u,n[6]=p*f+y,n[10]=d-x*f}else if(e.order==="XZY"){const d=o*c,p=o*l,y=h*c,x=h*l;n[0]=c*u,n[4]=-f,n[8]=l*u,n[1]=d*f+x,n[5]=o*u,n[9]=p*f-y,n[2]=y*f-p,n[6]=h*u,n[10]=x*f+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(DB,e,qB)}lookAt(e,n,s){const r=this.elements;return bn.subVectors(e,n),bn.lengthSq()===0&&(bn.z=1),bn.normalize(),Ms.crossVectors(s,bn),Ms.lengthSq()===0&&(Math.abs(s.z)===1?bn.x+=1e-4:bn.z+=1e-4,bn.normalize(),Ms.crossVectors(s,bn)),Ms.normalize(),Xl.crossVectors(bn,Ms),r[0]=Ms.x,r[4]=Xl.x,r[8]=bn.x,r[1]=Ms.y,r[5]=Xl.y,r[9]=bn.y,r[2]=Ms.z,r[6]=Xl.z,r[10]=bn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const s=e.elements,r=n.elements,a=this.elements,o=s[0],h=s[4],c=s[8],l=s[12],u=s[1],f=s[5],d=s[9],p=s[13],y=s[2],x=s[6],g=s[10],m=s[14],v=s[3],w=s[7],b=s[11],S=s[15],E=r[0],A=r[4],M=r[8],_=r[12],T=r[1],C=r[5],P=r[9],R=r[13],k=r[2],I=r[6],L=r[10],F=r[14],B=r[3],V=r[7],J=r[11],j=r[15];return a[0]=o*E+h*T+c*k+l*B,a[4]=o*A+h*C+c*I+l*V,a[8]=o*M+h*P+c*L+l*J,a[12]=o*_+h*R+c*F+l*j,a[1]=u*E+f*T+d*k+p*B,a[5]=u*A+f*C+d*I+p*V,a[9]=u*M+f*P+d*L+p*J,a[13]=u*_+f*R+d*F+p*j,a[2]=y*E+x*T+g*k+m*B,a[6]=y*A+x*C+g*I+m*V,a[10]=y*M+x*P+g*L+m*J,a[14]=y*_+x*R+g*F+m*j,a[3]=v*E+w*T+b*k+S*B,a[7]=v*A+w*C+b*I+S*V,a[11]=v*M+w*P+b*L+S*J,a[15]=v*_+w*R+b*F+S*j,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],s=e[4],r=e[8],a=e[12],o=e[1],h=e[5],c=e[9],l=e[13],u=e[2],f=e[6],d=e[10],p=e[14],y=e[3],x=e[7],g=e[11],m=e[15];return y*(+a*c*f-r*l*f-a*h*d+s*l*d+r*h*p-s*c*p)+x*(+n*c*p-n*l*d+a*o*d-r*o*p+r*l*u-a*c*u)+g*(+n*l*f-n*h*p-a*o*f+s*o*p+a*h*u-s*l*u)+m*(-r*h*u-n*c*f+n*h*d+r*o*f-s*o*d+s*c*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,s){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=s),this}invert(){const e=this.elements,n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],p=e[11],y=e[12],x=e[13],g=e[14],m=e[15],v=f*g*l-x*d*l+x*c*p-h*g*p-f*c*m+h*d*m,w=y*d*l-u*g*l-y*c*p+o*g*p+u*c*m-o*d*m,b=u*x*l-y*f*l+y*h*p-o*x*p-u*h*m+o*f*m,S=y*f*c-u*x*c-y*h*d+o*x*d+u*h*g-o*f*g,E=n*v+s*w+r*b+a*S;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/E;return e[0]=v*A,e[1]=(x*d*a-f*g*a-x*r*p+s*g*p+f*r*m-s*d*m)*A,e[2]=(h*g*a-x*c*a+x*r*l-s*g*l-h*r*m+s*c*m)*A,e[3]=(f*c*a-h*d*a-f*r*l+s*d*l+h*r*p-s*c*p)*A,e[4]=w*A,e[5]=(u*g*a-y*d*a+y*r*p-n*g*p-u*r*m+n*d*m)*A,e[6]=(y*c*a-o*g*a-y*r*l+n*g*l+o*r*m-n*c*m)*A,e[7]=(o*d*a-u*c*a+u*r*l-n*d*l-o*r*p+n*c*p)*A,e[8]=b*A,e[9]=(y*f*a-u*x*a-y*s*p+n*x*p+u*s*m-n*f*m)*A,e[10]=(o*x*a-y*h*a+y*s*l-n*x*l-o*s*m+n*h*m)*A,e[11]=(u*h*a-o*f*a-u*s*l+n*f*l+o*s*p-n*h*p)*A,e[12]=S*A,e[13]=(u*x*r-y*f*r+y*s*d-n*x*d-u*s*g+n*f*g)*A,e[14]=(y*h*r-o*x*r-y*s*c+n*x*c+o*s*g-n*h*g)*A,e[15]=(o*f*r-u*h*r+u*s*c-n*f*c-o*s*d+n*h*d)*A,this}scale(e){const n=this.elements,s=e.x,r=e.y,a=e.z;return n[0]*=s,n[4]*=r,n[8]*=a,n[1]*=s,n[5]*=r,n[9]*=a,n[2]*=s,n[6]*=r,n[10]*=a,n[3]*=s,n[7]*=r,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,s,r))}makeTranslation(e,n,s){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,s,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,n,-s,0,0,s,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,0,s,0,0,1,0,0,-s,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,-s,0,0,s,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const s=Math.cos(n),r=Math.sin(n),a=1-s,o=e.x,h=e.y,c=e.z,l=a*o,u=a*h;return this.set(l*o+s,l*h-r*c,l*c+r*h,0,l*h+r*c,u*h+s,u*c-r*o,0,l*c-r*h,u*c+r*o,a*c*c+s,0,0,0,0,1),this}makeScale(e,n,s){return this.set(e,0,0,0,0,n,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,n,s,r,a,o){return this.set(1,s,a,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,s){const r=this.elements,a=n._x,o=n._y,h=n._z,c=n._w,l=a+a,u=o+o,f=h+h,d=a*l,p=a*u,y=a*f,x=o*u,g=o*f,m=h*f,v=c*l,w=c*u,b=c*f,S=s.x,E=s.y,A=s.z;return r[0]=(1-(x+m))*S,r[1]=(p+b)*S,r[2]=(y-w)*S,r[3]=0,r[4]=(p-b)*E,r[5]=(1-(d+m))*E,r[6]=(g+v)*E,r[7]=0,r[8]=(y+w)*A,r[9]=(g-v)*A,r[10]=(1-(d+x))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,s){const r=this.elements;let a=Sa.set(r[0],r[1],r[2]).length();const o=Sa.set(r[4],r[5],r[6]).length(),h=Sa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],ei.copy(this);const l=1/a,u=1/o,f=1/h;return ei.elements[0]*=l,ei.elements[1]*=l,ei.elements[2]*=l,ei.elements[4]*=u,ei.elements[5]*=u,ei.elements[6]*=u,ei.elements[8]*=f,ei.elements[9]*=f,ei.elements[10]*=f,n.setFromRotationMatrix(ei),s.x=a,s.y=o,s.z=h,this}makePerspective(e,n,s,r,a,o,h=Mi){const c=this.elements,l=2*a/(n-e),u=2*a/(s-r),f=(n+e)/(n-e),d=(s+r)/(s-r);let p,y;if(h===Mi)p=-(o+a)/(o-a),y=-2*o*a/(o-a);else if(h===gh)p=-o/(o-a),y=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return c[0]=l,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=u,c[9]=d,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,s,r,a,o,h=Mi){const c=this.elements,l=1/(n-e),u=1/(s-r),f=1/(o-a),d=(n+e)*l,p=(s+r)*u;let y,x;if(h===Mi)y=(o+a)*f,x=-2*f;else if(h===gh)y=a*f,x=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-d,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=x,c[14]=-y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,s=e.elements;for(let r=0;r<16;r++)if(n[r]!==s[r])return!1;return!0}fromArray(e,n=0){for(let s=0;s<16;s++)this.elements[s]=e[s+n];return this}toArray(e=[],n=0){const s=this.elements;return e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=s[3],e[n+4]=s[4],e[n+5]=s[5],e[n+6]=s[6],e[n+7]=s[7],e[n+8]=s[8],e[n+9]=s[9],e[n+10]=s[10],e[n+11]=s[11],e[n+12]=s[12],e[n+13]=s[13],e[n+14]=s[14],e[n+15]=s[15],e}}const Sa=new $,ei=new ve,DB=new $(0,0,0),qB=new $(1,1,1),Ms=new $,Xl=new $,bn=new $,tb=new ve,eb=new un;class Mr{constructor(e=0,n=0,s=0,r=Mr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=s,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,s,r=this._order){return this._x=e,this._y=n,this._z=s,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,s=!0){const r=e.elements,a=r[0],o=r[4],h=r[8],c=r[1],l=r[5],u=r[9],f=r[2],d=r[6],p=r[10];switch(n){case"XYZ":this._y=Math.asin(zt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-zt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(h,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(zt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-zt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(zt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(h,p));break;case"XZY":this._z=Math.asin(-zt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,s===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,s){return tb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(tb,n,s)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return eb.setFromEuler(this),this.setFromQuaternion(eb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Mr.DEFAULT_ORDER="XYZ";class jd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}class bi{constructor(e,n,s,r,a,o,h,c,l){bi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,s,r,a,o,h,c,l)}set(e,n,s,r,a,o,h,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=h,u[3]=n,u[4]=a,u[5]=c,u[6]=s,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,s=e.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],this}extractBasis(e,n,s){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const s=e.elements,r=n.elements,a=this.elements,o=s[0],h=s[3],c=s[6],l=s[1],u=s[4],f=s[7],d=s[2],p=s[5],y=s[8],x=r[0],g=r[3],m=r[6],v=r[1],w=r[4],b=r[7],S=r[2],E=r[5],A=r[8];return a[0]=o*x+h*v+c*S,a[3]=o*g+h*w+c*E,a[6]=o*m+h*b+c*A,a[1]=l*x+u*v+f*S,a[4]=l*g+u*w+f*E,a[7]=l*m+u*b+f*A,a[2]=d*x+p*v+y*S,a[5]=d*g+p*w+y*E,a[8]=d*m+p*b+y*A,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8];return n*o*u-n*h*l-s*a*u+s*h*c+r*a*l-r*o*c}invert(){const e=this.elements,n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8],f=u*o-h*l,d=h*c-u*a,p=l*a-o*c,y=n*f+s*d+r*p;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return e[0]=f*x,e[1]=(r*l-u*s)*x,e[2]=(h*s-r*o)*x,e[3]=d*x,e[4]=(u*n-r*c)*x,e[5]=(r*a-h*n)*x,e[6]=p*x,e[7]=(s*c-l*n)*x,e[8]=(o*n-s*a)*x,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,s,r,a,o,h){const c=Math.cos(a),l=Math.sin(a);return this.set(s*c,s*l,-s*(c*o+l*h)+o+e,-r*l,r*c,-r*(-l*o+c*h)+h+n,0,0,1),this}scale(e,n){return this.premultiply(Hd.makeScale(e,n)),this}rotate(e){return this.premultiply(Hd.makeRotation(-e)),this}translate(e,n){return this.premultiply(Hd.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,-s,0,s,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,s=e.elements;for(let r=0;r<9;r++)if(n[r]!==s[r])return!1;return!0}fromArray(e,n=0){for(let s=0;s<9;s++)this.elements[s]=e[s+n];return this}toArray(e=[],n=0){const s=this.elements;return e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=s[3],e[n+4]=s[4],e[n+5]=s[5],e[n+6]=s[6],e[n+7]=s[7],e[n+8]=s[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Hd=new bi;let $B=0;const nb=new $,Ta=new un,$i=new ve,Zl=new $,_h=new $,VB=new $,GB=new un,ib=new $(1,0,0),sb=new $(0,1,0),rb=new $(0,0,1),ab={type:"added"},UB={type:"removed"},Ea={type:"childadded",child:null},Xd={type:"childremoved",child:null};class fn extends ws{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$B++}),this.uuid=ti(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fn.DEFAULT_UP.clone();const e=new $,n=new Mr,s=new un,r=new $(1,1,1);function a(){s.setFromEuler(n,!1)}function o(){n.setFromQuaternion(s,void 0,!1)}n._onChange(a),s._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ve},normalMatrix:{value:new bi}}),this.matrix=new ve,this.matrixWorld=new ve,this.matrixAutoUpdate=fn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new jd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Ta.setFromAxisAngle(e,n),this.quaternion.multiply(Ta),this}rotateOnWorldAxis(e,n){return Ta.setFromAxisAngle(e,n),this.quaternion.premultiply(Ta),this}rotateX(e){return this.rotateOnAxis(ib,e)}rotateY(e){return this.rotateOnAxis(sb,e)}rotateZ(e){return this.rotateOnAxis(rb,e)}translateOnAxis(e,n){return nb.copy(e).applyQuaternion(this.quaternion),this.position.add(nb.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(ib,e)}translateY(e){return this.translateOnAxis(sb,e)}translateZ(e){return this.translateOnAxis(rb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4($i.copy(this.matrixWorld).invert())}lookAt(e,n,s){e.isVector3?Zl.copy(e):Zl.set(e,n,s);const r=this.parent;this.updateWorldMatrix(!0,!1),_h.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$i.lookAt(_h,Zl,this.up):$i.lookAt(Zl,_h,this.up),this.quaternion.setFromRotationMatrix($i),r&&($i.extractRotation(r.matrixWorld),Ta.setFromRotationMatrix($i),this.quaternion.premultiply(Ta.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ab),Ea.child=e,this.dispatchEvent(Ea),Ea.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(UB),Xd.child=e,this.dispatchEvent(Xd),Xd.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),$i.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),$i.multiply(e.parent.matrixWorld)),e.applyMatrix4($i),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ab),Ea.child=e,this.dispatchEvent(Ea),Ea.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let s=0,r=this.children.length;s<r;s++){const o=this.children[s].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,s=[]){this[e]===n&&s.push(this);const r=this.children;for(let a=0,o=r.length;a<o;a++)r[a].getObjectsByProperty(e,n,s);return s}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,e,VB),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,GB,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let s=0,r=n.length;s<r;s++)n[s].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let s=0,r=n.length;s<r;s++)n[s].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let s=0,r=n.length;s<r;s++)n[s].updateMatrixWorld(e)}updateWorldMatrix(e,n){const s=this.parent;if(e===!0&&s!==null&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let a=0,o=r.length;a<o;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",s={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(h=>({...h})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(h,c){return h[c.uuid]===void 0&&(h[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const c=h.shapes;if(Array.isArray(c))for(let l=0,u=c.length;l<u;l++){const f=c[l];a(e.shapes,f)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let c=0,l=this.material.length;c<l;c++)h.push(a(e.materials,this.material[c]));r.material=h}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let h=0;h<this.children.length;h++)r.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let h=0;h<this.animations.length;h++){const c=this.animations[h];r.animations.push(a(e.animations,c))}}if(n){const h=o(e.geometries),c=o(e.materials),l=o(e.textures),u=o(e.images),f=o(e.shapes),d=o(e.skeletons),p=o(e.animations),y=o(e.nodes);h.length>0&&(s.geometries=h),c.length>0&&(s.materials=c),l.length>0&&(s.textures=l),u.length>0&&(s.images=u),f.length>0&&(s.shapes=f),d.length>0&&(s.skeletons=d),p.length>0&&(s.animations=p),y.length>0&&(s.nodes=y)}return s.object=r,s;function o(h){const c=[];for(const l in h){const u=h[l];delete u.metadata,c.push(u)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let s=0;s<e.children.length;s++){const r=e.children[s];this.add(r.clone())}return this}}fn.DEFAULT_UP=new $(0,1,0),fn.DEFAULT_MATRIX_AUTO_UPDATE=!0,fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;class ob extends fn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}class WB{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let s=0;s<n.length;s++)e+=n[s];return e/n.length}}let Jl;class hb{static getContext(){return Jl===void 0&&(Jl=new(window.AudioContext||window.webkitAudioContext)),Jl}static setContext(e){Jl=e}}class cb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}const br=new $,Zd=new un,YB=new $,_r=new $,Sr=new $;class jB extends fn{constructor(){super(),this.type="AudioListener",this.context=hb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(br,Zd,YB),_r.set(0,0,-1).applyQuaternion(Zd),Sr.set(0,1,0).applyQuaternion(Zd),n.positionX){const s=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(br.x,s),n.positionY.linearRampToValueAtTime(br.y,s),n.positionZ.linearRampToValueAtTime(br.z,s),n.forwardX.linearRampToValueAtTime(_r.x,s),n.forwardY.linearRampToValueAtTime(_r.y,s),n.forwardZ.linearRampToValueAtTime(_r.z,s),n.upX.linearRampToValueAtTime(Sr.x,s),n.upY.linearRampToValueAtTime(Sr.y,s),n.upZ.linearRampToValueAtTime(Sr.z,s)}else n.setPosition(br.x,br.y,br.z),n.setOrientation(_r.x,_r.y,_r.z,Sr.x,Sr.y,Sr.z)}}const Tr=new $,lb=new un,HB=new $,Er=new $;class XB extends ob{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,s){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=s,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Tr,lb,HB),Er.set(0,0,1).applyQuaternion(lb);const n=this.panner;if(n.positionX){const s=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Tr.x,s),n.positionY.linearRampToValueAtTime(Tr.y,s),n.positionZ.linearRampToValueAtTime(Tr.z,s),n.orientationX.linearRampToValueAtTime(Er.x,s),n.orientationY.linearRampToValueAtTime(Er.y,s),n.orientationZ.linearRampToValueAtTime(Er.z,s)}else n.setPosition(Tr.x,Tr.y,Tr.z),n.setOrientation(Er.x,Er.y,Er.z)}}class Jd extends fn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ve,this.projectionMatrix=new ve,this.projectionMatrixInverse=new ve,this.coordinateSystem=Mi}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class it{constructor(e=0,n=0){it.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,s=this.y,r=e.elements;return this.x=r[0]*n+r[3]*s+r[6],this.y=r[1]*n+r[4]*s+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=zt(this.x,e.x,n.x),this.y=zt(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=zt(this.x,e,n),this.y=zt(this.y,e,n),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(zt(s,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const s=this.dot(e)/n;return Math.acos(zt(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,s=this.y-e.y;return n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const s=Math.cos(n),r=Math.sin(n),a=this.x-e.x,o=this.y-e.y;return this.x=a*s-o*r+e.x,this.y=a*r+o*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}const bs=new $,ub=new it,fb=new it;class _i extends Jd{constructor(e=50,n=1,s=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Hl*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(gr*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Hl*2*Math.atan(Math.tan(gr*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,s){bs.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(bs.x,bs.y).multiplyScalar(-e/bs.z),bs.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(bs.x,bs.y).multiplyScalar(-e/bs.z)}getViewSize(e,n){return this.getViewBounds(e,ub,fb),n.subVectors(fb,ub)}setViewOffset(e,n,s,r,a,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=r,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(gr*.5*this.fov)/this.zoom,s=2*n,r=this.aspect*s,a=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;a+=o.offsetX*r/c,n-=o.offsetY*s/l,r*=o.width/c,s*=o.height/l}const h=this.filmOffset;h!==0&&(a+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,n,n-s,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}class ZB extends _i{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}const za=-90,Ca=1;class JB extends fn{constructor(e,n,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new _i(za,Ca,e,n);r.layers=this.layers,this.add(r);const a=new _i(za,Ca,e,n);a.layers=this.layers,this.add(a);const o=new _i(za,Ca,e,n);o.layers=this.layers,this.add(o);const h=new _i(za,Ca,e,n);h.layers=this.layers,this.add(h);const c=new _i(za,Ca,e,n);c.layers=this.layers,this.add(c);const l=new _i(za,Ca,e,n);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[s,r,a,o,h,c]=n;for(const l of n)this.remove(l);if(e===Mi)s.up.set(0,1,0),s.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===gh)s.up.set(0,-1,0),s.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const l of n)this.add(l),l.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,h,c,l,u]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const x=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0,r),e.render(n,a),e.setRenderTarget(s,1,r),e.render(n,o),e.setRenderTarget(s,2,r),e.render(n,h),e.setRenderTarget(s,3,r),e.render(n,c),e.setRenderTarget(s,4,r),e.render(n,l),s.texture.generateMipmaps=x,e.setRenderTarget(s,5,r),e.render(n,u),e.setRenderTarget(f,d,p),e.xr.enabled=y,s.texture.needsPMREMUpdate=!0}}class QB extends Jd{constructor(e=-1,n=1,s=1,r=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=s,this.bottom=r,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,s,r,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=r,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=s-e,o=s+e,h=r+n,c=r-n;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=l*this.view.offsetX,o=a+l*this.view.width,h-=u*this.view.offsetY,c=h-u*this.view.height}this.projectionMatrix.makeOrthographic(a,o,h,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const db=new ve,pb=new ve,zr=new ve;class KB{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _i,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _i,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,zr.copy(e.projectionMatrix);const r=n.eyeSep/2,a=r*n.near/n.focus,o=n.near*Math.tan(gr*n.fov*.5)/n.zoom;let h,c;pb.elements[12]=-r,db.elements[12]=r,h=-o*n.aspect+a,c=o*n.aspect+a,zr.elements[0]=2*n.near/(c-h),zr.elements[8]=(c+h)/(c-h),this.cameraL.projectionMatrix.copy(zr),h=-o*n.aspect-a,c=o*n.aspect-a,zr.elements[0]=2*n.near/(c-h),zr.elements[8]=(c+h)/(c-h),this.cameraR.projectionMatrix.copy(zr)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(pb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(db)}}const Vi=tD();function tD(){const i=new ArrayBuffer(4),e=new Float32Array(i),n=new Uint32Array(i),s=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const l=c-127;l<-27?(s[c]=0,s[c|256]=32768,r[c]=24,r[c|256]=24):l<-14?(s[c]=1024>>-l-14,s[c|256]=1024>>-l-14|32768,r[c]=-l-1,r[c|256]=-l-1):l<=15?(s[c]=l+15<<10,s[c|256]=l+15<<10|32768,r[c]=13,r[c|256]=13):l<128?(s[c]=31744,s[c|256]=64512,r[c]=24,r[c|256]=24):(s[c]=31744,s[c|256]=64512,r[c]=13,r[c|256]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),h=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,u=0;for(;(l&8388608)===0;)l<<=1,u-=8388608;l&=-8388609,u+=947912704,a[c]=l|u}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(h[c]=1024);return{floatView:e,uint32View:n,baseTable:s,shiftTable:r,mantissaTable:a,exponentTable:o,offsetTable:h}}function dn(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=zt(i,-65504,65504),Vi.floatView[0]=i;const e=Vi.uint32View[0],n=e>>23&511;return Vi.baseTable[n]+((e&8388607)>>Vi.shiftTable[n])}function Sh(i){const e=i>>10;return Vi.uint32View[0]=Vi.mantissaTable[Vi.offsetTable[e]+(i&1023)]+Vi.exponentTable[e],Vi.floatView[0]}class eD{static toHalfFloat(e){return dn(e)}static fromHalfFloat(e){return Sh(e)}}const we=new $,Ql=new it;let nD=0;class tn{constructor(e,n,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:nD++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=s,this.usage=xh,this.updateRanges=[],this.gpuType=Id,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,s){e*=this.itemSize,s*=n.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=n.array[s+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,s=this.count;n<s;n++)Ql.fromBufferAttribute(this,n),Ql.applyMatrix3(e),this.setXY(n,Ql.x,Ql.y);else if(this.itemSize===3)for(let n=0,s=this.count;n<s;n++)we.fromBufferAttribute(this,n),we.applyMatrix3(e),this.setXYZ(n,we.x,we.y,we.z);return this}applyMatrix4(e){for(let n=0,s=this.count;n<s;n++)we.fromBufferAttribute(this,n),we.applyMatrix4(e),this.setXYZ(n,we.x,we.y,we.z);return this}applyNormalMatrix(e){for(let n=0,s=this.count;n<s;n++)we.fromBufferAttribute(this,n),we.applyNormalMatrix(e),this.setXYZ(n,we.x,we.y,we.z);return this}transformDirection(e){for(let n=0,s=this.count;n<s;n++)we.fromBufferAttribute(this,n),we.transformDirection(e),this.setXYZ(n,we.x,we.y,we.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let s=this.array[e*this.itemSize+n];return this.normalized&&(s=Ke(s,this.array)),s}setComponent(e,n,s){return this.normalized&&(s=At(s,this.array)),this.array[e*this.itemSize+n]=s,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ke(n,this.array)),n}setX(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ke(n,this.array)),n}setY(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ke(n,this.array)),n}setZ(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ke(n,this.array)),n}setW(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,s){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),s=At(s,this.array)),this.array[e+0]=n,this.array[e+1]=s,this}setXYZ(e,n,s,r){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),s=At(s,this.array),r=At(r,this.array)),this.array[e+0]=n,this.array[e+1]=s,this.array[e+2]=r,this}setXYZW(e,n,s,r,a){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),s=At(s,this.array),r=At(r,this.array),a=At(a,this.array)),this.array[e+0]=n,this.array[e+1]=s,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==xh&&(e.usage=this.usage),e}}class iD extends tn{constructor(e,n,s){super(new Int8Array(e),n,s)}}class sD extends tn{constructor(e,n,s){super(new Uint8Array(e),n,s)}}class rD extends tn{constructor(e,n,s){super(new Uint8ClampedArray(e),n,s)}}class aD extends tn{constructor(e,n,s){super(new Int16Array(e),n,s)}}class yb extends tn{constructor(e,n,s){super(new Uint16Array(e),n,s)}}class oD extends tn{constructor(e,n,s){super(new Int32Array(e),n,s)}}class xb extends tn{constructor(e,n,s){super(new Uint32Array(e),n,s)}}class hD extends tn{constructor(e,n,s){super(new Uint16Array(e),n,s),this.isFloat16BufferAttribute=!0}getX(e){let n=Sh(this.array[e*this.itemSize]);return this.normalized&&(n=Ke(n,this.array)),n}setX(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize]=dn(n),this}getY(e){let n=Sh(this.array[e*this.itemSize+1]);return this.normalized&&(n=Ke(n,this.array)),n}setY(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+1]=dn(n),this}getZ(e){let n=Sh(this.array[e*this.itemSize+2]);return this.normalized&&(n=Ke(n,this.array)),n}setZ(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+2]=dn(n),this}getW(e){let n=Sh(this.array[e*this.itemSize+3]);return this.normalized&&(n=Ke(n,this.array)),n}setW(e,n){return this.normalized&&(n=At(n,this.array)),this.array[e*this.itemSize+3]=dn(n),this}setXY(e,n,s){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),s=At(s,this.array)),this.array[e+0]=dn(n),this.array[e+1]=dn(s),this}setXYZ(e,n,s,r){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),s=At(s,this.array),r=At(r,this.array)),this.array[e+0]=dn(n),this.array[e+1]=dn(s),this.array[e+2]=dn(r),this}setXYZW(e,n,s,r,a){return e*=this.itemSize,this.normalized&&(n=At(n,this.array),s=At(s,this.array),r=At(r,this.array),a=At(a,this.array)),this.array[e+0]=dn(n),this.array[e+1]=dn(s),this.array[e+2]=dn(r),this.array[e+3]=dn(a),this}}class St extends tn{constructor(e,n,s){super(new Float32Array(e),n,s)}}class Aa{constructor(e=new $(1/0,1/0,1/0),n=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n+=3)this.expandByPoint(ni.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,s=e.count;n<s;n++)this.expandByPoint(ni.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const s=ni.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const s=e.geometry;if(s!==void 0){const a=s.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,h=a.count;o<h;o++)e.isMesh===!0?e.getVertexPosition(o,ni):ni.fromBufferAttribute(a,o),ni.applyMatrix4(e.matrixWorld),this.expandByPoint(ni);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Kl.copy(e.boundingBox)):(s.boundingBox===null&&s.computeBoundingBox(),Kl.copy(s.boundingBox)),Kl.applyMatrix4(e.matrixWorld),this.union(Kl)}const r=e.children;for(let a=0,o=r.length;a<o;a++)this.expandByObject(r[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ni),ni.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,s;return e.normal.x>0?(n=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),n<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Th),tu.subVectors(this.max,Th),Pa.subVectors(e.a,Th),Ia.subVectors(e.b,Th),Ra.subVectors(e.c,Th),_s.subVectors(Ia,Pa),Ss.subVectors(Ra,Ia),Cr.subVectors(Pa,Ra);let n=[0,-_s.z,_s.y,0,-Ss.z,Ss.y,0,-Cr.z,Cr.y,_s.z,0,-_s.x,Ss.z,0,-Ss.x,Cr.z,0,-Cr.x,-_s.y,_s.x,0,-Ss.y,Ss.x,0,-Cr.y,Cr.x,0];return!Qd(n,Pa,Ia,Ra,tu)||(n=[1,0,0,0,1,0,0,0,1],!Qd(n,Pa,Ia,Ra,tu))?!1:(eu.crossVectors(_s,Ss),n=[eu.x,eu.y,eu.z],Qd(n,Pa,Ia,Ra,tu))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ni).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ni).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Gi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Gi=[new $,new $,new $,new $,new $,new $,new $,new $],ni=new $,Kl=new Aa,Pa=new $,Ia=new $,Ra=new $,_s=new $,Ss=new $,Cr=new $,Th=new $,tu=new $,eu=new $,Ar=new $;function Qd(i,e,n,s,r){for(let a=0,o=i.length-3;a<=o;a+=3){Ar.fromArray(i,a);const h=r.x*Math.abs(Ar.x)+r.y*Math.abs(Ar.y)+r.z*Math.abs(Ar.z),c=e.dot(Ar),l=n.dot(Ar),u=s.dot(Ar);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>h)return!1}return!0}const cD=new Aa,Eh=new $,Kd=new $;class t1{constructor(e=new $,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const s=this.center;n!==void 0?s.copy(n):cD.setFromPoints(e).getCenter(s);let r=0;for(let a=0,o=e.length;a<o;a++)r=Math.max(r,s.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const s=this.center.distanceToSquared(e);return n.copy(e),s>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Eh.subVectors(e,this.center);const n=Eh.lengthSq();if(n>this.radius*this.radius){const s=Math.sqrt(n),r=(s-this.radius)*.5;this.center.addScaledVector(Eh,r/s),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Kd.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Eh.copy(e.center).add(Kd)),this.expandByPoint(Eh.copy(e.center).sub(Kd))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}function lD(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function e1(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function uD(){const i=e1("canvas");return i.style.display="block",i}const gb={};function mb(i){i in gb||(gb[i]=!0,console.warn(i))}let fD=0;const Dn=new ve,n1=new fn,Oa=new $,_n=new Aa,zh=new Aa,Oe=new $;class Me extends ws{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fD++}),this.uuid=ti(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(lD(e)?xb:yb)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,s=0){this.groups.push({start:e,count:n,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const s=this.attributes.normal;if(s!==void 0){const a=new bi().getNormalMatrix(e);s.applyNormalMatrix(a),s.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dn.makeRotationFromQuaternion(e),this.applyMatrix4(Dn),this}rotateX(e){return Dn.makeRotationX(e),this.applyMatrix4(Dn),this}rotateY(e){return Dn.makeRotationY(e),this.applyMatrix4(Dn),this}rotateZ(e){return Dn.makeRotationZ(e),this.applyMatrix4(Dn),this}translate(e,n,s){return Dn.makeTranslation(e,n,s),this.applyMatrix4(Dn),this}scale(e,n,s){return Dn.makeScale(e,n,s),this.applyMatrix4(Dn),this}lookAt(e){return n1.lookAt(e),n1.updateMatrix(),this.applyMatrix4(n1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oa).negate(),this.translate(Oa.x,Oa.y,Oa.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const s=[];for(let r=0,a=e.length;r<a;r++){const o=e[r];s.push(o.x,o.y,o.z||0)}this.setAttribute("position",new St(s,3))}else{const s=Math.min(e.length,n.count);for(let r=0;r<s;r++){const a=e[r];n.setXYZ(r,a.x,a.y,a.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Aa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let s=0,r=n.length;s<r;s++){const a=n[s];_n.setFromBufferAttribute(a),this.morphTargetsRelative?(Oe.addVectors(this.boundingBox.min,_n.min),this.boundingBox.expandByPoint(Oe),Oe.addVectors(this.boundingBox.max,_n.max),this.boundingBox.expandByPoint(Oe)):(this.boundingBox.expandByPoint(_n.min),this.boundingBox.expandByPoint(_n.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new t1);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new $,1/0);return}if(e){const s=this.boundingSphere.center;if(_n.setFromBufferAttribute(e),n)for(let a=0,o=n.length;a<o;a++){const h=n[a];zh.setFromBufferAttribute(h),this.morphTargetsRelative?(Oe.addVectors(_n.min,zh.min),_n.expandByPoint(Oe),Oe.addVectors(_n.max,zh.max),_n.expandByPoint(Oe)):(_n.expandByPoint(zh.min),_n.expandByPoint(zh.max))}_n.getCenter(s);let r=0;for(let a=0,o=e.count;a<o;a++)Oe.fromBufferAttribute(e,a),r=Math.max(r,s.distanceToSquared(Oe));if(n)for(let a=0,o=n.length;a<o;a++){const h=n[a],c=this.morphTargetsRelative;for(let l=0,u=h.count;l<u;l++)Oe.fromBufferAttribute(h,l),c&&(Oa.fromBufferAttribute(e,l),Oe.add(Oa)),r=Math.max(r,s.distanceToSquared(Oe))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const s=n.position,r=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new tn(new Float32Array(4*s.count),4));const o=this.getAttribute("tangent"),h=[],c=[];for(let M=0;M<s.count;M++)h[M]=new $,c[M]=new $;const l=new $,u=new $,f=new $,d=new it,p=new it,y=new it,x=new $,g=new $;function m(M,_,T){l.fromBufferAttribute(s,M),u.fromBufferAttribute(s,_),f.fromBufferAttribute(s,T),d.fromBufferAttribute(a,M),p.fromBufferAttribute(a,_),y.fromBufferAttribute(a,T),u.sub(l),f.sub(l),p.sub(d),y.sub(d);const C=1/(p.x*y.y-y.x*p.y);isFinite(C)&&(x.copy(u).multiplyScalar(y.y).addScaledVector(f,-p.y).multiplyScalar(C),g.copy(f).multiplyScalar(p.x).addScaledVector(u,-y.x).multiplyScalar(C),h[M].add(x),h[_].add(x),h[T].add(x),c[M].add(g),c[_].add(g),c[T].add(g))}let v=this.groups;v.length===0&&(v=[{start:0,count:e.count}]);for(let M=0,_=v.length;M<_;++M){const T=v[M],C=T.start,P=T.count;for(let R=C,k=C+P;R<k;R+=3)m(e.getX(R+0),e.getX(R+1),e.getX(R+2))}const w=new $,b=new $,S=new $,E=new $;function A(M){S.fromBufferAttribute(r,M),E.copy(S);const _=h[M];w.copy(_),w.sub(S.multiplyScalar(S.dot(_))).normalize(),b.crossVectors(E,_);const C=b.dot(c[M])<0?-1:1;o.setXYZW(M,w.x,w.y,w.z,C)}for(let M=0,_=v.length;M<_;++M){const T=v[M],C=T.start,P=T.count;for(let R=C,k=C+P;R<k;R+=3)A(e.getX(R+0)),A(e.getX(R+1)),A(e.getX(R+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new tn(new Float32Array(n.count*3),3),this.setAttribute("normal",s);else for(let d=0,p=s.count;d<p;d++)s.setXYZ(d,0,0,0);const r=new $,a=new $,o=new $,h=new $,c=new $,l=new $,u=new $,f=new $;if(e)for(let d=0,p=e.count;d<p;d+=3){const y=e.getX(d+0),x=e.getX(d+1),g=e.getX(d+2);r.fromBufferAttribute(n,y),a.fromBufferAttribute(n,x),o.fromBufferAttribute(n,g),u.subVectors(o,a),f.subVectors(r,a),u.cross(f),h.fromBufferAttribute(s,y),c.fromBufferAttribute(s,x),l.fromBufferAttribute(s,g),h.add(u),c.add(u),l.add(u),s.setXYZ(y,h.x,h.y,h.z),s.setXYZ(x,c.x,c.y,c.z),s.setXYZ(g,l.x,l.y,l.z)}else for(let d=0,p=n.count;d<p;d+=3)r.fromBufferAttribute(n,d+0),a.fromBufferAttribute(n,d+1),o.fromBufferAttribute(n,d+2),u.subVectors(o,a),f.subVectors(r,a),u.cross(f),s.setXYZ(d+0,u.x,u.y,u.z),s.setXYZ(d+1,u.x,u.y,u.z),s.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,s=e.count;n<s;n++)Oe.fromBufferAttribute(e,n),Oe.normalize(),e.setXYZ(n,Oe.x,Oe.y,Oe.z)}toNonIndexed(){function e(h,c){const l=h.array,u=h.itemSize,f=h.normalized,d=new l.constructor(c.length*u);let p=0,y=0;for(let x=0,g=c.length;x<g;x++){h.isInterleavedBufferAttribute?p=c[x]*h.data.stride+h.offset:p=c[x]*u;for(let m=0;m<u;m++)d[y++]=l[p++]}return new tn(d,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Me,s=this.index.array,r=this.attributes;for(const h in r){const c=r[h],l=e(c,s);n.setAttribute(h,l)}const a=this.morphAttributes;for(const h in a){const c=[],l=a[h];for(let u=0,f=l.length;u<f;u++){const d=l[u],p=e(d,s);c.push(p)}n.morphAttributes[h]=c}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let h=0,c=o.length;h<c;h++){const l=o[h];n.addGroup(l.start,l.count,l.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const s=this.attributes;for(const c in s){const l=s[c];e.data.attributes[c]=l.toJSON(e.data)}const r={};let a=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,d=l.length;f<d;f++){const p=l[f];u.push(p.toJSON(e.data))}u.length>0&&(r[c]=u,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere=h.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const s=e.index;s!==null&&this.setIndex(s.clone());const r=e.attributes;for(const l in r){const u=r[l];this.setAttribute(l,u.clone(n))}const a=e.morphAttributes;for(const l in a){const u=[],f=a[l];for(let d=0,p=f.length;d<p;d++)u.push(f[d].clone(n));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}class dD{constructor(e,n,s,r,a,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=s,this.elementSize=r,this.count=a,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class pD extends tn{constructor(e,n,s,r=1){super(e,n,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}class yD extends Me{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class vb{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=xh,this.updateRanges=[],this.version=0,this.uuid=ti()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,s){e*=this.stride,s*=n.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=n.array[s+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ti()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(n,this.stride);return s.setUsage(this.usage),s}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ti()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}class xD extends vb{constructor(e,n,s=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}const en=new $;class i1{constructor(e,n,s,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=s,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,s=this.data.count;n<s;n++)en.fromBufferAttribute(this,n),en.applyMatrix4(e),this.setXYZ(n,en.x,en.y,en.z);return this}applyNormalMatrix(e){for(let n=0,s=this.count;n<s;n++)en.fromBufferAttribute(this,n),en.applyNormalMatrix(e),this.setXYZ(n,en.x,en.y,en.z);return this}transformDirection(e){for(let n=0,s=this.count;n<s;n++)en.fromBufferAttribute(this,n),en.transformDirection(e),this.setXYZ(n,en.x,en.y,en.z);return this}getComponent(e,n){let s=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(s=Ke(s,this.array)),s}setComponent(e,n,s){return this.normalized&&(s=At(s,this.array)),this.data.array[e*this.data.stride+this.offset+n]=s,this}setX(e,n){return this.normalized&&(n=At(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=At(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=At(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=At(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Ke(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Ke(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Ke(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Ke(n,this.array)),n}setXY(e,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=At(n,this.array),s=At(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this}setXYZ(e,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=At(n,this.array),s=At(s,this.array),r=At(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this.data.array[e+2]=r,this}setXYZW(e,n,s,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=At(n,this.array),s=At(s,this.array),r=At(r,this.array),a=At(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const r=s*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return new tn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new i1(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const r=s*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Ui=new $,s1=new $,nu=new $,Ts=new $,r1=new $,iu=new $,a1=new $;class wb{constructor(e=new $,n=new $(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ui)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const s=n.dot(this.direction);return s<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ui.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ui.copy(this.origin).addScaledVector(this.direction,n),Ui.distanceToSquared(e))}distanceSqToSegment(e,n,s,r){s1.copy(e).add(n).multiplyScalar(.5),nu.copy(n).sub(e).normalize(),Ts.copy(this.origin).sub(s1);const a=e.distanceTo(n)*.5,o=-this.direction.dot(nu),h=Ts.dot(this.direction),c=-Ts.dot(nu),l=Ts.lengthSq(),u=Math.abs(1-o*o);let f,d,p,y;if(u>0)if(f=o*c-h,d=o*h-c,y=a*u,f>=0)if(d>=-y)if(d<=y){const x=1/u;f*=x,d*=x,p=f*(f+o*d+2*h)+d*(o*f+d+2*c)+l}else d=a,f=Math.max(0,-(o*d+h)),p=-f*f+d*(d+2*c)+l;else d=-a,f=Math.max(0,-(o*d+h)),p=-f*f+d*(d+2*c)+l;else d<=-y?(f=Math.max(0,-(-o*a+h)),d=f>0?-a:Math.min(Math.max(-a,-c),a),p=-f*f+d*(d+2*c)+l):d<=y?(f=0,d=Math.min(Math.max(-a,-c),a),p=d*(d+2*c)+l):(f=Math.max(0,-(o*a+h)),d=f>0?a:Math.min(Math.max(-a,-c),a),p=-f*f+d*(d+2*c)+l);else d=o>0?-a:a,f=Math.max(0,-(o*d+h)),p=-f*f+d*(d+2*c)+l;return s&&s.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(s1).addScaledVector(nu,d),p}intersectSphere(e,n){Ui.subVectors(e.center,this.origin);const s=Ui.dot(this.direction),r=Ui.dot(Ui)-s*s,a=e.radius*e.radius;if(r>a)return null;const o=Math.sqrt(a-r),h=s-o,c=s+o;return c<0?null:h<0?this.at(c,n):this.at(h,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/n;return s>=0?s:null}intersectPlane(e,n){const s=this.distanceToPlane(e);return s===null?null:this.at(s,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let s,r,a,o,h,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,d=this.origin;return l>=0?(s=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(s=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(a=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(a=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),s>o||a>r||((a>s||isNaN(s))&&(s=a),(o<r||isNaN(r))&&(r=o),f>=0?(h=(e.min.z-d.z)*f,c=(e.max.z-d.z)*f):(h=(e.max.z-d.z)*f,c=(e.min.z-d.z)*f),s>c||h>r)||((h>s||s!==s)&&(s=h),(c<r||r!==r)&&(r=c),r<0)?null:this.at(s>=0?s:r,n)}intersectsBox(e){return this.intersectBox(e,Ui)!==null}intersectTriangle(e,n,s,r,a){r1.subVectors(n,e),iu.subVectors(s,e),a1.crossVectors(r1,iu);let o=this.direction.dot(a1),h;if(o>0){if(r)return null;h=1}else if(o<0)h=-1,o=-o;else return null;Ts.subVectors(this.origin,e);const c=h*this.direction.dot(iu.crossVectors(Ts,iu));if(c<0)return null;const l=h*this.direction.dot(r1.cross(Ts));if(l<0||c+l>o)return null;const u=-h*Ts.dot(a1);return u<0?null:this.at(u/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}const Mb=new ve;class gD{constructor(e,n,s=0,r=1/0){this.ray=new wb(e,n),this.near=s,this.far=r,this.camera=null,this.layers=new jd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return Mb.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Mb),this}intersectObject(e,n=!0,s=[]){return o1(e,this,s,n),s.sort(bb),s}intersectObjects(e,n=!0,s=[]){for(let r=0,a=e.length;r<a;r++)o1(e[r],this,s,n);return s.sort(bb),s}}function bb(i,e){return i.distance-e.distance}function o1(i,e,n,s){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,n)===!1&&(r=!1),r===!0&&s===!0){const a=i.children;for(let o=0,h=a.length;o<h;o++)o1(a[o],e,n,!0)}}const _b=new bi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Sb=new bi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function mD(){const i={enabled:!0,workingColorSpace:Fd,spaces:{},convert:function(r,a,o){return this.enabled===!1||a===o||!a||!o||(this.spaces[a].transfer===jl&&(r.r=Wi(r.r),r.g=Wi(r.g),r.b=Wi(r.b)),this.spaces[a].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===jl&&(r.r=ka(r.r),r.g=ka(r.g),r.b=ka(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ld?Nd:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,o){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return mb("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return mb("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],s=[.3127,.329];return i.define({[Fd]:{primaries:e,whitePoint:s,transfer:Nd,toXYZ:_b,fromXYZ:Sb,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Nn},outputColorSpaceConfig:{drawingBufferColorSpace:Nn}},[Nn]:{primaries:e,whitePoint:s,transfer:jl,toXYZ:_b,fromXYZ:Sb,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Nn}}}),i}const qn=mD();function Wi(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function ka(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let La;class Tb{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let s;if(e instanceof HTMLCanvasElement)s=e;else{La===void 0&&(La=e1("canvas")),La.width=e.width,La.height=e.height;const r=La.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),s=La}return s.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=e1("canvas");n.width=e.width,n.height=e.height;const s=n.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const r=s.getImageData(0,0,e.width,e.height),a=r.data;for(let o=0;o<a.length;o++)a[o]=Wi(a[o]/255)*255;return s.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let s=0;s<n.length;s++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[s]=Math.floor(Wi(n[s]/255)*255):n[s]=Wi(n[s]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let vD=0;class su{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:vD++}),this.uuid=ti(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const s={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let o=0,h=r.length;o<h;o++)r[o].isDataTexture?a.push(h1(r[o].image)):a.push(h1(r[o]))}else a=h1(r);s.url=a}return n||(e.images[this.uuid]=s),s}}function h1(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Tb.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let wD=0;const c1=new $;class ke extends ws{constructor(e=ke.DEFAULT_IMAGE,n=ke.DEFAULT_MAPPING,s=vs,r=vs,a=_a,o=jw,h=Rd,c=Ad,l=ke.DEFAULT_ANISOTROPY,u=Ld){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:wD++}),this.uuid=ti(),this.name="",this.source=new su(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=s,this.wrapT=r,this.magFilter=a,this.minFilter=o,this.anisotropy=l,this.format=h,this.internalFormat=null,this.type=c,this.offset=new it(0,0),this.repeat=new it(1,1),this.center=new it(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(c1).x}get height(){return this.source.getSize(c1).y}get depth(){return this.source.getSize(c1).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const s=e[n];if(s===void 0){console.warn(`THREE.Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${n}' does not exist.`);continue}r&&s&&r.isVector2&&s.isVector2||r&&s&&r.isVector3&&s.isVector3||r&&s&&r.isMatrix3&&s.isMatrix3?r.copy(s):this[n]=s}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const s={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),n||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Td)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zd:e.x=e.x-Math.floor(e.x);break;case vs:e.x=e.x<0?0:1;break;case Cd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zd:e.y=e.y-Math.floor(e.y);break;case vs:e.y=e.y<0?0:1;break;case Cd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ke.DEFAULT_IMAGE=null,ke.DEFAULT_MAPPING=Td,ke.DEFAULT_ANISOTROPY=1;class Es{constructor(e=0,n=0,s=0,r=1){Es.prototype.isVector4=!0,this.x=e,this.y=n,this.z=s,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,s,r){return this.x=e,this.y=n,this.z=s,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,s=this.y,r=this.z,a=this.w,o=e.elements;return this.x=o[0]*n+o[4]*s+o[8]*r+o[12]*a,this.y=o[1]*n+o[5]*s+o[9]*r+o[13]*a,this.z=o[2]*n+o[6]*s+o[10]*r+o[14]*a,this.w=o[3]*n+o[7]*s+o[11]*r+o[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,s,r,a;const c=e.elements,l=c[0],u=c[4],f=c[8],d=c[1],p=c[5],y=c[9],x=c[2],g=c[6],m=c[10];if(Math.abs(u-d)<.01&&Math.abs(f-x)<.01&&Math.abs(y-g)<.01){if(Math.abs(u+d)<.1&&Math.abs(f+x)<.1&&Math.abs(y+g)<.1&&Math.abs(l+p+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(l+1)/2,b=(p+1)/2,S=(m+1)/2,E=(u+d)/4,A=(f+x)/4,M=(y+g)/4;return w>b&&w>S?w<.01?(s=0,r=.707106781,a=.707106781):(s=Math.sqrt(w),r=E/s,a=A/s):b>S?b<.01?(s=.707106781,r=0,a=.707106781):(r=Math.sqrt(b),s=E/r,a=M/r):S<.01?(s=.707106781,r=.707106781,a=0):(a=Math.sqrt(S),s=A/a,r=M/a),this.set(s,r,a,n),this}let v=Math.sqrt((g-y)*(g-y)+(f-x)*(f-x)+(d-u)*(d-u));return Math.abs(v)<.001&&(v=1),this.x=(g-y)/v,this.y=(f-x)/v,this.z=(d-u)/v,this.w=Math.acos((l+p+m-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=zt(this.x,e.x,n.x),this.y=zt(this.y,e.y,n.y),this.z=zt(this.z,e.z,n.z),this.w=zt(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=zt(this.x,e,n),this.y=zt(this.y,e,n),this.z=zt(this.z,e,n),this.w=zt(this.w,e,n),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(zt(s,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this.z=e.z+(n.z-e.z)*s,this.w=e.w+(n.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Eb extends ws{constructor(e=1,n=1,s={}){super(),s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:_a,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},s),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=s.depth,this.scissor=new Es(0,0,e,n),this.scissorTest=!1,this.viewport=new Es(0,0,e,n);const r={width:e,height:n,depth:s.depth},a=new ke(r);this.textures=[];const o=s.count;for(let h=0;h<o;h++)this.textures[h]=a.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(s),this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=s.depthTexture,this.samples=s.samples,this.multiview=s.multiview}_setTextureOptions(e={}){const n={minFilter:_a,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let s=0;s<this.textures.length;s++)this.textures[s].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,s=1){if(this.width!==e||this.height!==n||this.depth!==s){this.width=e,this.height=n,this.depth=s;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=s,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,s=e.textures.length;n<s;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const r=Object.assign({},e.textures[n].image);this.textures[n].source=new su(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zb extends ke{constructor(e=null,n=1,s=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:s,depth:r},this.magFilter=Kn,this.minFilter=Kn,this.wrapR=vs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class MD extends Eb{constructor(e=1,n=1,s=1,r={}){super(e,n,r),this.isRenderTarget3D=!0,this.depth=s,this.texture=new zb(null,e,n,s),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class l1{constructor(e){this.value=e}clone(){return new l1(this.value.clone===void 0?this.value:this.value.clone())}}let bD=0;class _D extends ws{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:bD++}),this.name="",this.usage=xh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let s=0,r=n.length;s<r;s++){const a=Array.isArray(n[s])?n[s]:[n[s]];for(let o=0;o<a.length;o++)this.uniforms.push(a[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class SD extends ws{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}class ii{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const s=this.getUtoTmapping(e);return this.getPoint(s,n)}getPoints(e=5){const n=[];for(let s=0;s<=e;s++)n.push(this.getPoint(s/e));return n}getSpacedPoints(e=5){const n=[];for(let s=0;s<=e;s++)n.push(this.getPointAt(s/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let s,r=this.getPoint(0),a=0;n.push(0);for(let o=1;o<=e;o++)s=this.getPoint(o/e),a+=s.distanceTo(r),n.push(a),r=s;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const s=this.getLengths();let r=0;const a=s.length;let o;n?o=n:o=e*s[a-1];let h=0,c=a-1,l;for(;h<=c;)if(r=Math.floor(h+(c-h)/2),l=s[r]-o,l<0)h=r+1;else if(l>0)c=r-1;else{c=r;break}if(r=c,s[r]===o)return r/(a-1);const u=s[r],d=s[r+1]-u,p=(o-u)/d;return(r+p)/(a-1)}getTangent(e,n){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const o=this.getPoint(r),h=this.getPoint(a),c=n||(o.isVector2?new it:new $);return c.copy(h).sub(o).normalize(),c}getTangentAt(e,n){const s=this.getUtoTmapping(e);return this.getTangent(s,n)}computeFrenetFrames(e,n=!1){const s=new $,r=[],a=[],o=[],h=new $,c=new ve;for(let p=0;p<=e;p++){const y=p/e;r[p]=this.getTangentAt(y,new $)}a[0]=new $,o[0]=new $;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=l&&(l=u,s.set(1,0,0)),f<=l&&(l=f,s.set(0,1,0)),d<=l&&s.set(0,0,1),h.crossVectors(r[0],s).normalize(),a[0].crossVectors(r[0],h),o[0].crossVectors(r[0],a[0]);for(let p=1;p<=e;p++){if(a[p]=a[p-1].clone(),o[p]=o[p-1].clone(),h.crossVectors(r[p-1],r[p]),h.length()>Number.EPSILON){h.normalize();const y=Math.acos(zt(r[p-1].dot(r[p]),-1,1));a[p].applyMatrix4(c.makeRotationAxis(h,y))}o[p].crossVectors(r[p],a[p])}if(n===!0){let p=Math.acos(zt(a[0].dot(a[e]),-1,1));p/=e,r[0].dot(h.crossVectors(a[0],a[e]))>0&&(p=-p);for(let y=1;y<=e;y++)a[y].applyMatrix4(c.makeRotationAxis(r[y],p*y)),o[y].crossVectors(r[y],a[y])}return{tangents:r,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ru extends ii{constructor(e=0,n=0,s=1,r=1,a=0,o=Math.PI*2,h=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=s,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=h,this.aRotation=c}getPoint(e,n=new it){const s=n,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(o?a=0:a=r),this.aClockwise===!0&&!o&&(a===r?a=-r:a=a-r);const h=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(h),l=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=c-this.aX,p=l-this.aY;c=d*u-p*f+this.aX,l=d*f+p*u+this.aY}return s.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Cb extends ru{constructor(e,n,s,r,a,o){super(e,n,s,s,r,a,o),this.isArcCurve=!0,this.type="ArcCurve"}}function u1(){let i=0,e=0,n=0,s=0;function r(a,o,h,c){i=a,e=h,n=-3*a+3*o-2*h-c,s=2*a-2*o+h+c}return{initCatmullRom:function(a,o,h,c,l){r(o,h,l*(h-a),l*(c-o))},initNonuniformCatmullRom:function(a,o,h,c,l,u,f){let d=(o-a)/l-(h-a)/(l+u)+(h-o)/u,p=(h-o)/u-(c-o)/(u+f)+(c-h)/f;d*=u,p*=u,r(o,h,d,p)},calc:function(a){const o=a*a,h=o*a;return i+e*a+n*o+s*h}}}const au=new $,f1=new u1,d1=new u1,p1=new u1;class Ab extends ii{constructor(e=[],n=!1,s="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=s,this.tension=r}getPoint(e,n=new $){const s=n,r=this.points,a=r.length,o=(a-(this.closed?0:1))*e;let h=Math.floor(o),c=o-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/a)+1)*a:c===0&&h===a-1&&(h=a-2,c=1);let l,u;this.closed||h>0?l=r[(h-1)%a]:(au.subVectors(r[0],r[1]).add(r[0]),l=au);const f=r[h%a],d=r[(h+1)%a];if(this.closed||h+2<a?u=r[(h+2)%a]:(au.subVectors(r[a-1],r[a-2]).add(r[a-1]),u=au),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let y=Math.pow(l.distanceToSquared(f),p),x=Math.pow(f.distanceToSquared(d),p),g=Math.pow(d.distanceToSquared(u),p);x<1e-4&&(x=1),y<1e-4&&(y=x),g<1e-4&&(g=x),f1.initNonuniformCatmullRom(l.x,f.x,d.x,u.x,y,x,g),d1.initNonuniformCatmullRom(l.y,f.y,d.y,u.y,y,x,g),p1.initNonuniformCatmullRom(l.z,f.z,d.z,u.z,y,x,g)}else this.curveType==="catmullrom"&&(f1.initCatmullRom(l.x,f.x,d.x,u.x,this.tension),d1.initCatmullRom(l.y,f.y,d.y,u.y,this.tension),p1.initCatmullRom(l.z,f.z,d.z,u.z,this.tension));return s.set(f1.calc(c),d1.calc(c),p1.calc(c)),s}copy(e){super.copy(e),this.points=[];for(let n=0,s=e.points.length;n<s;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,s=this.points.length;n<s;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,s=e.points.length;n<s;n++){const r=e.points[n];this.points.push(new $().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Pb(i,e,n,s,r){const a=(s-e)*.5,o=(r-n)*.5,h=i*i,c=i*h;return(2*n-2*s+a+o)*c+(-3*n+3*s-2*a-o)*h+a*i+n}function TD(i,e){const n=1-i;return n*n*e}function ED(i,e){return 2*(1-i)*i*e}function zD(i,e){return i*i*e}function Ch(i,e,n,s){return TD(i,e)+ED(i,n)+zD(i,s)}function CD(i,e){const n=1-i;return n*n*n*e}function AD(i,e){const n=1-i;return 3*n*n*i*e}function PD(i,e){return 3*(1-i)*i*i*e}function ID(i,e){return i*i*i*e}function Ah(i,e,n,s,r){return CD(i,e)+AD(i,n)+PD(i,s)+ID(i,r)}class y1 extends ii{constructor(e=new it,n=new it,s=new it,r=new it){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=s,this.v3=r}getPoint(e,n=new it){const s=n,r=this.v0,a=this.v1,o=this.v2,h=this.v3;return s.set(Ah(e,r.x,a.x,o.x,h.x),Ah(e,r.y,a.y,o.y,h.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ib extends ii{constructor(e=new $,n=new $,s=new $,r=new $){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=s,this.v3=r}getPoint(e,n=new $){const s=n,r=this.v0,a=this.v1,o=this.v2,h=this.v3;return s.set(Ah(e,r.x,a.x,o.x,h.x),Ah(e,r.y,a.y,o.y,h.y),Ah(e,r.z,a.z,o.z,h.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class x1 extends ii{constructor(e=new it,n=new it){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new it){const s=n;return e===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new it){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rb extends ii{constructor(e=new $,n=new $){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new $){const s=n;return e===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new $){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class g1 extends ii{constructor(e=new it,n=new it,s=new it){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=s}getPoint(e,n=new it){const s=n,r=this.v0,a=this.v1,o=this.v2;return s.set(Ch(e,r.x,a.x,o.x),Ch(e,r.y,a.y,o.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class m1 extends ii{constructor(e=new $,n=new $,s=new $){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=s}getPoint(e,n=new $){const s=n,r=this.v0,a=this.v1,o=this.v2;return s.set(Ch(e,r.x,a.x,o.x),Ch(e,r.y,a.y,o.y),Ch(e,r.z,a.z,o.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class v1 extends ii{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new it){const s=n,r=this.points,a=(r.length-1)*e,o=Math.floor(a),h=a-o,c=r[o===0?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return s.set(Pb(h,c.x,l.x,u.x,f.x),Pb(h,c.y,l.y,u.y,f.y)),s}copy(e){super.copy(e),this.points=[];for(let n=0,s=e.points.length;n<s;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,s=this.points.length;n<s;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,s=e.points.length;n<s;n++){const r=e.points[n];this.points.push(new it().fromArray(r))}return this}}const ou=Object.freeze(Object.defineProperty({__proto__:null,ArcCurve:Cb,CatmullRomCurve3:Ab,CubicBezierCurve:y1,CubicBezierCurve3:Ib,EllipseCurve:ru,LineCurve:x1,LineCurve3:Rb,QuadraticBezierCurve:g1,QuadraticBezierCurve3:m1,SplineCurve:v1},Symbol.toStringTag,{value:"Module"}));class Ob extends ii{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const s=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ou[s](n,e))}return this}getPoint(e,n){const s=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=s){const o=r[a]-s,h=this.curves[a],c=h.getLength(),l=c===0?0:1-o/c;return h.getPointAt(l,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let s=0,r=this.curves.length;s<r;s++)n+=this.curves[s].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let s=0;s<=e;s++)n.push(this.getPoint(s/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let s;for(let r=0,a=this.curves;r<a.length;r++){const o=a[r],h=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(h);for(let l=0;l<c.length;l++){const u=c[l];s&&s.equals(u)||(n.push(u),s=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,s=e.curves.length;n<s;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,s=this.curves.length;n<s;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,s=e.curves.length;n<s;n++){const r=e.curves[n];this.curves.push(new ou[r.type]().fromJSON(r))}return this}}class hu extends Ob{constructor(e){super(),this.type="Path",this.currentPoint=new it,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,s=e.length;n<s;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const s=new x1(this.currentPoint.clone(),new it(e,n));return this.curves.push(s),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,s,r){const a=new g1(this.currentPoint.clone(),new it(e,n),new it(s,r));return this.curves.push(a),this.currentPoint.set(s,r),this}bezierCurveTo(e,n,s,r,a,o){const h=new y1(this.currentPoint.clone(),new it(e,n),new it(s,r),new it(a,o));return this.curves.push(h),this.currentPoint.set(a,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),s=new v1(n);return this.curves.push(s),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,s,r,a,o){const h=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+h,n+c,s,r,a,o),this}absarc(e,n,s,r,a,o){return this.absellipse(e,n,s,s,r,a,o),this}ellipse(e,n,s,r,a,o,h,c){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,n+u,s,r,a,o,h,c),this}absellipse(e,n,s,r,a,o,h,c){const l=new ru(e,n,s,r,a,o,h,c);if(this.curves.length>0){const f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Fa extends hu{constructor(e){super(e),this.uuid=ti(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let s=0,r=this.holes.length;s<r;s++)n[s]=this.holes[s].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,s=e.holes.length;n<s;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,s=this.holes.length;n<s;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,s=e.holes.length;n<s;n++){const r=e.holes[n];this.holes.push(new hu().fromJSON(r))}return this}}const kb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zs={h:0,s:0,l:0},cu={h:0,s:0,l:0};function w1(i,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(e-i)*6*n:n<1/2?e:n<2/3?i+(e-i)*6*(2/3-n):i}class Na{constructor(e,n,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,s)}set(e,n,s){if(n===void 0&&s===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,s);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Nn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qn.colorSpaceToWorking(this,n),this}setRGB(e,n,s,r=qn.workingColorSpace){return this.r=e,this.g=n,this.b=s,qn.colorSpaceToWorking(this,r),this}setHSL(e,n,s,r=qn.workingColorSpace){if(e=Bd(e,1),n=zt(n,0,1),s=zt(s,0,1),n===0)this.r=this.g=this.b=s;else{const a=s<=.5?s*(1+n):s+n-s*n,o=2*s-a;this.r=w1(o,a,e+1/3),this.g=w1(o,a,e),this.b=w1(o,a,e-1/3)}return qn.colorSpaceToWorking(this,r),this}setStyle(e,n=Nn){function s(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=r[1],h=r[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return s(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return s(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return s(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Nn){const s=kb[e.toLowerCase()];return s!==void 0?this.setHex(s,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wi(e.r),this.g=Wi(e.g),this.b=Wi(e.b),this}copyLinearToSRGB(e){return this.r=ka(e.r),this.g=ka(e.g),this.b=ka(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Nn){return qn.workingToColorSpace(Ue.copy(this),e),Math.round(zt(Ue.r*255,0,255))*65536+Math.round(zt(Ue.g*255,0,255))*256+Math.round(zt(Ue.b*255,0,255))}getHexString(e=Nn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=qn.workingColorSpace){qn.workingToColorSpace(Ue.copy(this),n);const s=Ue.r,r=Ue.g,a=Ue.b,o=Math.max(s,r,a),h=Math.min(s,r,a);let c,l;const u=(h+o)/2;if(h===o)c=0,l=0;else{const f=o-h;switch(l=u<=.5?f/(o+h):f/(2-o-h),o){case s:c=(r-a)/f+(r<a?6:0);break;case r:c=(a-s)/f+2;break;case a:c=(s-r)/f+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,n=qn.workingColorSpace){return qn.workingToColorSpace(Ue.copy(this),n),e.r=Ue.r,e.g=Ue.g,e.b=Ue.b,e}getStyle(e=Nn){qn.workingToColorSpace(Ue.copy(this),e);const n=Ue.r,s=Ue.g,r=Ue.b;return e!==Nn?`color(${e} ${n.toFixed(3)} ${s.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(s*255)},${Math.round(r*255)})`}offsetHSL(e,n,s){return this.getHSL(zs),this.setHSL(zs.h+e,zs.s+n,zs.l+s)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,s){return this.r=e.r+(n.r-e.r)*s,this.g=e.g+(n.g-e.g)*s,this.b=e.b+(n.b-e.b)*s,this}lerpHSL(e,n){this.getHSL(zs),e.getHSL(cu);const s=mh(zs.h,cu.h,n),r=mh(zs.s,cu.s,n),a=mh(zs.l,cu.l,n);return this.setHSL(s,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,s=this.g,r=this.b,a=e.elements;return this.r=a[0]*n+a[3]*s+a[6]*r,this.g=a[1]*n+a[4]*s+a[7]*r,this.b=a[2]*n+a[5]*s+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ue=new Na;Na.NAMES=kb;function RD(i,e,n=2){const s=e&&e.length,r=s?e[0]*n:i.length;let a=Lb(i,0,r,n,!0);const o=[];if(!a||a.next===a.prev)return o;let h,c,l;if(s&&(a=ND(i,e,a,n)),i.length>80*n){h=1/0,c=1/0;let u=-1/0,f=-1/0;for(let d=n;d<r;d+=n){const p=i[d],y=i[d+1];p<h&&(h=p),y<c&&(c=y),p>u&&(u=p),y>f&&(f=y)}l=Math.max(u-h,f-c),l=l!==0?32767/l:0}return Ph(a,o,n,h,c,l,0),o}function Lb(i,e,n,s,r){let a;if(r===_1(i,e,n,s)>0)for(let o=e;o<n;o+=s)a=Db(o/s|0,i[o],i[o+1],a);else for(let o=n-s;o>=e;o-=s)a=Db(o/s|0,i[o],i[o+1],a);return a&&Ba(a,a.next)&&(Oh(a),a=a.next),a}function Pr(i,e){if(!i)return i;e||(e=i);let n=i,s;do if(s=!1,!n.steiner&&(Ba(n,n.next)||ue(n.prev,n,n.next)===0)){if(Oh(n),n=e=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==e);return e}function Ph(i,e,n,s,r,a,o){if(!i)return;!o&&a&&VD(i,s,r,a);let h=i;for(;i.prev!==i.next;){const c=i.prev,l=i.next;if(a?kD(i,s,r,a):OD(i)){e.push(c.i,i.i,l.i),Oh(i),i=l.next,h=l.next;continue}if(i=l,i===h){o?o===1?(i=LD(Pr(i),e),Ph(i,e,n,s,r,a,2)):o===2&&FD(i,e,n,s,r,a):Ph(Pr(i),e,n,s,r,a,1);break}}}function OD(i){const e=i.prev,n=i,s=i.next;if(ue(e,n,s)>=0)return!1;const r=e.x,a=n.x,o=s.x,h=e.y,c=n.y,l=s.y,u=Math.min(r,a,o),f=Math.min(h,c,l),d=Math.max(r,a,o),p=Math.max(h,c,l);let y=s.next;for(;y!==e;){if(y.x>=u&&y.x<=d&&y.y>=f&&y.y<=p&&Ih(r,h,a,c,o,l,y.x,y.y)&&ue(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function kD(i,e,n,s){const r=i.prev,a=i,o=i.next;if(ue(r,a,o)>=0)return!1;const h=r.x,c=a.x,l=o.x,u=r.y,f=a.y,d=o.y,p=Math.min(h,c,l),y=Math.min(u,f,d),x=Math.max(h,c,l),g=Math.max(u,f,d),m=M1(p,y,e,n,s),v=M1(x,g,e,n,s);let w=i.prevZ,b=i.nextZ;for(;w&&w.z>=m&&b&&b.z<=v;){if(w.x>=p&&w.x<=x&&w.y>=y&&w.y<=g&&w!==r&&w!==o&&Ih(h,u,c,f,l,d,w.x,w.y)&&ue(w.prev,w,w.next)>=0||(w=w.prevZ,b.x>=p&&b.x<=x&&b.y>=y&&b.y<=g&&b!==r&&b!==o&&Ih(h,u,c,f,l,d,b.x,b.y)&&ue(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;w&&w.z>=m;){if(w.x>=p&&w.x<=x&&w.y>=y&&w.y<=g&&w!==r&&w!==o&&Ih(h,u,c,f,l,d,w.x,w.y)&&ue(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=x&&b.y>=y&&b.y<=g&&b!==r&&b!==o&&Ih(h,u,c,f,l,d,b.x,b.y)&&ue(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function LD(i,e){let n=i;do{const s=n.prev,r=n.next.next;!Ba(s,r)&&Nb(s,n,n.next,r)&&Rh(s,r)&&Rh(r,s)&&(e.push(s.i,n.i,r.i),Oh(n),Oh(n.next),n=i=r),n=n.next}while(n!==i);return Pr(n)}function FD(i,e,n,s,r,a){let o=i;do{let h=o.next.next;for(;h!==o.prev;){if(o.i!==h.i&&WD(o,h)){let c=Bb(o,h);o=Pr(o,o.next),c=Pr(c,c.next),Ph(o,e,n,s,r,a,0),Ph(c,e,n,s,r,a,0);return}h=h.next}o=o.next}while(o!==i)}function ND(i,e,n,s){const r=[];for(let a=0,o=e.length;a<o;a++){const h=e[a]*s,c=a<o-1?e[a+1]*s:i.length,l=Lb(i,h,c,s,!1);l===l.next&&(l.steiner=!0),r.push(UD(l))}r.sort(BD);for(let a=0;a<r.length;a++)n=DD(r[a],n);return n}function BD(i,e){let n=i.x-e.x;if(n===0&&(n=i.y-e.y,n===0)){const s=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=s-r}return n}function DD(i,e){const n=qD(i,e);if(!n)return e;const s=Bb(n,i);return Pr(s,s.next),Pr(n,n.next)}function qD(i,e){let n=e;const s=i.x,r=i.y;let a=-1/0,o;if(Ba(i,n))return n;do{if(Ba(i,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const f=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=s&&f>a&&(a=f,o=n.x<n.next.x?n:n.next,f===s))return o}n=n.next}while(n!==e);if(!o)return null;const h=o,c=o.x,l=o.y;let u=1/0;n=o;do{if(s>=n.x&&n.x>=c&&s!==n.x&&Fb(r<l?s:a,r,c,l,r<l?a:s,r,n.x,n.y)){const f=Math.abs(r-n.y)/(s-n.x);Rh(n,i)&&(f<u||f===u&&(n.x>o.x||n.x===o.x&&$D(o,n)))&&(o=n,u=f)}n=n.next}while(n!==h);return o}function $D(i,e){return ue(i.prev,i,e.prev)<0&&ue(e.next,i,i.next)<0}function VD(i,e,n,s){let r=i;do r.z===0&&(r.z=M1(r.x,r.y,e,n,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,GD(r)}function GD(i){let e,n=1;do{let s=i,r;i=null;let a=null;for(e=0;s;){e++;let o=s,h=0;for(let l=0;l<n&&(h++,o=o.nextZ,!!o);l++);let c=n;for(;h>0||c>0&&o;)h!==0&&(c===0||!o||s.z<=o.z)?(r=s,s=s.nextZ,h--):(r=o,o=o.nextZ,c--),a?a.nextZ=r:i=r,r.prevZ=a,a=r;s=o}a.nextZ=null,n*=2}while(e>1);return i}function M1(i,e,n,s,r){return i=(i-n)*r|0,e=(e-s)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function UD(i){let e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function Fb(i,e,n,s,r,a,o,h){return(r-o)*(e-h)>=(i-o)*(a-h)&&(i-o)*(s-h)>=(n-o)*(e-h)&&(n-o)*(a-h)>=(r-o)*(s-h)}function Ih(i,e,n,s,r,a,o,h){return!(i===o&&e===h)&&Fb(i,e,n,s,r,a,o,h)}function WD(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!YD(i,e)&&(Rh(i,e)&&Rh(e,i)&&jD(i,e)&&(ue(i.prev,i,e.prev)||ue(i,e.prev,e))||Ba(i,e)&&ue(i.prev,i,i.next)>0&&ue(e.prev,e,e.next)>0)}function ue(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function Ba(i,e){return i.x===e.x&&i.y===e.y}function Nb(i,e,n,s){const r=uu(ue(i,e,n)),a=uu(ue(i,e,s)),o=uu(ue(n,s,i)),h=uu(ue(n,s,e));return!!(r!==a&&o!==h||r===0&&lu(i,n,e)||a===0&&lu(i,s,e)||o===0&&lu(n,i,s)||h===0&&lu(n,e,s))}function lu(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function uu(i){return i>0?1:i<0?-1:0}function YD(i,e){let n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==e.i&&n.next.i!==e.i&&Nb(n,n.next,i,e))return!0;n=n.next}while(n!==i);return!1}function Rh(i,e){return ue(i.prev,i,i.next)<0?ue(i,e,i.next)>=0&&ue(i,i.prev,e)>=0:ue(i,e,i.prev)<0||ue(i,i.next,e)<0}function jD(i,e){let n=i,s=!1;const r=(i.x+e.x)/2,a=(i.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==i);return s}function Bb(i,e){const n=b1(i.i,i.x,i.y),s=b1(e.i,e.x,e.y),r=i.next,a=e.prev;return i.next=e,e.prev=i,n.next=r,r.prev=n,s.next=n,n.prev=s,a.next=s,s.prev=a,s}function Db(i,e,n,s){const r=b1(i,e,n);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function Oh(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function b1(i,e,n){return{i,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function HD(i,e,n,s){const r=e&&e.length,a=r?e[0]*n:i.length;let o=Math.abs(_1(i,0,a,n));if(r)for(let c=0,l=e.length;c<l;c++){const u=e[c]*n,f=c<l-1?e[c+1]*n:i.length;o-=Math.abs(_1(i,u,f,n))}let h=0;for(let c=0;c<s.length;c+=3){const l=s[c]*n,u=s[c+1]*n,f=s[c+2]*n;h+=Math.abs((i[l]-i[f])*(i[u+1]-i[l+1])-(i[l]-i[u])*(i[f+1]-i[l+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)}function _1(i,e,n,s){let r=0;for(let a=e,o=n-s;a<n;a+=s)r+=(i[o]-i[a])*(i[a+1]+i[o+1]),o=a;return r}function XD(i){const e=[],n=[],s=i[0][0].length;let r=0,a=0;for(const o of i){for(const h of o)for(let c=0;c<s;c++)e.push(h[c]);a&&(r+=a,n.push(r)),a=o.length}return{vertices:e,holes:n,dimensions:s}}class ZD{static triangulate(e,n,s=2){return RD(e,n,s)}}class si{static area(e){const n=e.length;let s=0;for(let r=n-1,a=0;a<n;r=a++)s+=e[r].x*e[a].y-e[a].x*e[r].y;return s*.5}static isClockWise(e){return si.area(e)<0}static triangulateShape(e,n){const s=[],r=[],a=[];qb(e),$b(s,e);let o=e.length;n.forEach(qb);for(let c=0;c<n.length;c++)r.push(o),o+=n[c].length,$b(s,n[c]);const h=ZD.triangulate(s,r);for(let c=0;c<h.length;c+=3)a.push(h.slice(c,c+3));return a}}function qb(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function $b(i,e){for(let n=0;n<e.length;n++)i.push(e[n].x),i.push(e[n].y)}class JD{constructor(){this.type="ShapePath",this.color=new Na,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new hu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,s,r){return this.currentPath.quadraticCurveTo(e,n,s,r),this}bezierCurveTo(e,n,s,r,a,o){return this.currentPath.bezierCurveTo(e,n,s,r,a,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(m){const v=[];for(let w=0,b=m.length;w<b;w++){const S=m[w],E=new Fa;E.curves=S.curves,v.push(E)}return v}function s(m,v){const w=v.length;let b=!1;for(let S=w-1,E=0;E<w;S=E++){let A=v[S],M=v[E],_=M.x-A.x,T=M.y-A.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(A=v[E],_=-_,M=v[S],T=-T),m.y<A.y||m.y>M.y)continue;if(m.y===A.y){if(m.x===A.x)return!0}else{const C=T*(m.x-A.x)-_*(m.y-A.y);if(C===0)return!0;if(C<0)continue;b=!b}}else{if(m.y!==A.y)continue;if(M.x<=m.x&&m.x<=A.x||A.x<=m.x&&m.x<=M.x)return!0}}return b}const r=si.isClockWise,a=this.subPaths;if(a.length===0)return[];let o,h,c;const l=[];if(a.length===1)return h=a[0],c=new Fa,c.curves=h.curves,l.push(c),l;let u=!r(a[0].getPoints());u=e?!u:u;const f=[],d=[];let p=[],y=0,x;d[y]=void 0,p[y]=[];for(let m=0,v=a.length;m<v;m++)h=a[m],x=h.getPoints(),o=r(x),o=e?!o:o,o?(!u&&d[y]&&y++,d[y]={s:new Fa,p:x},d[y].s.curves=h.curves,u&&y++,p[y]=[]):p[y].push({h,p:x[0]});if(!d[0])return n(a);if(d.length>1){let m=!1,v=0;for(let w=0,b=d.length;w<b;w++)f[w]=[];for(let w=0,b=d.length;w<b;w++){const S=p[w];for(let E=0;E<S.length;E++){const A=S[E];let M=!0;for(let _=0;_<d.length;_++)s(A.p,d[_].p)&&(w!==_&&v++,M?(M=!1,f[_].push(A)):m=!0);M&&f[w].push(A)}}v>0&&m===!1&&(p=f)}let g;for(let m=0,v=d.length;m<v;m++){c=d[m].s,l.push(c),g=p[m];for(let w=0,b=g.length;w<b;w++)c.holes.push(g[w].h)}return l}}function QD(i,e){const n=i.image&&i.image.width?i.image.width/i.image.height:1;return n>e?(i.repeat.x=1,i.repeat.y=n/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/n,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function KD(i,e){const n=i.image&&i.image.width?i.image.width/i.image.height:1;return n>e?(i.repeat.x=e/n,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=n/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function t8(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function e8(i,e,n,s){const r=n8(s);switch(n){case nM:return i*e;case rM:return i*e/r.components*r.byteLength;case aM:return i*e/r.components*r.byteLength;case oM:return i*e*2/r.components*r.byteLength;case hM:return i*e*2/r.components*r.byteLength;case iM:return i*e*3/r.components*r.byteLength;case Rd:return i*e*4/r.components*r.byteLength;case cM:return i*e*4/r.components*r.byteLength;case lM:case uM:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case fM:case dM:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case yM:case gM:return Math.max(i,16)*Math.max(e,8)/4;case pM:case xM:return Math.max(i,8)*Math.max(e,8)/2;case mM:case vM:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case wM:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case MM:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case bM:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case _M:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case SM:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case TM:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case EM:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case zM:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case CM:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case AM:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case PM:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case IM:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case RM:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case OM:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case kM:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case LM:case FM:case NM:return Math.ceil(i/4)*Math.ceil(e/4)*16;case BM:case DM:return Math.ceil(i/4)*Math.ceil(e/4)*8;case qM:case $M:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function n8(i){switch(i){case Ad:case Hw:return{byteLength:1,components:1};case Zw:case Xw:case Qw:return{byteLength:2,components:1};case Kw:case tM:return{byteLength:2,components:4};case Pd:case Jw:case Id:return{byteLength:4,components:1};case eM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class i8{static contain(e,n){return QD(e,n)}static cover(e,n){return KD(e,n)}static fill(e){return t8(e)}static getByteLength(e,n,s,r){return e8(e,n,s,r)}}class S1 extends Me{constructor(e=1,n=1,s=1,r=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:s,widthSegments:r,heightSegments:a,depthSegments:o};const h=this;r=Math.floor(r),a=Math.floor(a),o=Math.floor(o);const c=[],l=[],u=[],f=[];let d=0,p=0;y("z","y","x",-1,-1,s,n,e,o,a,0),y("z","y","x",1,-1,s,n,-e,o,a,1),y("x","z","y",1,1,e,s,n,r,o,2),y("x","z","y",1,-1,e,s,-n,r,o,3),y("x","y","z",1,-1,e,n,s,r,a,4),y("x","y","z",-1,-1,e,n,-s,r,a,5),this.setIndex(c),this.setAttribute("position",new St(l,3)),this.setAttribute("normal",new St(u,3)),this.setAttribute("uv",new St(f,2));function y(x,g,m,v,w,b,S,E,A,M,_){const T=b/A,C=S/M,P=b/2,R=S/2,k=E/2,I=A+1,L=M+1;let F=0,B=0;const V=new $;for(let J=0;J<L;J++){const j=J*C-R;for(let ht=0;ht<I;ht++){const rt=ht*T-P;V[x]=rt*v,V[g]=j*w,V[m]=k,l.push(V.x,V.y,V.z),V[x]=0,V[g]=0,V[m]=E>0?1:-1,u.push(V.x,V.y,V.z),f.push(ht/A),f.push(1-J/M),F+=1}}for(let J=0;J<M;J++)for(let j=0;j<A;j++){const ht=d+j+I*J,rt=d+j+I*(J+1),ft=d+(j+1)+I*(J+1),lt=d+(j+1)+I*J;c.push(ht,rt,lt),c.push(rt,ft,lt),B+=6}h.addGroup(p,B,_),p+=B,d+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S1(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}class T1 extends Me{constructor(e=1,n=1,s=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:s,radialSegments:r,heightSegments:a},n=Math.max(0,n),s=Math.max(1,Math.floor(s)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const o=[],h=[],c=[],l=[],u=n/2,f=Math.PI/2*e,d=n,p=2*f+d,y=s*2+a,x=r+1,g=new $,m=new $;for(let v=0;v<=y;v++){let w=0,b=0,S=0,E=0;if(v<=s){const _=v/s,T=_*Math.PI/2;b=-u-e*Math.cos(T),S=e*Math.sin(T),E=-e*Math.cos(T),w=_*f}else if(v<=s+a){const _=(v-s)/a;b=-u+_*n,S=e,E=0,w=f+_*d}else{const _=(v-s-a)/s,T=_*Math.PI/2;b=u+e*Math.sin(T),S=e*Math.cos(T),E=e*Math.sin(T),w=f+d+_*f}const A=Math.max(0,Math.min(1,w/p));let M=0;v===0?M=.5/r:v===y&&(M=-.5/r);for(let _=0;_<=r;_++){const T=_/r,C=T*Math.PI*2,P=Math.sin(C),R=Math.cos(C);m.x=-S*R,m.y=b,m.z=S*P,h.push(m.x,m.y,m.z),g.set(-S*R,E,S*P),g.normalize(),c.push(g.x,g.y,g.z),l.push(T+M,A)}if(v>0){const _=(v-1)*x;for(let T=0;T<r;T++){const C=_+T,P=_+T+1,R=v*x+T,k=v*x+T+1;o.push(C,P,R),o.push(P,k,R)}}}this.setIndex(o),this.setAttribute("position",new St(h,3)),this.setAttribute("normal",new St(c,3)),this.setAttribute("uv",new St(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T1(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class E1 extends Me{constructor(e=1,n=32,s=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:s,thetaLength:r},n=Math.max(3,n);const a=[],o=[],h=[],c=[],l=new $,u=new it;o.push(0,0,0),h.push(0,0,1),c.push(.5,.5);for(let f=0,d=3;f<=n;f++,d+=3){const p=s+f/n*r;l.x=e*Math.cos(p),l.y=e*Math.sin(p),o.push(l.x,l.y,l.z),h.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,c.push(u.x,u.y)}for(let f=1;f<=n;f++)a.push(f,f+1,0);this.setIndex(a),this.setAttribute("position",new St(o,3)),this.setAttribute("normal",new St(h,3)),this.setAttribute("uv",new St(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new E1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class fu extends Me{constructor(e=1,n=1,s=1,r=32,a=1,o=!1,h=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:s,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:h,thetaLength:c};const l=this;r=Math.floor(r),a=Math.floor(a);const u=[],f=[],d=[],p=[];let y=0;const x=[],g=s/2;let m=0;v(),o===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(p,2));function v(){const b=new $,S=new $;let E=0;const A=(n-e)/s;for(let M=0;M<=a;M++){const _=[],T=M/a,C=T*(n-e)+e;for(let P=0;P<=r;P++){const R=P/r,k=R*c+h,I=Math.sin(k),L=Math.cos(k);S.x=C*I,S.y=-T*s+g,S.z=C*L,f.push(S.x,S.y,S.z),b.set(I,A,L).normalize(),d.push(b.x,b.y,b.z),p.push(R,1-T),_.push(y++)}x.push(_)}for(let M=0;M<r;M++)for(let _=0;_<a;_++){const T=x[_][M],C=x[_+1][M],P=x[_+1][M+1],R=x[_][M+1];(e>0||_!==0)&&(u.push(T,C,R),E+=3),(n>0||_!==a-1)&&(u.push(C,P,R),E+=3)}l.addGroup(m,E,0),m+=E}function w(b){const S=y,E=new it,A=new $;let M=0;const _=b===!0?e:n,T=b===!0?1:-1;for(let P=1;P<=r;P++)f.push(0,g*T,0),d.push(0,T,0),p.push(.5,.5),y++;const C=y;for(let P=0;P<=r;P++){const k=P/r*c+h,I=Math.cos(k),L=Math.sin(k);A.x=_*L,A.y=g*T,A.z=_*I,f.push(A.x,A.y,A.z),d.push(0,T,0),E.x=I*.5+.5,E.y=L*.5*T+.5,p.push(E.x,E.y),y++}for(let P=0;P<r;P++){const R=S+P,k=C+P;b===!0?u.push(k,k+1,R):u.push(k+1,k,R),M+=3}l.addGroup(m,M,b===!0?1:2),m+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class z1 extends fu{constructor(e=1,n=1,s=32,r=1,a=!1,o=0,h=Math.PI*2){super(0,e,n,s,r,a,o,h),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:h}}static fromJSON(e){return new z1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ir extends Me{constructor(e=[],n=[],s=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:s,detail:r};const a=[],o=[];h(r),l(s),u(),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(a.slice(),3)),this.setAttribute("uv",new St(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function h(v){const w=new $,b=new $,S=new $;for(let E=0;E<n.length;E+=3)p(n[E+0],w),p(n[E+1],b),p(n[E+2],S),c(w,b,S,v)}function c(v,w,b,S){const E=S+1,A=[];for(let M=0;M<=E;M++){A[M]=[];const _=v.clone().lerp(b,M/E),T=w.clone().lerp(b,M/E),C=E-M;for(let P=0;P<=C;P++)P===0&&M===E?A[M][P]=_:A[M][P]=_.clone().lerp(T,P/C)}for(let M=0;M<E;M++)for(let _=0;_<2*(E-M)-1;_++){const T=Math.floor(_/2);_%2===0?(d(A[M][T+1]),d(A[M+1][T]),d(A[M][T])):(d(A[M][T+1]),d(A[M+1][T+1]),d(A[M+1][T]))}}function l(v){const w=new $;for(let b=0;b<a.length;b+=3)w.x=a[b+0],w.y=a[b+1],w.z=a[b+2],w.normalize().multiplyScalar(v),a[b+0]=w.x,a[b+1]=w.y,a[b+2]=w.z}function u(){const v=new $;for(let w=0;w<a.length;w+=3){v.x=a[w+0],v.y=a[w+1],v.z=a[w+2];const b=g(v)/2/Math.PI+.5,S=m(v)/Math.PI+.5;o.push(b,1-S)}y(),f()}function f(){for(let v=0;v<o.length;v+=6){const w=o[v+0],b=o[v+2],S=o[v+4],E=Math.max(w,b,S),A=Math.min(w,b,S);E>.9&&A<.1&&(w<.2&&(o[v+0]+=1),b<.2&&(o[v+2]+=1),S<.2&&(o[v+4]+=1))}}function d(v){a.push(v.x,v.y,v.z)}function p(v,w){const b=v*3;w.x=e[b+0],w.y=e[b+1],w.z=e[b+2]}function y(){const v=new $,w=new $,b=new $,S=new $,E=new it,A=new it,M=new it;for(let _=0,T=0;_<a.length;_+=9,T+=6){v.set(a[_+0],a[_+1],a[_+2]),w.set(a[_+3],a[_+4],a[_+5]),b.set(a[_+6],a[_+7],a[_+8]),E.set(o[T+0],o[T+1]),A.set(o[T+2],o[T+3]),M.set(o[T+4],o[T+5]),S.copy(v).add(w).add(b).divideScalar(3);const C=g(S);x(E,T+0,v,C),x(A,T+2,w,C),x(M,T+4,b,C)}}function x(v,w,b,S){S<0&&v.x===1&&(o[w]=v.x-1),b.x===0&&b.z===0&&(o[w]=S/2/Math.PI+.5)}function g(v){return Math.atan2(v.z,-v.x)}function m(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ir(e.vertices,e.indices,e.radius,e.details)}}class C1 extends Ir{constructor(e=1,n=0){const s=(1+Math.sqrt(5))/2,r=1/s,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-s,0,-r,s,0,r,-s,0,r,s,-r,-s,0,-r,s,0,r,-s,0,r,s,0,-s,0,-r,s,0,-r,-s,0,r,s,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new C1(e.radius,e.detail)}}const ri=new $,Yi=new $,A1=new $,ji=new $,Da=new $,qa=new $,Vb=new $,P1=new $,I1=new $,R1=new $,O1=new Es,k1=new Es,L1=new Es;class Cs{constructor(e=new $,n=new $,s=new $){this.a=e,this.b=n,this.c=s}static getNormal(e,n,s,r){r.subVectors(s,n),ri.subVectors(e,n),r.cross(ri);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,n,s,r,a){ri.subVectors(r,n),Yi.subVectors(s,n),A1.subVectors(e,n);const o=ri.dot(ri),h=ri.dot(Yi),c=ri.dot(A1),l=Yi.dot(Yi),u=Yi.dot(A1),f=o*l-h*h;if(f===0)return a.set(0,0,0),null;const d=1/f,p=(l*c-h*u)*d,y=(o*u-h*c)*d;return a.set(1-p-y,y,p)}static containsPoint(e,n,s,r){return this.getBarycoord(e,n,s,r,ji)===null?!1:ji.x>=0&&ji.y>=0&&ji.x+ji.y<=1}static getInterpolation(e,n,s,r,a,o,h,c){return this.getBarycoord(e,n,s,r,ji)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,ji.x),c.addScaledVector(o,ji.y),c.addScaledVector(h,ji.z),c)}static getInterpolatedAttribute(e,n,s,r,a,o){return O1.setScalar(0),k1.setScalar(0),L1.setScalar(0),O1.fromBufferAttribute(e,n),k1.fromBufferAttribute(e,s),L1.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(O1,a.x),o.addScaledVector(k1,a.y),o.addScaledVector(L1,a.z),o}static isFrontFacing(e,n,s,r){return ri.subVectors(s,n),Yi.subVectors(e,n),ri.cross(Yi).dot(r)<0}set(e,n,s){return this.a.copy(e),this.b.copy(n),this.c.copy(s),this}setFromPointsAndIndices(e,n,s,r){return this.a.copy(e[n]),this.b.copy(e[s]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,s,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ri.subVectors(this.c,this.b),Yi.subVectors(this.a,this.b),ri.cross(Yi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Cs.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,s,r,a){return Cs.getInterpolation(e,this.a,this.b,this.c,n,s,r,a)}containsPoint(e){return Cs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const s=this.a,r=this.b,a=this.c;let o,h;Da.subVectors(r,s),qa.subVectors(a,s),P1.subVectors(e,s);const c=Da.dot(P1),l=qa.dot(P1);if(c<=0&&l<=0)return n.copy(s);I1.subVectors(e,r);const u=Da.dot(I1),f=qa.dot(I1);if(u>=0&&f<=u)return n.copy(r);const d=c*f-u*l;if(d<=0&&c>=0&&u<=0)return o=c/(c-u),n.copy(s).addScaledVector(Da,o);R1.subVectors(e,a);const p=Da.dot(R1),y=qa.dot(R1);if(y>=0&&p<=y)return n.copy(a);const x=p*l-c*y;if(x<=0&&l>=0&&y<=0)return h=l/(l-y),n.copy(s).addScaledVector(qa,h);const g=u*y-p*f;if(g<=0&&f-u>=0&&p-y>=0)return Vb.subVectors(a,r),h=(f-u)/(f-u+(p-y)),n.copy(r).addScaledVector(Vb,h);const m=1/(g+x+d);return o=x*m,h=d*m,n.copy(s).addScaledVector(Da,o).addScaledVector(qa,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const du=new $,pu=new $,F1=new $,yu=new Cs;class s8 extends Me{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),a=Math.cos(gr*n),o=e.getIndex(),h=e.getAttribute("position"),c=o?o.count:h.count,l=[0,0,0],u=["a","b","c"],f=new Array(3),d={},p=[];for(let y=0;y<c;y+=3){o?(l[0]=o.getX(y),l[1]=o.getX(y+1),l[2]=o.getX(y+2)):(l[0]=y,l[1]=y+1,l[2]=y+2);const{a:x,b:g,c:m}=yu;if(x.fromBufferAttribute(h,l[0]),g.fromBufferAttribute(h,l[1]),m.fromBufferAttribute(h,l[2]),yu.getNormal(F1),f[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,f[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let v=0;v<3;v++){const w=(v+1)%3,b=f[v],S=f[w],E=yu[u[v]],A=yu[u[w]],M=`${b}_${S}`,_=`${S}_${b}`;_ in d&&d[_]?(F1.dot(d[_].normal)<=a&&(p.push(E.x,E.y,E.z),p.push(A.x,A.y,A.z)),d[_]=null):M in d||(d[M]={index0:l[v],index1:l[w],normal:F1.clone()})}}for(const y in d)if(d[y]){const{index0:x,index1:g}=d[y];du.fromBufferAttribute(h,x),pu.fromBufferAttribute(h,g),p.push(du.x,du.y,du.z),p.push(pu.x,pu.y,pu.z)}this.setAttribute("position",new St(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class N1 extends Me{constructor(e=new Fa([new it(.5,.5),new it(-.5,.5),new it(-.5,-.5),new it(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const s=this,r=[],a=[];for(let h=0,c=e.length;h<c;h++){const l=e[h];o(l)}this.setAttribute("position",new St(r,3)),this.setAttribute("uv",new St(a,2)),this.computeVertexNormals();function o(h){const c=[],l=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let d=n.bevelEnabled!==void 0?n.bevelEnabled:!0,p=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:p-.1,x=n.bevelOffset!==void 0?n.bevelOffset:0,g=n.bevelSegments!==void 0?n.bevelSegments:3;const m=n.extrudePath,v=n.UVGenerator!==void 0?n.UVGenerator:r8;let w,b=!1,S,E,A,M;m&&(w=m.getSpacedPoints(u),b=!0,d=!1,S=m.computeFrenetFrames(u,!1),E=new $,A=new $,M=new $),d||(g=0,p=0,y=0,x=0);const _=h.extractPoints(l);let T=_.shape;const C=_.holes;if(!si.isClockWise(T)){T=T.reverse();for(let H=0,Z=C.length;H<Z;H++){const et=C[H];si.isClockWise(et)&&(C[H]=et.reverse())}}function R(H){const et=10000000000000001e-36;let ut=H[0];for(let ot=1;ot<=H.length;ot++){const kt=ot%H.length,bt=H[kt],jt=bt.x-ut.x,nt=bt.y-ut.y,ee=jt*jt+nt*nt,z=Math.max(Math.abs(bt.x),Math.abs(bt.y),Math.abs(ut.x),Math.abs(ut.y)),O=et*z*z;if(ee<=O){H.splice(kt,1),ot--;continue}ut=bt}}R(T),C.forEach(R);const k=C.length,I=T;for(let H=0;H<k;H++){const Z=C[H];T=T.concat(Z)}function L(H,Z,et){return Z||console.error("THREE.ExtrudeGeometry: vec does not exist"),H.clone().addScaledVector(Z,et)}const F=T.length;function B(H,Z,et){let ut,ot,kt;const bt=H.x-Z.x,jt=H.y-Z.y,nt=et.x-H.x,ee=et.y-H.y,z=bt*bt+jt*jt,O=bt*ee-jt*nt;if(Math.abs(O)>Number.EPSILON){const D=Math.sqrt(z),q=Math.sqrt(nt*nt+ee*ee),U=Z.x-jt/D,G=Z.y+bt/D,W=et.x-ee/q,Y=et.y+nt/q,Q=((W-U)*ee-(Y-G)*nt)/(bt*ee-jt*nt);ut=U+bt*Q-H.x,ot=G+jt*Q-H.y;const Mt=ut*ut+ot*ot;if(Mt<=2)return new it(ut,ot);kt=Math.sqrt(Mt/2)}else{let D=!1;bt>Number.EPSILON?nt>Number.EPSILON&&(D=!0):bt<-Number.EPSILON?nt<-Number.EPSILON&&(D=!0):Math.sign(jt)===Math.sign(ee)&&(D=!0),D?(ut=-jt,ot=bt,kt=Math.sqrt(z)):(ut=bt,ot=jt,kt=Math.sqrt(z/2))}return new it(ut/kt,ot/kt)}const V=[];for(let H=0,Z=I.length,et=Z-1,ut=H+1;H<Z;H++,et++,ut++)et===Z&&(et=0),ut===Z&&(ut=0),V[H]=B(I[H],I[et],I[ut]);const J=[];let j,ht=V.concat();for(let H=0,Z=k;H<Z;H++){const et=C[H];j=[];for(let ut=0,ot=et.length,kt=ot-1,bt=ut+1;ut<ot;ut++,kt++,bt++)kt===ot&&(kt=0),bt===ot&&(bt=0),j[ut]=B(et[ut],et[kt],et[bt]);J.push(j),ht=ht.concat(j)}let rt;if(g===0)rt=si.triangulateShape(I,C);else{const H=[],Z=[];for(let et=0;et<g;et++){const ut=et/g,ot=p*Math.cos(ut*Math.PI/2),kt=y*Math.sin(ut*Math.PI/2)+x;for(let bt=0,jt=I.length;bt<jt;bt++){const nt=L(I[bt],V[bt],kt);ie(nt.x,nt.y,-ot),ut===0&&H.push(nt)}for(let bt=0,jt=k;bt<jt;bt++){const nt=C[bt];j=J[bt];const ee=[];for(let z=0,O=nt.length;z<O;z++){const D=L(nt[z],j[z],kt);ie(D.x,D.y,-ot),ut===0&&ee.push(D)}ut===0&&Z.push(ee)}}rt=si.triangulateShape(H,Z)}const ft=rt.length,lt=y+x;for(let H=0;H<F;H++){const Z=d?L(T[H],ht[H],lt):T[H];b?(A.copy(S.normals[0]).multiplyScalar(Z.x),E.copy(S.binormals[0]).multiplyScalar(Z.y),M.copy(w[0]).add(A).add(E),ie(M.x,M.y,M.z)):ie(Z.x,Z.y,0)}for(let H=1;H<=u;H++)for(let Z=0;Z<F;Z++){const et=d?L(T[Z],ht[Z],lt):T[Z];b?(A.copy(S.normals[H]).multiplyScalar(et.x),E.copy(S.binormals[H]).multiplyScalar(et.y),M.copy(w[H]).add(A).add(E),ie(M.x,M.y,M.z)):ie(et.x,et.y,f/u*H)}for(let H=g-1;H>=0;H--){const Z=H/g,et=p*Math.cos(Z*Math.PI/2),ut=y*Math.sin(Z*Math.PI/2)+x;for(let ot=0,kt=I.length;ot<kt;ot++){const bt=L(I[ot],V[ot],ut);ie(bt.x,bt.y,f+et)}for(let ot=0,kt=C.length;ot<kt;ot++){const bt=C[ot];j=J[ot];for(let jt=0,nt=bt.length;jt<nt;jt++){const ee=L(bt[jt],j[jt],ut);b?ie(ee.x,ee.y+w[u-1].y,w[u-1].x+et):ie(ee.x,ee.y,f+et)}}}wt(),Yt();function wt(){const H=r.length/3;if(d){let Z=0,et=F*Z;for(let ut=0;ut<ft;ut++){const ot=rt[ut];Se(ot[2]+et,ot[1]+et,ot[0]+et)}Z=u+g*2,et=F*Z;for(let ut=0;ut<ft;ut++){const ot=rt[ut];Se(ot[0]+et,ot[1]+et,ot[2]+et)}}else{for(let Z=0;Z<ft;Z++){const et=rt[Z];Se(et[2],et[1],et[0])}for(let Z=0;Z<ft;Z++){const et=rt[Z];Se(et[0]+F*u,et[1]+F*u,et[2]+F*u)}}s.addGroup(H,r.length/3-H,0)}function Yt(){const H=r.length/3;let Z=0;ye(I,Z),Z+=I.length;for(let et=0,ut=C.length;et<ut;et++){const ot=C[et];ye(ot,Z),Z+=ot.length}s.addGroup(H,r.length/3-H,1)}function ye(H,Z){let et=H.length;for(;--et>=0;){const ut=et;let ot=et-1;ot<0&&(ot=H.length-1);for(let kt=0,bt=u+g*2;kt<bt;kt++){const jt=F*kt,nt=F*(kt+1),ee=Z+ut+jt,z=Z+ot+jt,O=Z+ot+nt,D=Z+ut+nt;xe(ee,z,O,D)}}}function ie(H,Z,et){c.push(H),c.push(Z),c.push(et)}function Se(H,Z,et){te(H),te(Z),te(et);const ut=r.length/3,ot=v.generateTopUV(s,r,ut-3,ut-2,ut-1);Zt(ot[0]),Zt(ot[1]),Zt(ot[2])}function xe(H,Z,et,ut){te(H),te(Z),te(ut),te(Z),te(et),te(ut);const ot=r.length/3,kt=v.generateSideWallUV(s,r,ot-6,ot-3,ot-2,ot-1);Zt(kt[0]),Zt(kt[1]),Zt(kt[3]),Zt(kt[1]),Zt(kt[2]),Zt(kt[3])}function te(H){r.push(c[H*3+0]),r.push(c[H*3+1]),r.push(c[H*3+2])}function Zt(H){a.push(H.x),a.push(H.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,s=this.parameters.options;return a8(n,s,e)}static fromJSON(e,n){const s=[];for(let a=0,o=e.shapes.length;a<o;a++){const h=n[e.shapes[a]];s.push(h)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new ou[r.type]().fromJSON(r)),new N1(s,e.options)}}const r8={generateTopUV:function(i,e,n,s,r){const a=e[n*3],o=e[n*3+1],h=e[s*3],c=e[s*3+1],l=e[r*3],u=e[r*3+1];return[new it(a,o),new it(h,c),new it(l,u)]},generateSideWallUV:function(i,e,n,s,r,a){const o=e[n*3],h=e[n*3+1],c=e[n*3+2],l=e[s*3],u=e[s*3+1],f=e[s*3+2],d=e[r*3],p=e[r*3+1],y=e[r*3+2],x=e[a*3],g=e[a*3+1],m=e[a*3+2];return Math.abs(h-u)<Math.abs(o-l)?[new it(o,1-c),new it(l,1-f),new it(d,1-y),new it(x,1-m)]:[new it(h,1-c),new it(u,1-f),new it(p,1-y),new it(g,1-m)]}};function a8(i,e,n){if(n.shapes=[],Array.isArray(i))for(let s=0,r=i.length;s<r;s++){const a=i[s];n.shapes.push(a.uuid)}else n.shapes.push(i.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class B1 extends Ir{constructor(e=1,n=0){const s=(1+Math.sqrt(5))/2,r=[-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new B1(e.radius,e.detail)}}class D1 extends Me{constructor(e=[new it(0,-.5),new it(.5,0),new it(0,.5)],n=12,s=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:s,phiLength:r},n=Math.floor(n),r=zt(r,0,Math.PI*2);const a=[],o=[],h=[],c=[],l=[],u=1/n,f=new $,d=new it,p=new $,y=new $,x=new $;let g=0,m=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:g=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,p.x=m*1,p.y=-g,p.z=m*0,x.copy(p),p.normalize(),c.push(p.x,p.y,p.z);break;case e.length-1:c.push(x.x,x.y,x.z);break;default:g=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,p.x=m*1,p.y=-g,p.z=m*0,y.copy(p),p.x+=x.x,p.y+=x.y,p.z+=x.z,p.normalize(),c.push(p.x,p.y,p.z),x.copy(y)}for(let v=0;v<=n;v++){const w=s+v*u*r,b=Math.sin(w),S=Math.cos(w);for(let E=0;E<=e.length-1;E++){f.x=e[E].x*b,f.y=e[E].y,f.z=e[E].x*S,o.push(f.x,f.y,f.z),d.x=v/n,d.y=E/(e.length-1),h.push(d.x,d.y);const A=c[3*E+0]*b,M=c[3*E+1],_=c[3*E+0]*S;l.push(A,M,_)}}for(let v=0;v<n;v++)for(let w=0;w<e.length-1;w++){const b=w+v*e.length,S=b,E=b+e.length,A=b+e.length+1,M=b+1;a.push(S,E,M),a.push(A,M,E)}this.setIndex(a),this.setAttribute("position",new St(o,3)),this.setAttribute("uv",new St(h,2)),this.setAttribute("normal",new St(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new D1(e.points,e.segments,e.phiStart,e.phiLength)}}class q1 extends Ir{constructor(e=1,n=0){const s=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(s,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new q1(e.radius,e.detail)}}class $1 extends Me{constructor(e=1,n=1,s=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:s,heightSegments:r};const a=e/2,o=n/2,h=Math.floor(s),c=Math.floor(r),l=h+1,u=c+1,f=e/h,d=n/c,p=[],y=[],x=[],g=[];for(let m=0;m<u;m++){const v=m*d-o;for(let w=0;w<l;w++){const b=w*f-a;y.push(b,-v,0),x.push(0,0,1),g.push(w/h),g.push(1-m/c)}}for(let m=0;m<c;m++)for(let v=0;v<h;v++){const w=v+l*m,b=v+l*(m+1),S=v+1+l*(m+1),E=v+1+l*m;p.push(w,b,E),p.push(b,S,E)}this.setIndex(p),this.setAttribute("position",new St(y,3)),this.setAttribute("normal",new St(x,3)),this.setAttribute("uv",new St(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $1(e.width,e.height,e.widthSegments,e.heightSegments)}}class V1 extends Me{constructor(e=.5,n=1,s=32,r=1,a=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:s,phiSegments:r,thetaStart:a,thetaLength:o},s=Math.max(3,s),r=Math.max(1,r);const h=[],c=[],l=[],u=[];let f=e;const d=(n-e)/r,p=new $,y=new it;for(let x=0;x<=r;x++){for(let g=0;g<=s;g++){const m=a+g/s*o;p.x=f*Math.cos(m),p.y=f*Math.sin(m),c.push(p.x,p.y,p.z),l.push(0,0,1),y.x=(p.x/n+1)/2,y.y=(p.y/n+1)/2,u.push(y.x,y.y)}f+=d}for(let x=0;x<r;x++){const g=x*(s+1);for(let m=0;m<s;m++){const v=m+g,w=v,b=v+s+1,S=v+s+2,E=v+1;h.push(w,b,E),h.push(b,S,E)}}this.setIndex(h),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(l,3)),this.setAttribute("uv",new St(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new V1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class G1 extends Me{constructor(e=new Fa([new it(0,.5),new it(-.5,-.5),new it(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const s=[],r=[],a=[],o=[];let h=0,c=0;if(Array.isArray(e)===!1)l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(h,c,u),h+=c,c=0;this.setIndex(s),this.setAttribute("position",new St(r,3)),this.setAttribute("normal",new St(a,3)),this.setAttribute("uv",new St(o,2));function l(u){const f=r.length/3,d=u.extractPoints(n);let p=d.shape;const y=d.holes;si.isClockWise(p)===!1&&(p=p.reverse());for(let g=0,m=y.length;g<m;g++){const v=y[g];si.isClockWise(v)===!0&&(y[g]=v.reverse())}const x=si.triangulateShape(p,y);for(let g=0,m=y.length;g<m;g++){const v=y[g];p=p.concat(v)}for(let g=0,m=p.length;g<m;g++){const v=p[g];r.push(v.x,v.y,0),a.push(0,0,1),o.push(v.x,v.y)}for(let g=0,m=x.length;g<m;g++){const v=x[g],w=v[0]+f,b=v[1]+f,S=v[2]+f;s.push(w,b,S),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return o8(n,e)}static fromJSON(e,n){const s=[];for(let r=0,a=e.shapes.length;r<a;r++){const o=n[e.shapes[r]];s.push(o)}return new G1(s,e.curveSegments)}}function o8(i,e){if(e.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class U1 extends Me{constructor(e=1,n=32,s=16,r=0,a=Math.PI*2,o=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:s,phiStart:r,phiLength:a,thetaStart:o,thetaLength:h},n=Math.max(3,Math.floor(n)),s=Math.max(2,Math.floor(s));const c=Math.min(o+h,Math.PI);let l=0;const u=[],f=new $,d=new $,p=[],y=[],x=[],g=[];for(let m=0;m<=s;m++){const v=[],w=m/s;let b=0;m===0&&o===0?b=.5/n:m===s&&c===Math.PI&&(b=-.5/n);for(let S=0;S<=n;S++){const E=S/n;f.x=-e*Math.cos(r+E*a)*Math.sin(o+w*h),f.y=e*Math.cos(o+w*h),f.z=e*Math.sin(r+E*a)*Math.sin(o+w*h),y.push(f.x,f.y,f.z),d.copy(f).normalize(),x.push(d.x,d.y,d.z),g.push(E+b,1-w),v.push(l++)}u.push(v)}for(let m=0;m<s;m++)for(let v=0;v<n;v++){const w=u[m][v+1],b=u[m][v],S=u[m+1][v],E=u[m+1][v+1];(m!==0||o>0)&&p.push(w,b,E),(m!==s-1||c<Math.PI)&&p.push(b,S,E)}this.setIndex(p),this.setAttribute("position",new St(y,3)),this.setAttribute("normal",new St(x,3)),this.setAttribute("uv",new St(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class W1 extends Ir{constructor(e=1,n=0){const s=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(s,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new W1(e.radius,e.detail)}}class Y1 extends Me{constructor(e=1,n=.4,s=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:s,tubularSegments:r,arc:a},s=Math.floor(s),r=Math.floor(r);const o=[],h=[],c=[],l=[],u=new $,f=new $,d=new $;for(let p=0;p<=s;p++)for(let y=0;y<=r;y++){const x=y/r*a,g=p/s*Math.PI*2;f.x=(e+n*Math.cos(g))*Math.cos(x),f.y=(e+n*Math.cos(g))*Math.sin(x),f.z=n*Math.sin(g),h.push(f.x,f.y,f.z),u.x=e*Math.cos(x),u.y=e*Math.sin(x),d.subVectors(f,u).normalize(),c.push(d.x,d.y,d.z),l.push(y/r),l.push(p/s)}for(let p=1;p<=s;p++)for(let y=1;y<=r;y++){const x=(r+1)*p+y-1,g=(r+1)*(p-1)+y-1,m=(r+1)*(p-1)+y,v=(r+1)*p+y;o.push(x,g,v),o.push(g,m,v)}this.setIndex(o),this.setAttribute("position",new St(h,3)),this.setAttribute("normal",new St(c,3)),this.setAttribute("uv",new St(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class j1 extends Me{constructor(e=1,n=.4,s=64,r=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:s,radialSegments:r,p:a,q:o},s=Math.floor(s),r=Math.floor(r);const h=[],c=[],l=[],u=[],f=new $,d=new $,p=new $,y=new $,x=new $,g=new $,m=new $;for(let w=0;w<=s;++w){const b=w/s*a*Math.PI*2;v(b,a,o,e,p),v(b+.01,a,o,e,y),g.subVectors(y,p),m.addVectors(y,p),x.crossVectors(g,m),m.crossVectors(x,g),x.normalize(),m.normalize();for(let S=0;S<=r;++S){const E=S/r*Math.PI*2,A=-n*Math.cos(E),M=n*Math.sin(E);f.x=p.x+(A*m.x+M*x.x),f.y=p.y+(A*m.y+M*x.y),f.z=p.z+(A*m.z+M*x.z),c.push(f.x,f.y,f.z),d.subVectors(f,p).normalize(),l.push(d.x,d.y,d.z),u.push(w/s),u.push(S/r)}}for(let w=1;w<=s;w++)for(let b=1;b<=r;b++){const S=(r+1)*(w-1)+(b-1),E=(r+1)*w+(b-1),A=(r+1)*w+b,M=(r+1)*(w-1)+b;h.push(S,E,M),h.push(E,A,M)}this.setIndex(h),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(l,3)),this.setAttribute("uv",new St(u,2));function v(w,b,S,E,A){const M=Math.cos(w),_=Math.sin(w),T=S/b*w,C=Math.cos(T);A.x=E*(2+C)*.5*M,A.y=E*(2+C)*_*.5,A.z=E*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new j1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class H1 extends Me{constructor(e=new m1(new $(-1,-1,0),new $(-1,1,0),new $(1,1,0)),n=64,s=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:s,radialSegments:r,closed:a};const o=e.computeFrenetFrames(n,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const h=new $,c=new $,l=new it;let u=new $;const f=[],d=[],p=[],y=[];x(),this.setIndex(y),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(p,2));function x(){for(let w=0;w<n;w++)g(w);g(a===!1?n:0),v(),m()}function g(w){u=e.getPointAt(w/n,u);const b=o.normals[w],S=o.binormals[w];for(let E=0;E<=r;E++){const A=E/r*Math.PI*2,M=Math.sin(A),_=-Math.cos(A);c.x=_*b.x+M*S.x,c.y=_*b.y+M*S.y,c.z=_*b.z+M*S.z,c.normalize(),d.push(c.x,c.y,c.z),h.x=u.x+s*c.x,h.y=u.y+s*c.y,h.z=u.z+s*c.z,f.push(h.x,h.y,h.z)}}function m(){for(let w=1;w<=n;w++)for(let b=1;b<=r;b++){const S=(r+1)*(w-1)+(b-1),E=(r+1)*w+(b-1),A=(r+1)*w+b,M=(r+1)*(w-1)+b;y.push(S,E,M),y.push(E,A,M)}}function v(){for(let w=0;w<=n;w++)for(let b=0;b<=r;b++)l.x=w/n,l.y=b/r,p.push(l.x,l.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new H1(new ou[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class h8 extends Me{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],s=new Set,r=new $,a=new $;if(e.index!==null){const o=e.attributes.position,h=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:h.count,materialIndex:0}]);for(let l=0,u=c.length;l<u;++l){const f=c[l],d=f.start,p=f.count;for(let y=d,x=d+p;y<x;y+=3)for(let g=0;g<3;g++){const m=h.getX(y+g),v=h.getX(y+(g+1)%3);r.fromBufferAttribute(o,m),a.fromBufferAttribute(o,v),Gb(r,a,s)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}}else{const o=e.attributes.position;for(let h=0,c=o.count/3;h<c;h++)for(let l=0;l<3;l++){const u=3*h+l,f=3*h+(l+1)%3;r.fromBufferAttribute(o,u),a.fromBufferAttribute(o,f),Gb(r,a,s)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new St(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Gb(i,e,n){const s=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return n.has(s)===!0||n.has(r)===!0?!1:(n.add(s),n.add(r),!0)}const Ub=new it;class c8{constructor(e=new it(1/0,1/0),n=new it(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const s=Ub.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ub).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}class l8{constructor(e=1,n=0,s=0){this.radius=e,this.theta=n,this.y=s}set(e,n,s){return this.radius=e,this.theta=n,this.y=s,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,s){return this.radius=Math.sqrt(e*e+s*s),this.theta=Math.atan2(e,s),this.y=n,this}clone(){return new this.constructor().copy(this)}}const X1=new $,u8=new $,f8=new bi;class Rr{constructor(e=new $(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,s,r){return this.normal.set(e,n,s),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,s){const r=X1.subVectors(s,n).cross(u8.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const s=e.delta(X1),r=this.normal.dot(s);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:n.copy(e.start).addScaledVector(s,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return n<0&&s>0||s<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const s=n||f8.getNormalMatrix(e),r=this.coplanarPoint(X1).applyMatrix4(e),a=this.normal.applyMatrix3(s).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Or=new t1,d8=new it(.5,.5),xu=new $;class Wb{constructor(e=new Rr,n=new Rr,s=new Rr,r=new Rr,a=new Rr,o=new Rr){this.planes=[e,n,s,r,a,o]}set(e,n,s,r,a,o){const h=this.planes;return h[0].copy(e),h[1].copy(n),h[2].copy(s),h[3].copy(r),h[4].copy(a),h[5].copy(o),this}copy(e){const n=this.planes;for(let s=0;s<6;s++)n[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e,n=Mi){const s=this.planes,r=e.elements,a=r[0],o=r[1],h=r[2],c=r[3],l=r[4],u=r[5],f=r[6],d=r[7],p=r[8],y=r[9],x=r[10],g=r[11],m=r[12],v=r[13],w=r[14],b=r[15];if(s[0].setComponents(c-a,d-l,g-p,b-m).normalize(),s[1].setComponents(c+a,d+l,g+p,b+m).normalize(),s[2].setComponents(c+o,d+u,g+y,b+v).normalize(),s[3].setComponents(c-o,d-u,g-y,b-v).normalize(),s[4].setComponents(c-h,d-f,g-x,b-w).normalize(),n===Mi)s[5].setComponents(c+h,d+f,g+x,b+w).normalize();else if(n===gh)s[5].setComponents(h,f,x,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Or.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Or.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Or)}intersectsSprite(e){Or.center.set(0,0,0);const n=d8.distanceTo(e.center);return Or.radius=.7071067811865476+n,Or.applyMatrix4(e.matrixWorld),this.intersectsSphere(Or)}intersectsSphere(e){const n=this.planes,s=e.center,r=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(s)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let s=0;s<6;s++){const r=n[s];if(xu.x=r.normal.x>0?e.max.x:e.min.x,xu.y=r.normal.y>0?e.max.y:e.min.y,xu.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(xu)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let s=0;s<6;s++)if(n[s].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Si=new ve,Ti=new Wb;class Z1{constructor(){this.coordinateSystem=Mi}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let s=0;s<n.cameras.length;s++){const r=n.cameras[s];if(Si.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ti.setFromProjectionMatrix(Si,this.coordinateSystem),Ti.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let s=0;s<n.cameras.length;s++){const r=n.cameras[s];if(Si.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ti.setFromProjectionMatrix(Si,this.coordinateSystem),Ti.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let s=0;s<n.cameras.length;s++){const r=n.cameras[s];if(Si.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ti.setFromProjectionMatrix(Si,this.coordinateSystem),Ti.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let s=0;s<n.cameras.length;s++){const r=n.cameras[s];if(Si.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ti.setFromProjectionMatrix(Si,this.coordinateSystem),Ti.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let s=0;s<n.cameras.length;s++){const r=n.cameras[s];if(Si.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ti.setFromProjectionMatrix(Si,this.coordinateSystem),Ti.containsPoint(e))return!0}return!1}clone(){return new Z1}}const Yb=new $,gu=new $;class p8{constructor(e=new $,n=new $){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){Yb.subVectors(e,this.start),gu.subVectors(this.end,this.start);const s=gu.dot(gu);let a=gu.dot(Yb)/s;return n&&(a=zt(a,0,1)),a}closestPointToPoint(e,n,s){const r=this.closestPointToPointParameter(e,n);return this.delta(s).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class J1{constructor(e,n,s,r){J1.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,s,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let s=0;s<4;s++)this.elements[s]=e[s+n];return this}set(e,n,s,r){const a=this.elements;return a[0]=e,a[2]=n,a[1]=s,a[3]=r,this}}class y8{constructor(e=1,n=0,s=0){this.radius=e,this.phi=n,this.theta=s}set(e,n,s){return this.radius=e,this.phi=n,this.theta=s,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=zt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,s){return this.radius=Math.sqrt(e*e+n*n+s*s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,s),this.phi=Math.acos(zt(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class x8{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const s=e.x,r=e.y,a=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*a),n.addScaledVector(o[3],.488603*s),n.addScaledVector(o[4],1.092548*(s*r)),n.addScaledVector(o[5],1.092548*(r*a)),n.addScaledVector(o[6],.315392*(3*a*a-1)),n.addScaledVector(o[7],1.092548*(s*a)),n.addScaledVector(o[8],.546274*(s*s-r*r)),n}getIrradianceAt(e,n){const s=e.x,r=e.y,a=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*a),n.addScaledVector(o[3],2*.511664*s),n.addScaledVector(o[4],2*.429043*s*r),n.addScaledVector(o[5],2*.429043*r*a),n.addScaledVector(o[6],.743125*a*a-.247708),n.addScaledVector(o[7],2*.429043*s*a),n.addScaledVector(o[8],.429043*(s*s-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(e.coefficients[s],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let s=0;s<9;s++)this.coefficients[s].lerp(e.coefficients[s],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const s=this.coefficients;for(let r=0;r<9;r++)s[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const s=this.coefficients;for(let r=0;r<9;r++)s[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const s=e.x,r=e.y,a=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*a,n[3]=.488603*s,n[4]=1.092548*s*r,n[5]=1.092548*r*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*s*a,n[8]=.546274*(s*s-r*r)}}class Q1{constructor(e,n=1,s=1e3){this.isFog=!0,this.name="",this.color=new Na(e),this.near=n,this.far=s}clone(){return new Q1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class K1{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Na(e),this.density=n}clone(){return new K1(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class g8 extends fn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Mr,this.environmentIntensity=1,this.environmentRotation=new Mr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class m8 extends ke{constructor(e,n,s,r,a,o,h,c,l){super(e,n,s,r,a,o,h,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class tp extends ke{constructor(e,n,s,r,a,o,h,c,l,u,f,d){super(null,o,h,c,l,u,r,a,f,d),this.isCompressedTexture=!0,this.image={width:n,height:s},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class v8 extends tp{constructor(e,n,s,r,a,o){super(e,n,s,a,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=vs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class w8 extends tp{constructor(e,n,s){super(void 0,e[0].width,e[0].height,n,s,Ed),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class M8 extends ke{constructor(e=[],n=Ed,s,r,a,o,h,c,l,u){super(e,n,s,r,a,o,h,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class b8 extends ke{constructor(e=null,n=1,s=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:s,depth:r},this.magFilter=Kn,this.minFilter=Kn,this.wrapR=vs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _8 extends ke{constructor(e=null,n=1,s=1,r,a,o,h,c,l=Kn,u=Kn,f,d){super(null,o,h,c,l,u,r,a,f,d),this.isDataTexture=!0,this.image={data:e,width:n,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class S8 extends ke{constructor(e,n,s=Pd,r,a,o,h=Kn,c=Kn,l,u=Od,f=1){if(u!==Od&&u!==sM)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const d={width:e,height:n,depth:f};super(d,r,a,o,h,c,u,s,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new su(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class T8 extends ke{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Kn,this.minFilter=Kn,this.generateMipmaps=!1,this.needsUpdate=!0}}class jb extends ke{constructor(e,n,s,r,a=_a,o=_a,h,c,l){super(e,n,s,r,a,o,h,c,l),this.isVideoTexture=!0,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class E8 extends jb{constructor(e,n,s,r,a,o,h,c){super({},e,n,s,r,a,o,h,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}const z8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:H6,AddEquation:d6,AddOperation:G6,AdditiveAnimationBlendMode:kd,AdditiveBlending:c6,AgXToneMapping:Z6,AlphaFormat:nM,AlwaysCompare:WN,AlwaysDepth:k6,AlwaysStencilFunc:NN,AnimationAction:WM,AnimationClip:Gd,AnimationMixer:NB,AnimationObjectGroup:BB,AnimationUtils:SB,ArcCurve:Cb,ArrayCamera:ZB,AttachedBindMode:Q6,Audio:ob,AudioAnalyser:WB,AudioContext:hb,AudioListener:jB,BackSide:r6,BasicDepthPacking:xN,BasicShadowMap:t6,BooleanKeyframeTrack:vr,Box2:c8,Box3:Aa,BoxGeometry:S1,BufferAttribute:tn,BufferGeometry:Me,ByteType:Hw,Camera:Jd,CanvasTexture:m8,CapsuleGeometry:T1,CatmullRomCurve3:Ab,CineonToneMapping:j6,CircleGeometry:E1,ClampToEdgeWrapping:vs,Clock:cb,Color:Na,ColorKeyframeTrack:Vd,ColorManagement:qn,CompressedArrayTexture:v8,CompressedCubeTexture:w8,CompressedTexture:tp,ConeGeometry:z1,ConstantAlphaFactor:I6,ConstantColorFactor:A6,Controls:SD,CubeCamera:JB,CubeReflectionMapping:Ed,CubeRefractionMapping:tN,CubeTexture:M8,CubeUVReflectionMapping:iN,CubicBezierCurve:y1,CubicBezierCurve3:Ib,CubicInterpolant:XM,CullFaceBack:JF,CullFaceFront:QF,CullFaceFrontBack:KF,CullFaceNone:ZF,Curve:ii,CurvePath:Ob,CustomBlending:f6,CustomToneMapping:X6,CylinderGeometry:fu,Cylindrical:l8,Data3DTexture:zb,DataArrayTexture:b8,DataTexture:_8,DataUtils:eD,DecrementStencilOp:EN,DecrementWrapStencilOp:CN,DepthFormat:Od,DepthStencilFormat:sM,DepthTexture:S8,DetachedBindMode:K6,DiscreteInterpolant:ZM,DodecahedronGeometry:C1,DoubleSide:a6,DstAlphaFactor:S6,DstColorFactor:E6,DynamicCopyUsage:QN,DynamicDrawUsage:YN,DynamicReadUsage:XN,EdgesGeometry:s8,EllipseCurve:ru,EqualCompare:qN,EqualDepth:N6,EqualStencilFunc:RN,EquirectangularReflectionMapping:eN,EquirectangularRefractionMapping:nN,Euler:Mr,EventDispatcher:ws,ExtrudeGeometry:N1,Float16BufferAttribute:hD,Float32BufferAttribute:St,FloatType:Id,Fog:Q1,FogExp2:K1,FramebufferTexture:T8,FrontSide:s6,Frustum:Wb,FrustumArray:Z1,GLBufferAttribute:dD,GLSL1:tB,GLSL3:eB,GreaterCompare:VN,GreaterDepth:D6,GreaterEqualCompare:UN,GreaterEqualDepth:B6,GreaterEqualStencilFunc:FN,GreaterStencilFunc:kN,HalfFloatType:Qw,IcosahedronGeometry:B1,ImageUtils:Tb,IncrementStencilOp:TN,IncrementWrapStencilOp:zN,InstancedBufferAttribute:pD,InstancedBufferGeometry:yD,InstancedInterleavedBuffer:xD,Int16BufferAttribute:aD,Int32BufferAttribute:oD,Int8BufferAttribute:iD,IntType:Jw,InterleavedBuffer:vb,InterleavedBufferAttribute:i1,Interpolant:vh,InterpolateDiscrete:ph,InterpolateLinear:Ul,InterpolateSmooth:Wl,InterpolationSamplingMode:sB,InterpolationSamplingType:iB,InvertStencilOp:AN,KeepStencilOp:_N,KeyframeTrack:Bn,LatheGeometry:D1,Layers:jd,LessCompare:DN,LessDepth:L6,LessEqualCompare:$N,LessEqualDepth:F6,LessEqualStencilFunc:ON,LessStencilFunc:IN,Line3:p8,LineCurve:x1,LineCurve3:Rb,LinearFilter:_a,LinearInterpolant:$d,LinearMipMapLinearFilter:lN,LinearMipMapNearestFilter:cN,LinearMipmapLinearFilter:jw,LinearMipmapNearestFilter:hN,LinearSRGBColorSpace:Fd,LinearToneMapping:W6,LinearTransfer:Nd,LoopOnce:VM,LoopPingPong:UM,LoopRepeat:GM,MOUSE:HF,MathUtils:MB,Matrix2:J1,Matrix3:bi,Matrix4:ve,MaxEquation:g6,MinEquation:x6,MirroredRepeatWrapping:Cd,MixOperation:V6,MultiplyBlending:u6,MultiplyOperation:$6,NearestFilter:Kn,NearestMipMapLinearFilter:oN,NearestMipMapNearestFilter:rN,NearestMipmapLinearFilter:aN,NearestMipmapNearestFilter:sN,NeutralToneMapping:J6,NeverCompare:BN,NeverDepth:O6,NeverStencilFunc:PN,NoBlending:o6,NoColorSpace:Ld,NoToneMapping:U6,NormalAnimationBlendMode:Yl,NormalBlending:h6,NotEqualCompare:GN,NotEqualDepth:q6,NotEqualStencilFunc:LN,NumberKeyframeTrack:wh,Object3D:fn,ObjectSpaceNormalMap:MN,OctahedronGeometry:q1,OneFactor:v6,OneMinusConstantAlphaFactor:R6,OneMinusConstantColorFactor:P6,OneMinusDstAlphaFactor:T6,OneMinusDstColorFactor:z6,OneMinusSrcAlphaFactor:_6,OneMinusSrcColorFactor:M6,OrthographicCamera:QB,PCFShadowMap:e6,PCFSoftShadowMap:n6,Path:hu,PerspectiveCamera:_i,Plane:Rr,PlaneGeometry:$1,PolyhedronGeometry:Ir,PositionalAudio:XB,PropertyBinding:Bt,PropertyMixer:QM,QuadraticBezierCurve:g1,QuadraticBezierCurve3:m1,Quaternion:un,QuaternionKeyframeTrack:Mh,QuaternionLinearInterpolant:JM,RED_GREEN_RGTC2_Format:qM,RED_RGTC1_Format:BM,REVISION:jF,RGBADepthPacking:gN,RGBAFormat:Rd,RGBAIntegerFormat:cM,RGBA_ASTC_10x10_Format:RM,RGBA_ASTC_10x5_Format:AM,RGBA_ASTC_10x6_Format:PM,RGBA_ASTC_10x8_Format:IM,RGBA_ASTC_12x10_Format:OM,RGBA_ASTC_12x12_Format:kM,RGBA_ASTC_4x4_Format:MM,RGBA_ASTC_5x4_Format:bM,RGBA_ASTC_5x5_Format:_M,RGBA_ASTC_6x5_Format:SM,RGBA_ASTC_6x6_Format:TM,RGBA_ASTC_8x5_Format:EM,RGBA_ASTC_8x6_Format:zM,RGBA_ASTC_8x8_Format:CM,RGBA_BPTC_Format:LM,RGBA_ETC2_EAC_Format:wM,RGBA_PVRTC_2BPPV1_Format:gM,RGBA_PVRTC_4BPPV1_Format:xM,RGBA_S3TC_DXT1_Format:uM,RGBA_S3TC_DXT3_Format:fM,RGBA_S3TC_DXT5_Format:dM,RGBDepthPacking:mN,RGBFormat:iM,RGBIntegerFormat:fN,RGB_BPTC_SIGNED_Format:FM,RGB_BPTC_UNSIGNED_Format:NM,RGB_ETC1_Format:mM,RGB_ETC2_Format:vM,RGB_PVRTC_2BPPV1_Format:yM,RGB_PVRTC_4BPPV1_Format:pM,RGB_S3TC_DXT1_Format:lM,RGDepthPacking:vN,RGFormat:oM,RGIntegerFormat:hM,Ray:wb,Raycaster:gD,RedFormat:rM,RedIntegerFormat:aM,ReinhardToneMapping:Y6,RenderTarget:Eb,RenderTarget3D:MD,RepeatWrapping:zd,ReplaceStencilOp:SN,ReverseSubtractEquation:y6,RingGeometry:V1,SIGNED_RED_GREEN_RGTC2_Format:$M,SIGNED_RED_RGTC1_Format:DM,SRGBColorSpace:Nn,SRGBTransfer:jl,Scene:g8,Shape:Fa,ShapeGeometry:G1,ShapePath:JD,ShapeUtils:si,ShortType:Xw,Source:su,Sphere:t1,SphereGeometry:U1,Spherical:y8,SphericalHarmonics3:x8,SplineCurve:v1,SrcAlphaFactor:b6,SrcAlphaSaturateFactor:C6,SrcColorFactor:w6,StaticCopyUsage:JN,StaticDrawUsage:xh,StaticReadUsage:HN,StereoCamera:KB,StreamCopyUsage:KN,StreamDrawUsage:jN,StreamReadUsage:ZN,StringKeyframeTrack:wr,SubtractEquation:p6,SubtractiveBlending:l6,TOUCH:XF,TangentSpaceNormalMap:wN,TetrahedronGeometry:W1,Texture:ke,TextureUtils:i8,TimestampQuery:nB,TorusGeometry:Y1,TorusKnotGeometry:j1,Triangle:Cs,TriangleFanDrawMode:yN,TriangleStripDrawMode:pN,TrianglesDrawMode:dN,TubeGeometry:H1,UVMapping:Td,Uint16BufferAttribute:yb,Uint32BufferAttribute:xb,Uint8BufferAttribute:sD,Uint8ClampedBufferAttribute:rD,Uniform:l1,UniformsGroup:_D,UnsignedByteType:Ad,UnsignedInt248Type:uN,UnsignedInt5999Type:eM,UnsignedIntType:Pd,UnsignedShort4444Type:Kw,UnsignedShort5551Type:tM,UnsignedShortType:Zw,VSMShadowMap:i6,Vector2:it,Vector3:$,Vector4:Es,VectorKeyframeTrack:bh,VideoFrameTexture:E8,VideoTexture:jb,WebGLCoordinateSystem:Mi,WebGPUCoordinateSystem:gh,WireframeGeometry:h8,WrapAroundEnding:yh,ZeroCurvatureEnding:yr,ZeroFactor:m6,ZeroSlopeEnding:xr,ZeroStencilOp:bN,createCanvasElement:uD,deviation:HD,flatten:XD},Symbol.toStringTag,{value:"Module"})),C8=1e-5;function mu(i,e,n=C8){return Math.abs(i-e)<n}function nn(i,e,n,s){const r=i-n,a=e-s;return Math.sqrt(r*r+a*a)}function vu(i,e){const n=Math.min(...i),s=Math.min(...e),r=Math.max(...i),a=Math.max(...e);return{x:n,y:s,width:r-n,height:a-s}}function Hb(i){return(i+Math.PI*2)%(Math.PI*2)}function Xb(i,e){const n=Math.abs(i);return e>0?n:n*-1}function A8(i,e,n,s,r,a){const o=n,h=s;if(o===0||h===0)return{x:i,y:e};const c=r-i,l=a-e,u=Math.abs(c),f=Math.abs(l),d=o*o,p=h*h;let y=Math.PI/4,x=0,g=0;for(let m=0;m<4;m++){x=o*Math.cos(y),g=h*Math.sin(y);const v=(d-p)*Math.cos(y)**3/o,w=(p-d)*Math.sin(y)**3/h,b=x-v,S=g-w,E=u-v,A=f-w,M=Math.hypot(S,b),_=Math.hypot(A,E),C=M*Math.asin((b*A-S*E)/(M*_))/Math.sqrt(d+p-x*x-g*g);y+=C,y=Math.min(Math.PI/2,Math.max(0,y))}return{x:i+Xb(x,c),y:e+Xb(g,l)}}function P8(i,e,n,s,r,a,o,h){return-1*n*Math.cos(r)*Math.sin(h)-s*Math.sin(r)*Math.cos(h)}function I8(i,e,n,s,r,a,o,h){return-1*n*Math.sin(r)*Math.sin(h)+s*Math.cos(r)*Math.cos(h)}function R8(i,e,n){return Math.atan(-e/i*Math.tan(n))}function O8(i,e,n){return Math.atan(e/(i*Math.tan(n)))}function k8(i,e,n,s,r,a){return n*Math.cos(r)*Math.cos(a)-s*Math.sin(r)*Math.sin(a)+i}function L8(i,e,n,s,r,a){return n*Math.sin(r)*Math.cos(a)+s*Math.cos(r)*Math.sin(a)+e}function F8(i,e,n,s){return(Math.atan2(s*i,n*e)+Math.PI*2)%(Math.PI*2)}function Zb(i,e,n){return{x:i*Math.cos(n),y:e*Math.sin(n)}}function Jb(i,e,n){const s=Math.cos(n),r=Math.sin(n);return[i*s-e*r,i*r+e*s]}function N8(i,e,n,s,r,a,o){const h=R8(n,s,r);let c=1/0,l=-1/0;const u=[a,o];for(let x=-Math.PI*2;x<=Math.PI*2;x+=Math.PI){const g=h+x;a<o?a<g&&g<o&&u.push(g):o<g&&g<a&&u.push(g)}for(let x=0;x<u.length;x++){const g=k8(i,e,n,s,r,u[x]);g<c&&(c=g),g>l&&(l=g)}const f=O8(n,s,r);let d=1/0,p=-1/0;const y=[a,o];for(let x=-Math.PI*2;x<=Math.PI*2;x+=Math.PI){const g=f+x;a<o?a<g&&g<o&&y.push(g):o<g&&g<a&&y.push(g)}for(let x=0;x<y.length;x++){const g=L8(i,e,n,s,r,y[x]);g<d&&(d=g),g>p&&(p=g)}return{x:c,y:d,width:l-c,height:p-d}}function B8(i,e,n,s,r,a,o,h,c){const l=Jb(h-i,c-e,-r),[u,f]=l;let d=A8(0,0,n,s,u,f);const p=F8(n,s,d.x,d.y);p<a?d=Zb(n,s,a):p>o&&(d=Zb(n,s,o));const y=Jb(d.x,d.y,r);return{x:y[0]+i,y:y[1]+e}}function D8(i,e,n,s,r,a,o,h){const c=(o-a)*h+a,l=P8(i,e,n,s,r,a,o,c),u=I8(i,e,n,s,r,a,o,c);return Hb(Math.atan2(u,l))}const q8=1e-4;function Qb(i,e,n,s,r,a){let o=-1,h=1/0;const c=[n,s];let l=20;a&&a>200&&(l=a/10);const u=1/l;let f=u/10;for(let d=0;d<=l;d++){const p=d*u,y=[r(...i.concat([p])),r(...e.concat([p]))],x=nn(c[0],c[1],y[0],y[1]);x<h&&(o=p,h=x)}if(o===0)return{x:i[0],y:e[0]};if(o===1){const d=i.length;return{x:i[d-1],y:e[d-1]}}h=1/0;for(let d=0;d<32&&!(f<q8);d++){const p=o-f,y=o+f,x=[r(...i.concat([p])),r(...e.concat([p]))],g=nn(c[0],c[1],x[0],x[1]);if(p>=0&&g<h)o=p,h=g;else{const m=[r(...i.concat([y])),r(...e.concat([y]))],v=nn(c[0],c[1],m[0],m[1]);y<=1&&v<h?(o=y,h=v):f*=.5}}return{x:r(...i.concat([o])),y:r(...e.concat([o]))}}function $8(i,e){let n=0;const s=i.length;for(let r=0;r<s;r++){const a=i[r],o=e[r],h=i[(r+1)%s],c=e[(r+1)%s];n+=nn(a,o,h,c)}return n/2}function V8(i,e,n,s){return vu([i,n],[e,s])}function G8(i,e,n,s){return nn(i,e,n,s)}function Hi(i,e,n,s,r){return{x:(1-r)*i+r*n,y:(1-r)*e+r*s}}function Kb(i,e,n,s,r,a){const o=(n-i)*(r-i)+(s-e)*(a-e);if(o<0)return nn(i,e,r,a);const h=(n-i)*(n-i)+(s-e)*(s-e);return o>h?nn(n,s,r,a):t_(i,e,n,s,r,a)}function t_(i,e,n,s,r,a){const o=[n-i,s-e];if(tt.exactEquals(o,[0,0]))return Math.sqrt((r-i)*(r-i)+(a-e)*(a-e));const h=[-o[1],o[0]];tt.normalize(h,h);const c=[r-i,a-e];return Math.abs(tt.dot(c,h))}function U8(i,e,n,s){return Math.atan2(s-e,n-i)}function kr(i,e,n,s,r){const a=1-r;return a*a*a*i+3*e*r*a*a+3*n*r*r*a+s*r*r*r}function e_(i,e,n,s,r){const a=1-r;return 3*(a*a*(e-i)+2*a*r*(n-e)+r*r*(s-n))}function n_(i,e,n,s){const r=-3*i+9*e-9*n+3*s,a=6*i-12*e+6*n,o=3*e-3*i,h=[];let c,l,u;if(mu(r,0))mu(a,0)||(c=-o/a,c>=0&&c<=1&&h.push(c));else{const f=a*a-4*r*o;mu(f,0)?h.push(-a/(2*r)):f>0&&(u=Math.sqrt(f),c=(-a+u)/(2*r),l=(-a-u)/(2*r),c>=0&&c<=1&&h.push(c),l>=0&&l<=1&&h.push(l))}return h}function W8(i,e,n,s,r,a,o,h,c){const l=kr(i,n,r,o,c),u=kr(e,s,a,h,c),f=Hi(i,e,n,s,c),d=Hi(n,s,r,a,c),p=Hi(r,a,o,h,c),y=Hi(f.x,f.y,d.x,d.y,c),x=Hi(d.x,d.y,p.x,p.y,c);return[[i,e,f.x,f.y,y.x,y.y,l,u],[l,u,x.x,x.y,p.x,p.y,o,h]]}function ep(i,e,n,s,r,a,o,h,c){if(c===0)return $8([i,n,r,o],[e,s,a,h]);const l=W8(i,e,n,s,r,a,o,h,.5),u=[...l[0],c-1],f=[...l[1],c-1];return ep(...u)+ep(...f)}function Y8(i,e,n,s,r,a,o,h){const c=[i,o],l=[e,h],u=n_(i,n,r,o),f=n_(e,s,a,h);for(let d=0;d<u.length;d++)c.push(kr(i,n,r,o,u[d]));for(let d=0;d<f.length;d++)l.push(kr(e,s,a,h,f[d]));return vu(c,l)}function j8(i,e,n,s,r,a,o,h){return ep(i,e,n,s,r,a,o,h,3)}function i_(i,e,n,s,r,a,o,h,c,l,u){return Qb([i,n,r,o],[e,s,a,h],c,l,kr,u)}function H8(i,e,n,s,r,a,o,h,c,l,u){const f=i_(i,e,n,s,r,a,o,h,c,l,u);return nn(f.x,f.y,c,l)}function X8(i,e,n,s,r,a,o,h,c){return{x:kr(i,n,r,o,c),y:kr(e,s,a,h,c)}}function Z8(i,e,n,s,r,a,o,h,c){const l=e_(i,n,r,o,c),u=e_(e,s,a,h,c);return Hb(Math.atan2(u,l))}function s_(i){let e=0;const n=[];for(let s=0;s<i.length-1;s++){const r=i[s],a=i[s+1],o=nn(r[0],r[1],a[0],a[1]),h={from:r,to:a,length:o};n.push(h),e+=o}return{segments:n,totalLength:e}}function r_(i){if(i.length<2)return 0;let e=0;for(let n=0;n<i.length-1;n++){const s=i[n],r=i[n+1];e+=nn(s[0],s[1],r[0],r[1])}return e}function a_(i,e){if(e>1||e<0||i.length<2)return null;const{segments:n,totalLength:s}=s_(i);if(s===0)return{x:i[0][0],y:i[0][1]};let r=0,a=null;for(let o=0;o<n.length;o++){const h=n[o],{from:c,to:l}=h,u=h.length/s;if(e>=r&&e<=r+u){const f=(e-r)/u;a=Hi(c[0],c[1],l[0],l[1],f);break}r+=u}return a}function o_(i,e){if(e>1||e<0||i.length<2)return 0;const{segments:n,totalLength:s}=s_(i);let r=0,a=0;for(let o=0;o<n.length;o++){const h=n[o],{from:c,to:l}=h,u=h.length/s;if(e>=r&&e<=r+u){a=Math.atan2(l[1]-c[1],l[0]-c[0]);break}r+=u}return a}function h_(i,e,n){let s=1/0;for(let r=0;r<i.length-1;r++){const a=i[r],o=i[r+1],h=Kb(a[0],a[1],o[0],o[1],e,n);h<s&&(s=h)}return s}function c_(i){const e=[],n=[];for(let s=0;s<i.length;s++){const r=i[s];e.push(r[0]),n.push(r[1])}return vu(e,n)}function J8(i){return r_(i)}function Q8(i,e){return a_(i,e)}function K8(i,e,n){return h_(i,e,n)}function t7(i,e){return o_(i,e)}function wu(i){const e=i.slice(0);return i.length&&e.push(i[0]),e}function e7(i){return c_(i)}function n7(i){return r_(wu(i))}function i7(i,e){return a_(wu(i),e)}function s7(i,e,n){return h_(wu(i),e,n)}function r7(i,e){return o_(wu(i),e)}function kh(i,e,n,s){const r=1-s;return r*r*i+2*s*r*e+s*s*n}function l_(i,e,n){const s=i+n-2*e;if(mu(s,0))return[.5];const r=(i-e)/s;return r<=1&&r>=0?[r]:[]}function a7(i,e,n,s,r,a,o){const h=kh(i,n,r,o),c=kh(e,s,a,o),l=Hi(i,e,n,s,o),u=Hi(n,s,r,a,o);return[[i,e,l.x,l.y,h,c],[h,c,u.x,u.y,r,a]]}function np(i,e,n,s,r,a,o){if(o===0)return(nn(i,e,n,s)+nn(n,s,r,a)+nn(i,e,r,a))/2;const h=a7(i,e,n,s,r,a,.5),c=h[0],l=h[1];return c.push(o-1),l.push(o-1),np(...c)+np(...l)}function o7(i,e,n,s,r,a){const o=l_(i,n,r)[0],h=l_(e,s,a)[0],c=[i,r],l=[e,a];return o!==void 0&&c.push(kh(i,n,r,o)),h!==void 0&&l.push(kh(e,s,a,h)),vu(c,l)}function h7(i,e,n,s,r,a){return np(i,e,n,s,r,a,3)}function u_(i,e,n,s,r,a,o,h){return Qb([i,n,r],[e,s,a],o,h,kh)}function c7(i,e,n,s,r,a,o,h){const c=u_(i,e,n,s,r,a,o,h);return nn(c.x,c.y,o,h)}const l7=Object.freeze(Object.defineProperty({__proto__:null,arcBox:N8,arcNearestPoint:B8,arcTangentAngle:D8,cubicBox:Y8,cubicLength:j8,cubicNearestPoint:i_,cubicPointAt:X8,cubicPointDistance:H8,cubicTangentAngle:Z8,distance:nn,lineBox:V8,lineLength:G8,linePointAt:Hi,linePointDistance:Kb,linePointToLine:t_,lineTangentAngle:U8,polygonBox:e7,polygonLength:n7,polygonPointAt:i7,polygonPointDistance:s7,polygonTangentAngle:r7,polylineBox:c_,polylineLength:J8,polylinePointAt:Q8,polylinePointDistance:K8,polylineTangentAngle:t7,quadBox:o7,quadLength:h7,quadNearestPoint:u_,quadPointDistance:c7},Symbol.toStringTag,{value:"Module"}));yn.EventEmitter=Re,yn.gMath=l7,yn.glMatrix=rS,yn.m2d=YF,yn.m3d=z8,Object.defineProperty(yn,Symbol.toStringTag,{value:"Module"})});
